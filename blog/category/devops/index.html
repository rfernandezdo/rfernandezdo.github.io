<!DOCTYPE html><html class="no-js" lang="en"><head>
<meta charset="utf-8">
<meta content="width=device-width,initial-scale=1" name="viewport">
<meta content="A blog about Azure, DevOps and other stuff" name="description">
<meta content="Rafael FernÃ¡ndez" name="author">
<link href="https://rfernandezdo.github.io/blog/category/devops/" rel="canonical">
<link href="../cicd/" rel="prev">
<link href="../development/" rel="next">
<link href="../../../feed_rss_created.xml" rel="alternate" title="RSS feed" type="application/rss+xml">
<link href="../../../feed_rss_updated.xml" rel="alternate" title="RSS feed of updated content" type="application/rss+xml">
<link href="../../../assets/images/favicon.png" rel="icon">
<meta content="mkdocs-1.6.1, mkdocs-material-9.6.22" name="generator">
<title>DevOps - Un Rinconcito donde contar lo que quiera</title>
<link href="../../../assets/stylesheets/main.84d31ad4.min.css" rel="stylesheet">
<link href="../../../assets/stylesheets/palette.06af60db.min.css" rel="stylesheet">
<link crossorigin="" href="https://fonts.gstatic.com" rel="preconnect">
<link href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&amp;display=fallback" rel="stylesheet">
<style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
<script>__md_scope=new URL("../../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
<meta content="website" property="og:type">
<meta content="DevOps - Un Rinconcito donde contar lo que quiera" property="og:title">
<meta content="A blog about Azure, DevOps and other stuff" property="og:description">
<meta content="https://rfernandezdo.github.io/assets/images/social/blog/category/devops.png" property="og:image">
<meta content="image/png" property="og:image:type">
<meta content="1200" property="og:image:width">
<meta content="630" property="og:image:height">
<meta content="https://rfernandezdo.github.io/blog/category/devops/" property="og:url">
<meta content="summary_large_image" name="twitter:card">
<meta content="DevOps - Un Rinconcito donde contar lo que quiera" name="twitter:title">
<meta content="A blog about Azure, DevOps and other stuff" name="twitter:description">
<meta content="https://rfernandezdo.github.io/assets/images/social/blog/category/devops.png" name="twitter:image">
<link href="../../../assets/stylesheets/glightbox.min.css" rel="stylesheet"><script src="../../../assets/javascripts/glightbox.min.js"></script><style id="glightbox-style">
            html.glightbox-open { overflow: initial; height: 100%; }
            .gslide-title { margin-top: 0px; user-select: text; }
            .gslide-desc { color: #666; user-select: text; }
            .gslide-image img { background: white; }
            .gscrollbar-fixer { padding-right: 15px; }
            .gdesc-inner { font-size: 0.75rem; }
            body[data-md-color-scheme="slate"] .gdesc-inner { background: var(--md-default-bg-color); }
            body[data-md-color-scheme="slate"] .gslide-title { color: var(--md-default-fg-color); }
            body[data-md-color-scheme="slate"] .gslide-desc { color: var(--md-default-fg-color); }
        </style></head>
<body data-md-color-accent="blue" data-md-color-primary="blue" data-md-color-scheme="default" dir="ltr">
<input autocomplete="off" class="md-toggle" data-md-toggle="drawer" id="__drawer" type="checkbox">
<input autocomplete="off" class="md-toggle" data-md-toggle="search" id="__search" type="checkbox">
<label class="md-overlay" for="__drawer"></label>
<div data-md-component="skip">
<a class="md-skip" href="#devops">
          Skip to content
        </a>
</div>
<div data-md-component="announce">
</div>
<header class="md-header md-header--shadow md-header--lifted" data-md-component="header">
<nav aria-label="Header" class="md-header__inner md-grid">
<a aria-label="Un Rinconcito donde contar lo que quiera" class="md-header__button md-logo" data-md-component="logo" href="../../.." title="Un Rinconcito donde contar lo que quiera">
<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"></path></svg>
</a>
<label class="md-header__button md-icon" for="__drawer">
<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"></path></svg>
</label>
<div class="md-header__title" data-md-component="header-title">
<div class="md-header__ellipsis">
<div class="md-header__topic">
<span class="md-ellipsis">
            Un Rinconcito donde contar lo que quiera
          </span>
</div>
<div class="md-header__topic" data-md-component="header-topic">
<span class="md-ellipsis">
            
              DevOps
            
          </span>
</div>
</div>
</div>
<form class="md-header__option" data-md-component="palette">
<input aria-label="Switch to dark mode" class="md-option" data-md-color-accent="blue" data-md-color-media="" data-md-color-primary="blue" data-md-color-scheme="default" id="__palette_0" name="__palette" type="radio">
<label class="md-header__button md-icon" for="__palette_1" hidden="" title="Switch to dark mode">
<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"></path></svg>
</label>
<input aria-label="Switch to light mode" class="md-option" data-md-color-accent="blue" data-md-color-media="" data-md-color-primary="black" data-md-color-scheme="slate" id="__palette_1" name="__palette" type="radio">
<label class="md-header__button md-icon" for="__palette_0" hidden="" title="Switch to light mode">
<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12s-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"></path></svg>
</label>
</form>
<script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
<div class="md-header__option">
<div class="md-select">
<button aria-label="Select language" class="md-header__button md-icon">
<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="m12.87 15.07-2.54-2.51.03-.03A17.5 17.5 0 0 0 14.07 6H17V4h-7V2H8v2H1v2h11.17C11.5 7.92 10.44 9.75 9 11.35 8.07 10.32 7.3 9.19 6.69 8h-2c.73 1.63 1.73 3.17 2.98 4.56l-5.09 5.02L4 19l5-5 3.11 3.11zM18.5 10h-2L12 22h2l1.12-3h4.75L21 22h2zm-2.62 7 1.62-4.33L19.12 17z"></path></svg>
</button>
<div class="md-select__inner">
<ul class="md-select__list">
<li class="md-select__item">
<a class="md-select__link" href="https://rfernandezdo-github-io.translate.goog/?_x_tr_sl=auto&amp;_x_tr_tl=es&amp;_x_tr_hl=es&amp;_x_tr_pto=wapp" hreflang="en">
              English
            </a>
</li>
<li class="md-select__item">
<a class="md-select__link" href="https://rfernandezdo-github-io.translate.goog/?_x_tr_sl=auto&amp;_x_tr_tl=en&amp;_x_tr_hl=en&amp;_x_tr_pto=wapp" hreflang="es">
              Spanish
            </a>
</li>
</ul>
</div>
</div>
</div>
<label class="md-header__button md-icon" for="__search">
<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"></path></svg>
</label>
<div class="md-search" data-md-component="search" role="dialog">
<label class="md-search__overlay" for="__search"></label>
<div class="md-search__inner" role="search">
<form class="md-search__form" name="search">
<input aria-label="Search" autocapitalize="off" autocomplete="off" autocorrect="off" class="md-search__input" data-md-component="search-query" name="query" placeholder="Search" required="" spellcheck="false" type="text">
<label class="md-search__icon md-icon" for="__search">
<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"></path></svg>
<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"></path></svg>
</label>
<nav aria-label="Search" class="md-search__options">
<button aria-label="Clear" class="md-search__icon md-icon" tabindex="-1" title="Clear" type="reset">
<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"></path></svg>
</button>
</nav>
</form>
<div class="md-search__output">
<div class="md-search__scrollwrap" data-md-scrollfix="" tabindex="0">
<div class="md-search-result" data-md-component="search-result">
<div class="md-search-result__meta">
            Initializing search
          </div>
<ol class="md-search-result__list" role="presentation"></ol>
</div>
</div>
</div>
</div>
</div>
</nav>
<nav aria-label="Tabs" class="md-tabs" data-md-component="tabs">
<div class="md-grid">
<ul class="md-tabs__list">
<li class="md-tabs__item md-tabs__item--active">
<a class="md-tabs__link" href="../../">
          
  
  
  Blog

        </a>
</li>
<li class="md-tabs__item">
<a class="md-tabs__link" href="../../..">
        
  
  
    
  
  About

      </a>
</li>
<li class="md-tabs__item">
<a class="md-tabs__link" href="../../../contributions/">
        
  
  
    
  
  Contributions

      </a>
</li>
<li class="md-tabs__item">
<a class="md-tabs__link" href="../../../Azure/Security/MCSB/Readme/">
          
  
  
  Azure

        </a>
</li>
<li class="md-tabs__item">
<a class="md-tabs__link" href="../../../Tools/Federated_Identity_Credentials_Report/README-federated-identity-credentials/">
          
  
  
  Tools

        </a>
</li>
</ul>
</div>
</nav>
</header>
<div class="md-container" data-md-component="container">
<main class="md-main" data-md-component="main">
<div class="md-main__inner md-grid">
<div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation">
<div class="md-sidebar__scrollwrap">
<div class="md-sidebar__inner">
<nav aria-label="Navigation" class="md-nav md-nav--primary md-nav--lifted md-nav--integrated" data-md-level="0">
<label class="md-nav__title" for="__drawer">
<a aria-label="Un Rinconcito donde contar lo que quiera" class="md-nav__button md-logo" data-md-component="logo" href="../../.." title="Un Rinconcito donde contar lo que quiera">
<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"></path></svg>
</a>
    Un Rinconcito donde contar lo que quiera
  </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
<input checked="" class="md-nav__toggle md-toggle" id="__nav_1" type="checkbox">
<label class="md-nav__link" for="__nav_1" id="__nav_1_label" tabindex="">
<span class="md-ellipsis">
    Blog
    
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="true" aria-labelledby="__nav_1_label" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_1">
<span class="md-nav__icon md-icon"></span>
            Blog
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../">
<span class="md-ellipsis">
    Blog
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../tags/">
<span class="md-ellipsis">
    Posts by Tags
    
  </span>
</a>
</li>
<li class="md-nav__item md-nav__item--section md-nav__item--nested">
<input class="md-nav__toggle md-toggle md-toggle--indeterminate" id="__nav_1_3" type="checkbox">
<label class="md-nav__link" for="__nav_1_3" id="__nav_1_3_label" tabindex="">
<span class="md-ellipsis">
    Archive
    
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_1_3_label" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_1_3">
<span class="md-nav__icon md-icon"></span>
            Archive
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../2025/10/">
<span class="md-ellipsis">
    2025/10
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../2025/09/">
<span class="md-ellipsis">
    2025/09
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../2025/08/">
<span class="md-ellipsis">
    2025/08
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../2025/07/">
<span class="md-ellipsis">
    2025/07
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../2025/06/">
<span class="md-ellipsis">
    2025/06
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../2025/05/">
<span class="md-ellipsis">
    2025/05
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../2025/04/">
<span class="md-ellipsis">
    2025/04
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../2025/03/">
<span class="md-ellipsis">
    2025/03
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../2025/02/">
<span class="md-ellipsis">
    2025/02
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../2025/01/">
<span class="md-ellipsis">
    2025/01
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../2024/12/">
<span class="md-ellipsis">
    2024/12
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../2024/11/">
<span class="md-ellipsis">
    2024/11
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../2024/10/">
<span class="md-ellipsis">
    2024/10
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../2024/09/">
<span class="md-ellipsis">
    2024/09
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../2024/06/">
<span class="md-ellipsis">
    2024/06
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../2024/05/">
<span class="md-ellipsis">
    2024/05
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../2024/04/">
<span class="md-ellipsis">
    2024/04
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../2024/03/">
<span class="md-ellipsis">
    2024/03
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../2024/02/">
<span class="md-ellipsis">
    2024/02
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../2023/12/">
<span class="md-ellipsis">
    2023/12
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../2023/11/">
<span class="md-ellipsis">
    2023/11
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../2023/10/">
<span class="md-ellipsis">
    2023/10
    
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
<input checked="" class="md-nav__toggle md-toggle" id="__nav_1_4" type="checkbox">
<label class="md-nav__link" for="__nav_1_4" id="__nav_1_4_label" tabindex="">
<span class="md-ellipsis">
    Categories
    
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="true" aria-labelledby="__nav_1_4_label" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_1_4">
<span class="md-nav__icon md-icon"></span>
            Categories
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../azure/">
<span class="md-ellipsis">
    Azure
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../azure-ad/">
<span class="md-ellipsis">
    Azure AD
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../azure-automation/">
<span class="md-ellipsis">
    Azure Automation
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../azure-devops/">
<span class="md-ellipsis">
    Azure DevOps
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../azure-frameworks/">
<span class="md-ellipsis">
    Azure Frameworks
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../azure-governance/">
<span class="md-ellipsis">
    Azure Governance
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../azure-networking/">
<span class="md-ellipsis">
    Azure Networking
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../azure-security/">
<span class="md-ellipsis">
    Azure Security
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../azure-services/">
<span class="md-ellipsis">
    Azure Services
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../azure-updates/">
<span class="md-ellipsis">
    Azure Updates
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../caf/">
<span class="md-ellipsis">
    CAF
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../cicd/">
<span class="md-ellipsis">
    CI/CD
    
  </span>
</a>
</li>
<li class="md-nav__item md-nav__item--active">
<input class="md-nav__toggle md-toggle" id="__toc" type="checkbox">
<a class="md-nav__link md-nav__link--active" href="./">
<span class="md-ellipsis">
    DevOps
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../development/">
<span class="md-ellipsis">
    Development
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../drift-detection/">
<span class="md-ellipsis">
    Drift Detection
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../english/">
<span class="md-ellipsis">
    English
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../enterprise-policy-as-code/">
<span class="md-ellipsis">
    Enterprise Policy as Code
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../finops/">
<span class="md-ellipsis">
    FinOps
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../firewall/">
<span class="md-ellipsis">
    Firewall
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../gtd/">
<span class="md-ellipsis">
    GTD
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../git/">
<span class="md-ellipsis">
    Git
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../github-actions/">
<span class="md-ellipsis">
    GitHub Actions
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../hashicorp/">
<span class="md-ellipsis">
    HashiCorp
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../hello_world/">
<span class="md-ellipsis">
    Hello_World
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../infrastructure-as-code/">
<span class="md-ellipsis">
    Infrastructure as Code
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../learning/">
<span class="md-ellipsis">
    Learning
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../m365/">
<span class="md-ellipsis">
    M365
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../microsoft-365/">
<span class="md-ellipsis">
    Microsoft 365
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../microsoft-entra/">
<span class="md-ellipsis">
    Microsoft Entra
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../microsoft-entra-external-id/">
<span class="md-ellipsis">
    Microsoft Entra External ID
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../microsoft-entra-id/">
<span class="md-ellipsis">
    Microsoft Entra ID
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../networking/">
<span class="md-ellipsis">
    Networking
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../outlook/">
<span class="md-ellipsis">
    Outlook
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../pim/">
<span class="md-ellipsis">
    PIM
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../power-automate/">
<span class="md-ellipsis">
    Power Automate
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../power-bi/">
<span class="md-ellipsis">
    Power BI
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../productividad/">
<span class="md-ellipsis">
    Productividad
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../productividad--microsoft-365/">
<span class="md-ellipsis">
    Productividad / Microsoft 365
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../security/">
<span class="md-ellipsis">
    Security
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../seguridad/">
<span class="md-ellipsis">
    Seguridad
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../snowflake/">
<span class="md-ellipsis">
    Snowflake
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../terraform/">
<span class="md-ellipsis">
    Terraform
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../threat-intelligence/">
<span class="md-ellipsis">
    Threat Intelligence
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../tools/">
<span class="md-ellipsis">
    Tools
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../troubleshooting/">
<span class="md-ellipsis">
    Troubleshooting
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../visual-studio-code/">
<span class="md-ellipsis">
    Visual Studio Code
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../viva-insights/">
<span class="md-ellipsis">
    Viva Insights
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../windows/">
<span class="md-ellipsis">
    Windows
    
  </span>
</a>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../..">
<span class="md-ellipsis">
    About
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../contributions/">
<span class="md-ellipsis">
    Contributions
    
  </span>
</a>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle md-toggle--indeterminate" id="__nav_4" type="checkbox">
<label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
<span class="md-ellipsis">
    Azure
    
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_4_label" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_4">
<span class="md-nav__icon md-icon"></span>
            Azure
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle md-toggle--indeterminate" id="__nav_4_1" type="checkbox">
<label class="md-nav__link" for="__nav_4_1" id="__nav_4_1_label" tabindex="0">
<span class="md-ellipsis">
    Security
    
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_4_1_label" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_4_1">
<span class="md-nav__icon md-icon"></span>
            Security
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle md-toggle--indeterminate" id="__nav_4_1_1" type="checkbox">
<label class="md-nav__link" for="__nav_4_1_1" id="__nav_4_1_1_label" tabindex="0">
<span class="md-ellipsis">
    MCSB
    
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_4_1_1_label" class="md-nav" data-md-level="3">
<label class="md-nav__title" for="__nav_4_1_1">
<span class="md-nav__icon md-icon"></span>
            MCSB
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../../Azure/Security/MCSB/Readme/">
<span class="md-ellipsis">
    MCSB_v1 - Readme
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../Azure/Security/MCSB/Asset%20Management/">
<span class="md-ellipsis">
    MCSB_v1 - Asset Management
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../Azure/Security/MCSB/Backup%20and%20Recovery/">
<span class="md-ellipsis">
    MCSB_v1 - Backup and Recovery
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../Azure/Security/MCSB/Data%20Protection/">
<span class="md-ellipsis">
    MCSB_v1 - Data Protection
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../Azure/Security/MCSB/DevOps%20Security/">
<span class="md-ellipsis">
    MCSB_v1 - DevOps Security
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../Azure/Security/MCSB/Endpoint%20Security/">
<span class="md-ellipsis">
    MCSB_v1 - Endpoint Security
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../Azure/Security/MCSB/Governance%20and%20Strategy/">
<span class="md-ellipsis">
    MCSB_v1 - Governance and Strategy
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../Azure/Security/MCSB/Identity%20Management/">
<span class="md-ellipsis">
    MCSB_v1 - Identity Management
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../Azure/Security/MCSB/Incident%20Response/">
<span class="md-ellipsis">
    MCSB_v1 - Incident Response
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../Azure/Security/MCSB/Logging%20and%20Threat%20Detection/">
<span class="md-ellipsis">
    MCSB_v1 - Logging and Threat Detection
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../Azure/Security/MCSB/Network%20Security/">
<span class="md-ellipsis">
    MCSB_v1 - Network Security
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../Azure/Security/MCSB/Posture%20and%20Vulnerability%20Mgmt/">
<span class="md-ellipsis">
    MCSB_v1 - Posture and Vulnerability Mgmt
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../Azure/Security/MCSB/Privileged%20Access/">
<span class="md-ellipsis">
    MCSB_v1 - Privileged Access
    
  </span>
</a>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle md-toggle--indeterminate" id="__nav_5" type="checkbox">
<label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="0">
<span class="md-ellipsis">
    Tools
    
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_5_label" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_5">
<span class="md-nav__icon md-icon"></span>
            Tools
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle md-toggle--indeterminate" id="__nav_5_1" type="checkbox">
<label class="md-nav__link" for="__nav_5_1" id="__nav_5_1_label" tabindex="0">
<span class="md-ellipsis">
    Federated Identity Credentials Report
    
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_5_1_label" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_5_1">
<span class="md-nav__icon md-icon"></span>
            Federated Identity Credentials Report
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../../Tools/Federated_Identity_Credentials_Report/README-federated-identity-credentials/">
<span class="md-ellipsis">
    Script de Reporte para Federated Identity Credentials
    
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle md-toggle--indeterminate" id="__nav_5_2" type="checkbox">
<label class="md-nav__link" for="__nav_5_2" id="__nav_5_2_label" tabindex="0">
<span class="md-ellipsis">
    Analyze Virtual Network Flows
    
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_5_2_label" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_5_2">
<span class="md-nav__icon md-icon"></span>
            Analyze Virtual Network Flows
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../../Tools/Analyze_Virtual_Network_Flows/">
<span class="md-ellipsis">
    Analyze-VNETFlowLogs
    
  </span>
</a>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</div>
</div>
</div>
<div class="md-content" data-md-component="content">
<div class="md-content__inner">
<header class="md-typeset">
<h1 id="devops">DevOps</h1>
</header>
<article class="md-post md-post--excerpt">
<header class="md-post__header">
<nav class="md-post__authors md-typeset">
<span class="md-author">
<img alt="Rafael FernÃ¡ndez" src="https://avatars.githubusercontent.com/u/39990341">
</span>
</nav>
<div class="md-post__meta md-meta">
<ul class="md-meta__list">
<li class="md-meta__item">
<time datetime="2025-10-30 00:00:00+00:00">October 30, 2025</time></li>
<li class="md-meta__item">
            in
            
              <a class="md-meta__link" href="./">DevOps</a></li>
<li class="md-meta__item">
            
              25 min read
            
          </li>
</ul>
</div>
</header>
<div class="md-post__content md-typeset">
<h2 id="git-workflows-gitflow-vs-github-flow-vs-trunk-based-vs-release-flow"><a class="toclink" href="../../2025/10/30/git-workflows-gitflow-vs-github-flow-vs-trunk-based-vs-release-flow/">Git Workflows: GitFlow vs GitHub Flow vs Trunk-Based vs Release Flow</a></h2>
<h3 id="resumen"><a class="toclink" href="../../2025/10/30/git-workflows-gitflow-vs-github-flow-vs-trunk-based-vs-release-flow/#resumen">Resumen</a></h3>
<p>Existen mÃºltiples <strong>estrategias de branching Git</strong> para gestionar el desarrollo de software: <strong>GitFlow</strong> (modelo complejo con develop/feature/release/hotfix branches para equipos grandes), <strong>GitHub Flow</strong> (minimalista con feature branches + main + deploy before merge), <strong>GitLab Flow</strong> (hÃ­brido con environment branches staging/production para control deployment), <strong>Trunk-Based Development</strong> (commits directos a main con short-lived branches &lt;24h, usado por Google/Facebook), <strong>Release Flow</strong> (trunk-based + release branches sin merge back, usado por Microsoft Azure), <strong>OneFlow</strong> (GitFlow simplificado eliminando develop branch), y <strong>Feature Branch Workflow</strong> (bÃ¡sico con feature branches + pull requests). Cada estrategia se adapta a diferentes tamaÃ±os de equipo, frecuencia de releases, madurez CI/CD y control de environments.</p>
<nav class="md-post__action">
<a href="../../2025/10/30/git-workflows-gitflow-vs-github-flow-vs-trunk-based-vs-release-flow/">
          Continue reading
        </a>
</nav>
</div>
</article>
<article class="md-post md-post--excerpt">
<header class="md-post__header">
<nav class="md-post__authors md-typeset">
<span class="md-author">
<img alt="Rafael FernÃ¡ndez" src="https://avatars.githubusercontent.com/u/39990341">
</span>
</nav>
<div class="md-post__meta md-meta">
<ul class="md-meta__list">
<li class="md-meta__item">
<time datetime="2025-10-23 00:00:00+00:00">October 23, 2025</time></li>
<li class="md-meta__item">
            in
            
              <a class="md-meta__link" href="./">DevOps</a>, 
              <a class="md-meta__link" href="../terraform/">Terraform</a>, 
              <a class="md-meta__link" href="../github-actions/">GitHub Actions</a></li>
<li class="md-meta__item">
            
              3 min read
            
          </li>
</ul>
</div>
</header>
<div class="md-post__content md-typeset">
<h2 id="terraform-uso-de-variables-y-secrets-de-github"><a class="toclink" href="../../2025/10/23/terraform-uso-de-variables-y-secrets-de-github/">Terraform: Uso de Variables y Secrets de GitHub</a></h2>
<h3 id="resumen"><a class="toclink" href="../../2025/10/23/terraform-uso-de-variables-y-secrets-de-github/#resumen">Resumen</a></h3>
<p>CÃ³mo usar variables y secrets de GitHub en despliegues con Terraform para Azure. Ejemplo prÃ¡ctico y buenas prÃ¡cticas para admins y DevOps que quieren CI/CD seguro y reproducible.</p>
<h3 id="que-problema-resuelve"><a class="toclink" href="../../2025/10/23/terraform-uso-de-variables-y-secrets-de-github/#que-problema-resuelve">Â¿QuÃ© problema resuelve?</a></h3>
<p>Permite gestionar credenciales y parÃ¡metros sensibles (como client secrets, IDs, claves) de forma segura en pipelines de GitHub Actions, evitando exponerlos en el cÃ³digo fuente.</p>
<h3 id="que-es-y-como-funciona"><a class="toclink" href="../../2025/10/23/terraform-uso-de-variables-y-secrets-de-github/#que-es-y-como-funciona">Â¿QuÃ© es y cÃ³mo funciona?</a></h3>
<ul>
<li><strong>Secrets</strong>: Valores cifrados almacenados en GitHub (por repo o por entorno). Ej: credenciales Azure, claves API.</li>
<li><strong>Variables de configuraciÃ³n</strong>: Valores no sensibles, Ãºtiles para parÃ¡metros de entorno, nombres, ubicaciones, flags, etc. Se gestionan en Settings â Secrets and variables â Actions â Variables.</li>
<li>Los workflows de GitHub Actions pueden acceder a estos valores como variables de entorno.</li>
<li>Terraform puede consumirlos usando la sintaxis <code>${{ secrets.SECRET_NAME }}</code> para secrets y <code>${{ vars.VAR_NAME }}</code> para variables de configuraciÃ³n en el workflow.</li>
</ul>
<hr>
<h3 id="ejemplo-sencillo-despliegue-de-azure-resource-group-con-variables-y-secrets"><a class="toclink" href="../../2025/10/23/terraform-uso-de-variables-y-secrets-de-github/#ejemplo-sencillo-despliegue-de-azure-resource-group-con-variables-y-secrets">Ejemplo sencillo: despliegue de Azure Resource Group con variables y secrets</a></h3>
<h4 id="1-anadir-secrets-en-github"><a class="toclink" href="../../2025/10/23/terraform-uso-de-variables-y-secrets-de-github/#1-anadir-secrets-en-github">1. AÃ±adir secrets en GitHub</a></h4>
<ul>
<li>Ve a tu repo â Settings â Secrets and variables â Actions</li>
<li>AÃ±ade los secrets:</li>
<li><code>AZURE_CLIENT_ID</code></li>
<li><code>AZURE_TENANT_ID</code></li>
<li><code>AZURE_SUBSCRIPTION_ID</code></li>
</ul>
<h4 id="2-anadir-variables-de-configuracion-no-sensibles"><a class="toclink" href="../../2025/10/23/terraform-uso-de-variables-y-secrets-de-github/#2-anadir-variables-de-configuracion-no-sensibles">2. AÃ±adir variables de configuraciÃ³n (no sensibles)</a></h4>
<ul>
<li>Ejemplo: <code>RG_NAME</code>, <code>LOCATION</code></li>
</ul>
<h4 id="3-workflow-de-github-actions-githubworkflowsterraformyml"><a class="toclink" href="../../2025/10/23/terraform-uso-de-variables-y-secrets-de-github/#3-workflow-de-github-actions-githubworkflowsterraformyml">3. Workflow de GitHub Actions (<code>.github/workflows/terraform.yml</code>)</a></h4>
<div class="language-yaml highlight"><pre><span></span><code><span id="__span-12-1"><a href="#__codelineno-12-1" id="__codelineno-12-1" name="__codelineno-12-1"></a><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="s">'Terraform</span><span class="nv"> </span><span class="s">Azure'</span>
</span><span id="__span-12-2"><a href="#__codelineno-12-2" id="__codelineno-12-2" name="__codelineno-12-2"></a><span class="nt">on</span><span class="p">:</span>
</span><span id="__span-12-3"><a href="#__codelineno-12-3" id="__codelineno-12-3" name="__codelineno-12-3"></a><span class="w">  </span><span class="nt">push</span><span class="p">:</span>
</span><span id="__span-12-4"><a href="#__codelineno-12-4" id="__codelineno-12-4" name="__codelineno-12-4"></a><span class="w">    </span><span class="nt">branches</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="w"> </span><span class="nv">main</span><span class="w"> </span><span class="p p-Indicator">]</span>
</span><span id="__span-12-5"><a href="#__codelineno-12-5" id="__codelineno-12-5" name="__codelineno-12-5"></a>
</span><span id="__span-12-6"><a href="#__codelineno-12-6" id="__codelineno-12-6" name="__codelineno-12-6"></a><span class="nn">---</span>
</span><span id="__span-12-7"><a href="#__codelineno-12-7" id="__codelineno-12-7" name="__codelineno-12-7"></a><span class="w">  </span><span class="nt">deploy</span><span class="p">:</span>
</span><span id="__span-12-8"><a href="#__codelineno-12-8" id="__codelineno-12-8" name="__codelineno-12-8"></a><span class="w">    </span><span class="nt">runs-on</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ubuntu-latest</span>
</span><span id="__span-12-9"><a href="#__codelineno-12-9" id="__codelineno-12-9" name="__codelineno-12-9"></a><span class="w">    </span><span class="nt">env</span><span class="p">:</span>
</span><span id="__span-12-10"><a href="#__codelineno-12-10" id="__codelineno-12-10" name="__codelineno-12-10"></a><span class="w">      </span><span class="c1"># Recomendado: Federated Identity (OIDC) - no uses client secret</span>
</span><span id="__span-12-11"><a href="#__codelineno-12-11" id="__codelineno-12-11" name="__codelineno-12-11"></a><span class="w">      </span><span class="nt">ARM_CLIENT_ID</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">${{ secrets.AZURE_CLIENT_ID }}</span>
</span><span id="__span-12-12"><a href="#__codelineno-12-12" id="__codelineno-12-12" name="__codelineno-12-12"></a><span class="w">      </span><span class="nt">ARM_SUBSCRIPTION_ID</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">${{ secrets.AZURE_SUBSCRIPTION_ID }}</span>
</span><span id="__span-12-13"><a href="#__codelineno-12-13" id="__codelineno-12-13" name="__codelineno-12-13"></a><span class="w">      </span><span class="nt">ARM_TENANT_ID</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">${{ secrets.AZURE_TENANT_ID }}</span>
</span><span id="__span-12-14"><a href="#__codelineno-12-14" id="__codelineno-12-14" name="__codelineno-12-14"></a><span class="w">      </span><span class="nt">TF_VAR_rg_name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">${{ vars.RG_NAME }}</span>
</span><span id="__span-12-15"><a href="#__codelineno-12-15" id="__codelineno-12-15" name="__codelineno-12-15"></a><span class="w">      </span><span class="nt">TF_VAR_location</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">${{ vars.LOCATION }}</span>
</span><span id="__span-12-16"><a href="#__codelineno-12-16" id="__codelineno-12-16" name="__codelineno-12-16"></a><span class="w">    </span><span class="nt">steps</span><span class="p">:</span>
</span><span id="__span-12-17"><a href="#__codelineno-12-17" id="__codelineno-12-17" name="__codelineno-12-17"></a><span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">uses</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">actions/checkout@v4</span>
</span><span id="__span-12-18"><a href="#__codelineno-12-18" id="__codelineno-12-18" name="__codelineno-12-18"></a><span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Setup Terraform</span>
</span><span id="__span-12-19"><a href="#__codelineno-12-19" id="__codelineno-12-19" name="__codelineno-12-19"></a><span class="w">        </span><span class="nt">uses</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">hashicorp/setup-terraform@v3</span>
</span><span id="__span-12-20"><a href="#__codelineno-12-20" id="__codelineno-12-20" name="__codelineno-12-20"></a><span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Terraform Init</span>
</span><span id="__span-12-21"><a href="#__codelineno-12-21" id="__codelineno-12-21" name="__codelineno-12-21"></a><span class="w">        </span><span class="nt">run</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">terraform init</span>
</span><span id="__span-12-22"><a href="#__codelineno-12-22" id="__codelineno-12-22" name="__codelineno-12-22"></a><span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Terraform Plan</span>
</span><span id="__span-12-23"><a href="#__codelineno-12-23" id="__codelineno-12-23" name="__codelineno-12-23"></a><span class="w">        </span><span class="nt">run</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">terraform plan</span>
</span><span id="__span-12-24"><a href="#__codelineno-12-24" id="__codelineno-12-24" name="__codelineno-12-24"></a><span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Terraform Apply</span>
</span><span id="__span-12-25"><a href="#__codelineno-12-25" id="__codelineno-12-25" name="__codelineno-12-25"></a><span class="w">        </span><span class="nt">run</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">terraform apply -auto-approve</span>
</span></code></pre></div>
<p>En este ejemplo, <code>RG_NAME</code> y <code>LOCATION</code> son variables de configuraciÃ³n definidas en GitHub (no secrets) y se pasan automÃ¡ticamente como variables de entrada a Terraform usando el prefijo <code>TF_VAR_</code>.</p>
<h4 id="4-codigo-terraform-maintf"><a class="toclink" href="../../2025/10/23/terraform-uso-de-variables-y-secrets-de-github/#4-codigo-terraform-maintf">4. CÃ³digo Terraform (<code>main.tf</code>)</a></h4>
<div class="language-hcl highlight"><pre><span></span><code><span id="__span-13-1"><a href="#__codelineno-13-1" id="__codelineno-13-1" name="__codelineno-13-1"></a><span class="kr">provider</span><span class="w"> </span><span class="nv">"azurerm"</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-13-2"><a href="#__codelineno-13-2" id="__codelineno-13-2" name="__codelineno-13-2"></a><span class="w">  </span><span class="nb">features</span><span class="w"> </span><span class="p">{}</span>
</span><span id="__span-13-3"><a href="#__codelineno-13-3" id="__codelineno-13-3" name="__codelineno-13-3"></a><span class="p">}</span>
</span><span id="__span-13-4"><a href="#__codelineno-13-4" id="__codelineno-13-4" name="__codelineno-13-4"></a>
</span><span id="__span-13-5"><a href="#__codelineno-13-5" id="__codelineno-13-5" name="__codelineno-13-5"></a><span class="kr">variable</span><span class="w"> </span><span class="nv">"rg_name"</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-13-6"><a href="#__codelineno-13-6" id="__codelineno-13-6" name="__codelineno-13-6"></a><span class="w">  </span><span class="na">description</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"Nombre del resource group"</span>
</span><span id="__span-13-7"><a href="#__codelineno-13-7" id="__codelineno-13-7" name="__codelineno-13-7"></a><span class="w">  </span><span class="na">type</span><span class="w">        </span><span class="o">=</span><span class="w"> </span><span class="kt">string</span>
</span><span id="__span-13-8"><a href="#__codelineno-13-8" id="__codelineno-13-8" name="__codelineno-13-8"></a><span class="p">}</span>
</span><span id="__span-13-9"><a href="#__codelineno-13-9" id="__codelineno-13-9" name="__codelineno-13-9"></a>
</span><span id="__span-13-10"><a href="#__codelineno-13-10" id="__codelineno-13-10" name="__codelineno-13-10"></a><span class="kr">variable</span><span class="w"> </span><span class="nv">"location"</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-13-11"><a href="#__codelineno-13-11" id="__codelineno-13-11" name="__codelineno-13-11"></a><span class="w">  </span><span class="na">description</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"UbicaciÃ³n Azure"</span>
</span><span id="__span-13-12"><a href="#__codelineno-13-12" id="__codelineno-13-12" name="__codelineno-13-12"></a><span class="w">  </span><span class="na">type</span><span class="w">        </span><span class="o">=</span><span class="w"> </span><span class="kt">string</span>
</span><span id="__span-13-13"><a href="#__codelineno-13-13" id="__codelineno-13-13" name="__codelineno-13-13"></a><span class="p">}</span>
</span><span id="__span-13-14"><a href="#__codelineno-13-14" id="__codelineno-13-14" name="__codelineno-13-14"></a>
</span><span id="__span-13-15"><a href="#__codelineno-13-15" id="__codelineno-13-15" name="__codelineno-13-15"></a><span class="kr">resource</span><span class="w"> </span><span class="nc">"azurerm_resource_group"</span><span class="w"> </span><span class="nv">"ejemplo"</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-13-16"><a href="#__codelineno-13-16" id="__codelineno-13-16" name="__codelineno-13-16"></a><span class="w">  </span><span class="na">name</span><span class="w">     </span><span class="o">=</span><span class="w"> </span><span class="nv">var.rg_name</span>
</span><span id="__span-13-17"><a href="#__codelineno-13-17" id="__codelineno-13-17" name="__codelineno-13-17"></a><span class="w">  </span><span class="na">location</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">var.location</span>
</span><span id="__span-13-18"><a href="#__codelineno-13-18" id="__codelineno-13-18" name="__codelineno-13-18"></a><span class="p">}</span>
</span></code></pre></div>
<h3 id="objetos-complejos-y-versiones-recientes-de-terraform"><a class="toclink" href="../../2025/10/23/terraform-uso-de-variables-y-secrets-de-github/#objetos-complejos-y-versiones-recientes-de-terraform">Objetos complejos y versiones recientes de Terraform</a></h3>
<p>Desde Terraform 1.3 en adelante, puedes pasar mapas y listas directamente como variables de entorno usando el prefijo <code>TF_VAR_</code>, sin necesidad de jsonencode/jsondecode. Terraform los interpreta automÃ¡ticamente si el valor es un JSON vÃ¡lido.</p>
<h4 id="ejemplo-directo-terraform-13"><a class="toclink" href="../../2025/10/23/terraform-uso-de-variables-y-secrets-de-github/#ejemplo-directo-terraform-13">Ejemplo directo (Terraform &gt;= 1.3)</a></h4>
<p></p><div class="language-yaml highlight"><pre><span></span><code><span id="__span-14-1"><a href="#__codelineno-14-1" id="__codelineno-14-1" name="__codelineno-14-1"></a><span class="nt">env</span><span class="p">:</span>
</span><span id="__span-14-2"><a href="#__codelineno-14-2" id="__codelineno-14-2" name="__codelineno-14-2"></a><span class="w">  </span><span class="nt">TF_VAR_tags</span><span class="p">:</span><span class="w"> </span><span class="s">'{"env":"prod","owner":"devops"}'</span>
</span></code></pre></div>
<div class="language-hcl highlight"><pre><span></span><code><span id="__span-15-1"><a href="#__codelineno-15-1" id="__codelineno-15-1" name="__codelineno-15-1"></a><span class="kr">variable</span><span class="w"> </span><span class="nv">"tags"</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-15-2"><a href="#__codelineno-15-2" id="__codelineno-15-2" name="__codelineno-15-2"></a><span class="w">  </span><span class="na">type</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">map</span><span class="p">(</span><span class="kt">string</span><span class="p">)</span>
</span><span id="__span-15-3"><a href="#__codelineno-15-3" id="__codelineno-15-3" name="__codelineno-15-3"></a><span class="p">}</span>
</span><span id="__span-15-4"><a href="#__codelineno-15-4" id="__codelineno-15-4" name="__codelineno-15-4"></a>
</span><span id="__span-15-5"><a href="#__codelineno-15-5" id="__codelineno-15-5" name="__codelineno-15-5"></a><span class="kr">resource</span><span class="w"> </span><span class="nc">"azurerm_resource_group"</span><span class="w"> </span><span class="nv">"ejemplo"</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-15-6"><a href="#__codelineno-15-6" id="__codelineno-15-6" name="__codelineno-15-6"></a><span class="w">  </span><span class="na">name</span><span class="w">     </span><span class="o">=</span><span class="w"> </span><span class="nv">var.rg_name</span>
</span><span id="__span-15-7"><a href="#__codelineno-15-7" id="__codelineno-15-7" name="__codelineno-15-7"></a><span class="w">  </span><span class="na">location</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">var.location</span>
</span><span id="__span-15-8"><a href="#__codelineno-15-8" id="__codelineno-15-8" name="__codelineno-15-8"></a><span class="w">  </span><span class="na">tags</span><span class="w">     </span><span class="o">=</span><span class="w"> </span><span class="nv">var.tags</span>
</span><span id="__span-15-9"><a href="#__codelineno-15-9" id="__codelineno-15-9" name="__codelineno-15-9"></a><span class="p">}</span>
</span></code></pre></div>
No necesitas usar <code>jsondecode()</code> si la variable ya es del tipo adecuado y el valor es JSON vÃ¡lido.<p></p>
<h4 id="y-si-necesitas-un-objeto-complejo-y-usas-versiones-antiguas"><a class="toclink" href="../../2025/10/23/terraform-uso-de-variables-y-secrets-de-github/#y-si-necesitas-un-objeto-complejo-y-usas-versiones-antiguas">Â¿Y si necesitas un objeto complejo y usas versiones antiguas?</a></h4>
<p>Si necesitas pasar un objeto complejo (por ejemplo, un mapa o lista de objetos) y tu versiÃ³n de Terraform es anterior a 1.3, lo mÃ¡s habitual es usar un secret o variable en formato JSON y parsearlo en Terraform.</p>
<p></p><div class="language-yaml highlight"><pre><span></span><code><span id="__span-16-1"><a href="#__codelineno-16-1" id="__codelineno-16-1" name="__codelineno-16-1"></a><span class="nt">env</span><span class="p">:</span>
</span><span id="__span-16-2"><a href="#__codelineno-16-2" id="__codelineno-16-2" name="__codelineno-16-2"></a><span class="w">  </span><span class="nt">TF_VAR_tags_json</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">${{ secrets.TAGS_JSON }}</span>
</span></code></pre></div>
<div class="language-hcl highlight"><pre><span></span><code><span id="__span-17-1"><a href="#__codelineno-17-1" id="__codelineno-17-1" name="__codelineno-17-1"></a><span class="kr">variable</span><span class="w"> </span><span class="nv">"tags_json"</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-17-2"><a href="#__codelineno-17-2" id="__codelineno-17-2" name="__codelineno-17-2"></a><span class="w">  </span><span class="na">description</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"Tags en formato JSON"</span>
</span><span id="__span-17-3"><a href="#__codelineno-17-3" id="__codelineno-17-3" name="__codelineno-17-3"></a><span class="w">  </span><span class="na">type</span><span class="w">        </span><span class="o">=</span><span class="w"> </span><span class="kt">string</span>
</span><span id="__span-17-4"><a href="#__codelineno-17-4" id="__codelineno-17-4" name="__codelineno-17-4"></a><span class="p">}</span>
</span><span id="__span-17-5"><a href="#__codelineno-17-5" id="__codelineno-17-5" name="__codelineno-17-5"></a>
</span><span id="__span-17-6"><a href="#__codelineno-17-6" id="__codelineno-17-6" name="__codelineno-17-6"></a><span class="nb">locals</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-17-7"><a href="#__codelineno-17-7" id="__codelineno-17-7" name="__codelineno-17-7"></a><span class="w">  </span><span class="na">tags</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">jsondecode</span><span class="p">(</span><span class="nv">var.tags_json</span><span class="p">)</span>
</span><span id="__span-17-8"><a href="#__codelineno-17-8" id="__codelineno-17-8" name="__codelineno-17-8"></a><span class="p">}</span>
</span><span id="__span-17-9"><a href="#__codelineno-17-9" id="__codelineno-17-9" name="__codelineno-17-9"></a>
</span><span id="__span-17-10"><a href="#__codelineno-17-10" id="__codelineno-17-10" name="__codelineno-17-10"></a><span class="kr">resource</span><span class="w"> </span><span class="nc">"azurerm_resource_group"</span><span class="w"> </span><span class="nv">"ejemplo"</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-17-11"><a href="#__codelineno-17-11" id="__codelineno-17-11" name="__codelineno-17-11"></a><span class="w">  </span><span class="na">name</span><span class="w">     </span><span class="o">=</span><span class="w"> </span><span class="nv">var.rg_name</span>
</span><span id="__span-17-12"><a href="#__codelineno-17-12" id="__codelineno-17-12" name="__codelineno-17-12"></a><span class="w">  </span><span class="na">location</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">var.location</span>
</span><span id="__span-17-13"><a href="#__codelineno-17-13" id="__codelineno-17-13" name="__codelineno-17-13"></a><span class="w">  </span><span class="na">tags</span><span class="w">     </span><span class="o">=</span><span class="w"> </span><span class="nv">local.tags</span>
</span><span id="__span-17-14"><a href="#__codelineno-17-14" id="__codelineno-17-14" name="__codelineno-17-14"></a><span class="p">}</span>
</span></code></pre></div>
AsÃ­ puedes pasar cualquier estructura compleja (mapas, listas, objetos anidados) como string JSON y usar <code>jsondecode()</code> en Terraform para convertirlo a un tipo nativo.
draft: false
date: 2025-10-23
authors:<p></p>
<ul>
<li>
<p>rfernandezdo
categories:</p>
</li>
<li>
<p>DevOps</p>
</li>
<li>Terraform</li>
<li>
<p>GitHub Actions
tags:</p>
</li>
<li>
<p>Terraform</p>
</li>
<li>GitHub Secrets</li>
<li>Azure</li>
</ul>
<hr>
<h3 id="buenas-practicas"><a class="toclink" href="../../2025/10/23/terraform-uso-de-variables-y-secrets-de-github/#buenas-practicas">Buenas prÃ¡cticas</a></h3>
<ul>
<li>Usa federated identity (OIDC) siempre que sea posible, evita client secrets.</li>
<li>Nunca subas secrets al repo ni los hardcodees en el cÃ³digo.</li>
<li>Usa GitHub Environments para separar prod/dev y limitar acceso a secrets.</li>
<li>Usa variables para parÃ¡metros no sensibles (ej: nombres, ubicaciones).</li>
<li>Valida siempre con <code>terraform validate</code> antes de aplicar.</li>
<li>Rota los secrets periÃ³dicamente si usas client secrets legacy.</li>
</ul>
<h3 id="referencias"><a class="toclink" href="../../2025/10/23/terraform-uso-de-variables-y-secrets-de-github/#referencias">Referencias</a></h3>
<ul>
<li><a href="https://docs.github.com/en/actions/security-guides/encrypted-secrets">GitHub Actions: Encrypted secrets</a></li>
<li><a href="https://registry.terraform.io/providers/hashicorp/azurerm/latest/docs/guides/service_principal_client_secret">Terraform Azure Provider Auth</a></li>
<li><a href="https://learn.microsoft.com/en-us/azure/spring-apps/enterprise/quickstart-automate-deployments-github-actions-enterprise#set-up-a-github-repository-and-authenticate">Automate deployments with GitHub Actions &amp; Terraform</a></li>
<li><a href="https://developer.hashicorp.com/terraform/language/style">Best practices Terraform</a></li>
</ul>
</div>
</article>
<article class="md-post md-post--excerpt">
<header class="md-post__header">
<nav class="md-post__authors md-typeset">
<span class="md-author">
<img alt="Rafael FernÃ¡ndez" src="https://avatars.githubusercontent.com/u/39990341">
</span>
</nav>
<div class="md-post__meta md-meta">
<ul class="md-meta__list">
<li class="md-meta__item">
<time datetime="2025-10-21 00:00:00+00:00">October 21, 2025</time></li>
<li class="md-meta__item">
            in
            
              <a class="md-meta__link" href="../git/">Git</a>, 
              <a class="md-meta__link" href="./">DevOps</a>, 
              <a class="md-meta__link" href="../troubleshooting/">Troubleshooting</a></li>
<li class="md-meta__item">
            
              5 min read
            
          </li>
</ul>
</div>
</header>
<div class="md-post__content md-typeset">
<h2 id="como-resolver-divergencias-en-git-sincronizando-ramas-local-y-remota"><a class="toclink" href="../../2025/10/21/c%C3%B3mo-resolver-divergencias-en-git-sincronizando-ramas-local-y-remota/">CÃ³mo Resolver Divergencias en Git: Sincronizando Ramas Local y Remota</a></h2>
<h3 id="el-problema"><a class="toclink" href="../../2025/10/21/c%C3%B3mo-resolver-divergencias-en-git-sincronizando-ramas-local-y-remota/#el-problema">El Problema</a></h3>
<p>Al intentar hacer <code>git pull</code>, te encuentras con el siguiente error:</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-0-1"><a href="#__codelineno-0-1" id="__codelineno-0-1" name="__codelineno-0-1"></a>hint:<span class="w"> </span>You<span class="w"> </span>have<span class="w"> </span>divergent<span class="w"> </span>branches<span class="w"> </span>and<span class="w"> </span>need<span class="w"> </span>to<span class="w"> </span>specify<span class="w"> </span>how<span class="w"> </span>to<span class="w"> </span>reconcile<span class="w"> </span>them.
</span><span id="__span-0-2"><a href="#__codelineno-0-2" id="__codelineno-0-2" name="__codelineno-0-2"></a>hint:<span class="w"> </span>You<span class="w"> </span>can<span class="w"> </span><span class="k">do</span><span class="w"> </span>so<span class="w"> </span>by<span class="w"> </span>running<span class="w"> </span>one<span class="w"> </span>of<span class="w"> </span>the<span class="w"> </span>following<span class="w"> </span>commands<span class="w"> </span>sometime<span class="w"> </span>before
</span><span id="__span-0-3"><a href="#__codelineno-0-3" id="__codelineno-0-3" name="__codelineno-0-3"></a>hint:<span class="w"> </span>your<span class="w"> </span>next<span class="w"> </span>pull:
</span><span id="__span-0-4"><a href="#__codelineno-0-4" id="__codelineno-0-4" name="__codelineno-0-4"></a>hint:
</span><span id="__span-0-5"><a href="#__codelineno-0-5" id="__codelineno-0-5" name="__codelineno-0-5"></a>hint:<span class="w">   </span>git<span class="w"> </span>config<span class="w"> </span>pull.rebase<span class="w"> </span><span class="nb">false</span><span class="w">  </span><span class="c1"># merge</span>
</span><span id="__span-0-6"><a href="#__codelineno-0-6" id="__codelineno-0-6" name="__codelineno-0-6"></a>hint:<span class="w">   </span>git<span class="w"> </span>config<span class="w"> </span>pull.rebase<span class="w"> </span><span class="nb">true</span><span class="w">   </span><span class="c1"># rebase</span>
</span><span id="__span-0-7"><a href="#__codelineno-0-7" id="__codelineno-0-7" name="__codelineno-0-7"></a>hint:<span class="w">   </span>git<span class="w"> </span>config<span class="w"> </span>pull.ff<span class="w"> </span>only<span class="w">       </span><span class="c1"># fast-forward only</span>
</span></code></pre></div>
<p>Este mensaje indica que <strong>tu rama local y la rama remota han divergido</strong>: ambas tienen commits Ãºnicos que la otra no tiene. Git necesita que decidas cÃ³mo combinar estos cambios.</p>
<h3 id="por-que-ocurre"><a class="toclink" href="../../2025/10/21/c%C3%B3mo-resolver-divergencias-en-git-sincronizando-ramas-local-y-remota/#por-que-ocurre">Â¿Por QuÃ© Ocurre?</a></h3>
<p>La divergencia sucede cuando:</p>
<ol>
<li><strong>Trabajas localmente</strong> y realizas commits en tu rama <code>main</code></li>
<li><strong>Mientras tanto, cambios se fusionan en el remoto</strong> (por ejemplo, a travÃ©s de Pull Requests)</li>
<li><strong>Ambas ramas tienen commits exclusivos</strong> que la otra no posee</li>
</ol>
<p>Ejemplo visual:</p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-1-1"><a href="#__codelineno-1-1" id="__codelineno-1-1" name="__codelineno-1-1"></a>Local:   A---B---C---L1
</span><span id="__span-1-2"><a href="#__codelineno-1-2" id="__codelineno-1-2" name="__codelineno-1-2"></a>                      ^(tu commit local)
</span><span id="__span-1-3"><a href="#__codelineno-1-3" id="__codelineno-1-3" name="__codelineno-1-3"></a>Remote:  A---B---C---R1---R2---R3
</span><span id="__span-1-4"><a href="#__codelineno-1-4" id="__codelineno-1-4" name="__codelineno-1-4"></a>                      ^(commits del remoto vÃ­a PR)
</span></code></pre></div>
<h3 id="analisis-identificar-la-divergencia"><a class="toclink" href="../../2025/10/21/c%C3%B3mo-resolver-divergencias-en-git-sincronizando-ramas-local-y-remota/#analisis-identificar-la-divergencia">AnÃ¡lisis: Identificar la Divergencia</a></h3>
<p>Antes de resolver, es crucial entender quÃ© ha divergido.</p>
<h4 id="paso-1-sincronizar-con-el-remoto"><a class="toclink" href="../../2025/10/21/c%C3%B3mo-resolver-divergencias-en-git-sincronizando-ramas-local-y-remota/#paso-1-sincronizar-con-el-remoto">Paso 1: Sincronizar con el Remoto</a></h4>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-2-1"><a href="#__codelineno-2-1" id="__codelineno-2-1" name="__codelineno-2-1"></a>git<span class="w"> </span>fetch<span class="w"> </span>origin<span class="w"> </span>main<span class="w"> </span>--tags
</span></code></pre></div>
<p>Este comando descarga los cambios del remoto sin fusionarlos.</p>
<h4 id="paso-2-comparar-commits"><a class="toclink" href="../../2025/10/21/c%C3%B3mo-resolver-divergencias-en-git-sincronizando-ramas-local-y-remota/#paso-2-comparar-commits">Paso 2: Comparar Commits</a></h4>
<p>Verifica quÃ© commits estÃ¡n Ãºnicamente en cada lado:</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-3-1"><a href="#__codelineno-3-1" id="__codelineno-3-1" name="__codelineno-3-1"></a><span class="c1"># Commits que tienes localmente pero no estÃ¡n en el remoto</span>
</span><span id="__span-3-2"><a href="#__codelineno-3-2" id="__codelineno-3-2" name="__codelineno-3-2"></a>git<span class="w"> </span>log<span class="w"> </span>origin/main..main<span class="w"> </span>--oneline
</span><span id="__span-3-3"><a href="#__codelineno-3-3" id="__codelineno-3-3" name="__codelineno-3-3"></a>
</span><span id="__span-3-4"><a href="#__codelineno-3-4" id="__codelineno-3-4" name="__codelineno-3-4"></a><span class="c1"># Commits que estÃ¡n en el remoto pero no tienes localmente</span>
</span><span id="__span-3-5"><a href="#__codelineno-3-5" id="__codelineno-3-5" name="__codelineno-3-5"></a>git<span class="w"> </span>log<span class="w"> </span>main..origin/main<span class="w"> </span>--oneline
</span></code></pre></div>
<h4 id="paso-3-revisar-los-heads"><a class="toclink" href="../../2025/10/21/c%C3%B3mo-resolver-divergencias-en-git-sincronizando-ramas-local-y-remota/#paso-3-revisar-los-heads">Paso 3: Revisar los HEADs</a></h4>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-4-1"><a href="#__codelineno-4-1" id="__codelineno-4-1" name="__codelineno-4-1"></a><span class="c1"># Ver el commit actual local</span>
</span><span id="__span-4-2"><a href="#__codelineno-4-2" id="__codelineno-4-2" name="__codelineno-4-2"></a>git<span class="w"> </span>rev-parse<span class="w"> </span>HEAD
</span><span id="__span-4-3"><a href="#__codelineno-4-3" id="__codelineno-4-3" name="__codelineno-4-3"></a>
</span><span id="__span-4-4"><a href="#__codelineno-4-4" id="__codelineno-4-4" name="__codelineno-4-4"></a><span class="c1"># Ver el commit actual remoto</span>
</span><span id="__span-4-5"><a href="#__codelineno-4-5" id="__codelineno-4-5" name="__codelineno-4-5"></a>git<span class="w"> </span>rev-parse<span class="w"> </span>origin/main
</span></code></pre></div>
<h4 id="ejemplo-real"><a class="toclink" href="../../2025/10/21/c%C3%B3mo-resolver-divergencias-en-git-sincronizando-ramas-local-y-remota/#ejemplo-real">Ejemplo Real</a></h4>
<p>En nuestro caso, obtuvimos:</p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-5-1"><a href="#__codelineno-5-1" id="__codelineno-5-1" name="__codelineno-5-1"></a>--- Commits en local, no en remoto ---
</span><span id="__span-5-2"><a href="#__codelineno-5-2" id="__codelineno-5-2" name="__codelineno-5-2"></a>81e3b93 feat: add new feature for data processing
</span><span id="__span-5-3"><a href="#__codelineno-5-3" id="__codelineno-5-3" name="__codelineno-5-3"></a>
</span><span id="__span-5-4"><a href="#__codelineno-5-4" id="__codelineno-5-4" name="__codelineno-5-4"></a>--- Commits en remoto, no en local ---
</span><span id="__span-5-5"><a href="#__codelineno-5-5" id="__codelineno-5-5" name="__codelineno-5-5"></a>9d3e3e9 Merge pull request #42 from team/feature/update-docs
</span><span id="__span-5-6"><a href="#__codelineno-5-6" id="__codelineno-5-6" name="__codelineno-5-6"></a>285a538 Complete documentation review - all documents validated
</span><span id="__span-5-7"><a href="#__codelineno-5-7" id="__codelineno-5-7" name="__codelineno-5-7"></a>000b9cb Fix configuration and add new parameters
</span><span id="__span-5-8"><a href="#__codelineno-5-8" id="__codelineno-5-8" name="__codelineno-5-8"></a>a7694d3 Initial implementation plan
</span></code></pre></div>
<p><strong>InterpretaciÃ³n</strong>: El remoto tiene un PR fusionado con 4 commits que no tenemos localmente, y nosotros tenemos 1 commit local que el remoto no tiene.</p>
<h3 id="estrategias-de-resolucion"><a class="toclink" href="../../2025/10/21/c%C3%B3mo-resolver-divergencias-en-git-sincronizando-ramas-local-y-remota/#estrategias-de-resolucion">Estrategias de ResoluciÃ³n</a></h3>
<p>Existen tres estrategias principales:</p>
<h4 id="1-merge-recomendado-para-trabajo-colaborativo"><a class="toclink" href="../../2025/10/21/c%C3%B3mo-resolver-divergencias-en-git-sincronizando-ramas-local-y-remota/#1-merge-recomendado-para-trabajo-colaborativo">1. Merge (Recomendado para Trabajo Colaborativo)</a></h4>
<p><strong>CuÃ¡ndo usarlo</strong>: Cuando trabajas con un equipo y quieres preservar toda la historia, incluyendo los merge commits de PRs.</p>
<p><strong>Ventajas</strong>:</p>
<ul>
<li>â Preserva la historia completa (incluidos merge commits)</li>
<li>â Muestra claramente cuÃ¡ndo se integraron features</li>
<li>â MÃ¡s seguro: no reescribe historia</li>
</ul>
<p><strong>Desventajas</strong>:</p>
<ul>
<li>â ï¸ Crea un commit de merge adicional</li>
<li>â ï¸ Historia no completamente lineal</li>
</ul>
<p><strong>Comando</strong>:</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-6-1"><a href="#__codelineno-6-1" id="__codelineno-6-1" name="__codelineno-6-1"></a>git<span class="w"> </span>merge<span class="w"> </span>origin/main<span class="w"> </span>--no-edit
</span></code></pre></div>
<p>Si prefieres revisar/editar el mensaje de merge:</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-7-1"><a href="#__codelineno-7-1" id="__codelineno-7-1" name="__codelineno-7-1"></a>git<span class="w"> </span>merge<span class="w"> </span>origin/main
</span></code></pre></div>
<h4 id="2-rebase-para-historia-lineal"><a class="toclink" href="../../2025/10/21/c%C3%B3mo-resolver-divergencias-en-git-sincronizando-ramas-local-y-remota/#2-rebase-para-historia-lineal">2. Rebase (Para Historia Lineal)</a></h4>
<p><strong>CuÃ¡ndo usarlo</strong>: Cuando trabajas solo o en una feature branch que aÃºn no has compartido pÃºblicamente.</p>
<p><strong>Ventajas</strong>:</p>
<ul>
<li>â Historia completamente lineal</li>
<li>â MÃ¡s limpia para revisar con <code>git log</code></li>
</ul>
<p><strong>Desventajas</strong>:</p>
<ul>
<li>â ï¸ Reescribe commits locales (cambian sus SHAs)</li>
<li>â ï¸ Puede causar problemas si ya compartiste estos commits</li>
<li>â ï¸ Pierdes el contexto de cuÃ¡ndo se integrÃ³ el PR remoto</li>
</ul>
<p><strong>Comando</strong>:</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-8-1"><a href="#__codelineno-8-1" id="__codelineno-8-1" name="__codelineno-8-1"></a>git<span class="w"> </span>rebase<span class="w"> </span>origin/main
</span></code></pre></div>
<h4 id="3-fast-forward-only-restrictivo"><a class="toclink" href="../../2025/10/21/c%C3%B3mo-resolver-divergencias-en-git-sincronizando-ramas-local-y-remota/#3-fast-forward-only-restrictivo">3. Fast-Forward Only (Restrictivo)</a></h4>
<p><strong>CuÃ¡ndo usarlo</strong>: Cuando quieres asegurarte de que solo hagas <code>pull</code> si no hay divergencia.</p>
<p><strong>Comando</strong>:</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-9-1"><a href="#__codelineno-9-1" id="__codelineno-9-1" name="__codelineno-9-1"></a>git<span class="w"> </span>config<span class="w"> </span>pull.ff<span class="w"> </span>only
</span><span id="__span-9-2"><a href="#__codelineno-9-2" id="__codelineno-9-2" name="__codelineno-9-2"></a>git<span class="w"> </span>pull
</span></code></pre></div>
<p>Si hay divergencia, fallarÃ¡ y tendrÃ¡s que decidir merge o rebase manualmente.</p>
<h3 id="solucion-paso-a-paso-merge"><a class="toclink" href="../../2025/10/21/c%C3%B3mo-resolver-divergencias-en-git-sincronizando-ramas-local-y-remota/#solucion-paso-a-paso-merge">SoluciÃ³n Paso a Paso (Merge)</a></h3>
<h4 id="1-analizar-la-situacion"><a class="toclink" href="../../2025/10/21/c%C3%B3mo-resolver-divergencias-en-git-sincronizando-ramas-local-y-remota/#1-analizar-la-situacion">1. Analizar la SituaciÃ³n</a></h4>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-10-1"><a href="#__codelineno-10-1" id="__codelineno-10-1" name="__codelineno-10-1"></a><span class="c1"># Sincronizar con remoto</span>
</span><span id="__span-10-2"><a href="#__codelineno-10-2" id="__codelineno-10-2" name="__codelineno-10-2"></a>git<span class="w"> </span>fetch<span class="w"> </span>origin<span class="w"> </span>main<span class="w"> </span>--tags
</span><span id="__span-10-3"><a href="#__codelineno-10-3" id="__codelineno-10-3" name="__codelineno-10-3"></a>
</span><span id="__span-10-4"><a href="#__codelineno-10-4" id="__codelineno-10-4" name="__codelineno-10-4"></a><span class="c1"># Ver divergencias</span>
</span><span id="__span-10-5"><a href="#__codelineno-10-5" id="__codelineno-10-5" name="__codelineno-10-5"></a><span class="nb">echo</span><span class="w"> </span><span class="s2">"--- Commits locales Ãºnicos ---"</span>
</span><span id="__span-10-6"><a href="#__codelineno-10-6" id="__codelineno-10-6" name="__codelineno-10-6"></a>git<span class="w"> </span>log<span class="w"> </span>origin/main..main<span class="w"> </span>--oneline
</span><span id="__span-10-7"><a href="#__codelineno-10-7" id="__codelineno-10-7" name="__codelineno-10-7"></a>
</span><span id="__span-10-8"><a href="#__codelineno-10-8" id="__codelineno-10-8" name="__codelineno-10-8"></a><span class="nb">echo</span><span class="w"> </span><span class="s2">"--- Commits remotos Ãºnicos ---"</span>
</span><span id="__span-10-9"><a href="#__codelineno-10-9" id="__codelineno-10-9" name="__codelineno-10-9"></a>git<span class="w"> </span>log<span class="w"> </span>main..origin/main<span class="w"> </span>--oneline
</span></code></pre></div>
<h4 id="2-decidir-estrategia"><a class="toclink" href="../../2025/10/21/c%C3%B3mo-resolver-divergencias-en-git-sincronizando-ramas-local-y-remota/#2-decidir-estrategia">2. Decidir Estrategia</a></h4>
<p>Para equipos colaborativos con PRs, <strong>merge</strong> es la opciÃ³n mÃ¡s segura:</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-11-1"><a href="#__codelineno-11-1" id="__codelineno-11-1" name="__codelineno-11-1"></a>git<span class="w"> </span>merge<span class="w"> </span>origin/main<span class="w"> </span>--no-edit
</span></code></pre></div>
<h4 id="3-resolver-conflictos-si-ocurren"><a class="toclink" href="../../2025/10/21/c%C3%B3mo-resolver-divergencias-en-git-sincronizando-ramas-local-y-remota/#3-resolver-conflictos-si-ocurren">3. Resolver Conflictos (Si Ocurren)</a></h4>
<p>Si hay conflictos, Git te lo indicarÃ¡:</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-12-1"><a href="#__codelineno-12-1" id="__codelineno-12-1" name="__codelineno-12-1"></a>Auto-merging<span class="w"> </span>some-file.md
</span><span id="__span-12-2"><a href="#__codelineno-12-2" id="__codelineno-12-2" name="__codelineno-12-2"></a>CONFLICT<span class="w"> </span><span class="o">(</span>content<span class="o">)</span>:<span class="w"> </span>Merge<span class="w"> </span>conflict<span class="w"> </span><span class="k">in</span><span class="w"> </span>some-file.md
</span><span id="__span-12-3"><a href="#__codelineno-12-3" id="__codelineno-12-3" name="__codelineno-12-3"></a>Automatic<span class="w"> </span>merge<span class="w"> </span>failed<span class="p">;</span><span class="w"> </span>fix<span class="w"> </span>conflicts<span class="w"> </span>and<span class="w"> </span><span class="k">then</span><span class="w"> </span>commit<span class="w"> </span>the<span class="w"> </span>result.
</span></code></pre></div>
<p><strong>Pasos para resolver</strong>:</p>
<p>a) Abre el archivo con conflictos:</p>
<div class="language-markdown highlight"><pre><span></span><code><span id="__span-13-1"><a href="#__codelineno-13-1" id="__codelineno-13-1" name="__codelineno-13-1"></a>&lt;&lt;&lt;&lt;&lt;&lt;&lt; HEAD
</span><span id="__span-13-2"><a href="#__codelineno-13-2" id="__codelineno-13-2" name="__codelineno-13-2"></a><span class="gh">Tu versiÃ³n local</span>
</span><span id="__span-13-3"><a href="#__codelineno-13-3" id="__codelineno-13-3" name="__codelineno-13-3"></a><span class="gh">=======</span>
</span><span id="__span-13-4"><a href="#__codelineno-13-4" id="__codelineno-13-4" name="__codelineno-13-4"></a>VersiÃ³n del remoto
</span><span id="__span-13-5"><a href="#__codelineno-13-5" id="__codelineno-13-5" name="__codelineno-13-5"></a>&gt;&gt;&gt;&gt;&gt;&gt;&gt; origin/main
</span></code></pre></div>
<p>b) Edita manualmente para quedarte con el contenido correcto</p>
<p>c) Marca como resuelto:</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-14-1"><a href="#__codelineno-14-1" id="__codelineno-14-1" name="__codelineno-14-1"></a>git<span class="w"> </span>add<span class="w"> </span>some-file.md
</span></code></pre></div>
<p>d) Completa el merge:</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-15-1"><a href="#__codelineno-15-1" id="__codelineno-15-1" name="__codelineno-15-1"></a>git<span class="w"> </span>commit<span class="w"> </span>-m<span class="w"> </span><span class="s2">"Merge origin/main into main"</span>
</span></code></pre></div>
<h4 id="4-verificar-el-resultado"><a class="toclink" href="../../2025/10/21/c%C3%B3mo-resolver-divergencias-en-git-sincronizando-ramas-local-y-remota/#4-verificar-el-resultado">4. Verificar el Resultado</a></h4>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-16-1"><a href="#__codelineno-16-1" id="__codelineno-16-1" name="__codelineno-16-1"></a><span class="c1"># Ver el log reciente</span>
</span><span id="__span-16-2"><a href="#__codelineno-16-2" id="__codelineno-16-2" name="__codelineno-16-2"></a>git<span class="w"> </span>log<span class="w"> </span>--oneline<span class="w"> </span>--graph<span class="w"> </span>-10
</span></code></pre></div>
<p>DeberÃ­as ver algo como:</p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-17-1"><a href="#__codelineno-17-1" id="__codelineno-17-1" name="__codelineno-17-1"></a>*   3e1ed57 (HEAD -&gt; main) Merge remote-tracking branch 'origin/main' into main
</span><span id="__span-17-2"><a href="#__codelineno-17-2" id="__codelineno-17-2" name="__codelineno-17-2"></a>|\
</span><span id="__span-17-3"><a href="#__codelineno-17-3" id="__codelineno-17-3" name="__codelineno-17-3"></a>| * 9d3e3e9 (origin/main) Merge pull request #42
</span><span id="__span-17-4"><a href="#__codelineno-17-4" id="__codelineno-17-4" name="__codelineno-17-4"></a>| * 285a538 Complete documentation review
</span><span id="__span-17-5"><a href="#__codelineno-17-5" id="__codelineno-17-5" name="__codelineno-17-5"></a>| * 000b9cb Fix configuration parameters
</span><span id="__span-17-6"><a href="#__codelineno-17-6" id="__codelineno-17-6" name="__codelineno-17-6"></a>| * a7694d3 Initial implementation plan
</span><span id="__span-17-7"><a href="#__codelineno-17-7" id="__codelineno-17-7" name="__codelineno-17-7"></a>* | 81e3b93 feat: add new feature for data processing
</span><span id="__span-17-8"><a href="#__codelineno-17-8" id="__codelineno-17-8" name="__codelineno-17-8"></a>|/
</span><span id="__span-17-9"><a href="#__codelineno-17-9" id="__codelineno-17-9" name="__codelineno-17-9"></a>* d140dce feat: improved monthly workflow
</span></code></pre></div>
<h4 id="5-empujar-los-cambios"><a class="toclink" href="../../2025/10/21/c%C3%B3mo-resolver-divergencias-en-git-sincronizando-ramas-local-y-remota/#5-empujar-los-cambios">5. Empujar los Cambios</a></h4>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-18-1"><a href="#__codelineno-18-1" id="__codelineno-18-1" name="__codelineno-18-1"></a>git<span class="w"> </span>push<span class="w"> </span>origin<span class="w"> </span>main
</span></code></pre></div>
<p>Salida esperada:</p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-19-1"><a href="#__codelineno-19-1" id="__codelineno-19-1" name="__codelineno-19-1"></a>Enumerating objects: 15, done.
</span><span id="__span-19-2"><a href="#__codelineno-19-2" id="__codelineno-19-2" name="__codelineno-19-2"></a>Counting objects: 100% (12/12), done.
</span><span id="__span-19-3"><a href="#__codelineno-19-3" id="__codelineno-19-3" name="__codelineno-19-3"></a>Delta compression using up to 8 threads
</span><span id="__span-19-4"><a href="#__codelineno-19-4" id="__codelineno-19-4" name="__codelineno-19-4"></a>Compressing objects: 100% (7/7), done.
</span><span id="__span-19-5"><a href="#__codelineno-19-5" id="__codelineno-19-5" name="__codelineno-19-5"></a>Writing objects: 100% (7/7), 1.08 KiB | 1.08 MiB/s, done.
</span><span id="__span-19-6"><a href="#__codelineno-19-6" id="__codelineno-19-6" name="__codelineno-19-6"></a>Total 7 (delta 5), reused 0 (delta 0)
</span><span id="__span-19-7"><a href="#__codelineno-19-7" id="__codelineno-19-7" name="__codelineno-19-7"></a>remote: Resolving deltas: 100% (5/5), completed with 4 local objects.
</span><span id="__span-19-8"><a href="#__codelineno-19-8" id="__codelineno-19-8" name="__codelineno-19-8"></a>To https://github.com/tu-usuario/tu-repositorio.git
</span><span id="__span-19-9"><a href="#__codelineno-19-9" id="__codelineno-19-9" name="__codelineno-19-9"></a>   9d3e3e9..3e1ed57  main -&gt; main
</span></code></pre></div>
<h3 id="verificacion-post-merge"><a class="toclink" href="../../2025/10/21/c%C3%B3mo-resolver-divergencias-en-git-sincronizando-ramas-local-y-remota/#verificacion-post-merge">VerificaciÃ³n Post-Merge</a></h3>
<h4 id="comprobar-archivos-criticos"><a class="toclink" href="../../2025/10/21/c%C3%B3mo-resolver-divergencias-en-git-sincronizando-ramas-local-y-remota/#comprobar-archivos-criticos">Comprobar Archivos CrÃ­ticos</a></h4>
<p>Si tienes workflows de CI/CD u otros archivos crÃ­ticos, verifica su integridad:</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-20-1"><a href="#__codelineno-20-1" id="__codelineno-20-1" name="__codelineno-20-1"></a><span class="c1"># Buscar un patrÃ³n especÃ­fico en un archivo</span>
</span><span id="__span-20-2"><a href="#__codelineno-20-2" id="__codelineno-20-2" name="__codelineno-20-2"></a>grep<span class="w"> </span>-n<span class="w"> </span><span class="s2">"specific_pattern"</span><span class="w"> </span>.github/workflows/deploy.yml
</span><span id="__span-20-3"><a href="#__codelineno-20-3" id="__codelineno-20-3" name="__codelineno-20-3"></a>
</span><span id="__span-20-4"><a href="#__codelineno-20-4" id="__codelineno-20-4" name="__codelineno-20-4"></a><span class="c1"># O leer el archivo completo</span>
</span><span id="__span-20-5"><a href="#__codelineno-20-5" id="__codelineno-20-5" name="__codelineno-20-5"></a>cat<span class="w"> </span>.github/workflows/deploy.yml
</span></code></pre></div>
<h4 id="confirmar-sincronizacion"><a class="toclink" href="../../2025/10/21/c%C3%B3mo-resolver-divergencias-en-git-sincronizando-ramas-local-y-remota/#confirmar-sincronizacion">Confirmar SincronizaciÃ³n</a></h4>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-21-1"><a href="#__codelineno-21-1" id="__codelineno-21-1" name="__codelineno-21-1"></a><span class="c1"># Ambos deberÃ­an apuntar al mismo commit ahora</span>
</span><span id="__span-21-2"><a href="#__codelineno-21-2" id="__codelineno-21-2" name="__codelineno-21-2"></a>git<span class="w"> </span>rev-parse<span class="w"> </span>HEAD
</span><span id="__span-21-3"><a href="#__codelineno-21-3" id="__codelineno-21-3" name="__codelineno-21-3"></a>git<span class="w"> </span>rev-parse<span class="w"> </span>origin/main
</span></code></pre></div>
<h3 id="configuracion-permanente"><a class="toclink" href="../../2025/10/21/c%C3%B3mo-resolver-divergencias-en-git-sincronizando-ramas-local-y-remota/#configuracion-permanente">ConfiguraciÃ³n Permanente</a></h3>
<p>Si quieres establecer una estrategia por defecto para futuros <code>git pull</code>:</p>
<h4 id="para-merge-recomendado"><a class="toclink" href="../../2025/10/21/c%C3%B3mo-resolver-divergencias-en-git-sincronizando-ramas-local-y-remota/#para-merge-recomendado">Para Merge (Recomendado)</a></h4>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-22-1"><a href="#__codelineno-22-1" id="__codelineno-22-1" name="__codelineno-22-1"></a>git<span class="w"> </span>config<span class="w"> </span>pull.rebase<span class="w"> </span><span class="nb">false</span>
</span></code></pre></div>
<h4 id="para-rebase"><a class="toclink" href="../../2025/10/21/c%C3%B3mo-resolver-divergencias-en-git-sincronizando-ramas-local-y-remota/#para-rebase">Para Rebase</a></h4>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-23-1"><a href="#__codelineno-23-1" id="__codelineno-23-1" name="__codelineno-23-1"></a>git<span class="w"> </span>config<span class="w"> </span>pull.rebase<span class="w"> </span><span class="nb">true</span>
</span></code></pre></div>
<h4 id="global-todos-tus-repos"><a class="toclink" href="../../2025/10/21/c%C3%B3mo-resolver-divergencias-en-git-sincronizando-ramas-local-y-remota/#global-todos-tus-repos">Global (Todos tus Repos)</a></h4>
<p>AÃ±ade <code>--global</code>:</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-24-1"><a href="#__codelineno-24-1" id="__codelineno-24-1" name="__codelineno-24-1"></a>git<span class="w"> </span>config<span class="w"> </span>--global<span class="w"> </span>pull.rebase<span class="w"> </span><span class="nb">false</span>
</span></code></pre></div>
<h3 id="mejores-practicas"><a class="toclink" href="../../2025/10/21/c%C3%B3mo-resolver-divergencias-en-git-sincronizando-ramas-local-y-remota/#mejores-practicas">Mejores PrÃ¡cticas</a></h3>
<h4 id="hacer-fetch-frecuentemente"><a class="toclink" href="../../2025/10/21/c%C3%B3mo-resolver-divergencias-en-git-sincronizando-ramas-local-y-remota/#hacer-fetch-frecuentemente">â Hacer Fetch Frecuentemente</a></h4>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-25-1"><a href="#__codelineno-25-1" id="__codelineno-25-1" name="__codelineno-25-1"></a><span class="c1"># Ejecutar cada maÃ±ana o antes de empezar a trabajar</span>
</span><span id="__span-25-2"><a href="#__codelineno-25-2" id="__codelineno-25-2" name="__codelineno-25-2"></a>git<span class="w"> </span>fetch<span class="w"> </span>origin
</span></code></pre></div>
<p>Esto te mantiene informado de cambios remotos sin afectar tu trabajo local.</p>
<h4 id="trabajar-en-feature-branches"><a class="toclink" href="../../2025/10/21/c%C3%B3mo-resolver-divergencias-en-git-sincronizando-ramas-local-y-remota/#trabajar-en-feature-branches">â Trabajar en Feature Branches</a></h4>
<p>En lugar de trabajar directamente en <code>main</code>:</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-26-1"><a href="#__codelineno-26-1" id="__codelineno-26-1" name="__codelineno-26-1"></a>git<span class="w"> </span>checkout<span class="w"> </span>-b<span class="w"> </span>feature/my-feature
</span><span id="__span-26-2"><a href="#__codelineno-26-2" id="__codelineno-26-2" name="__codelineno-26-2"></a><span class="c1"># ... hacer commits ...</span>
</span><span id="__span-26-3"><a href="#__codelineno-26-3" id="__codelineno-26-3" name="__codelineno-26-3"></a>git<span class="w"> </span>push<span class="w"> </span>origin<span class="w"> </span>feature/my-feature
</span><span id="__span-26-4"><a href="#__codelineno-26-4" id="__codelineno-26-4" name="__codelineno-26-4"></a><span class="c1"># Abrir PR en GitHub</span>
</span></code></pre></div>
<p>Esto evita divergencias en <code>main</code>.</p>
<h4 id="pull-antes-de-push"><a class="toclink" href="../../2025/10/21/c%C3%B3mo-resolver-divergencias-en-git-sincronizando-ramas-local-y-remota/#pull-antes-de-push">â Pull Antes de Push</a></h4>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-27-1"><a href="#__codelineno-27-1" id="__codelineno-27-1" name="__codelineno-27-1"></a>git<span class="w"> </span>fetch<span class="w"> </span>origin
</span><span id="__span-27-2"><a href="#__codelineno-27-2" id="__codelineno-27-2" name="__codelineno-27-2"></a>git<span class="w"> </span>status
</span><span id="__span-27-3"><a href="#__codelineno-27-3" id="__codelineno-27-3" name="__codelineno-27-3"></a><span class="c1"># Si hay cambios remotos, decide merge o rebase</span>
</span><span id="__span-27-4"><a href="#__codelineno-27-4" id="__codelineno-27-4" name="__codelineno-27-4"></a>git<span class="w"> </span>pull
</span><span id="__span-27-5"><a href="#__codelineno-27-5" id="__codelineno-27-5" name="__codelineno-27-5"></a><span class="c1"># Ahora puedes pushear</span>
</span><span id="__span-27-6"><a href="#__codelineno-27-6" id="__codelineno-27-6" name="__codelineno-27-6"></a>git<span class="w"> </span>push
</span></code></pre></div>
<h4 id="evitar-force-push-en-ramas-compartidas"><a class="toclink" href="../../2025/10/21/c%C3%B3mo-resolver-divergencias-en-git-sincronizando-ramas-local-y-remota/#evitar-force-push-en-ramas-compartidas">â ï¸ Evitar Force Push en Ramas Compartidas</a></h4>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-28-1"><a href="#__codelineno-28-1" id="__codelineno-28-1" name="__codelineno-28-1"></a><span class="c1"># â NUNCA en main compartido</span>
</span><span id="__span-28-2"><a href="#__codelineno-28-2" id="__codelineno-28-2" name="__codelineno-28-2"></a>git<span class="w"> </span>push<span class="w"> </span>--force<span class="w"> </span>origin<span class="w"> </span>main
</span><span id="__span-28-3"><a href="#__codelineno-28-3" id="__codelineno-28-3" name="__codelineno-28-3"></a>
</span><span id="__span-28-4"><a href="#__codelineno-28-4" id="__codelineno-28-4" name="__codelineno-28-4"></a><span class="c1"># â OK solo en tus feature branches</span>
</span><span id="__span-28-5"><a href="#__codelineno-28-5" id="__codelineno-28-5" name="__codelineno-28-5"></a>git<span class="w"> </span>push<span class="w"> </span>--force<span class="w"> </span>origin<span class="w"> </span>feature/my-feature
</span></code></pre></div>
<h3 id="casos-especiales"><a class="toclink" href="../../2025/10/21/c%C3%B3mo-resolver-divergencias-en-git-sincronizando-ramas-local-y-remota/#casos-especiales">Casos Especiales</a></h3>
<h4 id="si-hiciste-rebase-por-error-y-quieres-revertir"><a class="toclink" href="../../2025/10/21/c%C3%B3mo-resolver-divergencias-en-git-sincronizando-ramas-local-y-remota/#si-hiciste-rebase-por-error-y-quieres-revertir">Si Hiciste Rebase por Error y Quieres Revertir</a></h4>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-29-1"><a href="#__codelineno-29-1" id="__codelineno-29-1" name="__codelineno-29-1"></a><span class="c1"># Ver el reflog (historial de cambios de HEAD)</span>
</span><span id="__span-29-2"><a href="#__codelineno-29-2" id="__codelineno-29-2" name="__codelineno-29-2"></a>git<span class="w"> </span>reflog
</span><span id="__span-29-3"><a href="#__codelineno-29-3" id="__codelineno-29-3" name="__codelineno-29-3"></a>
</span><span id="__span-29-4"><a href="#__codelineno-29-4" id="__codelineno-29-4" name="__codelineno-29-4"></a><span class="c1"># Volver a un estado anterior</span>
</span><span id="__span-29-5"><a href="#__codelineno-29-5" id="__codelineno-29-5" name="__codelineno-29-5"></a>git<span class="w"> </span>reset<span class="w"> </span>--hard<span class="w"> </span>HEAD@<span class="o">{</span><span class="m">2</span><span class="o">}</span>
</span></code></pre></div>
<h4 id="si-quieres-descartar-tus-commits-locales"><a class="toclink" href="../../2025/10/21/c%C3%B3mo-resolver-divergencias-en-git-sincronizando-ramas-local-y-remota/#si-quieres-descartar-tus-commits-locales">Si Quieres Descartar Tus Commits Locales</a></h4>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-30-1"><a href="#__codelineno-30-1" id="__codelineno-30-1" name="__codelineno-30-1"></a><span class="c1"># â ï¸ CUIDADO: Esto descarta tus commits locales permanentemente</span>
</span><span id="__span-30-2"><a href="#__codelineno-30-2" id="__codelineno-30-2" name="__codelineno-30-2"></a>git<span class="w"> </span>reset<span class="w"> </span>--hard<span class="w"> </span>origin/main
</span></code></pre></div>
<h4 id="si-quieres-preservar-cambios-locales-sin-commit"><a class="toclink" href="../../2025/10/21/c%C3%B3mo-resolver-divergencias-en-git-sincronizando-ramas-local-y-remota/#si-quieres-preservar-cambios-locales-sin-commit">Si Quieres Preservar Cambios Locales Sin Commit</a></h4>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-31-1"><a href="#__codelineno-31-1" id="__codelineno-31-1" name="__codelineno-31-1"></a><span class="c1"># Guardar cambios temporalmente</span>
</span><span id="__span-31-2"><a href="#__codelineno-31-2" id="__codelineno-31-2" name="__codelineno-31-2"></a>git<span class="w"> </span>stash
</span><span id="__span-31-3"><a href="#__codelineno-31-3" id="__codelineno-31-3" name="__codelineno-31-3"></a>
</span><span id="__span-31-4"><a href="#__codelineno-31-4" id="__codelineno-31-4" name="__codelineno-31-4"></a><span class="c1"># Sincronizar con remoto</span>
</span><span id="__span-31-5"><a href="#__codelineno-31-5" id="__codelineno-31-5" name="__codelineno-31-5"></a>git<span class="w"> </span>pull
</span><span id="__span-31-6"><a href="#__codelineno-31-6" id="__codelineno-31-6" name="__codelineno-31-6"></a>
</span><span id="__span-31-7"><a href="#__codelineno-31-7" id="__codelineno-31-7" name="__codelineno-31-7"></a><span class="c1"># Recuperar tus cambios</span>
</span><span id="__span-31-8"><a href="#__codelineno-31-8" id="__codelineno-31-8" name="__codelineno-31-8"></a>git<span class="w"> </span>stash<span class="w"> </span>pop
</span></code></pre></div>
<h3 id="resumen-checklist-rapido"><a class="toclink" href="../../2025/10/21/c%C3%B3mo-resolver-divergencias-en-git-sincronizando-ramas-local-y-remota/#resumen-checklist-rapido">Resumen: Checklist RÃ¡pido</a></h3>
<ul class="task-list">
<li class="task-list-item"><label class="task-list-control"><input disabled="" type="checkbox"><span class="task-list-indicator"></span></label> <strong>Fetch</strong>: <code>git fetch origin main --tags</code></li>
<li class="task-list-item"><label class="task-list-control"><input disabled="" type="checkbox"><span class="task-list-indicator"></span></label> <strong>Analizar</strong>: <code>git log origin/main..main --oneline</code> y <code>git log main..origin/main --oneline</code></li>
<li class="task-list-item"><label class="task-list-control"><input disabled="" type="checkbox"><span class="task-list-indicator"></span></label> <strong>Decidir</strong>: Merge (preservar historia) vs Rebase (lineal)</li>
<li class="task-list-item"><label class="task-list-control"><input disabled="" type="checkbox"><span class="task-list-indicator"></span></label> <strong>Ejecutar</strong>: <code>git merge origin/main</code> o <code>git rebase origin/main</code></li>
<li class="task-list-item"><label class="task-list-control"><input disabled="" type="checkbox"><span class="task-list-indicator"></span></label> <strong>Resolver</strong>: Conflictos si los hay</li>
<li class="task-list-item"><label class="task-list-control"><input disabled="" type="checkbox"><span class="task-list-indicator"></span></label> <strong>Verificar</strong>: <code>git log --graph --oneline -10</code></li>
<li class="task-list-item"><label class="task-list-control"><input disabled="" type="checkbox"><span class="task-list-indicator"></span></label> <strong>Push</strong>: <code>git push origin main</code></li>
<li class="task-list-item"><label class="task-list-control"><input disabled="" type="checkbox"><span class="task-list-indicator"></span></label> <strong>Confirmar</strong>: Archivos crÃ­ticos intactos</li>
</ul>
<h3 id="conclusion"><a class="toclink" href="../../2025/10/21/c%C3%B3mo-resolver-divergencias-en-git-sincronizando-ramas-local-y-remota/#conclusion">ConclusiÃ³n</a></h3>
<p>La divergencia de ramas es un escenario comÃºn en equipos colaborativos. La clave estÃ¡ en:</p>
<ol>
<li><strong>Entender quÃ© ha divergido</strong> (anÃ¡lisis con <code>git log</code>)</li>
<li><strong>Elegir la estrategia correcta</strong> (merge para equipos, rebase para trabajo local)</li>
<li><strong>Verificar el resultado</strong> antes de hacer push</li>
</ol>
<p>En entornos colaborativos con Pull Requests, <strong>merge es generalmente la opciÃ³n mÃ¡s segura</strong> ya que preserva la historia completa y evita reescribir commits que otros pueden estar usando como base.</p>
<hr>
<h3 id="referencias"><a class="toclink" href="../../2025/10/21/c%C3%B3mo-resolver-divergencias-en-git-sincronizando-ramas-local-y-remota/#referencias">Referencias</a></h3>
<ul>
<li><a href="https://git-scm.com/docs/git-merge">Git Documentation - git-merge</a></li>
<li><a href="https://git-scm.com/docs/git-rebase">Git Documentation - git-rebase</a></li>
<li><a href="https://www.atlassian.com/git/tutorials/merging-vs-rebasing">Atlassian Git Tutorials - Merging vs. Rebasing</a></li>
</ul>
</div>
</article>
<article class="md-post md-post--excerpt">
<header class="md-post__header">
<nav class="md-post__authors md-typeset">
<span class="md-author">
<img alt="Rafael FernÃ¡ndez" src="https://avatars.githubusercontent.com/u/39990341">
</span>
</nav>
<div class="md-post__meta md-meta">
<ul class="md-meta__list">
<li class="md-meta__item">
<time datetime="2025-09-05 00:00:00+00:00">September 5, 2025</time></li>
<li class="md-meta__item">
            in
            
              <a class="md-meta__link" href="../azure-services/">Azure Services</a>, 
              <a class="md-meta__link" href="../infrastructure-as-code/">Infrastructure as Code</a>, 
              <a class="md-meta__link" href="../security/">Security</a>, 
              <a class="md-meta__link" href="./">DevOps</a></li>
<li class="md-meta__item">
            
              2 min read
            
          </li>
</ul>
</div>
</header>
<div class="md-post__content md-typeset">
<h2 id="azure-bicep-avanzado-testing-linting-y-despliegue-seguro-multi-entorno"><a class="toclink" href="../../2025/09/05/azure-bicep-avanzado-testing-linting-y-despliegue-seguro-multi-entorno/">Azure Bicep avanzado: testing, linting y despliegue seguro multi-entorno</a></h2>
<h3 id="resumen"><a class="toclink" href="../../2025/09/05/azure-bicep-avanzado-testing-linting-y-despliegue-seguro-multi-entorno/#resumen">Resumen</a></h3>
<p>Bicep permite IaC declarativo en Azure, pero en producciÃ³n necesitas testing, linting y despliegue seguro por entorno. Este post va al grano: cÃ³mo testear plantillas, usar linting, parametrizar para dev/prod y evitar errores comunes.</p>
<h3 id="que-es-bicep-avanzado"><a class="toclink" href="../../2025/09/05/azure-bicep-avanzado-testing-linting-y-despliegue-seguro-multi-entorno/#que-es-bicep-avanzado">Â¿QuÃ© es Bicep avanzado?</a></h3>
<ul>
<li>ModularizaciÃ³n y reutilizaciÃ³n</li>
<li>Testing de plantillas antes de deploy</li>
<li>Linting para calidad y seguridad</li>
<li>ParametrizaciÃ³n por entorno (dev, prod, test)</li>
<li>IntegraciÃ³n con pipelines CI/CD</li>
</ul>
<h3 id="arquitectura-como-funciona"><a class="toclink" href="../../2025/09/05/azure-bicep-avanzado-testing-linting-y-despliegue-seguro-multi-entorno/#arquitectura-como-funciona">Arquitectura / CÃ³mo funciona</a></h3>
<pre class="mermaid"><code>flowchart LR
    Dev[Dev] --&gt; CI[CI Pipeline]
    CI --&gt; Lint[Lint]
    CI --&gt; Test[Test]
    CI --&gt; Deploy[Deploy]
    Deploy --&gt; Azure[Azure]
    Azure --&gt; RG1[Resource Group Dev]
    Azure --&gt; RG2[Resource Group Prod]
</code></pre>
<h3 id="testing-de-plantillas-bicep"><a class="toclink" href="../../2025/09/05/azure-bicep-avanzado-testing-linting-y-despliegue-seguro-multi-entorno/#testing-de-plantillas-bicep">Testing de plantillas Bicep</a></h3>
<ol>
<li>Validar sintaxis:
<div class="language-bash highlight"><pre><span></span><code><span id="__span-8-1"><a href="#__codelineno-8-1" id="__codelineno-8-1" name="__codelineno-8-1"></a>bicep<span class="w"> </span>build<span class="w"> </span>main.bicep
</span></code></pre></div></li>
<li>Test de despliegue (dry-run):
<div class="language-bash highlight"><pre><span></span><code><span id="__span-9-1"><a href="#__codelineno-9-1" id="__codelineno-9-1" name="__codelineno-9-1"></a>az<span class="w"> </span>deployment<span class="w"> </span>sub<span class="w"> </span>validate<span class="w"> </span><span class="se">\</span>
</span><span id="__span-9-2"><a href="#__codelineno-9-2" id="__codelineno-9-2" name="__codelineno-9-2"></a><span class="w">  </span>--location<span class="w"> </span>westeurope<span class="w"> </span><span class="se">\</span>
</span><span id="__span-9-3"><a href="#__codelineno-9-3" id="__codelineno-9-3" name="__codelineno-9-3"></a><span class="w">  </span>--template-file<span class="w"> </span>main.bicep<span class="w"> </span><span class="se">\</span>
</span><span id="__span-9-4"><a href="#__codelineno-9-4" id="__codelineno-9-4" name="__codelineno-9-4"></a><span class="w">  </span>--parameters<span class="w"> </span><span class="nv">environment</span><span class="o">=</span><span class="s2">"dev"</span>
</span></code></pre></div></li>
<li>Test unitario con <a href="https://github.com/Azure/PSRule.Rules.Azure">PSRule for Azure</a>:
<div class="language-bash highlight"><pre><span></span><code><span id="__span-10-1"><a href="#__codelineno-10-1" id="__codelineno-10-1" name="__codelineno-10-1"></a>pwsh<span class="w"> </span>-c<span class="w"> </span><span class="s2">"Invoke-PSRule -Path ./main.bicep"</span>
</span></code></pre></div></li>
</ol>
<h3 id="linting-y-calidad"><a class="toclink" href="../../2025/09/05/azure-bicep-avanzado-testing-linting-y-despliegue-seguro-multi-entorno/#linting-y-calidad">Linting y calidad</a></h3>
<ul>
<li>Usar <a href="https://learn.microsoft.com/azure/azure-resource-manager/bicep/linter">bicep linter</a>:
<div class="language-bash highlight"><pre><span></span><code><span id="__span-11-1"><a href="#__codelineno-11-1" id="__codelineno-11-1" name="__codelineno-11-1"></a>bicep<span class="w"> </span>build<span class="w"> </span>main.bicep
</span><span id="__span-11-2"><a href="#__codelineno-11-2" id="__codelineno-11-2" name="__codelineno-11-2"></a>bicep<span class="w"> </span>linter<span class="w"> </span>main.bicep
</span></code></pre></div></li>
<li>Reglas custom en <code>.bicepconfig.json</code>:
<div class="language-json highlight"><pre><span></span><code><span id="__span-12-1"><a href="#__codelineno-12-1" id="__codelineno-12-1" name="__codelineno-12-1"></a><span class="p">{</span>
</span><span id="__span-12-2"><a href="#__codelineno-12-2" id="__codelineno-12-2" name="__codelineno-12-2"></a><span class="w">  </span><span class="nt">"analyzers"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-12-3"><a href="#__codelineno-12-3" id="__codelineno-12-3" name="__codelineno-12-3"></a><span class="w">    </span><span class="nt">"core"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-12-4"><a href="#__codelineno-12-4" id="__codelineno-12-4" name="__codelineno-12-4"></a><span class="w">      </span><span class="nt">"rules"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-12-5"><a href="#__codelineno-12-5" id="__codelineno-12-5" name="__codelineno-12-5"></a><span class="w">        </span><span class="nt">"no-hardcoded-secrets"</span><span class="p">:</span><span class="w"> </span><span class="s2">"warning"</span><span class="p">,</span>
</span><span id="__span-12-6"><a href="#__codelineno-12-6" id="__codelineno-12-6" name="__codelineno-12-6"></a><span class="w">        </span><span class="nt">"secure-parameters"</span><span class="p">:</span><span class="w"> </span><span class="s2">"error"</span>
</span><span id="__span-12-7"><a href="#__codelineno-12-7" id="__codelineno-12-7" name="__codelineno-12-7"></a><span class="w">      </span><span class="p">}</span>
</span><span id="__span-12-8"><a href="#__codelineno-12-8" id="__codelineno-12-8" name="__codelineno-12-8"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-12-9"><a href="#__codelineno-12-9" id="__codelineno-12-9" name="__codelineno-12-9"></a><span class="w">  </span><span class="p">}</span>
</span><span id="__span-12-10"><a href="#__codelineno-12-10" id="__codelineno-12-10" name="__codelineno-12-10"></a><span class="p">}</span>
</span></code></pre></div></li>
</ul>
<h3 id="parametrizacion-multi-entorno"><a class="toclink" href="../../2025/09/05/azure-bicep-avanzado-testing-linting-y-despliegue-seguro-multi-entorno/#parametrizacion-multi-entorno">ParametrizaciÃ³n multi-entorno</a></h3>
<ul>
<li>Usar parÃ¡metros y archivos por entorno:
<div class="language-bash highlight"><pre><span></span><code><span id="__span-13-1"><a href="#__codelineno-13-1" id="__codelineno-13-1" name="__codelineno-13-1"></a>az<span class="w"> </span>deployment<span class="w"> </span>group<span class="w"> </span>create<span class="w"> </span><span class="se">\</span>
</span><span id="__span-13-2"><a href="#__codelineno-13-2" id="__codelineno-13-2" name="__codelineno-13-2"></a><span class="w">  </span>--resource-group<span class="w"> </span>rg-dev<span class="w"> </span><span class="se">\</span>
</span><span id="__span-13-3"><a href="#__codelineno-13-3" id="__codelineno-13-3" name="__codelineno-13-3"></a><span class="w">  </span>--template-file<span class="w"> </span>main.bicep<span class="w"> </span><span class="se">\</span>
</span><span id="__span-13-4"><a href="#__codelineno-13-4" id="__codelineno-13-4" name="__codelineno-13-4"></a><span class="w">  </span>--parameters<span class="w"> </span>@dev.parameters.json
</span><span id="__span-13-5"><a href="#__codelineno-13-5" id="__codelineno-13-5" name="__codelineno-13-5"></a>az<span class="w"> </span>deployment<span class="w"> </span>group<span class="w"> </span>create<span class="w"> </span><span class="se">\</span>
</span><span id="__span-13-6"><a href="#__codelineno-13-6" id="__codelineno-13-6" name="__codelineno-13-6"></a><span class="w">  </span>--resource-group<span class="w"> </span>rg-prod<span class="w"> </span><span class="se">\</span>
</span><span id="__span-13-7"><a href="#__codelineno-13-7" id="__codelineno-13-7" name="__codelineno-13-7"></a><span class="w">  </span>--template-file<span class="w"> </span>main.bicep<span class="w"> </span><span class="se">\</span>
</span><span id="__span-13-8"><a href="#__codelineno-13-8" id="__codelineno-13-8" name="__codelineno-13-8"></a><span class="w">  </span>--parameters<span class="w"> </span>@prod.parameters.json
</span></code></pre></div></li>
<li>Ejemplo de parÃ¡metros:
<div class="language-json highlight"><pre><span></span><code><span id="__span-14-1"><a href="#__codelineno-14-1" id="__codelineno-14-1" name="__codelineno-14-1"></a><span class="p">{</span>
</span><span id="__span-14-2"><a href="#__codelineno-14-2" id="__codelineno-14-2" name="__codelineno-14-2"></a><span class="w">  </span><span class="nt">"environment"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="nt">"value"</span><span class="p">:</span><span class="w"> </span><span class="s2">"dev"</span><span class="p">},</span>
</span><span id="__span-14-3"><a href="#__codelineno-14-3" id="__codelineno-14-3" name="__codelineno-14-3"></a><span class="w">  </span><span class="nt">"adminPassword"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="nt">"value"</span><span class="p">:</span><span class="w"> </span><span class="s2">"SuperSecret123!"</span><span class="p">}</span>
</span><span id="__span-14-4"><a href="#__codelineno-14-4" id="__codelineno-14-4" name="__codelineno-14-4"></a><span class="p">}</span>
</span></code></pre></div></li>
</ul>
<h3 id="integracion-cicd"><a class="toclink" href="../../2025/09/05/azure-bicep-avanzado-testing-linting-y-despliegue-seguro-multi-entorno/#integracion-cicd">IntegraciÃ³n CI/CD</a></h3>
<ul>
<li>Pipeline YAML ejemplo:
<div class="language-yaml highlight"><pre><span></span><code><span id="__span-15-1"><a href="#__codelineno-15-1" id="__codelineno-15-1" name="__codelineno-15-1"></a><span class="nt">trigger</span><span class="p">:</span>
</span><span id="__span-15-2"><a href="#__codelineno-15-2" id="__codelineno-15-2" name="__codelineno-15-2"></a><span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">main</span>
</span><span id="__span-15-3"><a href="#__codelineno-15-3" id="__codelineno-15-3" name="__codelineno-15-3"></a><span class="nt">pool</span><span class="p">:</span>
</span><span id="__span-15-4"><a href="#__codelineno-15-4" id="__codelineno-15-4" name="__codelineno-15-4"></a><span class="w">  </span><span class="nt">vmImage</span><span class="p">:</span><span class="w"> </span><span class="s">'ubuntu-latest'</span>
</span><span id="__span-15-5"><a href="#__codelineno-15-5" id="__codelineno-15-5" name="__codelineno-15-5"></a><span class="nt">steps</span><span class="p">:</span>
</span><span id="__span-15-6"><a href="#__codelineno-15-6" id="__codelineno-15-6" name="__codelineno-15-6"></a><span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">script</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">bicep build main.bicep</span>
</span><span id="__span-15-7"><a href="#__codelineno-15-7" id="__codelineno-15-7" name="__codelineno-15-7"></a><span class="w">    </span><span class="nt">displayName</span><span class="p">:</span><span class="w"> </span><span class="s">'Build</span><span class="nv"> </span><span class="s">Bicep'</span>
</span><span id="__span-15-8"><a href="#__codelineno-15-8" id="__codelineno-15-8" name="__codelineno-15-8"></a><span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">script</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">bicep linter main.bicep</span>
</span><span id="__span-15-9"><a href="#__codelineno-15-9" id="__codelineno-15-9" name="__codelineno-15-9"></a><span class="w">    </span><span class="nt">displayName</span><span class="p">:</span><span class="w"> </span><span class="s">'Lint</span><span class="nv"> </span><span class="s">Bicep'</span>
</span><span id="__span-15-10"><a href="#__codelineno-15-10" id="__codelineno-15-10" name="__codelineno-15-10"></a><span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">script</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">pwsh -c "Invoke-PSRule -Path ./main.bicep"</span>
</span><span id="__span-15-11"><a href="#__codelineno-15-11" id="__codelineno-15-11" name="__codelineno-15-11"></a><span class="w">    </span><span class="nt">displayName</span><span class="p">:</span><span class="w"> </span><span class="s">'Test</span><span class="nv"> </span><span class="s">Bicep'</span>
</span><span id="__span-15-12"><a href="#__codelineno-15-12" id="__codelineno-15-12" name="__codelineno-15-12"></a><span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">script</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">az deployment group create --resource-group rg-dev --template-file main.bicep --parameters @dev.parameters.json</span>
</span><span id="__span-15-13"><a href="#__codelineno-15-13" id="__codelineno-15-13" name="__codelineno-15-13"></a><span class="w">    </span><span class="nt">displayName</span><span class="p">:</span><span class="w"> </span><span class="s">'Deploy</span><span class="nv"> </span><span class="s">Dev'</span>
</span></code></pre></div></li>
</ul>
<h3 id="buenas-practicas"><a class="toclink" href="../../2025/09/05/azure-bicep-avanzado-testing-linting-y-despliegue-seguro-multi-entorno/#buenas-practicas">Buenas prÃ¡cticas</a></h3>
<ul>
<li>Nunca hardcodear secretos en plantillas</li>
<li>Usar Key Vault para parÃ¡metros sensibles</li>
<li>Validar y testear antes de cada despliegue</li>
<li>Mantener mÃ³dulos reutilizables y versionados</li>
<li>Revisar resultados de linting y testing en cada PR</li>
</ul>
<h3 id="costes"><a class="toclink" href="../../2025/09/05/azure-bicep-avanzado-testing-linting-y-despliegue-seguro-multi-entorno/#costes">Costes</a></h3>
<ul>
<li>Bicep: gratis</li>
<li>PSRule: gratis</li>
<li>Azure DevOps: desde $0 (hasta 1,800 min/mes)</li>
</ul>
<h3 id="referencias"><a class="toclink" href="../../2025/09/05/azure-bicep-avanzado-testing-linting-y-despliegue-seguro-multi-entorno/#referencias">Referencias</a></h3>
<ul>
<li><a href="https://learn.microsoft.com/azure/azure-resource-manager/bicep/linter">Bicep Linter</a></li>
<li><a href="https://learn.microsoft.com/azure/ps-rule-azure/">PSRule for Azure</a></li>
<li><a href="https://learn.microsoft.com/azure/azure-resource-manager/bicep/deploy-multiple-environments">Multi-environment deployments</a></li>
</ul>
</div>
</article>
<article class="md-post md-post--excerpt">
<header class="md-post__header">
<nav class="md-post__authors md-typeset">
<span class="md-author">
<img alt="Rafael FernÃ¡ndez" src="https://avatars.githubusercontent.com/u/39990341">
</span>
</nav>
<div class="md-post__meta md-meta">
<ul class="md-meta__list">
<li class="md-meta__item">
<time datetime="2025-09-01 00:00:00+00:00">September 1, 2025</time></li>
<li class="md-meta__item">
            in
            
              <a class="md-meta__link" href="./">DevOps</a></li>
<li class="md-meta__item">
            
              5 min read
            
          </li>
</ul>
</div>
</header>
<div class="md-post__content md-typeset">
<h2 id="azure-devops-pipelines-as-code-yaml-templates-reutilizables"><a class="toclink" href="../../2025/09/01/azure-devops-pipelines-as-code-yaml-templates-reutilizables/">Azure DevOps Pipelines as Code: YAML templates reutilizables</a></h2>
<h3 id="resumen"><a class="toclink" href="../../2025/09/01/azure-devops-pipelines-as-code-yaml-templates-reutilizables/#resumen">Resumen</a></h3>
<p><strong>Pipelines as Code</strong> con YAML en Azure DevOps te permite versionar CI/CD, reutilizar templates y aplicar DRY principle. En este post verÃ¡s cÃ³mo crear pipelines YAML modulares, templates parametrizados y estrategias multi-stage para deploy seguro.</p>
<nav class="md-post__action">
<a href="../../2025/09/01/azure-devops-pipelines-as-code-yaml-templates-reutilizables/">
          Continue reading
        </a>
</nav>
</div>
</article>
<article class="md-post md-post--excerpt">
<header class="md-post__header">
<nav class="md-post__authors md-typeset">
<span class="md-author">
<img alt="Rafael FernÃ¡ndez" src="https://avatars.githubusercontent.com/u/39990341">
</span>
</nav>
<div class="md-post__meta md-meta">
<ul class="md-meta__list">
<li class="md-meta__item">
<time datetime="2025-03-22 00:00:00+00:00">March 22, 2025</time></li>
<li class="md-meta__item">
            in
            
              <a class="md-meta__link" href="./">DevOps</a></li>
<li class="md-meta__item">
            
              1 min read
            
          </li>
</ul>
</div>
</header>
<div class="md-post__content md-typeset">
<h2 id="azure-devops-yaml-templates-reutilizables"><a class="toclink" href="../../2025/03/22/azure-devops-yaml-templates-reutilizables/">Azure DevOps: YAML templates reutilizables</a></h2>
<h3 id="resumen"><a class="toclink" href="../../2025/03/22/azure-devops-yaml-templates-reutilizables/#resumen">Resumen</a></h3>
<p>Templates eliminan cÃ³digo duplicado en pipelines. template parameters, extends y multistage.</p>
<h3 id="introduccion"><a class="toclink" href="../../2025/03/22/azure-devops-yaml-templates-reutilizables/#introduccion">IntroducciÃ³n</a></h3>
<p>[Contenido tÃ©cnico detallado a desarrollar]</p>
<h3 id="configuracion-basica"><a class="toclink" href="../../2025/03/22/azure-devops-yaml-templates-reutilizables/#configuracion-basica">ConfiguraciÃ³n bÃ¡sica</a></h3>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-2-1"><a href="#__codelineno-2-1" id="__codelineno-2-1" name="__codelineno-2-1"></a><span class="c1"># Comandos de ejemplo</span>
</span><span id="__span-2-2"><a href="#__codelineno-2-2" id="__codelineno-2-2" name="__codelineno-2-2"></a><span class="nv">RG</span><span class="o">=</span><span class="s2">"my-rg"</span>
</span><span id="__span-2-3"><a href="#__codelineno-2-3" id="__codelineno-2-3" name="__codelineno-2-3"></a><span class="nv">LOCATION</span><span class="o">=</span><span class="s2">"westeurope"</span>
</span><span id="__span-2-4"><a href="#__codelineno-2-4" id="__codelineno-2-4" name="__codelineno-2-4"></a>
</span><span id="__span-2-5"><a href="#__codelineno-2-5" id="__codelineno-2-5" name="__codelineno-2-5"></a><span class="c1"># Comandos Azure CLI</span>
</span><span id="__span-2-6"><a href="#__codelineno-2-6" id="__codelineno-2-6" name="__codelineno-2-6"></a>az<span class="w"> </span>group<span class="w"> </span>create<span class="w"> </span>--name<span class="w"> </span><span class="nv">$RG</span><span class="w"> </span>--location<span class="w"> </span><span class="nv">$LOCATION</span>
</span></code></pre></div>
<h3 id="casos-de-uso"><a class="toclink" href="../../2025/03/22/azure-devops-yaml-templates-reutilizables/#casos-de-uso">Casos de uso</a></h3>
<ul>
<li>Caso 1: [DescripciÃ³n]</li>
<li>Caso 2: [DescripciÃ³n]  </li>
<li>Caso 3: [DescripciÃ³n]</li>
</ul>
<h3 id="buenas-practicas"><a class="toclink" href="../../2025/03/22/azure-devops-yaml-templates-reutilizables/#buenas-practicas">Buenas prÃ¡cticas</a></h3>
<ul>
<li><strong>PrÃ¡ctica 1</strong>: DescripciÃ³n</li>
<li><strong>PrÃ¡ctica 2</strong>: DescripciÃ³n</li>
<li><strong>PrÃ¡ctica 3</strong>: DescripciÃ³n</li>
</ul>
<h3 id="monitoreo-y-troubleshooting"><a class="toclink" href="../../2025/03/22/azure-devops-yaml-templates-reutilizables/#monitoreo-y-troubleshooting">Monitoreo y troubleshooting</a></h3>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-3-1"><a href="#__codelineno-3-1" id="__codelineno-3-1" name="__codelineno-3-1"></a><span class="c1"># Comandos de diagnÃ³stico</span>
</span><span id="__span-3-2"><a href="#__codelineno-3-2" id="__codelineno-3-2" name="__codelineno-3-2"></a>az<span class="w"> </span>monitor<span class="w"> </span>metrics<span class="w"> </span>list<span class="w"> </span>--resource<span class="w"> </span>...
</span></code></pre></div>
<h3 id="referencias"><a class="toclink" href="../../2025/03/22/azure-devops-yaml-templates-reutilizables/#referencias">Referencias</a></h3>
<ul>
<li><a href="https://learn.microsoft.com/en-us/azure/">DocumentaciÃ³n oficial</a></li>
</ul>
</div>
</article>
<article class="md-post md-post--excerpt">
<header class="md-post__header">
<nav class="md-post__authors md-typeset">
<span class="md-author">
<img alt="Rafael FernÃ¡ndez" src="https://avatars.githubusercontent.com/u/39990341">
</span>
</nav>
<div class="md-post__meta md-meta">
<ul class="md-meta__list">
<li class="md-meta__item">
<time datetime="2025-02-13 00:00:00+00:00">February 13, 2025</time></li>
<li class="md-meta__item">
            in
            
              <a class="md-meta__link" href="./">DevOps</a></li>
<li class="md-meta__item">
            
              3 min read
            
          </li>
</ul>
</div>
</header>
<div class="md-post__content md-typeset">
<h2 id="github-actions-deploy-a-azure-con-workload-identity-federation"><a class="toclink" href="../../2025/02/13/github-actions-deploy-a-azure-con-workload-identity-federation/">GitHub Actions: Deploy a Azure con Workload Identity Federation</a></h2>
<h3 id="resumen"><a class="toclink" href="../../2025/02/13/github-actions-deploy-a-azure-con-workload-identity-federation/#resumen">Resumen</a></h3>
<p>Olv</p>
<p>Ã­date de guardar service principal secrets en GitHub. Con Workload Identity Federation, GitHub Actions se autentica a Azure sin credenciales almacenadas. MÃ¡s seguro y cero rotaciÃ³n de secrets.</p>
<h3 id="que-es-workload-identity-federation"><a class="toclink" href="../../2025/02/13/github-actions-deploy-a-azure-con-workload-identity-federation/#que-es-workload-identity-federation">Â¿QuÃ© es Workload Identity Federation?</a></h3>
<p>Permite que GitHub Actions obtenga un access token de Azure usando OIDC (OpenID Connect). Azure confÃ­a en los tokens de GitHub basÃ¡ndose en:
- Repositorio especÃ­fico
- Branch especÃ­fico
- Environment especÃ­fico</p>
<h3 id="setup-completo"><a class="toclink" href="../../2025/02/13/github-actions-deploy-a-azure-con-workload-identity-federation/#setup-completo">Setup completo</a></h3>
<h4 id="1-crear-service-principal"><a class="toclink" href="../../2025/02/13/github-actions-deploy-a-azure-con-workload-identity-federation/#1-crear-service-principal">1. Crear service principal</a></h4>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-6-1"><a href="#__codelineno-6-1" id="__codelineno-6-1" name="__codelineno-6-1"></a><span class="c1"># Variables</span>
</span><span id="__span-6-2"><a href="#__codelineno-6-2" id="__codelineno-6-2" name="__codelineno-6-2"></a><span class="nv">APP_NAME</span><span class="o">=</span><span class="s2">"github-actions-federation"</span>
</span><span id="__span-6-3"><a href="#__codelineno-6-3" id="__codelineno-6-3" name="__codelineno-6-3"></a><span class="nv">RG</span><span class="o">=</span><span class="s2">"my-rg"</span>
</span><span id="__span-6-4"><a href="#__codelineno-6-4" id="__codelineno-6-4" name="__codelineno-6-4"></a><span class="nv">SUBSCRIPTION_ID</span><span class="o">=</span><span class="k">$(</span>az<span class="w"> </span>account<span class="w"> </span>show<span class="w"> </span>--query<span class="w"> </span>id<span class="w"> </span>-o<span class="w"> </span>tsv<span class="k">)</span>
</span><span id="__span-6-5"><a href="#__codelineno-6-5" id="__codelineno-6-5" name="__codelineno-6-5"></a>
</span><span id="__span-6-6"><a href="#__codelineno-6-6" id="__codelineno-6-6" name="__codelineno-6-6"></a><span class="c1"># Crear app registration</span>
</span><span id="__span-6-7"><a href="#__codelineno-6-7" id="__codelineno-6-7" name="__codelineno-6-7"></a><span class="nv">APP_ID</span><span class="o">=</span><span class="k">$(</span>az<span class="w"> </span>ad<span class="w"> </span>app<span class="w"> </span>create<span class="w"> </span><span class="se">\</span>
</span><span id="__span-6-8"><a href="#__codelineno-6-8" id="__codelineno-6-8" name="__codelineno-6-8"></a><span class="w">  </span>--display-name<span class="w"> </span><span class="nv">$APP_NAME</span><span class="w"> </span><span class="se">\</span>
</span><span id="__span-6-9"><a href="#__codelineno-6-9" id="__codelineno-6-9" name="__codelineno-6-9"></a><span class="w">  </span>--query<span class="w"> </span>appId<span class="w"> </span>-o<span class="w"> </span>tsv<span class="k">)</span>
</span><span id="__span-6-10"><a href="#__codelineno-6-10" id="__codelineno-6-10" name="__codelineno-6-10"></a>
</span><span id="__span-6-11"><a href="#__codelineno-6-11" id="__codelineno-6-11" name="__codelineno-6-11"></a><span class="c1"># Crear service principal</span>
</span><span id="__span-6-12"><a href="#__codelineno-6-12" id="__codelineno-6-12" name="__codelineno-6-12"></a>az<span class="w"> </span>ad<span class="w"> </span>sp<span class="w"> </span>create<span class="w"> </span>--id<span class="w"> </span><span class="nv">$APP_ID</span>
</span><span id="__span-6-13"><a href="#__codelineno-6-13" id="__codelineno-6-13" name="__codelineno-6-13"></a>
</span><span id="__span-6-14"><a href="#__codelineno-6-14" id="__codelineno-6-14" name="__codelineno-6-14"></a><span class="nv">SP_OBJECT_ID</span><span class="o">=</span><span class="k">$(</span>az<span class="w"> </span>ad<span class="w"> </span>sp<span class="w"> </span>show<span class="w"> </span>--id<span class="w"> </span><span class="nv">$APP_ID</span><span class="w"> </span>--query<span class="w"> </span>id<span class="w"> </span>-o<span class="w"> </span>tsv<span class="k">)</span>
</span><span id="__span-6-15"><a href="#__codelineno-6-15" id="__codelineno-6-15" name="__codelineno-6-15"></a>
</span><span id="__span-6-16"><a href="#__codelineno-6-16" id="__codelineno-6-16" name="__codelineno-6-16"></a><span class="c1"># Asignar rol Contributor</span>
</span><span id="__span-6-17"><a href="#__codelineno-6-17" id="__codelineno-6-17" name="__codelineno-6-17"></a>az<span class="w"> </span>role<span class="w"> </span>assignment<span class="w"> </span>create<span class="w"> </span><span class="se">\</span>
</span><span id="__span-6-18"><a href="#__codelineno-6-18" id="__codelineno-6-18" name="__codelineno-6-18"></a><span class="w">  </span>--role<span class="w"> </span>Contributor<span class="w"> </span><span class="se">\</span>
</span><span id="__span-6-19"><a href="#__codelineno-6-19" id="__codelineno-6-19" name="__codelineno-6-19"></a><span class="w">  </span>--assignee<span class="w"> </span><span class="nv">$APP_ID</span><span class="w"> </span><span class="se">\</span>
</span><span id="__span-6-20"><a href="#__codelineno-6-20" id="__codelineno-6-20" name="__codelineno-6-20"></a><span class="w">  </span>--scope<span class="w"> </span>/subscriptions/<span class="nv">$SUBSCRIPTION_ID</span>/resourceGroups/<span class="nv">$RG</span>
</span></code></pre></div>
<h4 id="2-configurar-federated-credential"><a class="toclink" href="../../2025/02/13/github-actions-deploy-a-azure-con-workload-identity-federation/#2-configurar-federated-credential">2. Configurar Federated Credential</a></h4>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-7-1"><a href="#__codelineno-7-1" id="__codelineno-7-1" name="__codelineno-7-1"></a><span class="c1"># Para branch main</span>
</span><span id="__span-7-2"><a href="#__codelineno-7-2" id="__codelineno-7-2" name="__codelineno-7-2"></a>az<span class="w"> </span>ad<span class="w"> </span>app<span class="w"> </span>federated-credential<span class="w"> </span>create<span class="w"> </span><span class="se">\</span>
</span><span id="__span-7-3"><a href="#__codelineno-7-3" id="__codelineno-7-3" name="__codelineno-7-3"></a><span class="w">  </span>--id<span class="w"> </span><span class="nv">$APP_ID</span><span class="w"> </span><span class="se">\</span>
</span><span id="__span-7-4"><a href="#__codelineno-7-4" id="__codelineno-7-4" name="__codelineno-7-4"></a><span class="w">  </span>--parameters<span class="w"> </span><span class="s1">'{</span>
</span><span id="__span-7-5"><a href="#__codelineno-7-5" id="__codelineno-7-5" name="__codelineno-7-5"></a><span class="s1">    "name": "github-main-branch",</span>
</span><span id="__span-7-6"><a href="#__codelineno-7-6" id="__codelineno-7-6" name="__codelineno-7-6"></a><span class="s1">    "issuer": "https://token.actions.githubusercontent.com",</span>
</span><span id="__span-7-7"><a href="#__codelineno-7-7" id="__codelineno-7-7" name="__codelineno-7-7"></a><span class="s1">    "subject": "repo:myorg/myrepo:ref:refs/heads/main",</span>
</span><span id="__span-7-8"><a href="#__codelineno-7-8" id="__codelineno-7-8" name="__codelineno-7-8"></a><span class="s1">    "description": "GitHub Actions - main branch",</span>
</span><span id="__span-7-9"><a href="#__codelineno-7-9" id="__codelineno-7-9" name="__codelineno-7-9"></a><span class="s1">    "audiences": ["api://AzureADTokenExchange"]</span>
</span><span id="__span-7-10"><a href="#__codelineno-7-10" id="__codelineno-7-10" name="__codelineno-7-10"></a><span class="s1">  }'</span>
</span><span id="__span-7-11"><a href="#__codelineno-7-11" id="__codelineno-7-11" name="__codelineno-7-11"></a>
</span><span id="__span-7-12"><a href="#__codelineno-7-12" id="__codelineno-7-12" name="__codelineno-7-12"></a><span class="c1"># Para environment production</span>
</span><span id="__span-7-13"><a href="#__codelineno-7-13" id="__codelineno-7-13" name="__codelineno-7-13"></a>az<span class="w"> </span>ad<span class="w"> </span>app<span class="w"> </span>federated-credential<span class="w"> </span>create<span class="w"> </span><span class="se">\</span>
</span><span id="__span-7-14"><a href="#__codelineno-7-14" id="__codelineno-7-14" name="__codelineno-7-14"></a><span class="w">  </span>--id<span class="w"> </span><span class="nv">$APP_ID</span><span class="w"> </span><span class="se">\</span>
</span><span id="__span-7-15"><a href="#__codelineno-7-15" id="__codelineno-7-15" name="__codelineno-7-15"></a><span class="w">  </span>--parameters<span class="w"> </span><span class="s1">'{</span>
</span><span id="__span-7-16"><a href="#__codelineno-7-16" id="__codelineno-7-16" name="__codelineno-7-16"></a><span class="s1">    "name": "github-prod-environment",</span>
</span><span id="__span-7-17"><a href="#__codelineno-7-17" id="__codelineno-7-17" name="__codelineno-7-17"></a><span class="s1">    "issuer": "https://token.actions.githubusercontent.com",</span>
</span><span id="__span-7-18"><a href="#__codelineno-7-18" id="__codelineno-7-18" name="__codelineno-7-18"></a><span class="s1">    "subject": "repo:myorg/myrepo:environment:production",</span>
</span><span id="__span-7-19"><a href="#__codelineno-7-19" id="__codelineno-7-19" name="__codelineno-7-19"></a><span class="s1">    "description": "GitHub Actions - production environment",</span>
</span><span id="__span-7-20"><a href="#__codelineno-7-20" id="__codelineno-7-20" name="__codelineno-7-20"></a><span class="s1">    "audiences": ["api://AzureADTokenExchange"]</span>
</span><span id="__span-7-21"><a href="#__codelineno-7-21" id="__codelineno-7-21" name="__codelineno-7-21"></a><span class="s1">  }'</span>
</span><span id="__span-7-22"><a href="#__codelineno-7-22" id="__codelineno-7-22" name="__codelineno-7-22"></a>
</span><span id="__span-7-23"><a href="#__codelineno-7-23" id="__codelineno-7-23" name="__codelineno-7-23"></a><span class="c1"># Para pull requests</span>
</span><span id="__span-7-24"><a href="#__codelineno-7-24" id="__codelineno-7-24" name="__codelineno-7-24"></a>az<span class="w"> </span>ad<span class="w"> </span>app<span class="w"> </span>federated-credential<span class="w"> </span>create<span class="w"> </span><span class="se">\</span>
</span><span id="__span-7-25"><a href="#__codelineno-7-25" id="__codelineno-7-25" name="__codelineno-7-25"></a><span class="w">  </span>--id<span class="w"> </span><span class="nv">$APP_ID</span><span class="w"> </span><span class="se">\</span>
</span><span id="__span-7-26"><a href="#__codelineno-7-26" id="__codelineno-7-26" name="__codelineno-7-26"></a><span class="w">  </span>--parameters<span class="w"> </span><span class="s1">'{</span>
</span><span id="__span-7-27"><a href="#__codelineno-7-27" id="__codelineno-7-27" name="__codelineno-7-27"></a><span class="s1">    "name": "github-pull-requests",</span>
</span><span id="__span-7-28"><a href="#__codelineno-7-28" id="__codelineno-7-28" name="__codelineno-7-28"></a><span class="s1">    "issuer": "https://token.actions.githubusercontent.com",</span>
</span><span id="__span-7-29"><a href="#__codelineno-7-29" id="__codelineno-7-29" name="__codelineno-7-29"></a><span class="s1">    "subject": "repo:myorg/myrepo:pull_request",</span>
</span><span id="__span-7-30"><a href="#__codelineno-7-30" id="__codelineno-7-30" name="__codelineno-7-30"></a><span class="s1">    "description": "GitHub Actions - pull requests",</span>
</span><span id="__span-7-31"><a href="#__codelineno-7-31" id="__codelineno-7-31" name="__codelineno-7-31"></a><span class="s1">    "audiences": ["api://AzureADTokenExchange"]</span>
</span><span id="__span-7-32"><a href="#__codelineno-7-32" id="__codelineno-7-32" name="__codelineno-7-32"></a><span class="s1">  }'</span>
</span></code></pre></div>
<h4 id="3-configurar-github-secrets"><a class="toclink" href="../../2025/02/13/github-actions-deploy-a-azure-con-workload-identity-federation/#3-configurar-github-secrets">3. Configurar GitHub Secrets</a></h4>
<p>En tu repositorio â Settings â Secrets:</p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-8-1"><a href="#__codelineno-8-1" id="__codelineno-8-1" name="__codelineno-8-1"></a>AZURE_CLIENT_ID = {APP_ID}
</span><span id="__span-8-2"><a href="#__codelineno-8-2" id="__codelineno-8-2" name="__codelineno-8-2"></a>AZURE_TENANT_ID = {TENANT_ID}
</span><span id="__span-8-3"><a href="#__codelineno-8-3" id="__codelineno-8-3" name="__codelineno-8-3"></a>AZURE_SUBSCRIPTION_ID = {SUBSCRIPTION_ID}
</span></code></pre></div>
<h4 id="4-github-actions-workflow"><a class="toclink" href="../../2025/02/13/github-actions-deploy-a-azure-con-workload-identity-federation/#4-github-actions-workflow">4. GitHub Actions Workflow</a></h4>
<p><code>.github/workflows/deploy.yml</code>:</p>
<div class="language-yaml highlight"><pre><span></span><code><span id="__span-9-1"><a href="#__codelineno-9-1" id="__codelineno-9-1" name="__codelineno-9-1"></a><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Deploy to Azure</span>
</span><span id="__span-9-2"><a href="#__codelineno-9-2" id="__codelineno-9-2" name="__codelineno-9-2"></a>
</span><span id="__span-9-3"><a href="#__codelineno-9-3" id="__codelineno-9-3" name="__codelineno-9-3"></a><span class="nt">on</span><span class="p">:</span>
</span><span id="__span-9-4"><a href="#__codelineno-9-4" id="__codelineno-9-4" name="__codelineno-9-4"></a><span class="w">  </span><span class="nt">push</span><span class="p">:</span>
</span><span id="__span-9-5"><a href="#__codelineno-9-5" id="__codelineno-9-5" name="__codelineno-9-5"></a><span class="w">    </span><span class="nt">branches</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">main</span><span class="p p-Indicator">]</span>
</span><span id="__span-9-6"><a href="#__codelineno-9-6" id="__codelineno-9-6" name="__codelineno-9-6"></a><span class="w">  </span><span class="nt">pull_request</span><span class="p">:</span>
</span><span id="__span-9-7"><a href="#__codelineno-9-7" id="__codelineno-9-7" name="__codelineno-9-7"></a><span class="w">    </span><span class="nt">branches</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">main</span><span class="p p-Indicator">]</span>
</span><span id="__span-9-8"><a href="#__codelineno-9-8" id="__codelineno-9-8" name="__codelineno-9-8"></a>
</span><span id="__span-9-9"><a href="#__codelineno-9-9" id="__codelineno-9-9" name="__codelineno-9-9"></a><span class="nt">permissions</span><span class="p">:</span>
</span><span id="__span-9-10"><a href="#__codelineno-9-10" id="__codelineno-9-10" name="__codelineno-9-10"></a><span class="w">  </span><span class="nt">id-token</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">write</span><span class="w">  </span><span class="c1"># Required for OIDC</span>
</span><span id="__span-9-11"><a href="#__codelineno-9-11" id="__codelineno-9-11" name="__codelineno-9-11"></a><span class="w">  </span><span class="nt">contents</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">read</span>
</span><span id="__span-9-12"><a href="#__codelineno-9-12" id="__codelineno-9-12" name="__codelineno-9-12"></a>
</span><span id="__span-9-13"><a href="#__codelineno-9-13" id="__codelineno-9-13" name="__codelineno-9-13"></a><span class="nt">jobs</span><span class="p">:</span>
</span><span id="__span-9-14"><a href="#__codelineno-9-14" id="__codelineno-9-14" name="__codelineno-9-14"></a><span class="w">  </span><span class="nt">deploy</span><span class="p">:</span>
</span><span id="__span-9-15"><a href="#__codelineno-9-15" id="__codelineno-9-15" name="__codelineno-9-15"></a><span class="w">    </span><span class="nt">runs-on</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ubuntu-latest</span>
</span><span id="__span-9-16"><a href="#__codelineno-9-16" id="__codelineno-9-16" name="__codelineno-9-16"></a><span class="w">    </span><span class="nt">environment</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">production</span><span class="w">  </span><span class="c1"># Si usas federated credential por environment</span>
</span><span id="__span-9-17"><a href="#__codelineno-9-17" id="__codelineno-9-17" name="__codelineno-9-17"></a>
</span><span id="__span-9-18"><a href="#__codelineno-9-18" id="__codelineno-9-18" name="__codelineno-9-18"></a><span class="w">    </span><span class="nt">steps</span><span class="p">:</span>
</span><span id="__span-9-19"><a href="#__codelineno-9-19" id="__codelineno-9-19" name="__codelineno-9-19"></a><span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">uses</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">actions/checkout@v4</span>
</span><span id="__span-9-20"><a href="#__codelineno-9-20" id="__codelineno-9-20" name="__codelineno-9-20"></a>
</span><span id="__span-9-21"><a href="#__codelineno-9-21" id="__codelineno-9-21" name="__codelineno-9-21"></a><span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Azure Login with OIDC</span>
</span><span id="__span-9-22"><a href="#__codelineno-9-22" id="__codelineno-9-22" name="__codelineno-9-22"></a><span class="w">        </span><span class="nt">uses</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">azure/login@v1</span>
</span><span id="__span-9-23"><a href="#__codelineno-9-23" id="__codelineno-9-23" name="__codelineno-9-23"></a><span class="w">        </span><span class="nt">with</span><span class="p">:</span>
</span><span id="__span-9-24"><a href="#__codelineno-9-24" id="__codelineno-9-24" name="__codelineno-9-24"></a><span class="w">          </span><span class="nt">client-id</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">${{ secrets.AZURE_CLIENT_ID }}</span>
</span><span id="__span-9-25"><a href="#__codelineno-9-25" id="__codelineno-9-25" name="__codelineno-9-25"></a><span class="w">          </span><span class="nt">tenant-id</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">${{ secrets.AZURE_TENANT_ID }}</span>
</span><span id="__span-9-26"><a href="#__codelineno-9-26" id="__codelineno-9-26" name="__codelineno-9-26"></a><span class="w">          </span><span class="nt">subscription-id</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">${{ secrets.AZURE_SUBSCRIPTION_ID }}</span>
</span><span id="__span-9-27"><a href="#__codelineno-9-27" id="__codelineno-9-27" name="__codelineno-9-27"></a>
</span><span id="__span-9-28"><a href="#__codelineno-9-28" id="__codelineno-9-28" name="__codelineno-9-28"></a><span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Deploy to Azure Web App</span>
</span><span id="__span-9-29"><a href="#__codelineno-9-29" id="__codelineno-9-29" name="__codelineno-9-29"></a><span class="w">        </span><span class="nt">uses</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">azure/webapps-deploy@v2</span>
</span><span id="__span-9-30"><a href="#__codelineno-9-30" id="__codelineno-9-30" name="__codelineno-9-30"></a><span class="w">        </span><span class="nt">with</span><span class="p">:</span>
</span><span id="__span-9-31"><a href="#__codelineno-9-31" id="__codelineno-9-31" name="__codelineno-9-31"></a><span class="w">          </span><span class="nt">app-name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">my-web-app</span>
</span><span id="__span-9-32"><a href="#__codelineno-9-32" id="__codelineno-9-32" name="__codelineno-9-32"></a><span class="w">          </span><span class="nt">package</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">./dist</span>
</span><span id="__span-9-33"><a href="#__codelineno-9-33" id="__codelineno-9-33" name="__codelineno-9-33"></a>
</span><span id="__span-9-34"><a href="#__codelineno-9-34" id="__codelineno-9-34" name="__codelineno-9-34"></a><span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Azure CLI commands</span>
</span><span id="__span-9-35"><a href="#__codelineno-9-35" id="__codelineno-9-35" name="__codelineno-9-35"></a><span class="w">        </span><span class="nt">run</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">|</span>
</span><span id="__span-9-36"><a href="#__codelineno-9-36" id="__codelineno-9-36" name="__codelineno-9-36"></a><span class="w">          </span><span class="no">az group list</span>
</span><span id="__span-9-37"><a href="#__codelineno-9-37" id="__codelineno-9-37" name="__codelineno-9-37"></a><span class="w">          </span><span class="no">az webapp list --resource-group ${{ env.RG }}</span>
</span></code></pre></div>
<h3 id="ventajas-vs-service-principal-secrets"><a class="toclink" href="../../2025/02/13/github-actions-deploy-a-azure-con-workload-identity-federation/#ventajas-vs-service-principal-secrets">Ventajas vs Service Principal Secrets</a></h3>
<table>
<thead>
<tr>
<th>Aspecto</th>
<th>Service Principal Secret</th>
<th>Workload Identity</th>
</tr>
</thead>
<tbody>
<tr>
<td>Secrets en GitHub</td>
<td>SÃ­ (password)</td>
<td>No (solo IDs)</td>
</tr>
<tr>
<td>RotaciÃ³n</td>
<td>Manual cada 90 dÃ­as</td>
<td>AutomÃ¡tica</td>
</tr>
<tr>
<td>Scope</td>
<td>Amplio</td>
<td>Granular (repo/branch/env)</td>
</tr>
<tr>
<td>Audit trail</td>
<td>Limitado</td>
<td>Completo (OIDC claims)</td>
</tr>
<tr>
<td>ExpiraciÃ³n</td>
<td>Hasta 2 aÃ±os</td>
<td>Token expira en minutos</td>
</tr>
</tbody>
</table>
<h3 id="debugging"><a class="toclink" href="../../2025/02/13/github-actions-deploy-a-azure-con-workload-identity-federation/#debugging">Debugging</a></h3>
<div class="language-yaml highlight"><pre><span></span><code><span id="__span-10-1"><a href="#__codelineno-10-1" id="__codelineno-10-1" name="__codelineno-10-1"></a><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Debug OIDC Token</span>
</span><span id="__span-10-2"><a href="#__codelineno-10-2" id="__codelineno-10-2" name="__codelineno-10-2"></a><span class="w">  </span><span class="nt">run</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">|</span>
</span><span id="__span-10-3"><a href="#__codelineno-10-3" id="__codelineno-10-3" name="__codelineno-10-3"></a><span class="w">    </span><span class="no">curl -H "Authorization: bearer $ACTIONS_ID_TOKEN_REQUEST_TOKEN" \</span>
</span><span id="__span-10-4"><a href="#__codelineno-10-4" id="__codelineno-10-4" name="__codelineno-10-4"></a><span class="w">         </span><span class="no">"$ACTIONS_ID_TOKEN_REQUEST_URL&amp;audience=api://AzureADTokenExchange" \</span>
</span><span id="__span-10-5"><a href="#__codelineno-10-5" id="__codelineno-10-5" name="__codelineno-10-5"></a><span class="w">         </span><span class="no">| jq -R 'split(".") | .[1] | @base64d | fromjson'</span>
</span></code></pre></div>
<p>Claims del token:</p>
<div class="language-json highlight"><pre><span></span><code><span id="__span-11-1"><a href="#__codelineno-11-1" id="__codelineno-11-1" name="__codelineno-11-1"></a><span class="p">{</span>
</span><span id="__span-11-2"><a href="#__codelineno-11-2" id="__codelineno-11-2" name="__codelineno-11-2"></a><span class="w">  </span><span class="nt">"iss"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://token.actions.githubusercontent.com"</span><span class="p">,</span>
</span><span id="__span-11-3"><a href="#__codelineno-11-3" id="__codelineno-11-3" name="__codelineno-11-3"></a><span class="w">  </span><span class="nt">"sub"</span><span class="p">:</span><span class="w"> </span><span class="s2">"repo:myorg/myrepo:ref:refs/heads/main"</span><span class="p">,</span>
</span><span id="__span-11-4"><a href="#__codelineno-11-4" id="__codelineno-11-4" name="__codelineno-11-4"></a><span class="w">  </span><span class="nt">"aud"</span><span class="p">:</span><span class="w"> </span><span class="s2">"api://AzureADTokenExchange"</span><span class="p">,</span>
</span><span id="__span-11-5"><a href="#__codelineno-11-5" id="__codelineno-11-5" name="__codelineno-11-5"></a><span class="w">  </span><span class="nt">"ref"</span><span class="p">:</span><span class="w"> </span><span class="s2">"refs/heads/main"</span><span class="p">,</span>
</span><span id="__span-11-6"><a href="#__codelineno-11-6" id="__codelineno-11-6" name="__codelineno-11-6"></a><span class="w">  </span><span class="nt">"sha"</span><span class="p">:</span><span class="w"> </span><span class="s2">"abc123..."</span><span class="p">,</span>
</span><span id="__span-11-7"><a href="#__codelineno-11-7" id="__codelineno-11-7" name="__codelineno-11-7"></a><span class="w">  </span><span class="nt">"repository"</span><span class="p">:</span><span class="w"> </span><span class="s2">"myorg/myrepo"</span><span class="p">,</span>
</span><span id="__span-11-8"><a href="#__codelineno-11-8" id="__codelineno-11-8" name="__codelineno-11-8"></a><span class="w">  </span><span class="nt">"repository_owner"</span><span class="p">:</span><span class="w"> </span><span class="s2">"myorg"</span><span class="p">,</span>
</span><span id="__span-11-9"><a href="#__codelineno-11-9" id="__codelineno-11-9" name="__codelineno-11-9"></a><span class="w">  </span><span class="nt">"run_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"123456789"</span><span class="p">,</span>
</span><span id="__span-11-10"><a href="#__codelineno-11-10" id="__codelineno-11-10" name="__codelineno-11-10"></a><span class="w">  </span><span class="nt">"workflow"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Deploy to Azure"</span>
</span><span id="__span-11-11"><a href="#__codelineno-11-11" id="__codelineno-11-11" name="__codelineno-11-11"></a><span class="p">}</span>
</span></code></pre></div>
<h3 id="buenas-practicas"><a class="toclink" href="../../2025/02/13/github-actions-deploy-a-azure-con-workload-identity-federation/#buenas-practicas">Buenas prÃ¡cticas</a></h3>
<ul>
<li><strong>Usa environments</strong>: Requiere aprobaciones manuales para producciÃ³n</li>
<li><strong>Scope mÃ­nimo</strong>: Asigna roles solo al resource group necesario</li>
<li><strong>Multiple credentials</strong>: Diferentes para dev/staging/prod</li>
<li><strong>Branch protection</strong>: Solo permite deploy desde branches protegidos</li>
<li><strong>Audit logs</strong>: Revisa sign-in logs en Azure AD regularmente</li>
</ul>
<h3 id="referencias"><a class="toclink" href="../../2025/02/13/github-actions-deploy-a-azure-con-workload-identity-federation/#referencias">Referencias</a></h3>
<ul>
<li><a href="https://learn.microsoft.com/en-us/entra/workload-id/workload-identity-federation">Workload identity federation</a></li>
<li><a href="https://docs.github.com/en/actions/deployment/security-hardening-your-deployments/configuring-openid-connect-in-azure">GitHub Actions OIDC with Azure</a></li>
</ul>
</div>
</article>
<article class="md-post md-post--excerpt">
<header class="md-post__header">
<nav class="md-post__authors md-typeset">
<span class="md-author">
<img alt="Rafael FernÃ¡ndez" src="https://avatars.githubusercontent.com/u/39990341">
</span>
</nav>
<div class="md-post__meta md-meta">
<ul class="md-meta__list">
<li class="md-meta__item">
<time datetime="2025-01-12 00:00:00+00:00">January 12, 2025</time></li>
<li class="md-meta__item">
            in
            
              <a class="md-meta__link" href="./">DevOps</a></li>
<li class="md-meta__item">
            
              3 min read
            
          </li>
</ul>
</div>
</header>
<div class="md-post__content md-typeset">
<h2 id="terraform-backend-en-azure-storage-setup-completo"><a class="toclink" href="../../2025/01/12/terraform-backend-en-azure-storage-setup-completo/">Terraform Backend en Azure Storage: Setup completo</a></h2>
<h3 id="resumen"><a class="toclink" href="../../2025/01/12/terraform-backend-en-azure-storage-setup-completo/#resumen">Resumen</a></h3>
<p>Guardar el estado de Terraform en local es peligroso y no escala. Azure Storage con state locking es la soluciÃ³n estÃ¡ndar para equipos. AquÃ­ el setup completo en 5 minutos.</p>
<h3 id="por-que-usar-remote-backend"><a class="toclink" href="../../2025/01/12/terraform-backend-en-azure-storage-setup-completo/#por-que-usar-remote-backend">Â¿Por quÃ© usar remote backend?</a></h3>
<p><strong>Problemas con backend local:</strong>
- â Estado se pierde si borras tu laptop
- â Imposible colaborar en equipo
- â No hay locking â corrupciones en despliegues simultÃ¡neos
- â Secretos en plaintext en disco local</p>
<p><strong>Ventajas con Azure Storage:</strong>
- â Estado centralizado y versionado
- â Locking automÃ¡tico con blob lease
- â EncriptaciÃ³n at-rest
- â Acceso controlado con RBAC</p>
<h3 id="setup-del-backend"><a class="toclink" href="../../2025/01/12/terraform-backend-en-azure-storage-setup-completo/#setup-del-backend">Setup del backend</a></h3>
<h4 id="1-crear-storage-account"><a class="toclink" href="../../2025/01/12/terraform-backend-en-azure-storage-setup-completo/#1-crear-storage-account">1. Crear Storage Account</a></h4>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-13-1"><a href="#__codelineno-13-1" id="__codelineno-13-1" name="__codelineno-13-1"></a><span class="c1"># Variables</span>
</span><span id="__span-13-2"><a href="#__codelineno-13-2" id="__codelineno-13-2" name="__codelineno-13-2"></a><span class="nv">RG</span><span class="o">=</span><span class="s2">"terraform-state-rg"</span>
</span><span id="__span-13-3"><a href="#__codelineno-13-3" id="__codelineno-13-3" name="__codelineno-13-3"></a><span class="nv">LOCATION</span><span class="o">=</span><span class="s2">"westeurope"</span>
</span><span id="__span-13-4"><a href="#__codelineno-13-4" id="__codelineno-13-4" name="__codelineno-13-4"></a><span class="nv">STORAGE_ACCOUNT</span><span class="o">=</span><span class="s2">"tfstate</span><span class="k">$(</span>date<span class="w"> </span>+%s<span class="k">)</span><span class="s2">"</span><span class="w">  </span><span class="c1"># Nombre Ãºnico</span>
</span><span id="__span-13-5"><a href="#__codelineno-13-5" id="__codelineno-13-5" name="__codelineno-13-5"></a><span class="nv">CONTAINER</span><span class="o">=</span><span class="s2">"tfstate"</span>
</span><span id="__span-13-6"><a href="#__codelineno-13-6" id="__codelineno-13-6" name="__codelineno-13-6"></a>
</span><span id="__span-13-7"><a href="#__codelineno-13-7" id="__codelineno-13-7" name="__codelineno-13-7"></a><span class="c1"># Crear resource group</span>
</span><span id="__span-13-8"><a href="#__codelineno-13-8" id="__codelineno-13-8" name="__codelineno-13-8"></a>az<span class="w"> </span>group<span class="w"> </span>create<span class="w"> </span><span class="se">\</span>
</span><span id="__span-13-9"><a href="#__codelineno-13-9" id="__codelineno-13-9" name="__codelineno-13-9"></a><span class="w">  </span>--name<span class="w"> </span><span class="nv">$RG</span><span class="w"> </span><span class="se">\</span>
</span><span id="__span-13-10"><a href="#__codelineno-13-10" id="__codelineno-13-10" name="__codelineno-13-10"></a><span class="w">  </span>--location<span class="w"> </span><span class="nv">$LOCATION</span>
</span><span id="__span-13-11"><a href="#__codelineno-13-11" id="__codelineno-13-11" name="__codelineno-13-11"></a>
</span><span id="__span-13-12"><a href="#__codelineno-13-12" id="__codelineno-13-12" name="__codelineno-13-12"></a><span class="c1"># Crear storage account</span>
</span><span id="__span-13-13"><a href="#__codelineno-13-13" id="__codelineno-13-13" name="__codelineno-13-13"></a>az<span class="w"> </span>storage<span class="w"> </span>account<span class="w"> </span>create<span class="w"> </span><span class="se">\</span>
</span><span id="__span-13-14"><a href="#__codelineno-13-14" id="__codelineno-13-14" name="__codelineno-13-14"></a><span class="w">  </span>--name<span class="w"> </span><span class="nv">$STORAGE_ACCOUNT</span><span class="w"> </span><span class="se">\</span>
</span><span id="__span-13-15"><a href="#__codelineno-13-15" id="__codelineno-13-15" name="__codelineno-13-15"></a><span class="w">  </span>--resource-group<span class="w"> </span><span class="nv">$RG</span><span class="w"> </span><span class="se">\</span>
</span><span id="__span-13-16"><a href="#__codelineno-13-16" id="__codelineno-13-16" name="__codelineno-13-16"></a><span class="w">  </span>--location<span class="w"> </span><span class="nv">$LOCATION</span><span class="w"> </span><span class="se">\</span>
</span><span id="__span-13-17"><a href="#__codelineno-13-17" id="__codelineno-13-17" name="__codelineno-13-17"></a><span class="w">  </span>--sku<span class="w"> </span>Standard_LRS<span class="w"> </span><span class="se">\</span>
</span><span id="__span-13-18"><a href="#__codelineno-13-18" id="__codelineno-13-18" name="__codelineno-13-18"></a><span class="w">  </span>--encryption-services<span class="w"> </span>blob<span class="w"> </span><span class="se">\</span>
</span><span id="__span-13-19"><a href="#__codelineno-13-19" id="__codelineno-13-19" name="__codelineno-13-19"></a><span class="w">  </span>--min-tls-version<span class="w"> </span>TLS1_2
</span><span id="__span-13-20"><a href="#__codelineno-13-20" id="__codelineno-13-20" name="__codelineno-13-20"></a>
</span><span id="__span-13-21"><a href="#__codelineno-13-21" id="__codelineno-13-21" name="__codelineno-13-21"></a><span class="c1"># Crear container</span>
</span><span id="__span-13-22"><a href="#__codelineno-13-22" id="__codelineno-13-22" name="__codelineno-13-22"></a>az<span class="w"> </span>storage<span class="w"> </span>container<span class="w"> </span>create<span class="w"> </span><span class="se">\</span>
</span><span id="__span-13-23"><a href="#__codelineno-13-23" id="__codelineno-13-23" name="__codelineno-13-23"></a><span class="w">  </span>--name<span class="w"> </span><span class="nv">$CONTAINER</span><span class="w"> </span><span class="se">\</span>
</span><span id="__span-13-24"><a href="#__codelineno-13-24" id="__codelineno-13-24" name="__codelineno-13-24"></a><span class="w">  </span>--account-name<span class="w"> </span><span class="nv">$STORAGE_ACCOUNT</span><span class="w"> </span><span class="se">\</span>
</span><span id="__span-13-25"><a href="#__codelineno-13-25" id="__codelineno-13-25" name="__codelineno-13-25"></a><span class="w">  </span>--auth-mode<span class="w"> </span>login
</span></code></pre></div>
<div class="admonition tip">
<p class="admonition-title">Naming convention</p>
<p>Storage account solo acepta lowercase y nÃºmeros, mÃ¡ximo 24 caracteres. Usa un sufijo Ãºnico para evitar colisiones.</p>
</div>
<h4 id="2-configurar-backend-en-terraform"><a class="toclink" href="../../2025/01/12/terraform-backend-en-azure-storage-setup-completo/#2-configurar-backend-en-terraform">2. Configurar backend en Terraform</a></h4>
<p><code>backend.tf</code>:</p>
<div class="language-hcl highlight"><pre><span></span><code><span id="__span-14-1"><a href="#__codelineno-14-1" id="__codelineno-14-1" name="__codelineno-14-1"></a><span class="nb">terraform</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-14-2"><a href="#__codelineno-14-2" id="__codelineno-14-2" name="__codelineno-14-2"></a><span class="w">  </span><span class="kr">backend</span><span class="w"> </span><span class="nv">"azurerm"</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-14-3"><a href="#__codelineno-14-3" id="__codelineno-14-3" name="__codelineno-14-3"></a><span class="w">    </span><span class="na">resource_group_name</span><span class="w">  </span><span class="o">=</span><span class="w"> </span><span class="s2">"terraform-state-rg"</span>
</span><span id="__span-14-4"><a href="#__codelineno-14-4" id="__codelineno-14-4" name="__codelineno-14-4"></a><span class="w">    </span><span class="na">storage_account_name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"tfstate1234567890"</span>
</span><span id="__span-14-5"><a href="#__codelineno-14-5" id="__codelineno-14-5" name="__codelineno-14-5"></a><span class="w">    </span><span class="na">container_name</span><span class="w">       </span><span class="o">=</span><span class="w"> </span><span class="s2">"tfstate"</span>
</span><span id="__span-14-6"><a href="#__codelineno-14-6" id="__codelineno-14-6" name="__codelineno-14-6"></a><span class="w">    </span><span class="na">key</span><span class="w">                  </span><span class="o">=</span><span class="w"> </span><span class="s2">"prod.terraform.tfstate"</span>
</span><span id="__span-14-7"><a href="#__codelineno-14-7" id="__codelineno-14-7" name="__codelineno-14-7"></a><span class="w">  </span><span class="p">}</span>
</span><span id="__span-14-8"><a href="#__codelineno-14-8" id="__codelineno-14-8" name="__codelineno-14-8"></a><span class="p">}</span>
</span></code></pre></div>
<h4 id="3-inicializar"><a class="toclink" href="../../2025/01/12/terraform-backend-en-azure-storage-setup-completo/#3-inicializar">3. Inicializar</a></h4>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-15-1"><a href="#__codelineno-15-1" id="__codelineno-15-1" name="__codelineno-15-1"></a><span class="c1"># Login a Azure</span>
</span><span id="__span-15-2"><a href="#__codelineno-15-2" id="__codelineno-15-2" name="__codelineno-15-2"></a>az<span class="w"> </span>login
</span><span id="__span-15-3"><a href="#__codelineno-15-3" id="__codelineno-15-3" name="__codelineno-15-3"></a>
</span><span id="__span-15-4"><a href="#__codelineno-15-4" id="__codelineno-15-4" name="__codelineno-15-4"></a><span class="c1"># Inicializar backend</span>
</span><span id="__span-15-5"><a href="#__codelineno-15-5" id="__codelineno-15-5" name="__codelineno-15-5"></a>terraform<span class="w"> </span>init
</span><span id="__span-15-6"><a href="#__codelineno-15-6" id="__codelineno-15-6" name="__codelineno-15-6"></a>
</span><span id="__span-15-7"><a href="#__codelineno-15-7" id="__codelineno-15-7" name="__codelineno-15-7"></a><span class="c1"># Migrar estado existente (si aplica)</span>
</span><span id="__span-15-8"><a href="#__codelineno-15-8" id="__codelineno-15-8" name="__codelineno-15-8"></a>terraform<span class="w"> </span>init<span class="w"> </span>-migrate-state
</span></code></pre></div>
<h3 id="state-locking"><a class="toclink" href="../../2025/01/12/terraform-backend-en-azure-storage-setup-completo/#state-locking">State locking</a></h3>
<p>Azure usa blob leases para locking automÃ¡tico:</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-16-1"><a href="#__codelineno-16-1" id="__codelineno-16-1" name="__codelineno-16-1"></a><span class="c1"># Ver si hay lock activo</span>
</span><span id="__span-16-2"><a href="#__codelineno-16-2" id="__codelineno-16-2" name="__codelineno-16-2"></a>az<span class="w"> </span>storage<span class="w"> </span>blob<span class="w"> </span>show<span class="w"> </span><span class="se">\</span>
</span><span id="__span-16-3"><a href="#__codelineno-16-3" id="__codelineno-16-3" name="__codelineno-16-3"></a><span class="w">  </span>--container-name<span class="w"> </span><span class="nv">$CONTAINER</span><span class="w"> </span><span class="se">\</span>
</span><span id="__span-16-4"><a href="#__codelineno-16-4" id="__codelineno-16-4" name="__codelineno-16-4"></a><span class="w">  </span>--name<span class="w"> </span>prod.terraform.tfstate<span class="w"> </span><span class="se">\</span>
</span><span id="__span-16-5"><a href="#__codelineno-16-5" id="__codelineno-16-5" name="__codelineno-16-5"></a><span class="w">  </span>--account-name<span class="w"> </span><span class="nv">$STORAGE_ACCOUNT</span><span class="w"> </span><span class="se">\</span>
</span><span id="__span-16-6"><a href="#__codelineno-16-6" id="__codelineno-16-6" name="__codelineno-16-6"></a><span class="w">  </span>--query<span class="w"> </span><span class="s2">"properties.lease.status"</span>
</span></code></pre></div>
<p>Si alguien estÃ¡ ejecutando <code>terraform apply</code>, verÃ¡s:</p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-17-1"><a href="#__codelineno-17-1" id="__codelineno-17-1" name="__codelineno-17-1"></a>"locked"
</span></code></pre></div>
<h3 id="multi-entorno-con-workspaces"><a class="toclink" href="../../2025/01/12/terraform-backend-en-azure-storage-setup-completo/#multi-entorno-con-workspaces">Multi-entorno con workspaces</a></h3>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-18-1"><a href="#__codelineno-18-1" id="__codelineno-18-1" name="__codelineno-18-1"></a><span class="c1"># Crear workspace por entorno</span>
</span><span id="__span-18-2"><a href="#__codelineno-18-2" id="__codelineno-18-2" name="__codelineno-18-2"></a>terraform<span class="w"> </span>workspace<span class="w"> </span>new<span class="w"> </span>dev
</span><span id="__span-18-3"><a href="#__codelineno-18-3" id="__codelineno-18-3" name="__codelineno-18-3"></a>terraform<span class="w"> </span>workspace<span class="w"> </span>new<span class="w"> </span>staging<span class="w">  </span>
</span><span id="__span-18-4"><a href="#__codelineno-18-4" id="__codelineno-18-4" name="__codelineno-18-4"></a>terraform<span class="w"> </span>workspace<span class="w"> </span>new<span class="w"> </span>prod
</span><span id="__span-18-5"><a href="#__codelineno-18-5" id="__codelineno-18-5" name="__codelineno-18-5"></a>
</span><span id="__span-18-6"><a href="#__codelineno-18-6" id="__codelineno-18-6" name="__codelineno-18-6"></a><span class="c1"># Listar workspaces</span>
</span><span id="__span-18-7"><a href="#__codelineno-18-7" id="__codelineno-18-7" name="__codelineno-18-7"></a>terraform<span class="w"> </span>workspace<span class="w"> </span>list
</span><span id="__span-18-8"><a href="#__codelineno-18-8" id="__codelineno-18-8" name="__codelineno-18-8"></a>
</span><span id="__span-18-9"><a href="#__codelineno-18-9" id="__codelineno-18-9" name="__codelineno-18-9"></a><span class="c1"># Cambiar entre entornos</span>
</span><span id="__span-18-10"><a href="#__codelineno-18-10" id="__codelineno-18-10" name="__codelineno-18-10"></a>terraform<span class="w"> </span>workspace<span class="w"> </span><span class="k">select</span><span class="w"> </span>prod
</span></code></pre></div>
<p>Cada workspace crea su propio state file:
</p><div class="language-text highlight"><pre><span></span><code><span id="__span-19-1"><a href="#__codelineno-19-1" id="__codelineno-19-1" name="__codelineno-19-1"></a>prod.terraform.tfstate
</span><span id="__span-19-2"><a href="#__codelineno-19-2" id="__codelineno-19-2" name="__codelineno-19-2"></a>dev.terraform.tfstate
</span><span id="__span-19-3"><a href="#__codelineno-19-3" id="__codelineno-19-3" name="__codelineno-19-3"></a>staging.terraform.tfstate
</span></code></pre></div><p></p>
<h3 id="seguridad-managed-identity"><a class="toclink" href="../../2025/01/12/terraform-backend-en-azure-storage-setup-completo/#seguridad-managed-identity">Seguridad: Managed Identity</a></h3>
<p>Evita usar access keys en pipelines:</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-20-1"><a href="#__codelineno-20-1" id="__codelineno-20-1" name="__codelineno-20-1"></a><span class="c1"># Crear managed identity</span>
</span><span id="__span-20-2"><a href="#__codelineno-20-2" id="__codelineno-20-2" name="__codelineno-20-2"></a>az<span class="w"> </span>identity<span class="w"> </span>create<span class="w"> </span><span class="se">\</span>
</span><span id="__span-20-3"><a href="#__codelineno-20-3" id="__codelineno-20-3" name="__codelineno-20-3"></a><span class="w">  </span>--resource-group<span class="w"> </span><span class="nv">$RG</span><span class="w"> </span><span class="se">\</span>
</span><span id="__span-20-4"><a href="#__codelineno-20-4" id="__codelineno-20-4" name="__codelineno-20-4"></a><span class="w">  </span>--name<span class="w"> </span>terraform-identity
</span><span id="__span-20-5"><a href="#__codelineno-20-5" id="__codelineno-20-5" name="__codelineno-20-5"></a>
</span><span id="__span-20-6"><a href="#__codelineno-20-6" id="__codelineno-20-6" name="__codelineno-20-6"></a><span class="c1"># Asignar rol Storage Blob Data Contributor</span>
</span><span id="__span-20-7"><a href="#__codelineno-20-7" id="__codelineno-20-7" name="__codelineno-20-7"></a><span class="nv">IDENTITY_ID</span><span class="o">=</span><span class="k">$(</span>az<span class="w"> </span>identity<span class="w"> </span>show<span class="w"> </span><span class="se">\</span>
</span><span id="__span-20-8"><a href="#__codelineno-20-8" id="__codelineno-20-8" name="__codelineno-20-8"></a><span class="w">  </span>--resource-group<span class="w"> </span><span class="nv">$RG</span><span class="w"> </span><span class="se">\</span>
</span><span id="__span-20-9"><a href="#__codelineno-20-9" id="__codelineno-20-9" name="__codelineno-20-9"></a><span class="w">  </span>--name<span class="w"> </span>terraform-identity<span class="w"> </span><span class="se">\</span>
</span><span id="__span-20-10"><a href="#__codelineno-20-10" id="__codelineno-20-10" name="__codelineno-20-10"></a><span class="w">  </span>--query<span class="w"> </span>principalId<span class="w"> </span>-o<span class="w"> </span>tsv<span class="k">)</span>
</span><span id="__span-20-11"><a href="#__codelineno-20-11" id="__codelineno-20-11" name="__codelineno-20-11"></a>
</span><span id="__span-20-12"><a href="#__codelineno-20-12" id="__codelineno-20-12" name="__codelineno-20-12"></a>az<span class="w"> </span>role<span class="w"> </span>assignment<span class="w"> </span>create<span class="w"> </span><span class="se">\</span>
</span><span id="__span-20-13"><a href="#__codelineno-20-13" id="__codelineno-20-13" name="__codelineno-20-13"></a><span class="w">  </span>--role<span class="w"> </span><span class="s2">"Storage Blob Data Contributor"</span><span class="w"> </span><span class="se">\</span>
</span><span id="__span-20-14"><a href="#__codelineno-20-14" id="__codelineno-20-14" name="__codelineno-20-14"></a><span class="w">  </span>--assignee<span class="w"> </span><span class="nv">$IDENTITY_ID</span><span class="w"> </span><span class="se">\</span>
</span><span id="__span-20-15"><a href="#__codelineno-20-15" id="__codelineno-20-15" name="__codelineno-20-15"></a><span class="w">  </span>--scope<span class="w"> </span>/subscriptions/<span class="o">{</span>sub-id<span class="o">}</span>/resourceGroups/<span class="nv">$RG</span>/providers/Microsoft.Storage/storageAccounts/<span class="nv">$STORAGE_ACCOUNT</span>
</span></code></pre></div>
<p>Backend config con managed identity:</p>
<div class="language-hcl highlight"><pre><span></span><code><span id="__span-21-1"><a href="#__codelineno-21-1" id="__codelineno-21-1" name="__codelineno-21-1"></a><span class="nb">terraform</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-21-2"><a href="#__codelineno-21-2" id="__codelineno-21-2" name="__codelineno-21-2"></a><span class="w">  </span><span class="kr">backend</span><span class="w"> </span><span class="nv">"azurerm"</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-21-3"><a href="#__codelineno-21-3" id="__codelineno-21-3" name="__codelineno-21-3"></a><span class="w">    </span><span class="na">resource_group_name</span><span class="w">  </span><span class="o">=</span><span class="w"> </span><span class="s2">"terraform-state-rg"</span>
</span><span id="__span-21-4"><a href="#__codelineno-21-4" id="__codelineno-21-4" name="__codelineno-21-4"></a><span class="w">    </span><span class="na">storage_account_name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"tfstate1234567890"</span>
</span><span id="__span-21-5"><a href="#__codelineno-21-5" id="__codelineno-21-5" name="__codelineno-21-5"></a><span class="w">    </span><span class="na">container_name</span><span class="w">       </span><span class="o">=</span><span class="w"> </span><span class="s2">"tfstate"</span>
</span><span id="__span-21-6"><a href="#__codelineno-21-6" id="__codelineno-21-6" name="__codelineno-21-6"></a><span class="w">    </span><span class="na">key</span><span class="w">                  </span><span class="o">=</span><span class="w"> </span><span class="s2">"prod.terraform.tfstate"</span>
</span><span id="__span-21-7"><a href="#__codelineno-21-7" id="__codelineno-21-7" name="__codelineno-21-7"></a><span class="w">    </span><span class="na">use_msi</span><span class="w">              </span><span class="o">=</span><span class="w"> </span><span class="no">true</span>
</span><span id="__span-21-8"><a href="#__codelineno-21-8" id="__codelineno-21-8" name="__codelineno-21-8"></a><span class="w">    </span><span class="na">subscription_id</span><span class="w">      </span><span class="o">=</span><span class="w"> </span><span class="s2">"00000000-0000-0000-0000-000000000000"</span>
</span><span id="__span-21-9"><a href="#__codelineno-21-9" id="__codelineno-21-9" name="__codelineno-21-9"></a><span class="w">    </span><span class="na">tenant_id</span><span class="w">            </span><span class="o">=</span><span class="w"> </span><span class="s2">"00000000-0000-0000-0000-000000000000"</span>
</span><span id="__span-21-10"><a href="#__codelineno-21-10" id="__codelineno-21-10" name="__codelineno-21-10"></a><span class="w">  </span><span class="p">}</span>
</span><span id="__span-21-11"><a href="#__codelineno-21-11" id="__codelineno-21-11" name="__codelineno-21-11"></a><span class="p">}</span>
</span></code></pre></div>
<h3 id="versionado-del-estado"><a class="toclink" href="../../2025/01/12/terraform-backend-en-azure-storage-setup-completo/#versionado-del-estado">Versionado del estado</a></h3>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-22-1"><a href="#__codelineno-22-1" id="__codelineno-22-1" name="__codelineno-22-1"></a><span class="c1"># Habilitar versioning en el container</span>
</span><span id="__span-22-2"><a href="#__codelineno-22-2" id="__codelineno-22-2" name="__codelineno-22-2"></a>az<span class="w"> </span>storage<span class="w"> </span>blob<span class="w"> </span>service-properties<span class="w"> </span>update<span class="w"> </span><span class="se">\</span>
</span><span id="__span-22-3"><a href="#__codelineno-22-3" id="__codelineno-22-3" name="__codelineno-22-3"></a><span class="w">  </span>--account-name<span class="w"> </span><span class="nv">$STORAGE_ACCOUNT</span><span class="w"> </span><span class="se">\</span>
</span><span id="__span-22-4"><a href="#__codelineno-22-4" id="__codelineno-22-4" name="__codelineno-22-4"></a><span class="w">  </span>--enable-versioning<span class="w"> </span><span class="nb">true</span>
</span><span id="__span-22-5"><a href="#__codelineno-22-5" id="__codelineno-22-5" name="__codelineno-22-5"></a>
</span><span id="__span-22-6"><a href="#__codelineno-22-6" id="__codelineno-22-6" name="__codelineno-22-6"></a><span class="c1"># Ver versiones anteriores</span>
</span><span id="__span-22-7"><a href="#__codelineno-22-7" id="__codelineno-22-7" name="__codelineno-22-7"></a>az<span class="w"> </span>storage<span class="w"> </span>blob<span class="w"> </span>list<span class="w"> </span><span class="se">\</span>
</span><span id="__span-22-8"><a href="#__codelineno-22-8" id="__codelineno-22-8" name="__codelineno-22-8"></a><span class="w">  </span>--container-name<span class="w"> </span><span class="nv">$CONTAINER</span><span class="w"> </span><span class="se">\</span>
</span><span id="__span-22-9"><a href="#__codelineno-22-9" id="__codelineno-22-9" name="__codelineno-22-9"></a><span class="w">  </span>--account-name<span class="w"> </span><span class="nv">$STORAGE_ACCOUNT</span><span class="w"> </span><span class="se">\</span>
</span><span id="__span-22-10"><a href="#__codelineno-22-10" id="__codelineno-22-10" name="__codelineno-22-10"></a><span class="w">  </span>--include<span class="w"> </span>v<span class="w"> </span><span class="se">\</span>
</span><span id="__span-22-11"><a href="#__codelineno-22-11" id="__codelineno-22-11" name="__codelineno-22-11"></a><span class="w">  </span>--query<span class="w"> </span><span class="s2">"[?name=='prod.terraform.tfstate'].{Version:versionId, LastModified:properties.lastModified}"</span>
</span></code></pre></div>
<h3 id="pipeline-cicd-con-azure-devops"><a class="toclink" href="../../2025/01/12/terraform-backend-en-azure-storage-setup-completo/#pipeline-cicd-con-azure-devops">Pipeline CI/CD con Azure DevOps</a></h3>
<p><code>azure-pipelines.yml</code>:</p>
<div class="language-yaml highlight"><pre><span></span><code><span id="__span-23-1"><a href="#__codelineno-23-1" id="__codelineno-23-1" name="__codelineno-23-1"></a><span class="nt">trigger</span><span class="p">:</span>
</span><span id="__span-23-2"><a href="#__codelineno-23-2" id="__codelineno-23-2" name="__codelineno-23-2"></a><span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">main</span>
</span><span id="__span-23-3"><a href="#__codelineno-23-3" id="__codelineno-23-3" name="__codelineno-23-3"></a>
</span><span id="__span-23-4"><a href="#__codelineno-23-4" id="__codelineno-23-4" name="__codelineno-23-4"></a><span class="nt">pool</span><span class="p">:</span>
</span><span id="__span-23-5"><a href="#__codelineno-23-5" id="__codelineno-23-5" name="__codelineno-23-5"></a><span class="w">  </span><span class="nt">vmImage</span><span class="p">:</span><span class="w"> </span><span class="s">'ubuntu-latest'</span>
</span><span id="__span-23-6"><a href="#__codelineno-23-6" id="__codelineno-23-6" name="__codelineno-23-6"></a>
</span><span id="__span-23-7"><a href="#__codelineno-23-7" id="__codelineno-23-7" name="__codelineno-23-7"></a><span class="nt">variables</span><span class="p">:</span>
</span><span id="__span-23-8"><a href="#__codelineno-23-8" id="__codelineno-23-8" name="__codelineno-23-8"></a><span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">group</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">terraform-variables</span>
</span><span id="__span-23-9"><a href="#__codelineno-23-9" id="__codelineno-23-9" name="__codelineno-23-9"></a>
</span><span id="__span-23-10"><a href="#__codelineno-23-10" id="__codelineno-23-10" name="__codelineno-23-10"></a><span class="nt">stages</span><span class="p">:</span>
</span><span id="__span-23-11"><a href="#__codelineno-23-11" id="__codelineno-23-11" name="__codelineno-23-11"></a><span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">stage</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Plan</span>
</span><span id="__span-23-12"><a href="#__codelineno-23-12" id="__codelineno-23-12" name="__codelineno-23-12"></a><span class="w">    </span><span class="nt">jobs</span><span class="p">:</span>
</span><span id="__span-23-13"><a href="#__codelineno-23-13" id="__codelineno-23-13" name="__codelineno-23-13"></a><span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">job</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">TerraformPlan</span>
</span><span id="__span-23-14"><a href="#__codelineno-23-14" id="__codelineno-23-14" name="__codelineno-23-14"></a><span class="w">        </span><span class="nt">steps</span><span class="p">:</span>
</span><span id="__span-23-15"><a href="#__codelineno-23-15" id="__codelineno-23-15" name="__codelineno-23-15"></a><span class="w">          </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">task</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">AzureCLI@2</span>
</span><span id="__span-23-16"><a href="#__codelineno-23-16" id="__codelineno-23-16" name="__codelineno-23-16"></a><span class="w">            </span><span class="nt">displayName</span><span class="p">:</span><span class="w"> </span><span class="s">'Terraform</span><span class="nv"> </span><span class="s">Init</span><span class="nv"> </span><span class="s">&amp;</span><span class="nv"> </span><span class="s">Plan'</span>
</span><span id="__span-23-17"><a href="#__codelineno-23-17" id="__codelineno-23-17" name="__codelineno-23-17"></a><span class="w">            </span><span class="nt">inputs</span><span class="p">:</span>
</span><span id="__span-23-18"><a href="#__codelineno-23-18" id="__codelineno-23-18" name="__codelineno-23-18"></a><span class="w">              </span><span class="nt">azureSubscription</span><span class="p">:</span><span class="w"> </span><span class="s">'Azure</span><span class="nv"> </span><span class="s">Service</span><span class="nv"> </span><span class="s">Connection'</span>
</span><span id="__span-23-19"><a href="#__codelineno-23-19" id="__codelineno-23-19" name="__codelineno-23-19"></a><span class="w">              </span><span class="nt">scriptType</span><span class="p">:</span><span class="w"> </span><span class="s">'bash'</span>
</span><span id="__span-23-20"><a href="#__codelineno-23-20" id="__codelineno-23-20" name="__codelineno-23-20"></a><span class="w">              </span><span class="nt">scriptLocation</span><span class="p">:</span><span class="w"> </span><span class="s">'inlineScript'</span>
</span><span id="__span-23-21"><a href="#__codelineno-23-21" id="__codelineno-23-21" name="__codelineno-23-21"></a><span class="w">              </span><span class="nt">inlineScript</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">|</span>
</span><span id="__span-23-22"><a href="#__codelineno-23-22" id="__codelineno-23-22" name="__codelineno-23-22"></a><span class="w">                </span><span class="no">terraform init</span>
</span><span id="__span-23-23"><a href="#__codelineno-23-23" id="__codelineno-23-23" name="__codelineno-23-23"></a><span class="w">                </span><span class="no">terraform plan -out=tfplan</span>
</span><span id="__span-23-24"><a href="#__codelineno-23-24" id="__codelineno-23-24" name="__codelineno-23-24"></a>
</span><span id="__span-23-25"><a href="#__codelineno-23-25" id="__codelineno-23-25" name="__codelineno-23-25"></a><span class="w">          </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">publish</span><span class="p">:</span><span class="w"> </span><span class="s">'$(System.DefaultWorkingDirectory)/tfplan'</span>
</span><span id="__span-23-26"><a href="#__codelineno-23-26" id="__codelineno-23-26" name="__codelineno-23-26"></a><span class="w">            </span><span class="nt">artifact</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">tfplan</span>
</span><span id="__span-23-27"><a href="#__codelineno-23-27" id="__codelineno-23-27" name="__codelineno-23-27"></a>
</span><span id="__span-23-28"><a href="#__codelineno-23-28" id="__codelineno-23-28" name="__codelineno-23-28"></a><span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">stage</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Apply</span>
</span><span id="__span-23-29"><a href="#__codelineno-23-29" id="__codelineno-23-29" name="__codelineno-23-29"></a><span class="w">    </span><span class="nt">dependsOn</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Plan</span>
</span><span id="__span-23-30"><a href="#__codelineno-23-30" id="__codelineno-23-30" name="__codelineno-23-30"></a><span class="w">    </span><span class="nt">condition</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">succeeded()</span>
</span><span id="__span-23-31"><a href="#__codelineno-23-31" id="__codelineno-23-31" name="__codelineno-23-31"></a><span class="w">    </span><span class="nt">jobs</span><span class="p">:</span>
</span><span id="__span-23-32"><a href="#__codelineno-23-32" id="__codelineno-23-32" name="__codelineno-23-32"></a><span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">deployment</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">TerraformApply</span>
</span><span id="__span-23-33"><a href="#__codelineno-23-33" id="__codelineno-23-33" name="__codelineno-23-33"></a><span class="w">        </span><span class="nt">environment</span><span class="p">:</span><span class="w"> </span><span class="s">'production'</span>
</span><span id="__span-23-34"><a href="#__codelineno-23-34" id="__codelineno-23-34" name="__codelineno-23-34"></a><span class="w">        </span><span class="nt">strategy</span><span class="p">:</span>
</span><span id="__span-23-35"><a href="#__codelineno-23-35" id="__codelineno-23-35" name="__codelineno-23-35"></a><span class="w">          </span><span class="nt">runOnce</span><span class="p">:</span>
</span><span id="__span-23-36"><a href="#__codelineno-23-36" id="__codelineno-23-36" name="__codelineno-23-36"></a><span class="w">            </span><span class="nt">deploy</span><span class="p">:</span>
</span><span id="__span-23-37"><a href="#__codelineno-23-37" id="__codelineno-23-37" name="__codelineno-23-37"></a><span class="w">              </span><span class="nt">steps</span><span class="p">:</span>
</span><span id="__span-23-38"><a href="#__codelineno-23-38" id="__codelineno-23-38" name="__codelineno-23-38"></a><span class="w">                </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">download</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">current</span>
</span><span id="__span-23-39"><a href="#__codelineno-23-39" id="__codelineno-23-39" name="__codelineno-23-39"></a><span class="w">                  </span><span class="nt">artifact</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">tfplan</span>
</span><span id="__span-23-40"><a href="#__codelineno-23-40" id="__codelineno-23-40" name="__codelineno-23-40"></a>
</span><span id="__span-23-41"><a href="#__codelineno-23-41" id="__codelineno-23-41" name="__codelineno-23-41"></a><span class="w">                </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">task</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">AzureCLI@2</span>
</span><span id="__span-23-42"><a href="#__codelineno-23-42" id="__codelineno-23-42" name="__codelineno-23-42"></a><span class="w">                  </span><span class="nt">displayName</span><span class="p">:</span><span class="w"> </span><span class="s">'Terraform</span><span class="nv"> </span><span class="s">Apply'</span>
</span><span id="__span-23-43"><a href="#__codelineno-23-43" id="__codelineno-23-43" name="__codelineno-23-43"></a><span class="w">                  </span><span class="nt">inputs</span><span class="p">:</span>
</span><span id="__span-23-44"><a href="#__codelineno-23-44" id="__codelineno-23-44" name="__codelineno-23-44"></a><span class="w">                    </span><span class="nt">azureSubscription</span><span class="p">:</span><span class="w"> </span><span class="s">'Azure</span><span class="nv"> </span><span class="s">Service</span><span class="nv"> </span><span class="s">Connection'</span>
</span><span id="__span-23-45"><a href="#__codelineno-23-45" id="__codelineno-23-45" name="__codelineno-23-45"></a><span class="w">                    </span><span class="nt">scriptType</span><span class="p">:</span><span class="w"> </span><span class="s">'bash'</span>
</span><span id="__span-23-46"><a href="#__codelineno-23-46" id="__codelineno-23-46" name="__codelineno-23-46"></a><span class="w">                    </span><span class="nt">scriptLocation</span><span class="p">:</span><span class="w"> </span><span class="s">'inlineScript'</span>
</span><span id="__span-23-47"><a href="#__codelineno-23-47" id="__codelineno-23-47" name="__codelineno-23-47"></a><span class="w">                    </span><span class="nt">inlineScript</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">|</span>
</span><span id="__span-23-48"><a href="#__codelineno-23-48" id="__codelineno-23-48" name="__codelineno-23-48"></a><span class="w">                      </span><span class="no">terraform init</span>
</span><span id="__span-23-49"><a href="#__codelineno-23-49" id="__codelineno-23-49" name="__codelineno-23-49"></a><span class="w">                      </span><span class="no">terraform apply tfplan</span>
</span></code></pre></div>
<h3 id="troubleshooting"><a class="toclink" href="../../2025/01/12/terraform-backend-en-azure-storage-setup-completo/#troubleshooting">Troubleshooting</a></h3>
<p><strong>Error: "Failed to lock state"</strong></p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-24-1"><a href="#__codelineno-24-1" id="__codelineno-24-1" name="__codelineno-24-1"></a><span class="c1"># Forzar unlock (solo si estÃ¡s seguro)</span>
</span><span id="__span-24-2"><a href="#__codelineno-24-2" id="__codelineno-24-2" name="__codelineno-24-2"></a>terraform<span class="w"> </span>force-unlock<span class="w"> </span>&lt;LOCK_ID&gt;
</span><span id="__span-24-3"><a href="#__codelineno-24-3" id="__codelineno-24-3" name="__codelineno-24-3"></a>
</span><span id="__span-24-4"><a href="#__codelineno-24-4" id="__codelineno-24-4" name="__codelineno-24-4"></a><span class="c1"># O romper lease manualmente</span>
</span><span id="__span-24-5"><a href="#__codelineno-24-5" id="__codelineno-24-5" name="__codelineno-24-5"></a>az<span class="w"> </span>storage<span class="w"> </span>blob<span class="w"> </span>lease<span class="w"> </span><span class="k">break</span><span class="w"> </span><span class="se">\</span>
</span><span id="__span-24-6"><a href="#__codelineno-24-6" id="__codelineno-24-6" name="__codelineno-24-6"></a><span class="w">  </span>--container-name<span class="w"> </span><span class="nv">$CONTAINER</span><span class="w"> </span><span class="se">\</span>
</span><span id="__span-24-7"><a href="#__codelineno-24-7" id="__codelineno-24-7" name="__codelineno-24-7"></a><span class="w">  </span>--blob-name<span class="w"> </span>prod.terraform.tfstate<span class="w"> </span><span class="se">\</span>
</span><span id="__span-24-8"><a href="#__codelineno-24-8" id="__codelineno-24-8" name="__codelineno-24-8"></a><span class="w">  </span>--account-name<span class="w"> </span><span class="nv">$STORAGE_ACCOUNT</span>
</span></code></pre></div>
<p><strong>Error: "storage account not found"</strong></p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-25-1"><a href="#__codelineno-25-1" id="__codelineno-25-1" name="__codelineno-25-1"></a><span class="c1"># Verificar permisos</span>
</span><span id="__span-25-2"><a href="#__codelineno-25-2" id="__codelineno-25-2" name="__codelineno-25-2"></a>az<span class="w"> </span>storage<span class="w"> </span>account<span class="w"> </span>show<span class="w"> </span><span class="se">\</span>
</span><span id="__span-25-3"><a href="#__codelineno-25-3" id="__codelineno-25-3" name="__codelineno-25-3"></a><span class="w">  </span>--name<span class="w"> </span><span class="nv">$STORAGE_ACCOUNT</span><span class="w"> </span><span class="se">\</span>
</span><span id="__span-25-4"><a href="#__codelineno-25-4" id="__codelineno-25-4" name="__codelineno-25-4"></a><span class="w">  </span>--resource-group<span class="w"> </span><span class="nv">$RG</span>
</span></code></pre></div>
<h3 id="buenas-practicas"><a class="toclink" href="../../2025/01/12/terraform-backend-en-azure-storage-setup-completo/#buenas-practicas">Buenas prÃ¡cticas</a></h3>
<ul>
<li><strong>State file por proyecto</strong>: No mezcles infraestructuras diferentes</li>
<li><strong>Soft delete</strong>: Habilita soft delete en storage account</li>
<li><strong>Network security</strong>: Restringe acceso desde VNet especÃ­ficas</li>
<li><strong>Audit logs</strong>: Habilita diagnostic settings para compliance</li>
<li><strong>Backup externo</strong>: Exporta estados crÃ­ticos a otro storage account</li>
</ul>
<div class="admonition warning">
<p class="admonition-title">Never commit state files</p>
<p>AÃ±ade <code>*.tfstate*</code> a <code>.gitignore</code>. El state contiene secretos en plaintext.</p>
</div>
<h3 id="referencias"><a class="toclink" href="../../2025/01/12/terraform-backend-en-azure-storage-setup-completo/#referencias">Referencias</a></h3>
<ul>
<li><a href="https://learn.microsoft.com/en-us/azure/developer/terraform/store-state-in-azure-storage">Store Terraform state in Azure Storage</a></li>
<li><a href="https://developer.hashicorp.com/terraform/language/settings/backends/azurerm">Terraform azurerm backend</a></li>
</ul>
</div>
</article>
<article class="md-post md-post--excerpt">
<header class="md-post__header">
<nav class="md-post__authors md-typeset">
<span class="md-author">
<img alt="Rafael FernÃ¡ndez" src="https://avatars.githubusercontent.com/u/39990341">
</span>
</nav>
<div class="md-post__meta md-meta">
<ul class="md-meta__list">
<li class="md-meta__item">
<time datetime="2024-10-03 00:00:00+00:00">October 3, 2024</time></li>
<li class="md-meta__item">
            in
            
              <a class="md-meta__link" href="./">DevOps</a></li>
<li class="md-meta__item">
            
              2 min read
            
          </li>
</ul>
</div>
</header>
<div class="md-post__content md-typeset">
<h2 id="terraform-import-block"><a class="toclink" href="../../2024/10/03/terraform-import-block/">terraform import block</a></h2>
<p>Sometimes you need to import existing infrastructure into Terraform. This is useful when you have existing resources that you want to manage with Terraform, or when you want to migrate from another tool to Terraform.</p>
<p>Other times, you may need to import resources that were created outside of Terraform, such as manually created resources or resources created by another tool. For example: </p>
<p>"Error: unexpected status 409 (409 Conflict) with error: RoleDefinitionWithSameNameExists: A custom role with the same name already exists in this directory. Use a different name"</p>
<p>In my case, I had to import a custom role that was created outside of Terraform. Here's how I did it:</p>
<ol>
<li>Create a new Terraform configuration file for the resource you want to import. In my case, I created a new file called <code>custom_role.tf</code> with the following content:</li>
</ol>
<div class="language-hcl highlight"><pre><span></span><code><span id="__span-6-1"><a href="#__codelineno-6-1" id="__codelineno-6-1" name="__codelineno-6-1"></a><span class="kr">resource</span><span class="w"> </span><span class="nc">"azurerm_role_definition"</span><span class="w"> </span><span class="nv">"custom_role"</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-6-2"><a href="#__codelineno-6-2" id="__codelineno-6-2" name="__codelineno-6-2"></a><span class="w">  </span><span class="na">name</span><span class="w">        </span><span class="o">=</span><span class="w"> </span><span class="s2">"CustomRole"</span>
</span><span id="__span-6-3"><a href="#__codelineno-6-3" id="__codelineno-6-3" name="__codelineno-6-3"></a><span class="w">  </span><span class="na">scope</span><span class="w">       </span><span class="o">=</span><span class="w"> </span><span class="s2">"/providers/Microsoft.Management/managementGroups/00000000-0000-0000-0000-000000000000"</span>
</span><span id="__span-6-4"><a href="#__codelineno-6-4" id="__codelineno-6-4" name="__codelineno-6-4"></a><span class="w">  </span><span class="nb">permissions</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-6-5"><a href="#__codelineno-6-5" id="__codelineno-6-5" name="__codelineno-6-5"></a><span class="w">    </span><span class="na">actions</span><span class="w">     </span><span class="o">=</span><span class="w"> </span><span class="p">[</span>
</span><span id="__span-6-6"><a href="#__codelineno-6-6" id="__codelineno-6-6" name="__codelineno-6-6"></a><span class="w">      </span><span class="s2">"Microsoft.Storage/storageAccounts/listKeys/action"</span><span class="p">,</span>
</span><span id="__span-6-7"><a href="#__codelineno-6-7" id="__codelineno-6-7" name="__codelineno-6-7"></a><span class="w">      </span><span class="s2">"Microsoft.Storage/storageAccounts/read"</span>
</span><span id="__span-6-8"><a href="#__codelineno-6-8" id="__codelineno-6-8" name="__codelineno-6-8"></a><span class="w">    </span><span class="p">]</span>
</span><span id="__span-6-9"><a href="#__codelineno-6-9" id="__codelineno-6-9" name="__codelineno-6-9"></a>
</span><span id="__span-6-10"><a href="#__codelineno-6-10" id="__codelineno-6-10" name="__codelineno-6-10"></a><span class="w">    </span><span class="na">data_actions</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[]</span>
</span><span id="__span-6-11"><a href="#__codelineno-6-11" id="__codelineno-6-11" name="__codelineno-6-11"></a>
</span><span id="__span-6-12"><a href="#__codelineno-6-12" id="__codelineno-6-12" name="__codelineno-6-12"></a><span class="w">    </span><span class="na">not_data_actions</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[]</span>
</span><span id="__span-6-13"><a href="#__codelineno-6-13" id="__codelineno-6-13" name="__codelineno-6-13"></a><span class="w">  </span><span class="p">}</span>
</span><span id="__span-6-14"><a href="#__codelineno-6-14" id="__codelineno-6-14" name="__codelineno-6-14"></a><span class="w">  </span><span class="na">assignable_scopes</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span>
</span><span id="__span-6-15"><a href="#__codelineno-6-15" id="__codelineno-6-15" name="__codelineno-6-15"></a><span class="w">    </span><span class="s2">"/providers/Microsoft.Management/managementGroups/00000000-0000-0000-0000-000000000000"</span>
</span><span id="__span-6-16"><a href="#__codelineno-6-16" id="__codelineno-6-16" name="__codelineno-6-16"></a><span class="w">  </span><span class="p">]</span>
</span><span id="__span-6-17"><a href="#__codelineno-6-17" id="__codelineno-6-17" name="__codelineno-6-17"></a><span class="p">}</span>
</span></code></pre></div>
<ol>
<li>Add a import block to the configuration file with the resource type and name you want to import. In my case, I added the following block to the <code>custom_role.tf</code> file:</li>
</ol>
<div class="language-hcl highlight"><pre><span></span><code><span id="__span-7-1"><a href="#__codelineno-7-1" id="__codelineno-7-1" name="__codelineno-7-1"></a><span class="nb">import</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-7-2"><a href="#__codelineno-7-2" id="__codelineno-7-2" name="__codelineno-7-2"></a><span class="w">  </span><span class="na">to</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">azurerm_role_definition.custom_role</span>
</span><span id="__span-7-3"><a href="#__codelineno-7-3" id="__codelineno-7-3" name="__codelineno-7-3"></a><span class="w">  </span><span class="na">id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"/providers/Microsoft.Authorization/roleDefinitions/11111111-1111-1111-1111-111111111111|/providers/Microsoft.Management/managementGroups/00000000-0000-0000-0000-000000000000"</span>
</span><span id="__span-7-4"><a href="#__codelineno-7-4" id="__codelineno-7-4" name="__codelineno-7-4"></a>
</span><span id="__span-7-5"><a href="#__codelineno-7-5" id="__codelineno-7-5" name="__codelineno-7-5"></a><span class="p">}</span>
</span></code></pre></div>
<ol>
<li>Run the <code>terraform</code>plan` command to see the changes that Terraform will make to the resource. In my case, the output looked like this:</li>
</ol>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-8-1"><a href="#__codelineno-8-1" id="__codelineno-8-1" name="__codelineno-8-1"></a>.
</span><span id="__span-8-2"><a href="#__codelineno-8-2" id="__codelineno-8-2" name="__codelineno-8-2"></a>.
</span><span id="__span-8-3"><a href="#__codelineno-8-3" id="__codelineno-8-3" name="__codelineno-8-3"></a>.
</span><span id="__span-8-4"><a href="#__codelineno-8-4" id="__codelineno-8-4" name="__codelineno-8-4"></a>Terraform<span class="w"> </span>used<span class="w"> </span>the<span class="w"> </span>selected<span class="w"> </span>providers<span class="w"> </span>to<span class="w"> </span>generate<span class="w"> </span>the<span class="w"> </span>following<span class="w"> </span>execution<span class="w"> </span>plan.<span class="w"> </span>Resource<span class="w"> </span>actions<span class="w"> </span>are<span class="w"> </span>indicated<span class="w"> </span>with<span class="w"> </span>the<span class="w"> </span>following<span class="w"> </span>symbols:
</span><span id="__span-8-5"><a href="#__codelineno-8-5" id="__codelineno-8-5" name="__codelineno-8-5"></a><span class="w">  </span>~<span class="w"> </span>update<span class="w"> </span><span class="k">in</span>-place
</span><span id="__span-8-6"><a href="#__codelineno-8-6" id="__codelineno-8-6" name="__codelineno-8-6"></a>.
</span><span id="__span-8-7"><a href="#__codelineno-8-7" id="__codelineno-8-7" name="__codelineno-8-7"></a>.
</span><span id="__span-8-8"><a href="#__codelineno-8-8" id="__codelineno-8-8" name="__codelineno-8-8"></a>.
</span></code></pre></div>
<ol>
<li>Run the <code>terraform apply</code> command to import the resource into Terraform. In my case, the output looked like this after a long 9 minutes:</li>
</ol>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-9-1"><a href="#__codelineno-9-1" id="__codelineno-9-1" name="__codelineno-9-1"></a>...
</span><span id="__span-9-2"><a href="#__codelineno-9-2" id="__codelineno-9-2" name="__codelineno-9-2"></a>Apply<span class="w"> </span>complete!<span class="w"> </span>Resources:<span class="w"> </span><span class="m">1</span><span class="w"> </span>imported,<span class="w"> </span><span class="m">0</span><span class="w"> </span>added,<span class="w"> </span><span class="m">1</span><span class="w"> </span>changed,<span class="w"> </span><span class="m">0</span><span class="w"> </span>destroyed.
</span></code></pre></div>
<ol>
<li>Verify that the resource was imported successfully by running the <code>terraform show</code> command. In my case, the output looked like this:</li>
</ol>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-10-1"><a href="#__codelineno-10-1" id="__codelineno-10-1" name="__codelineno-10-1"></a>terraform<span class="w"> </span>show
</span></code></pre></div>
<p>You can use the <code>terraform import</code> command to import existing infrastructure into Terraform too but I prefer to use the <code>import</code> block because it's more readable and easier to manage.</p>
<p>With terraform import the command would look like this:</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-11-1"><a href="#__codelineno-11-1" id="__codelineno-11-1" name="__codelineno-11-1"></a>terraform<span class="w"> </span>import<span class="w"> </span>azurerm_role_definition.custom_role<span class="w"> </span><span class="s2">"/providers/Microsoft.Authorization/roleDefinitions/11111111-1111-1111-1111-111111111111|/providers/Microsoft.Management/managementGroups/00000000-0000-0000-0000-000000000000"</span>
</span></code></pre></div>
<h3 id="conclusion"><a class="toclink" href="../../2024/10/03/terraform-import-block/#conclusion">Conclusion</a></h3>
<p>That's it! You've successfully imported an existing resource into Terraform. Now you can manage it with Terraform just like any other resource.</p>
<p>Happy coding! ð</p>
</div>
</article>
<article class="md-post md-post--excerpt">
<header class="md-post__header">
<nav class="md-post__authors md-typeset">
<span class="md-author">
<img alt="Rafael FernÃ¡ndez" src="https://avatars.githubusercontent.com/u/39990341">
</span>
</nav>
<div class="md-post__meta md-meta">
<ul class="md-meta__list">
<li class="md-meta__item">
<time datetime="2024-09-09 00:00:00+00:00">September 9, 2024</time></li>
<li class="md-meta__item">
            in
            
              <a class="md-meta__link" href="./">DevOps</a></li>
<li class="md-meta__item">
            
              2 min read
            
          </li>
</ul>
</div>
</header>
<div class="md-post__content md-typeset">
<h2 id="markmap"><a class="toclink" href="../../2024/09/09/markmap/">markmap</a></h2>
<p>markmap is a visualisation tool that allows you to create mindmaps from markdown files. It is based on the mermaid library and can be used to create a visual representation of a markdown file.</p>
<h3 id="installation-in-mkdocs"><a class="toclink" href="../../2024/09/09/markmap/#installation-in-mkdocs">Installation in mkdocs</a></h3>
<p>To install markmap in mkdocs, you need install the plugin using pip:</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-4-1"><a href="#__codelineno-4-1" id="__codelineno-4-1" name="__codelineno-4-1"></a>pip<span class="w"> </span>install<span class="w"> </span>mkdocs-markmap
</span></code></pre></div>
<p>Then, you need to add the following lines to your <code>mkdocs.yml</code> file:</p>
<div class="language-yaml highlight"><pre><span></span><code><span id="__span-5-1"><a href="#__codelineno-5-1" id="__codelineno-5-1" name="__codelineno-5-1"></a><span class="nt">plugins</span><span class="p">:</span>
</span><span id="__span-5-2"><a href="#__codelineno-5-2" id="__codelineno-5-2" name="__codelineno-5-2"></a><span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">markmap</span>
</span></code></pre></div>
<h3 id="usage"><a class="toclink" href="../../2024/09/09/markmap/#usage">Usage</a></h3>
<p>To use markmap, you need to add the following code block to your markdown file:</p>
<div class="language-markdown highlight"><pre><span></span><code><span id="__span-6-1"><a href="#__codelineno-6-1" id="__codelineno-6-1" name="__codelineno-6-1"></a><span class="sb">```markmap</span><span class="w">  </span>
</span><span id="__span-6-2"><a href="#__codelineno-6-2" id="__codelineno-6-2" name="__codelineno-6-2"></a><span class="s"># Root</span>
</span><span id="__span-6-3"><a href="#__codelineno-6-3" id="__codelineno-6-3" name="__codelineno-6-3"></a>
</span><span id="__span-6-4"><a href="#__codelineno-6-4" id="__codelineno-6-4" name="__codelineno-6-4"></a><span class="s">## Branch 1</span>
</span><span id="__span-6-5"><a href="#__codelineno-6-5" id="__codelineno-6-5" name="__codelineno-6-5"></a>
</span><span id="__span-6-6"><a href="#__codelineno-6-6" id="__codelineno-6-6" name="__codelineno-6-6"></a><span class="s">* Branchlet 1a</span>
</span><span id="__span-6-7"><a href="#__codelineno-6-7" id="__codelineno-6-7" name="__codelineno-6-7"></a><span class="s">* Branchlet 1b</span>
</span><span id="__span-6-8"><a href="#__codelineno-6-8" id="__codelineno-6-8" name="__codelineno-6-8"></a>
</span><span id="__span-6-9"><a href="#__codelineno-6-9" id="__codelineno-6-9" name="__codelineno-6-9"></a><span class="s">## Branch 2</span>
</span><span id="__span-6-10"><a href="#__codelineno-6-10" id="__codelineno-6-10" name="__codelineno-6-10"></a>
</span><span id="__span-6-11"><a href="#__codelineno-6-11" id="__codelineno-6-11" name="__codelineno-6-11"></a><span class="s">* Branchlet 2a</span>
</span><span id="__span-6-12"><a href="#__codelineno-6-12" id="__codelineno-6-12" name="__codelineno-6-12"></a><span class="s">* Branchlet 2b</span>
</span><span id="__span-6-13"><a href="#__codelineno-6-13" id="__codelineno-6-13" name="__codelineno-6-13"></a><span class="sb">```</span>
</span></code></pre></div>
<p>And this will generate the following mindmap:</p>
<p><img alt="alt text" src="../../2024/09/20240909_DevOps_markmap.png"></p>
<p>That is for the future, because in my mkdocs not work as expected:</p>
<pre class="language-markmap"><code># Root

## Branch 1

* Branchlet 1a
* Branchlet 1b

## Branch 2

* Branchlet 2a
* Branchlet 2b</code></pre>
<h3 id="visual-studio-code-extension"><a class="toclink" href="../../2024/09/09/markmap/#visual-studio-code-extension">Visual Studio Code Extension</a></h3>
<p>There is also a Visual Studio Code extension that allows you to create mindmaps from markdown files. You can install it from the Visual Studio Code marketplace.</p>
<p></p><div class="language-text highlight"><pre><span></span><code><span id="__span-7-1"><a href="#__codelineno-7-1" id="__codelineno-7-1" name="__codelineno-7-1"></a>    Name: Markdown Preview Markmap Support
</span><span id="__span-7-2"><a href="#__codelineno-7-2" id="__codelineno-7-2" name="__codelineno-7-2"></a>    Id: phoihos.markdown-markmap
</span><span id="__span-7-3"><a href="#__codelineno-7-3" id="__codelineno-7-3" name="__codelineno-7-3"></a>    Description: Visualize Markdown as Mindmap (A.K.A Markmap) to VS Code's built-in markdown preview
</span><span id="__span-7-4"><a href="#__codelineno-7-4" id="__codelineno-7-4" name="__codelineno-7-4"></a>    Version: 1.4.6
</span><span id="__span-7-5"><a href="#__codelineno-7-5" id="__codelineno-7-5" name="__codelineno-7-5"></a>    Publisher: phoihos
</span><span id="__span-7-6"><a href="#__codelineno-7-6" id="__codelineno-7-6" name="__codelineno-7-6"></a>    VS Marketplace Link: https://marketplace.visualstudio.com/items?itemName=phoihos.markdown-markmap
</span></code></pre></div>
<a href="https://marketplace.visualstudio.com/items?itemName=phoihos.markdown-markmap">VS Marketplace Link</a><p></p>
<h3 id="conclusion"><a class="toclink" href="../../2024/09/09/markmap/#conclusion">Conclusion</a></h3>
<p>I don't like too much this plugin because it not work as expected in my mkdocs but it's a good tool for documentation.</p>
<h3 id="references"><a class="toclink" href="../../2024/09/09/markmap/#references">References</a></h3>
<ul>
<li><a href="https://markmap.js.org/">markmap</a></li>
<li><a href="https://github.com/markmap/mkdocs-markmap">mkdocs-markmap</a></li>
</ul>
</div>
</article>
<nav class="md-pagination">
<span class="md-pagination__current">1</span> <a class="md-pagination__link" href="page/2/">2</a> <a class="md-pagination__link" href="page/3/">3</a>
</nav>
</div>
</div>
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
</div>
<button class="md-top md-icon" data-md-component="top" hidden="" type="button">
<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"></path></svg>
  Back to top
</button>
</main>
<footer class="md-footer">
<div class="md-footer-meta md-typeset">
<div class="md-footer-meta__inner md-grid">
<div class="md-copyright">
<div class="md-copyright__highlight">
      Copyright Â© 2023-now Rafael FernÃ¡ndez
    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" rel="noopener" target="_blank">
      Material for MkDocs
    </a>
</div>
<div class="md-social">
<a class="md-social__link" href="https://www.linkedin.com/in/rafaelfernandezd/" rel="noopener" target="_blank" title="LinkedIn">
<svg viewBox="0 0 448 512" xmlns="http://www.w3.org/2000/svg"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M416 32H31.9C14.3 32 0 46.5 0 64.3v383.4C0 465.5 14.3 480 31.9 480H416c17.6 0 32-14.5 32-32.3V64.3c0-17.8-14.4-32.3-32-32.3M135.4 416H69V202.2h66.5V416zM102.2 96a38.5 38.5 0 1 1 0 77 38.5 38.5 0 1 1 0-77m282.1 320h-66.4V312c0-24.8-.5-56.7-34.5-56.7-34.6 0-39.9 27-39.9 54.9V416h-66.4V202.2h63.7v29.2h.9c8.9-16.8 30.6-34.5 62.9-34.5 67.2 0 79.7 44.3 79.7 101.9z"></path></svg>
</a>
<a class="md-social__link" href="https://github.com/rfernandezdo" rel="noopener" target="_blank" title="GitHub">
<svg viewBox="0 0 512 512" xmlns="http://www.w3.org/2000/svg"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M173.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M252.8 8C114.1 8 8 113.3 8 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C436.2 457.8 504 362.9 504 252 504 113.3 391.5 8 252.8 8M105.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"></path></svg>
</a>
<a class="md-social__link" href="https://rfernandezdo.github.io/feed_rss_created.xml" rel="noopener" target="_blank" title="RSS feed">
<svg viewBox="0 0 448 512" xmlns="http://www.w3.org/2000/svg"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M64 32C28.7 32 0 60.7 0 96v320c0 35.3 28.7 64 64 64h320c35.3 0 64-28.7 64-64V96c0-35.3-28.7-64-64-64zm32 104c0-13.3 10.7-24 24-24 137 0 248 111 248 248 0 13.3-10.7 24-24 24s-24-10.7-24-24c0-110.5-89.5-200-200-200-13.3 0-24-10.7-24-24m0 96c0-13.3 10.7-24 24-24 83.9 0 152 68.1 152 152 0 13.3-10.7 24-24 24s-24-10.7-24-24c0-57.4-46.6-104-104-104-13.3 0-24-10.7-24-24m0 120a32 32 0 1 1 64 0 32 32 0 1 1-64 0"></path></svg>
</a>
</div>
</div>
</div>
</footer>
</div>
<div class="md-dialog" data-md-component="dialog">
<div class="md-dialog__inner md-typeset"></div>
</div>
<div class="md-progress" data-md-component="progress" role="progressbar"></div>
<script id="__config" type="application/json">{"base": "../../..", "features": ["navigation.instant", "navigation.instant.progress", "navigation.tabs", "navigation.tabs.sticky", "navigation.expand", "navigation.sections", "navigation.top", "navigation.tracking", "toc.integrate", "toc.nested", "toc.smoothscroll", "footer", "content.code.copy", "content.code.select", "content.code.annotate", "content.tooltips"], "search": "../../../assets/javascripts/workers/search.973d3a69.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
<script src="../../../assets/javascripts/bundle.f55a23d4.min.js"></script>
<script src="https://unpkg.com/tablesort@5.3.0/dist/tablesort.min.js"></script>
<script src="../../../javascripts/tablesort.js"></script>
<script type="module">import mermaid from "https://unpkg.com/mermaid@11.2.0/dist/mermaid.esm.min.mjs";
window.mermaidConfig = {default: {
    startOnLoad: false
}};</script>
<script id="init-glightbox">const lightbox = GLightbox({"touchNavigation": true, "loop": false, "zoomable": true, "draggable": true, "openEffect": "zoom", "closeEffect": "zoom", "slideEffect": "slide"});
document$.subscribe(()=>{ lightbox.reload(); });
</script></body></html>