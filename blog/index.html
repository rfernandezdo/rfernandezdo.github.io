<!DOCTYPE html><html class="no-js" lang="en"><head>
<meta charset="utf-8">
<meta content="width=device-width,initial-scale=1" name="viewport">
<meta content="A blog about Azure, DevOps and other stuff" name="description">
<meta content="Rafael Fernández" name="author">
<link href="https://rfernandezdo.github.io/blog/" rel="canonical">
<link href="tags/" rel="next">
<link href="https://rfernandezdo-github-io.translate.goog/?_x_tr_sl=auto&amp;_x_tr_tl=es&amp;_x_tr_hl=es&amp;_x_tr_pto=wapp" hreflang="en" rel="alternate">
<link href="https://rfernandezdo-github-io.translate.goog/?_x_tr_sl=auto&amp;_x_tr_tl=en&amp;_x_tr_hl=en&amp;_x_tr_pto=wapp" hreflang="es" rel="alternate">
<link href="../feed_rss_created.xml" rel="alternate" title="RSS feed" type="application/rss+xml">
<link href="../feed_rss_updated.xml" rel="alternate" title="RSS feed of updated content" type="application/rss+xml">
<link href="../assets/images/favicon.png" rel="icon">
<meta content="mkdocs-1.6.1, mkdocs-material-9.7.1" name="generator">
<title>Blog - Un Rinconcito donde contar lo que quiera</title>
<link href="../assets/stylesheets/main.484c7ddc.min.css" rel="stylesheet">
<link href="../assets/stylesheets/palette.ab4e12ef.min.css" rel="stylesheet">
<link crossorigin="" href="https://fonts.gstatic.com" rel="preconnect">
<link href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&amp;display=fallback" rel="stylesheet">
<style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
<script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
<meta content="website" property="og:type">
<meta content="Blog - Un Rinconcito donde contar lo que quiera" property="og:title">
<meta content="A blog about Azure, DevOps and other stuff" property="og:description">
<meta content="https://rfernandezdo.github.io/assets/images/social/blog/index.png" property="og:image">
<meta content="image/png" property="og:image:type">
<meta content="1200" property="og:image:width">
<meta content="630" property="og:image:height">
<meta content="https://rfernandezdo.github.io/blog/" property="og:url">
<meta content="summary_large_image" property="twitter:card">
<meta content="Blog - Un Rinconcito donde contar lo que quiera" property="twitter:title">
<meta content="A blog about Azure, DevOps and other stuff" property="twitter:description">
<meta content="https://rfernandezdo.github.io/assets/images/social/blog/index.png" property="twitter:image">
<link href="../assets/stylesheets/glightbox.min.css" rel="stylesheet"><script src="../assets/javascripts/glightbox.min.js"></script><style id="glightbox-style">
            html.glightbox-open { overflow: initial; height: 100%; }
            .gslide-title { margin-top: 0px; user-select: text; }
            .gslide-desc { color: #666; user-select: text; }
            .gslide-image img { background: white; }
            .gscrollbar-fixer { padding-right: 15px; }
            .gdesc-inner { font-size: 0.75rem; }
            body[data-md-color-scheme="slate"] .gdesc-inner { background: var(--md-default-bg-color); }
            body[data-md-color-scheme="slate"] .gslide-title { color: var(--md-default-fg-color); }
            body[data-md-color-scheme="slate"] .gslide-desc { color: var(--md-default-fg-color); }
        </style></head>
<body data-md-color-accent="blue" data-md-color-primary="blue" data-md-color-scheme="default" dir="ltr">
<input autocomplete="off" class="md-toggle" data-md-toggle="drawer" id="__drawer" type="checkbox">
<input autocomplete="off" class="md-toggle" data-md-toggle="search" id="__search" type="checkbox">
<label class="md-overlay" for="__drawer"></label>
<div data-md-component="skip">
<a class="md-skip" href="#blog">
          Skip to content
        </a>
</div>
<div data-md-component="announce">
</div>
<header class="md-header md-header--shadow md-header--lifted" data-md-component="header">
<nav aria-label="Header" class="md-header__inner md-grid">
<a aria-label="Un Rinconcito donde contar lo que quiera" class="md-header__button md-logo" data-md-component="logo" href=".." title="Un Rinconcito donde contar lo que quiera">
<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"></path></svg>
</a>
<label class="md-header__button md-icon" for="__drawer">
<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"></path></svg>
</label>
<div class="md-header__title" data-md-component="header-title">
<div class="md-header__ellipsis">
<div class="md-header__topic">
<span class="md-ellipsis">
            Un Rinconcito donde contar lo que quiera
          </span>
</div>
<div class="md-header__topic" data-md-component="header-topic">
<span class="md-ellipsis">
            
              Blog
            
          </span>
</div>
</div>
</div>
<form class="md-header__option" data-md-component="palette">
<input aria-label="Switch to dark mode" class="md-option" data-md-color-accent="blue" data-md-color-media="" data-md-color-primary="blue" data-md-color-scheme="default" id="__palette_0" name="__palette" type="radio">
<label class="md-header__button md-icon" for="__palette_1" hidden="" title="Switch to dark mode">
<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"></path></svg>
</label>
<input aria-label="Switch to light mode" class="md-option" data-md-color-accent="blue" data-md-color-media="" data-md-color-primary="black" data-md-color-scheme="slate" id="__palette_1" name="__palette" type="radio">
<label class="md-header__button md-icon" for="__palette_0" hidden="" title="Switch to light mode">
<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12s-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"></path></svg>
</label>
</form>
<script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
<div class="md-header__option">
<div class="md-select">
<button aria-label="Select language" class="md-header__button md-icon">
<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="m12.87 15.07-2.54-2.51.03-.03A17.5 17.5 0 0 0 14.07 6H17V4h-7V2H8v2H1v2h11.17C11.5 7.92 10.44 9.75 9 11.35 8.07 10.32 7.3 9.19 6.69 8h-2c.73 1.63 1.73 3.17 2.98 4.56l-5.09 5.02L4 19l5-5 3.11 3.11zM18.5 10h-2L12 22h2l1.12-3h4.75L21 22h2zm-2.62 7 1.62-4.33L19.12 17z"></path></svg>
</button>
<div class="md-select__inner">
<ul class="md-select__list">
<li class="md-select__item">
<a class="md-select__link" href="https://rfernandezdo-github-io.translate.goog/?_x_tr_sl=auto&amp;_x_tr_tl=es&amp;_x_tr_hl=es&amp;_x_tr_pto=wapp" hreflang="en">
              English
            </a>
</li>
<li class="md-select__item">
<a class="md-select__link" href="https://rfernandezdo-github-io.translate.goog/?_x_tr_sl=auto&amp;_x_tr_tl=en&amp;_x_tr_hl=en&amp;_x_tr_pto=wapp" hreflang="es">
              Spanish
            </a>
</li>
</ul>
</div>
</div>
</div>
<label class="md-header__button md-icon" for="__search">
<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"></path></svg>
</label>
<div class="md-search" data-md-component="search" role="dialog">
<label class="md-search__overlay" for="__search"></label>
<div class="md-search__inner" role="search">
<form class="md-search__form" name="search">
<input aria-label="Search" autocapitalize="off" autocomplete="off" autocorrect="off" class="md-search__input" data-md-component="search-query" name="query" placeholder="Search" required="" spellcheck="false" type="text">
<label class="md-search__icon md-icon" for="__search">
<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"></path></svg>
<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"></path></svg>
</label>
<nav aria-label="Search" class="md-search__options">
<button aria-label="Clear" class="md-search__icon md-icon" tabindex="-1" title="Clear" type="reset">
<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"></path></svg>
</button>
</nav>
</form>
<div class="md-search__output">
<div class="md-search__scrollwrap" data-md-scrollfix="" tabindex="0">
<div class="md-search-result" data-md-component="search-result">
<div class="md-search-result__meta">
            Initializing search
          </div>
<ol class="md-search-result__list" role="presentation"></ol>
</div>
</div>
</div>
</div>
</div>
</nav>
<nav aria-label="Tabs" class="md-tabs" data-md-component="tabs">
<div class="md-grid">
<ul class="md-tabs__list">
<li class="md-tabs__item md-tabs__item--active">
<a class="md-tabs__link" href="./">
          
  
  
  Blog

        </a>
</li>
<li class="md-tabs__item">
<a class="md-tabs__link" href="..">
        
  
  
    
  
  About

      </a>
</li>
<li class="md-tabs__item">
<a class="md-tabs__link" href="../contributions/">
        
  
  
    
  
  Contributions

      </a>
</li>
<li class="md-tabs__item">
<a class="md-tabs__link" href="../Azure/Security/MCSB/Readme/">
          
  
  
  Azure

        </a>
</li>
<li class="md-tabs__item">
<a class="md-tabs__link" href="../Tools/Federated_Identity_Credentials_Report/README-federated-identity-credentials/">
          
  
  
  Tools

        </a>
</li>
</ul>
</div>
</nav>
</header>
<div class="md-container" data-md-component="container">
<main class="md-main" data-md-component="main">
<div class="md-main__inner md-grid">
<div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation">
<div class="md-sidebar__scrollwrap">
<div class="md-sidebar__inner">
<nav aria-label="Navigation" class="md-nav md-nav--primary md-nav--lifted md-nav--integrated" data-md-level="0">
<label class="md-nav__title" for="__drawer">
<a aria-label="Un Rinconcito donde contar lo que quiera" class="md-nav__button md-logo" data-md-component="logo" href=".." title="Un Rinconcito donde contar lo que quiera">
<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"></path></svg>
</a>
    Un Rinconcito donde contar lo que quiera
  </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
<input checked="" class="md-nav__toggle md-toggle" id="__nav_1" type="checkbox">
<label class="md-nav__link" for="__nav_1" id="__nav_1_label" tabindex="">
<span class="md-ellipsis">
    
  
    Blog
  

    
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="true" aria-labelledby="__nav_1_label" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_1">
<span class="md-nav__icon md-icon"></span>
            
  
    Blog
  

          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item md-nav__item--active">
<input class="md-nav__toggle md-toggle" id="__toc" type="checkbox">
<a class="md-nav__link md-nav__link--active" href="./">
<span class="md-ellipsis">
    
  
    Blog
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="tags/">
<span class="md-ellipsis">
    
  
    Posts by Tags
  

    
  </span>
</a>
</li>
<li class="md-nav__item md-nav__item--section md-nav__item--nested">
<input class="md-nav__toggle md-toggle md-toggle--indeterminate" id="__nav_1_3" type="checkbox">
<label class="md-nav__link" for="__nav_1_3" id="__nav_1_3_label" tabindex="">
<span class="md-ellipsis">
    
  
    Archive
  

    
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_1_3_label" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_1_3">
<span class="md-nav__icon md-icon"></span>
            
  
    Archive
  

          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="2025/12/">
<span class="md-ellipsis">
    
  
    2025/12
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="2025/11/">
<span class="md-ellipsis">
    
  
    2025/11
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="2025/10/">
<span class="md-ellipsis">
    
  
    2025/10
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="2025/09/">
<span class="md-ellipsis">
    
  
    2025/09
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="2025/08/">
<span class="md-ellipsis">
    
  
    2025/08
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="2025/07/">
<span class="md-ellipsis">
    
  
    2025/07
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="2025/06/">
<span class="md-ellipsis">
    
  
    2025/06
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="2025/05/">
<span class="md-ellipsis">
    
  
    2025/05
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="2025/04/">
<span class="md-ellipsis">
    
  
    2025/04
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="2025/03/">
<span class="md-ellipsis">
    
  
    2025/03
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="2025/02/">
<span class="md-ellipsis">
    
  
    2025/02
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="2025/01/">
<span class="md-ellipsis">
    
  
    2025/01
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="2024/12/">
<span class="md-ellipsis">
    
  
    2024/12
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="2024/11/">
<span class="md-ellipsis">
    
  
    2024/11
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="2024/10/">
<span class="md-ellipsis">
    
  
    2024/10
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="2024/09/">
<span class="md-ellipsis">
    
  
    2024/09
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="2024/06/">
<span class="md-ellipsis">
    
  
    2024/06
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="2024/05/">
<span class="md-ellipsis">
    
  
    2024/05
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="2024/04/">
<span class="md-ellipsis">
    
  
    2024/04
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="2024/03/">
<span class="md-ellipsis">
    
  
    2024/03
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="2024/02/">
<span class="md-ellipsis">
    
  
    2024/02
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="2023/12/">
<span class="md-ellipsis">
    
  
    2023/12
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="2023/11/">
<span class="md-ellipsis">
    
  
    2023/11
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="2023/10/">
<span class="md-ellipsis">
    
  
    2023/10
  

    
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--section md-nav__item--nested">
<input class="md-nav__toggle md-toggle md-toggle--indeterminate" id="__nav_1_4" type="checkbox">
<label class="md-nav__link" for="__nav_1_4" id="__nav_1_4_label" tabindex="">
<span class="md-ellipsis">
    
  
    Categories
  

    
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_1_4_label" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_1_4">
<span class="md-nav__icon md-icon"></span>
            
  
    Categories
  

          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="category/azure/">
<span class="md-ellipsis">
    
  
    Azure
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="category/azure-ad/">
<span class="md-ellipsis">
    
  
    Azure AD
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="category/azure-automation/">
<span class="md-ellipsis">
    
  
    Azure Automation
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="category/azure-devops/">
<span class="md-ellipsis">
    
  
    Azure DevOps
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="category/azure-frameworks/">
<span class="md-ellipsis">
    
  
    Azure Frameworks
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="category/azure-governance/">
<span class="md-ellipsis">
    
  
    Azure Governance
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="category/azure-networking/">
<span class="md-ellipsis">
    
  
    Azure Networking
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="category/azure-security/">
<span class="md-ellipsis">
    
  
    Azure Security
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="category/azure-services/">
<span class="md-ellipsis">
    
  
    Azure Services
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="category/azure-updates/">
<span class="md-ellipsis">
    
  
    Azure Updates
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="category/caf/">
<span class="md-ellipsis">
    
  
    CAF
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="category/cicd/">
<span class="md-ellipsis">
    
  
    CI/CD
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="category/devops/">
<span class="md-ellipsis">
    
  
    DevOps
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="category/development/">
<span class="md-ellipsis">
    
  
    Development
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="category/drift-detection/">
<span class="md-ellipsis">
    
  
    Drift Detection
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="category/english/">
<span class="md-ellipsis">
    
  
    English
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="category/enterprise-policy-as-code/">
<span class="md-ellipsis">
    
  
    Enterprise Policy as Code
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="category/finops/">
<span class="md-ellipsis">
    
  
    FinOps
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="category/firewall/">
<span class="md-ellipsis">
    
  
    Firewall
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="category/gtd/">
<span class="md-ellipsis">
    
  
    GTD
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="category/git/">
<span class="md-ellipsis">
    
  
    Git
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="category/github-actions/">
<span class="md-ellipsis">
    
  
    GitHub Actions
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="category/hashicorp/">
<span class="md-ellipsis">
    
  
    HashiCorp
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="category/hello_world/">
<span class="md-ellipsis">
    
  
    Hello_World
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="category/infrastructure-as-code/">
<span class="md-ellipsis">
    
  
    Infrastructure as Code
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="category/learning/">
<span class="md-ellipsis">
    
  
    Learning
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="category/m365/">
<span class="md-ellipsis">
    
  
    M365
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="category/microsoft-365/">
<span class="md-ellipsis">
    
  
    Microsoft 365
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="category/microsoft-entra/">
<span class="md-ellipsis">
    
  
    Microsoft Entra
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="category/microsoft-entra-external-id/">
<span class="md-ellipsis">
    
  
    Microsoft Entra External ID
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="category/microsoft-entra-id/">
<span class="md-ellipsis">
    
  
    Microsoft Entra ID
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="category/networking/">
<span class="md-ellipsis">
    
  
    Networking
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="category/outlook/">
<span class="md-ellipsis">
    
  
    Outlook
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="category/pim/">
<span class="md-ellipsis">
    
  
    PIM
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="category/power-automate/">
<span class="md-ellipsis">
    
  
    Power Automate
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="category/power-bi/">
<span class="md-ellipsis">
    
  
    Power BI
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="category/productividad/">
<span class="md-ellipsis">
    
  
    Productividad
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="category/productividad--microsoft-365/">
<span class="md-ellipsis">
    
  
    Productividad / Microsoft 365
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="category/security/">
<span class="md-ellipsis">
    
  
    Security
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="category/seguridad/">
<span class="md-ellipsis">
    
  
    Seguridad
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="category/snowflake/">
<span class="md-ellipsis">
    
  
    Snowflake
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="category/terraform/">
<span class="md-ellipsis">
    
  
    Terraform
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="category/threat-intelligence/">
<span class="md-ellipsis">
    
  
    Threat Intelligence
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="category/tools/">
<span class="md-ellipsis">
    
  
    Tools
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="category/troubleshooting/">
<span class="md-ellipsis">
    
  
    Troubleshooting
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="category/visual-studio-code/">
<span class="md-ellipsis">
    
  
    Visual Studio Code
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="category/viva-insights/">
<span class="md-ellipsis">
    
  
    Viva Insights
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="category/windows/">
<span class="md-ellipsis">
    
  
    Windows
  

    
  </span>
</a>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="..">
<span class="md-ellipsis">
    
  
    About
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../contributions/">
<span class="md-ellipsis">
    
  
    Contributions
  

    
  </span>
</a>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle md-toggle--indeterminate" id="__nav_4" type="checkbox">
<label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
<span class="md-ellipsis">
    
  
    Azure
  

    
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_4_label" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_4">
<span class="md-nav__icon md-icon"></span>
            
  
    Azure
  

          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle md-toggle--indeterminate" id="__nav_4_1" type="checkbox">
<label class="md-nav__link" for="__nav_4_1" id="__nav_4_1_label" tabindex="0">
<span class="md-ellipsis">
    
  
    Security
  

    
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_4_1_label" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_4_1">
<span class="md-nav__icon md-icon"></span>
            
  
    Security
  

          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle md-toggle--indeterminate" id="__nav_4_1_1" type="checkbox">
<label class="md-nav__link" for="__nav_4_1_1" id="__nav_4_1_1_label" tabindex="0">
<span class="md-ellipsis">
    
  
    MCSB v1
  

    
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_4_1_1_label" class="md-nav" data-md-level="3">
<label class="md-nav__title" for="__nav_4_1_1">
<span class="md-nav__icon md-icon"></span>
            
  
    MCSB v1
  

          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../Azure/Security/MCSB/Readme/">
<span class="md-ellipsis">
    
  
    MCSB_v1 - Readme
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../Azure/Security/MCSB/Asset%20Management/">
<span class="md-ellipsis">
    
  
    MCSB_v1 - Asset Management
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../Azure/Security/MCSB/Backup%20and%20Recovery/">
<span class="md-ellipsis">
    
  
    MCSB_v1 - Backup and Recovery
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../Azure/Security/MCSB/Data%20Protection/">
<span class="md-ellipsis">
    
  
    MCSB_v1 - Data Protection
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../Azure/Security/MCSB/DevOps%20Security/">
<span class="md-ellipsis">
    
  
    MCSB_v1 - DevOps Security
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../Azure/Security/MCSB/Endpoint%20Security/">
<span class="md-ellipsis">
    
  
    MCSB_v1 - Endpoint Security
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../Azure/Security/MCSB/Governance%20and%20Strategy/">
<span class="md-ellipsis">
    
  
    MCSB_v1 - Governance and Strategy
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../Azure/Security/MCSB/Identity%20Management/">
<span class="md-ellipsis">
    
  
    MCSB_v1 - Identity Management
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../Azure/Security/MCSB/Incident%20Response/">
<span class="md-ellipsis">
    
  
    MCSB_v1 - Incident Response
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../Azure/Security/MCSB/Logging%20and%20Threat%20Detection/">
<span class="md-ellipsis">
    
  
    MCSB_v1 - Logging and Threat Detection
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../Azure/Security/MCSB/Network%20Security/">
<span class="md-ellipsis">
    
  
    MCSB_v1 - Network Security
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../Azure/Security/MCSB/Posture%20and%20Vulnerability%20Mgmt/">
<span class="md-ellipsis">
    
  
    MCSB_v1 - Posture and Vulnerability Mgmt
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../Azure/Security/MCSB/Privileged%20Access/">
<span class="md-ellipsis">
    
  
    MCSB_v1 - Privileged Access
  

    
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle md-toggle--indeterminate" id="__nav_4_1_2" type="checkbox">
<label class="md-nav__link" for="__nav_4_1_2" id="__nav_4_1_2_label" tabindex="0">
<span class="md-ellipsis">
    
  
    MCSB v2
  

    
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_4_1_2_label" class="md-nav" data-md-level="3">
<label class="md-nav__title" for="__nav_4_1_2">
<span class="md-nav__icon md-icon"></span>
            
  
    MCSB v2
  

          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../Azure/Security/MCSBv2/Index/">
<span class="md-ellipsis">
    
  
    Microsoft Cloud Security Benchmark v2
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../Azure/Security/MCSBv2/Network%20Security/">
<span class="md-ellipsis">
    
  
    MCSB v2 - Network Security
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../Azure/Security/MCSBv2/Identity%20Management/">
<span class="md-ellipsis">
    
  
    MCSB v2 - Identity Management
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../Azure/Security/MCSBv2/Privileged%20Access/">
<span class="md-ellipsis">
    
  
    MCSB v2 - Privileged Access
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../Azure/Security/MCSBv2/Data%20Protection/">
<span class="md-ellipsis">
    
  
    MCSB v2 - Data Protection
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../Azure/Security/MCSBv2/Asset%20Management/">
<span class="md-ellipsis">
    
  
    MCSB v2 - Asset Management
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../Azure/Security/MCSBv2/Logging%20and%20Threat%20Detection/">
<span class="md-ellipsis">
    
  
    MCSB v2 - Logging and Threat Detection
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../Azure/Security/MCSBv2/Incident%20Response/">
<span class="md-ellipsis">
    
  
    MCSB v2 - Incident Response
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../Azure/Security/MCSBv2/Posture%20and%20Vulnerability%20Manag/">
<span class="md-ellipsis">
    
  
    MCSB v2 - Posture and Vulnerability Manag
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../Azure/Security/MCSBv2/Endpoint%20Security/">
<span class="md-ellipsis">
    
  
    MCSB v2 - Endpoint Security
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../Azure/Security/MCSBv2/Backup%20and%20Recovery/">
<span class="md-ellipsis">
    
  
    MCSB v2 - Backup and Recovery
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../Azure/Security/MCSBv2/Artificial%20Intelligence%20Securit/">
<span class="md-ellipsis">
    
  
    MCSB v2 - Artificial Intelligence Securit
  

    
  </span>
</a>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle md-toggle--indeterminate" id="__nav_5" type="checkbox">
<label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="0">
<span class="md-ellipsis">
    
  
    Tools
  

    
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_5_label" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_5">
<span class="md-nav__icon md-icon"></span>
            
  
    Tools
  

          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle md-toggle--indeterminate" id="__nav_5_1" type="checkbox">
<label class="md-nav__link" for="__nav_5_1" id="__nav_5_1_label" tabindex="0">
<span class="md-ellipsis">
    
  
    Federated Identity Credentials Report
  

    
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_5_1_label" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_5_1">
<span class="md-nav__icon md-icon"></span>
            
  
    Federated Identity Credentials Report
  

          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../Tools/Federated_Identity_Credentials_Report/README-federated-identity-credentials/">
<span class="md-ellipsis">
    
  
    Script de Reporte para Federated Identity Credentials
  

    
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle md-toggle--indeterminate" id="__nav_5_2" type="checkbox">
<label class="md-nav__link" for="__nav_5_2" id="__nav_5_2_label" tabindex="0">
<span class="md-ellipsis">
    
  
    Analyze Virtual Network Flows
  

    
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_5_2_label" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_5_2">
<span class="md-nav__icon md-icon"></span>
            
  
    Analyze Virtual Network Flows
  

          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../Tools/Analyze_Virtual_Network_Flows/">
<span class="md-ellipsis">
    
  
    Analyze-VNETFlowLogs
  

    
  </span>
</a>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</div>
</div>
</div>
<div class="md-content" data-md-component="content">
<div class="md-content__inner">
<header class="md-typeset">
<h1 id="blog">Blog</h1>
</header>
<article class="md-post md-post--excerpt">
<header class="md-post__header">
<nav class="md-post__authors md-typeset">
<span class="md-author">
<img alt="Rafael Fernández" src="https://avatars.githubusercontent.com/u/39990341">
</span>
</nav>
<div class="md-post__meta md-meta">
<ul class="md-meta__list">
<li class="md-meta__item">
<time datetime="2025-12-18 00:00:00+00:00">December 18, 2025</time></li>
<li class="md-meta__item">
            in
            
              <a class="md-meta__link" href="category/azure-services/">Azure Services</a></li>
<li class="md-meta__item">
            
              11 min read
            
          </li>
</ul>
</div>
</header>
<div class="md-post__content md-typeset">
<h2 id="seguridad-en-azure-storage-guia-completa-de-firewall-resource-instances-y-mejores-practicas"><a class="toclink" href="2025/12/18/seguridad-en-azure-storage-gu%C3%ADa-completa-de-firewall-resource-instances-y-mejores-pr%C3%A1cticas/">Seguridad en Azure Storage: Guía Completa de Firewall, Resource Instances y Mejores Prácticas</a></h2>
<h3 id="introduccion"><a class="toclink" href="2025/12/18/seguridad-en-azure-storage-gu%C3%ADa-completa-de-firewall-resource-instances-y-mejores-pr%C3%A1cticas/#introduccion">Introducción</a></h3>
<p>La seguridad de las cuentas de almacenamiento en Azure es crítica para proteger tus datos. En este artículo profundizaremos en las diferentes opciones de firewall disponibles cuando no se usa Azure private endpoint, con especial énfasis en <strong>Resource Instances</strong>, <strong>Trusted Services</strong> y las configuraciones recomendadas cuando no se utilizan Private Endpoints.</p>
<h3 id="conceptos-fundamentales"><a class="toclink" href="2025/12/18/seguridad-en-azure-storage-gu%C3%ADa-completa-de-firewall-resource-instances-y-mejores-pr%C3%A1cticas/#conceptos-fundamentales">Conceptos Fundamentales</a></h3>
<h4 id="que-es-el-firewall-de-storage-account"><a class="toclink" href="2025/12/18/seguridad-en-azure-storage-gu%C3%ADa-completa-de-firewall-resource-instances-y-mejores-pr%C3%A1cticas/#que-es-el-firewall-de-storage-account">¿Qué es el Firewall de Storage Account?</a></h4>
<p>El firewall de Azure Storage Account es una capa de seguridad que controla el acceso al <strong>endpoint público</strong> de tu cuenta de almacenamiento. Es importante entender que:</p>
<ul>
<li><strong>Un solo firewall</strong> protege TODOS los servicios (Blob, Files, Queue, Table)</li>
<li>Las reglas aplican a nivel de <strong>Storage Account</strong>, no por servicio individual</li>
<li>El firewall controla <strong>quién</strong> puede conectarse, mientras que RBAC controla <strong>qué</strong> puede hacer</li>
</ul>
<pre class="mermaid"><code>graph TD
    A[Cliente/Servicio] --&gt;|Intenta acceder| B{Firewall}
    B --&gt;|✅ Permitido| C{RBAC}
    B --&gt;|❌ Bloqueado| D[403 Forbidden]
    C --&gt;|✅ Con permisos| E[Acceso a datos]
    C --&gt;|❌ Sin permisos| F[403 Unauthorized]
</code></pre>
<h3 id="tipos-de-reglas-de-red"><a class="toclink" href="2025/12/18/seguridad-en-azure-storage-gu%C3%ADa-completa-de-firewall-resource-instances-y-mejores-pr%C3%A1cticas/#tipos-de-reglas-de-red">Tipos de Reglas de Red</a></h3>
<p>Azure Storage ofrece <strong>cuatro tipos</strong> de reglas de red que puedes configurar:</p>
<h4 id="1-virtual-network-rules"><a class="toclink" href="2025/12/18/seguridad-en-azure-storage-gu%C3%ADa-completa-de-firewall-resource-instances-y-mejores-pr%C3%A1cticas/#1-virtual-network-rules">1. Virtual Network Rules</a></h4>
<p>Permiten tráfico desde subnets específicas dentro de Azure Virtual Networks.</p>
<div class="language-powershell highlight"><pre><span></span><code><span id="__span-0-1"><a href="#__codelineno-0-1" id="__codelineno-0-1" name="__codelineno-0-1"></a><span class="c"># Agregar regla de VNet</span>
</span><span id="__span-0-2"><a href="#__codelineno-0-2" id="__codelineno-0-2" name="__codelineno-0-2"></a><span class="nb">Add-AzStorageAccountNetworkRule</span> <span class="p">`</span>
</span><span id="__span-0-3"><a href="#__codelineno-0-3" id="__codelineno-0-3" name="__codelineno-0-3"></a>    <span class="n">-ResourceGroupName</span> <span class="s2">"myRG"</span> <span class="p">`</span>
</span><span id="__span-0-4"><a href="#__codelineno-0-4" id="__codelineno-0-4" name="__codelineno-0-4"></a>    <span class="n">-Name</span> <span class="s2">"mystorageaccount"</span> <span class="p">`</span>
</span><span id="__span-0-5"><a href="#__codelineno-0-5" id="__codelineno-0-5" name="__codelineno-0-5"></a>    <span class="n">-VirtualNetworkResourceId</span> <span class="s2">"/subscriptions/xxx/resourceGroups/rg/providers/Microsoft.Network/virtualNetworks/vnet/subnets/subnet"</span>
</span></code></pre></div>
<p><strong>Límite:</strong> Máximo 400 reglas por Storage Account</p>
<h4 id="2-ip-network-rules"><a class="toclink" href="2025/12/18/seguridad-en-azure-storage-gu%C3%ADa-completa-de-firewall-resource-instances-y-mejores-pr%C3%A1cticas/#2-ip-network-rules">2. IP Network Rules</a></h4>
<p>Permiten tráfico desde rangos de IP públicas específicas.</p>
<div class="language-powershell highlight"><pre><span></span><code><span id="__span-1-1"><a href="#__codelineno-1-1" id="__codelineno-1-1" name="__codelineno-1-1"></a><span class="c"># Agregar regla de IP</span>
</span><span id="__span-1-2"><a href="#__codelineno-1-2" id="__codelineno-1-2" name="__codelineno-1-2"></a><span class="nb">Add-AzStorageAccountNetworkRule</span> <span class="p">`</span>
</span><span id="__span-1-3"><a href="#__codelineno-1-3" id="__codelineno-1-3" name="__codelineno-1-3"></a>    <span class="n">-ResourceGroupName</span> <span class="s2">"myRG"</span> <span class="p">`</span>
</span><span id="__span-1-4"><a href="#__codelineno-1-4" id="__codelineno-1-4" name="__codelineno-1-4"></a>    <span class="n">-Name</span> <span class="s2">"mystorageaccount"</span> <span class="p">`</span>
</span><span id="__span-1-5"><a href="#__codelineno-1-5" id="__codelineno-1-5" name="__codelineno-1-5"></a>    <span class="n">-IPAddressOrRange</span> <span class="s2">"203.0.113.0/24"</span>
</span></code></pre></div>
<p><strong>Límite:</strong> Máximo 400 reglas por Storage Account</p>
<h4 id="3-resource-instance-rules"><a class="toclink" href="2025/12/18/seguridad-en-azure-storage-gu%C3%ADa-completa-de-firewall-resource-instances-y-mejores-pr%C3%A1cticas/#3-resource-instance-rules">3. Resource Instance Rules ⭐</a></h4>
<p>Permiten tráfico desde <strong>recursos Azure específicos</strong> identificados por su Resource ID.</p>
<div class="language-powershell highlight"><pre><span></span><code><span id="__span-2-1"><a href="#__codelineno-2-1" id="__codelineno-2-1" name="__codelineno-2-1"></a><span class="c"># Agregar Resource Instance</span>
</span><span id="__span-2-2"><a href="#__codelineno-2-2" id="__codelineno-2-2" name="__codelineno-2-2"></a><span class="nb">Add-AzStorageAccountNetworkRule</span> <span class="p">`</span>
</span><span id="__span-2-3"><a href="#__codelineno-2-3" id="__codelineno-2-3" name="__codelineno-2-3"></a>    <span class="n">-ResourceGroupName</span> <span class="s2">"myRG"</span> <span class="p">`</span>
</span><span id="__span-2-4"><a href="#__codelineno-2-4" id="__codelineno-2-4" name="__codelineno-2-4"></a>    <span class="n">-Name</span> <span class="s2">"mystorageaccount"</span> <span class="p">`</span>
</span><span id="__span-2-5"><a href="#__codelineno-2-5" id="__codelineno-2-5" name="__codelineno-2-5"></a>    <span class="n">-TenantId</span> <span class="s2">"your-tenant-id"</span> <span class="p">`</span>
</span><span id="__span-2-6"><a href="#__codelineno-2-6" id="__codelineno-2-6" name="__codelineno-2-6"></a>    <span class="n">-ResourceId</span> <span class="s2">"/subscriptions/xxx/resourceGroups/rg/providers/Microsoft.Synapse/workspaces/myworkspace"</span>
</span></code></pre></div>
<p><strong>Límite:</strong> Máximo 200 reglas por Storage Account</p>
<h4 id="4-trusted-service-exceptions"><a class="toclink" href="2025/12/18/seguridad-en-azure-storage-gu%C3%ADa-completa-de-firewall-resource-instances-y-mejores-pr%C3%A1cticas/#4-trusted-service-exceptions">4. Trusted Service Exceptions</a></h4>
<p>Permiten tráfico desde servicios de Microsoft en la lista de confianza.</p>
<div class="language-powershell highlight"><pre><span></span><code><span id="__span-3-1"><a href="#__codelineno-3-1" id="__codelineno-3-1" name="__codelineno-3-1"></a><span class="c"># Habilitar Trusted Services</span>
</span><span id="__span-3-2"><a href="#__codelineno-3-2" id="__codelineno-3-2" name="__codelineno-3-2"></a><span class="nb">Update-AzStorageAccountNetworkRuleSet</span> <span class="p">`</span>
</span><span id="__span-3-3"><a href="#__codelineno-3-3" id="__codelineno-3-3" name="__codelineno-3-3"></a>    <span class="n">-ResourceGroupName</span> <span class="s2">"myRG"</span> <span class="p">`</span>
</span><span id="__span-3-4"><a href="#__codelineno-3-4" id="__codelineno-3-4" name="__codelineno-3-4"></a>    <span class="n">-Name</span> <span class="s2">"mystorageaccount"</span> <span class="p">`</span>
</span><span id="__span-3-5"><a href="#__codelineno-3-5" id="__codelineno-3-5" name="__codelineno-3-5"></a>    <span class="n">-Bypass</span> <span class="n">AzureServices</span><span class="p">,</span><span class="n">Logging</span><span class="p">,</span><span class="n">Metrics</span>
</span></code></pre></div>
<p><strong>Límite:</strong> Sin límite (es un flag de configuración)</p>
<h3 id="resource-instances-control-granular"><a class="toclink" href="2025/12/18/seguridad-en-azure-storage-gu%C3%ADa-completa-de-firewall-resource-instances-y-mejores-pr%C3%A1cticas/#resource-instances-control-granular">Resource Instances: Control Granular</a></h3>
<h4 id="que-son-las-resource-instances"><a class="toclink" href="2025/12/18/seguridad-en-azure-storage-gu%C3%ADa-completa-de-firewall-resource-instances-y-mejores-pr%C3%A1cticas/#que-son-las-resource-instances">¿Qué son las Resource Instances?</a></h4>
<p>Las <strong>Resource Instance Rules</strong> son la forma más segura de permitir acceso a servicios Azure cuando no usas Private Endpoints. A diferencia de Trusted Services (que permite CUALQUIER instancia de un servicio en tu tenant), Resource Instances te permite especificar <strong>exactamente qué recurso</strong> puede acceder.</p>
<h4 id="comparacion-trusted-services-vs-resource-instances"><a class="toclink" href="2025/12/18/seguridad-en-azure-storage-gu%C3%ADa-completa-de-firewall-resource-instances-y-mejores-pr%C3%A1cticas/#comparacion-trusted-services-vs-resource-instances">Comparación: Trusted Services vs Resource Instances</a></h4>
<table>
<thead>
<tr>
<th>Aspecto</th>
<th>Trusted Services</th>
<th>Resource Instances</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Granularidad</strong></td>
<td>❌ Cualquier instancia del tenant</td>
<td>✅ Solo recursos específicos</td>
</tr>
<tr>
<td><strong>Seguridad</strong></td>
<td>⚠️ Permisivo</td>
<td>✅ Restrictivo</td>
</tr>
<tr>
<td><strong>Principio de menor privilegio</strong></td>
<td>❌ No cumple</td>
<td>✅ Cumple completamente</td>
</tr>
<tr>
<td><strong>Auditoría</strong></td>
<td>❌ Difícil rastrear</td>
<td>✅ Trazabilidad completa</td>
</tr>
<tr>
<td><strong>Compliance</strong></td>
<td>⚠️ Puede tener problemas</td>
<td>✅ SOC2, ISO27001 friendly</td>
</tr>
<tr>
<td><strong>Zero Trust</strong></td>
<td>❌ No alineado</td>
<td>✅ Completamente alineado</td>
</tr>
</tbody>
</table>
<h4 id="ejemplo-practico"><a class="toclink" href="2025/12/18/seguridad-en-azure-storage-gu%C3%ADa-completa-de-firewall-resource-instances-y-mejores-pr%C3%A1cticas/#ejemplo-practico">Ejemplo Práctico</a></h4>
<p>Imagina que tienes múltiples Azure Synapse Workspaces en tu tenant:</p>
<div class="tabbed-set tabbed-alternate" data-tabs="1:2"><input checked="checked" id="__tabbed_1_1" name="__tabbed_1" type="radio"><input id="__tabbed_1_2" name="__tabbed_1" type="radio"><div class="tabbed-labels"><label for="__tabbed_1_1">❌ Con Trusted Services</label><label for="__tabbed_1_2">✅ Con Resource Instances</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="language-powershell highlight"><pre><span></span><code><span id="__span-4-1"><a href="#__codelineno-4-1" id="__codelineno-4-1" name="__codelineno-4-1"></a><span class="nb">Update-AzStorageAccountNetworkRuleSet</span> <span class="p">`</span>
</span><span id="__span-4-2"><a href="#__codelineno-4-2" id="__codelineno-4-2" name="__codelineno-4-2"></a>    <span class="n">-Bypass</span> <span class="n">AzureServices</span>
</span><span id="__span-4-3"><a href="#__codelineno-4-3" id="__codelineno-4-3" name="__codelineno-4-3"></a>
</span><span id="__span-4-4"><a href="#__codelineno-4-4" id="__codelineno-4-4" name="__codelineno-4-4"></a><span class="c"># Resultado:</span>
</span><span id="__span-4-5"><a href="#__codelineno-4-5" id="__codelineno-4-5" name="__codelineno-4-5"></a><span class="c"># ✅ prod-synapse → Acceso permitido</span>
</span><span id="__span-4-6"><a href="#__codelineno-4-6" id="__codelineno-4-6" name="__codelineno-4-6"></a><span class="c"># ✅ dev-synapse → Acceso permitido</span>
</span><span id="__span-4-7"><a href="#__codelineno-4-7" id="__codelineno-4-7" name="__codelineno-4-7"></a><span class="c"># ✅ test-synapse → Acceso permitido</span>
</span><span id="__span-4-8"><a href="#__codelineno-4-8" id="__codelineno-4-8" name="__codelineno-4-8"></a><span class="c"># ✅ Cualquier otro Synapse creado → Acceso permitido</span>
</span></code></pre></div>
</div>
<div class="tabbed-block">
<div class="language-powershell highlight"><pre><span></span><code><span id="__span-5-1"><a href="#__codelineno-5-1" id="__codelineno-5-1" name="__codelineno-5-1"></a><span class="nb">Add-AzStorageAccountNetworkRule</span> <span class="p">`</span>
</span><span id="__span-5-2"><a href="#__codelineno-5-2" id="__codelineno-5-2" name="__codelineno-5-2"></a>    <span class="n">-TenantId</span> <span class="s2">"xxx"</span> <span class="p">`</span>
</span><span id="__span-5-3"><a href="#__codelineno-5-3" id="__codelineno-5-3" name="__codelineno-5-3"></a>    <span class="n">-ResourceId</span> <span class="s2">"/subscriptions/xxx/.../Microsoft.Synapse/workspaces/prod-synapse"</span>
</span><span id="__span-5-4"><a href="#__codelineno-5-4" id="__codelineno-5-4" name="__codelineno-5-4"></a>
</span><span id="__span-5-5"><a href="#__codelineno-5-5" id="__codelineno-5-5" name="__codelineno-5-5"></a><span class="c"># Resultado:</span>
</span><span id="__span-5-6"><a href="#__codelineno-5-6" id="__codelineno-5-6" name="__codelineno-5-6"></a><span class="c"># ✅ prod-synapse → Acceso permitido</span>
</span><span id="__span-5-7"><a href="#__codelineno-5-7" id="__codelineno-5-7" name="__codelineno-5-7"></a><span class="c"># ❌ dev-synapse → Bloqueado</span>
</span><span id="__span-5-8"><a href="#__codelineno-5-8" id="__codelineno-5-8" name="__codelineno-5-8"></a><span class="c"># ❌ test-synapse → Bloqueado</span>
</span><span id="__span-5-9"><a href="#__codelineno-5-9" id="__codelineno-5-9" name="__codelineno-5-9"></a><span class="c"># ❌ Cualquier otro Synapse → Bloqueado</span>
</span></code></pre></div>
</div>
</div>
</div>
<h3 id="requerimientos-para-resource-instances"><a class="toclink" href="2025/12/18/seguridad-en-azure-storage-gu%C3%ADa-completa-de-firewall-resource-instances-y-mejores-pr%C3%A1cticas/#requerimientos-para-resource-instances">Requerimientos para Resource Instances</a></h3>
<p>Para usar Resource Instances correctamente, necesitas cumplir varios requisitos:</p>
<h4 id="checklist-de-requerimientos"><a class="toclink" href="2025/12/18/seguridad-en-azure-storage-gu%C3%ADa-completa-de-firewall-resource-instances-y-mejores-pr%C3%A1cticas/#checklist-de-requerimientos">✅ Checklist de Requerimientos</a></h4>
<ul class="task-list">
<li class="task-list-item"><label class="task-list-control"><input checked="" disabled="" type="checkbox"><span class="task-list-indicator"></span></label> <strong>Managed Identity</strong>: El recurso debe tener System-Assigned Managed Identity habilitada</li>
<li class="task-list-item"><label class="task-list-control"><input checked="" disabled="" type="checkbox"><span class="task-list-indicator"></span></label> <strong>Mismo Tenant</strong>: Recurso y Storage Account en el mismo Microsoft Entra tenant</li>
<li class="task-list-item"><label class="task-list-control"><input checked="" disabled="" type="checkbox"><span class="task-list-indicator"></span></label> <strong>Firewall Restrictivo</strong>: Storage Account con <code>DefaultAction: Deny</code></li>
<li class="task-list-item"><label class="task-list-control"><input checked="" disabled="" type="checkbox"><span class="task-list-indicator"></span></label> <strong>Permisos para configurar</strong>: Rol Storage Account Contributor o superior</li>
<li class="task-list-item"><label class="task-list-control"><input checked="" disabled="" type="checkbox"><span class="task-list-indicator"></span></label> <strong>Resource ID completo</strong>: Necesitas el Resource ID del recurso Azure</li>
<li class="task-list-item"><label class="task-list-control"><input checked="" disabled="" type="checkbox"><span class="task-list-indicator"></span></label> <strong>Rol RBAC asignado</strong>: La Managed Identity necesita roles de acceso a datos</li>
</ul>
<div class="admonition warning">
<p class="admonition-title">Importante</p>
<p>La Resource Instance Rule solo da acceso al <strong>endpoint público</strong>, NO a los datos. Debes asignar roles RBAC a la Managed Identity del recurso.</p>
</div>
<h4 id="configuracion-completa-paso-a-paso"><a class="toclink" href="2025/12/18/seguridad-en-azure-storage-gu%C3%ADa-completa-de-firewall-resource-instances-y-mejores-pr%C3%A1cticas/#configuracion-completa-paso-a-paso">Configuración Completa Paso a Paso</a></h4>
<div class="language-powershell highlight"><pre><span></span><code><span id="__span-6-1"><a href="#__codelineno-6-1" id="__codelineno-6-1" name="__codelineno-6-1"></a><span class="c"># Variables</span>
</span><span id="__span-6-2"><a href="#__codelineno-6-2" id="__codelineno-6-2" name="__codelineno-6-2"></a><span class="nv">$rgName</span> <span class="p">=</span> <span class="s2">"myResourceGroup"</span>
</span><span id="__span-6-3"><a href="#__codelineno-6-3" id="__codelineno-6-3" name="__codelineno-6-3"></a><span class="nv">$storageAccount</span> <span class="p">=</span> <span class="s2">"mystorageaccount"</span>
</span><span id="__span-6-4"><a href="#__codelineno-6-4" id="__codelineno-6-4" name="__codelineno-6-4"></a><span class="nv">$synapseWorkspaceName</span> <span class="p">=</span> <span class="s2">"prod-synapse"</span>
</span><span id="__span-6-5"><a href="#__codelineno-6-5" id="__codelineno-6-5" name="__codelineno-6-5"></a><span class="nv">$synapseRG</span> <span class="p">=</span> <span class="s2">"synapse-rg"</span>
</span><span id="__span-6-6"><a href="#__codelineno-6-6" id="__codelineno-6-6" name="__codelineno-6-6"></a><span class="nv">$tenantId</span> <span class="p">=</span> <span class="s2">"xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx"</span>
</span><span id="__span-6-7"><a href="#__codelineno-6-7" id="__codelineno-6-7" name="__codelineno-6-7"></a>
</span><span id="__span-6-8"><a href="#__codelineno-6-8" id="__codelineno-6-8" name="__codelineno-6-8"></a><span class="c"># 1. Obtener Resource ID del Synapse Workspace</span>
</span><span id="__span-6-9"><a href="#__codelineno-6-9" id="__codelineno-6-9" name="__codelineno-6-9"></a><span class="nv">$synapseResourceId</span> <span class="p">=</span> <span class="p">(</span><span class="nb">Get-AzSynapseWorkspace</span> <span class="p">`</span>
</span><span id="__span-6-10"><a href="#__codelineno-6-10" id="__codelineno-6-10" name="__codelineno-6-10"></a>    <span class="n">-ResourceGroupName</span> <span class="nv">$synapseRG</span> <span class="p">`</span>
</span><span id="__span-6-11"><a href="#__codelineno-6-11" id="__codelineno-6-11" name="__codelineno-6-11"></a>    <span class="n">-Name</span> <span class="nv">$synapseWorkspaceName</span><span class="p">).</span><span class="n">Id</span>
</span><span id="__span-6-12"><a href="#__codelineno-6-12" id="__codelineno-6-12" name="__codelineno-6-12"></a>
</span><span id="__span-6-13"><a href="#__codelineno-6-13" id="__codelineno-6-13" name="__codelineno-6-13"></a><span class="c"># 2. Configurar firewall restrictivo</span>
</span><span id="__span-6-14"><a href="#__codelineno-6-14" id="__codelineno-6-14" name="__codelineno-6-14"></a><span class="nb">Update-AzStorageAccountNetworkRuleSet</span> <span class="p">`</span>
</span><span id="__span-6-15"><a href="#__codelineno-6-15" id="__codelineno-6-15" name="__codelineno-6-15"></a>    <span class="n">-ResourceGroupName</span> <span class="nv">$rgName</span> <span class="p">`</span>
</span><span id="__span-6-16"><a href="#__codelineno-6-16" id="__codelineno-6-16" name="__codelineno-6-16"></a>    <span class="n">-Name</span> <span class="nv">$storageAccount</span> <span class="p">`</span>
</span><span id="__span-6-17"><a href="#__codelineno-6-17" id="__codelineno-6-17" name="__codelineno-6-17"></a>    <span class="n">-DefaultAction</span> <span class="n">Deny</span> <span class="p">`</span>
</span><span id="__span-6-18"><a href="#__codelineno-6-18" id="__codelineno-6-18" name="__codelineno-6-18"></a>    <span class="n">-Bypass</span> <span class="n">Logging</span><span class="p">,</span><span class="n">Metrics</span>
</span><span id="__span-6-19"><a href="#__codelineno-6-19" id="__codelineno-6-19" name="__codelineno-6-19"></a>
</span><span id="__span-6-20"><a href="#__codelineno-6-20" id="__codelineno-6-20" name="__codelineno-6-20"></a><span class="c"># 3. Agregar Resource Instance Rule</span>
</span><span id="__span-6-21"><a href="#__codelineno-6-21" id="__codelineno-6-21" name="__codelineno-6-21"></a><span class="nb">Add-AzStorageAccountNetworkRule</span> <span class="p">`</span>
</span><span id="__span-6-22"><a href="#__codelineno-6-22" id="__codelineno-6-22" name="__codelineno-6-22"></a>    <span class="n">-ResourceGroupName</span> <span class="nv">$rgName</span> <span class="p">`</span>
</span><span id="__span-6-23"><a href="#__codelineno-6-23" id="__codelineno-6-23" name="__codelineno-6-23"></a>    <span class="n">-Name</span> <span class="nv">$storageAccount</span> <span class="p">`</span>
</span><span id="__span-6-24"><a href="#__codelineno-6-24" id="__codelineno-6-24" name="__codelineno-6-24"></a>    <span class="n">-TenantId</span> <span class="nv">$tenantId</span> <span class="p">`</span>
</span><span id="__span-6-25"><a href="#__codelineno-6-25" id="__codelineno-6-25" name="__codelineno-6-25"></a>    <span class="n">-ResourceId</span> <span class="nv">$synapseResourceId</span>
</span><span id="__span-6-26"><a href="#__codelineno-6-26" id="__codelineno-6-26" name="__codelineno-6-26"></a>
</span><span id="__span-6-27"><a href="#__codelineno-6-27" id="__codelineno-6-27" name="__codelineno-6-27"></a><span class="c"># 4. Obtener Managed Identity Object ID</span>
</span><span id="__span-6-28"><a href="#__codelineno-6-28" id="__codelineno-6-28" name="__codelineno-6-28"></a><span class="nv">$workspace</span> <span class="p">=</span> <span class="nb">Get-AzSynapseWorkspace</span> <span class="p">`</span>
</span><span id="__span-6-29"><a href="#__codelineno-6-29" id="__codelineno-6-29" name="__codelineno-6-29"></a>    <span class="n">-ResourceGroupName</span> <span class="nv">$synapseRG</span> <span class="p">`</span>
</span><span id="__span-6-30"><a href="#__codelineno-6-30" id="__codelineno-6-30" name="__codelineno-6-30"></a>    <span class="n">-Name</span> <span class="nv">$synapseWorkspaceName</span>
</span><span id="__span-6-31"><a href="#__codelineno-6-31" id="__codelineno-6-31" name="__codelineno-6-31"></a><span class="nv">$principalId</span> <span class="p">=</span> <span class="nv">$workspace</span><span class="p">.</span><span class="n">Identity</span><span class="p">.</span><span class="n">PrincipalId</span>
</span><span id="__span-6-32"><a href="#__codelineno-6-32" id="__codelineno-6-32" name="__codelineno-6-32"></a>
</span><span id="__span-6-33"><a href="#__codelineno-6-33" id="__codelineno-6-33" name="__codelineno-6-33"></a><span class="c"># 5. Asignar rol RBAC para acceso a datos</span>
</span><span id="__span-6-34"><a href="#__codelineno-6-34" id="__codelineno-6-34" name="__codelineno-6-34"></a><span class="nb">New-AzRoleAssignment</span> <span class="p">`</span>
</span><span id="__span-6-35"><a href="#__codelineno-6-35" id="__codelineno-6-35" name="__codelineno-6-35"></a>    <span class="n">-ObjectId</span> <span class="nv">$principalId</span> <span class="p">`</span>
</span><span id="__span-6-36"><a href="#__codelineno-6-36" id="__codelineno-6-36" name="__codelineno-6-36"></a>    <span class="n">-RoleDefinitionName</span> <span class="s2">"Storage Blob Data Contributor"</span> <span class="p">`</span>
</span><span id="__span-6-37"><a href="#__codelineno-6-37" id="__codelineno-6-37" name="__codelineno-6-37"></a>    <span class="n">-Scope</span> <span class="s2">"/subscriptions/</span><span class="p">$((</span><span class="nb">Get-AzContext</span><span class="p">).</span><span class="n">Subscription</span><span class="p">.</span><span class="n">Id</span><span class="p">)</span><span class="s2">/resourceGroups/$rgName/providers/Microsoft.Storage/storageAccounts/$storageAccount"</span>
</span><span id="__span-6-38"><a href="#__codelineno-6-38" id="__codelineno-6-38" name="__codelineno-6-38"></a>
</span><span id="__span-6-39"><a href="#__codelineno-6-39" id="__codelineno-6-39" name="__codelineno-6-39"></a><span class="nb">Write-Host</span> <span class="s2">"✅ Configuración completa!"</span> <span class="n">-ForegroundColor</span> <span class="n">Green</span>
</span></code></pre></div>
<h3 id="excepciones-bypass-logging-y-metrics"><a class="toclink" href="2025/12/18/seguridad-en-azure-storage-gu%C3%ADa-completa-de-firewall-resource-instances-y-mejores-pr%C3%A1cticas/#excepciones-bypass-logging-y-metrics">Excepciones (Bypass): Logging y Metrics</a></h3>
<p>Las <strong>Exceptions</strong> son configuraciones especiales que permiten que ciertos servicios bypaseen el firewall.</p>
<h4 id="tipos-de-excepciones"><a class="toclink" href="2025/12/18/seguridad-en-azure-storage-gu%C3%ADa-completa-de-firewall-resource-instances-y-mejores-pr%C3%A1cticas/#tipos-de-excepciones">Tipos de Excepciones</a></h4>
<h5 id="1-allow-azure-services-on-the-trusted-services-list"><a class="toclink" href="2025/12/18/seguridad-en-azure-storage-gu%C3%ADa-completa-de-firewall-resource-instances-y-mejores-pr%C3%A1cticas/#1-allow-azure-services-on-the-trusted-services-list">1. Allow Azure services on the trusted services list</a></h5>
<div class="language-yaml highlight"><pre><span></span><code><span id="__span-7-1"><a href="#__codelineno-7-1" id="__codelineno-7-1" name="__codelineno-7-1"></a><span class="nt">Bypass</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">AzureServices</span>
</span><span id="__span-7-2"><a href="#__codelineno-7-2" id="__codelineno-7-2" name="__codelineno-7-2"></a>
</span><span id="__span-7-3"><a href="#__codelineno-7-3" id="__codelineno-7-3" name="__codelineno-7-3"></a><span class="l l-Scalar l-Scalar-Plain">¿Qué hace?</span>
</span><span id="__span-7-4"><a href="#__codelineno-7-4" id="__codelineno-7-4" name="__codelineno-7-4"></a><span class="w">  </span><span class="l l-Scalar l-Scalar-Plain">- Permite TODOS los servicios de la lista de Trusted Services</span>
</span><span id="__span-7-5"><a href="#__codelineno-7-5" id="__codelineno-7-5" name="__codelineno-7-5"></a><span class="w">  </span><span class="l l-Scalar l-Scalar-Plain">- Incluye</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Azure Backup, Synapse, SQL, Stream Analytics, etc.</span>
</span><span id="__span-7-6"><a href="#__codelineno-7-6" id="__codelineno-7-6" name="__codelineno-7-6"></a>
</span><span id="__span-7-7"><a href="#__codelineno-7-7" id="__codelineno-7-7" name="__codelineno-7-7"></a><span class="nt">⚠️ Recomendación</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Usar Resource Instances en su lugar</span>
</span></code></pre></div>
<h5 id="2-allow-read-access-to-storage-logging"><a class="toclink" href="2025/12/18/seguridad-en-azure-storage-gu%C3%ADa-completa-de-firewall-resource-instances-y-mejores-pr%C3%A1cticas/#2-allow-read-access-to-storage-logging">2. Allow read access to storage logging</a></h5>
<div class="language-yaml highlight"><pre><span></span><code><span id="__span-8-1"><a href="#__codelineno-8-1" id="__codelineno-8-1" name="__codelineno-8-1"></a><span class="nt">Bypass</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Logging</span>
</span><span id="__span-8-2"><a href="#__codelineno-8-2" id="__codelineno-8-2" name="__codelineno-8-2"></a>
</span><span id="__span-8-3"><a href="#__codelineno-8-3" id="__codelineno-8-3" name="__codelineno-8-3"></a><span class="l l-Scalar l-Scalar-Plain">¿Qué hace?</span>
</span><span id="__span-8-4"><a href="#__codelineno-8-4" id="__codelineno-8-4" name="__codelineno-8-4"></a><span class="w">  </span><span class="l l-Scalar l-Scalar-Plain">- Permite leer el contenedor especial "$logs"</span>
</span><span id="__span-8-5"><a href="#__codelineno-8-5" id="__codelineno-8-5" name="__codelineno-8-5"></a><span class="w">  </span><span class="l l-Scalar l-Scalar-Plain">- Solo para diagnósticos de Azure Monitor</span>
</span><span id="__span-8-6"><a href="#__codelineno-8-6" id="__codelineno-8-6" name="__codelineno-8-6"></a><span class="w">  </span><span class="l l-Scalar l-Scalar-Plain">- NO da acceso a tus datos de aplicación</span>
</span><span id="__span-8-7"><a href="#__codelineno-8-7" id="__codelineno-8-7" name="__codelineno-8-7"></a>
</span><span id="__span-8-8"><a href="#__codelineno-8-8" id="__codelineno-8-8" name="__codelineno-8-8"></a><span class="nt">✅ Recomendación</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">SIEMPRE habilitado</span>
</span></code></pre></div>
<h5 id="3-allow-read-access-to-storage-metrics"><a class="toclink" href="2025/12/18/seguridad-en-azure-storage-gu%C3%ADa-completa-de-firewall-resource-instances-y-mejores-pr%C3%A1cticas/#3-allow-read-access-to-storage-metrics">3. Allow read access to storage metrics</a></h5>
<div class="language-yaml highlight"><pre><span></span><code><span id="__span-9-1"><a href="#__codelineno-9-1" id="__codelineno-9-1" name="__codelineno-9-1"></a><span class="nt">Bypass</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Metrics</span>
</span><span id="__span-9-2"><a href="#__codelineno-9-2" id="__codelineno-9-2" name="__codelineno-9-2"></a>
</span><span id="__span-9-3"><a href="#__codelineno-9-3" id="__codelineno-9-3" name="__codelineno-9-3"></a><span class="l l-Scalar l-Scalar-Plain">¿Qué hace?</span>
</span><span id="__span-9-4"><a href="#__codelineno-9-4" id="__codelineno-9-4" name="__codelineno-9-4"></a><span class="w">  </span><span class="l l-Scalar l-Scalar-Plain">- Permite leer las tablas "$Metrics*"</span>
</span><span id="__span-9-5"><a href="#__codelineno-9-5" id="__codelineno-9-5" name="__codelineno-9-5"></a><span class="w">  </span><span class="l l-Scalar l-Scalar-Plain">- Solo para métricas de Azure Monitor</span>
</span><span id="__span-9-6"><a href="#__codelineno-9-6" id="__codelineno-9-6" name="__codelineno-9-6"></a><span class="w">  </span><span class="l l-Scalar l-Scalar-Plain">- NO da acceso a tus datos de aplicación</span>
</span><span id="__span-9-7"><a href="#__codelineno-9-7" id="__codelineno-9-7" name="__codelineno-9-7"></a>
</span><span id="__span-9-8"><a href="#__codelineno-9-8" id="__codelineno-9-8" name="__codelineno-9-8"></a><span class="nt">✅ Recomendación</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">SIEMPRE habilitado</span>
</span></code></pre></div>
<h4 id="como-configurar-excepciones-en-el-portal"><a class="toclink" href="2025/12/18/seguridad-en-azure-storage-gu%C3%ADa-completa-de-firewall-resource-instances-y-mejores-pr%C3%A1cticas/#como-configurar-excepciones-en-el-portal">Cómo Configurar Excepciones en el Portal</a></h4>
<ol>
<li>Ve a tu Storage Account</li>
<li>Navega a: <strong>Security + networking</strong> → <strong>Networking</strong></li>
<li>Click en <strong>View</strong> junto a "Virtual networks, IP addresses, and exceptions"</li>
<li>Scroll down hasta la sección <strong>Exceptions</strong></li>
<li>Marca/desmarca los checkboxes según necesites:</li>
<li>☐ Allow Azure services on the trusted services list</li>
<li>☑️ Allow read access to storage logging</li>
<li>☑️ Allow read access to storage metrics</li>
<li>Click en <strong>Save</strong></li>
</ol>
<h3 id="configuracion-recomendada-sin-private-endpoints"><a class="toclink" href="2025/12/18/seguridad-en-azure-storage-gu%C3%ADa-completa-de-firewall-resource-instances-y-mejores-pr%C3%A1cticas/#configuracion-recomendada-sin-private-endpoints">Configuración Recomendada sin Private Endpoints</a></h3>
<p>Esta es la configuración óptima para máxima seguridad sin el costo adicional de Private Endpoints:</p>
<h4 id="configuracion-de-produccion"><a class="toclink" href="2025/12/18/seguridad-en-azure-storage-gu%C3%ADa-completa-de-firewall-resource-instances-y-mejores-pr%C3%A1cticas/#configuracion-de-produccion">🎯 Configuración de Producción</a></h4>
<div class="admonition info">
<p class="admonition-title">Nota sobre Azure Backup</p>
<p>Si usas <strong>Azure Backup para discos no administrados</strong>, necesitarás habilitar <code>AzureServices</code> en el Bypass. Ver <a href="2025/12/18/seguridad-en-azure-storage-gu%C3%ADa-completa-de-firewall-resource-instances-y-mejores-pr%C3%A1cticas/#casos-especiales-servicios-que-requieren-trusted-services">sección de Azure Backup</a> para más detalles.</p>
</div>
<div class="language-powershell highlight"><pre><span></span><code><span id="__span-10-1"><a href="#__codelineno-10-1" id="__codelineno-10-1" name="__codelineno-10-1"></a><span class="c"># 1. Configurar firewall restrictivo con excepciones de lectura</span>
</span><span id="__span-10-2"><a href="#__codelineno-10-2" id="__codelineno-10-2" name="__codelineno-10-2"></a><span class="nb">Update-AzStorageAccountNetworkRuleSet</span> <span class="p">`</span>
</span><span id="__span-10-3"><a href="#__codelineno-10-3" id="__codelineno-10-3" name="__codelineno-10-3"></a>    <span class="n">-ResourceGroupName</span> <span class="s2">"myRG"</span> <span class="p">`</span>
</span><span id="__span-10-4"><a href="#__codelineno-10-4" id="__codelineno-10-4" name="__codelineno-10-4"></a>    <span class="n">-Name</span> <span class="s2">"mystorageaccount"</span> <span class="p">`</span>
</span><span id="__span-10-5"><a href="#__codelineno-10-5" id="__codelineno-10-5" name="__codelineno-10-5"></a>    <span class="n">-DefaultAction</span> <span class="n">Deny</span> <span class="p">`</span>
</span><span id="__span-10-6"><a href="#__codelineno-10-6" id="__codelineno-10-6" name="__codelineno-10-6"></a>    <span class="n">-Bypass</span> <span class="n">Logging</span><span class="p">,</span><span class="n">Metrics</span>  <span class="c"># SIN AzureServices (a menos que uses Azure Backup)</span>
</span><span id="__span-10-7"><a href="#__codelineno-10-7" id="__codelineno-10-7" name="__codelineno-10-7"></a>
</span><span id="__span-10-8"><a href="#__codelineno-10-8" id="__codelineno-10-8" name="__codelineno-10-8"></a><span class="c"># 2. Agregar Resource Instances específicas</span>
</span><span id="__span-10-9"><a href="#__codelineno-10-9" id="__codelineno-10-9" name="__codelineno-10-9"></a><span class="nv">$resources</span> <span class="p">=</span> <span class="p">@(</span>
</span><span id="__span-10-10"><a href="#__codelineno-10-10" id="__codelineno-10-10" name="__codelineno-10-10"></a>    <span class="s2">"/subscriptions/xxx/resourceGroups/rg1/providers/Microsoft.Synapse/workspaces/prod-synapse"</span><span class="p">,</span>
</span><span id="__span-10-11"><a href="#__codelineno-10-11" id="__codelineno-10-11" name="__codelineno-10-11"></a>    <span class="s2">"/subscriptions/xxx/resourceGroups/rg1/providers/Microsoft.DataFactory/factories/prod-adf"</span><span class="p">,</span>
</span><span id="__span-10-12"><a href="#__codelineno-10-12" id="__codelineno-10-12" name="__codelineno-10-12"></a>    <span class="s2">"/subscriptions/xxx/resourceGroups/rg1/providers/Microsoft.Databricks/workspaces/prod-dbx"</span>
</span><span id="__span-10-13"><a href="#__codelineno-10-13" id="__codelineno-10-13" name="__codelineno-10-13"></a><span class="p">)</span>
</span><span id="__span-10-14"><a href="#__codelineno-10-14" id="__codelineno-10-14" name="__codelineno-10-14"></a>
</span><span id="__span-10-15"><a href="#__codelineno-10-15" id="__codelineno-10-15" name="__codelineno-10-15"></a><span class="k">foreach</span> <span class="p">(</span><span class="nv">$resourceId</span> <span class="k">in</span> <span class="nv">$resources</span><span class="p">)</span> <span class="p">{</span>
</span><span id="__span-10-16"><a href="#__codelineno-10-16" id="__codelineno-10-16" name="__codelineno-10-16"></a>    <span class="nb">Add-AzStorageAccountNetworkRule</span> <span class="p">`</span>
</span><span id="__span-10-17"><a href="#__codelineno-10-17" id="__codelineno-10-17" name="__codelineno-10-17"></a>        <span class="n">-ResourceGroupName</span> <span class="s2">"myRG"</span> <span class="p">`</span>
</span><span id="__span-10-18"><a href="#__codelineno-10-18" id="__codelineno-10-18" name="__codelineno-10-18"></a>        <span class="n">-Name</span> <span class="s2">"mystorageaccount"</span> <span class="p">`</span>
</span><span id="__span-10-19"><a href="#__codelineno-10-19" id="__codelineno-10-19" name="__codelineno-10-19"></a>        <span class="n">-TenantId</span> <span class="s2">"your-tenant-id"</span> <span class="p">`</span>
</span><span id="__span-10-20"><a href="#__codelineno-10-20" id="__codelineno-10-20" name="__codelineno-10-20"></a>        <span class="n">-ResourceId</span> <span class="nv">$resourceId</span>
</span><span id="__span-10-21"><a href="#__codelineno-10-21" id="__codelineno-10-21" name="__codelineno-10-21"></a><span class="p">}</span>
</span><span id="__span-10-22"><a href="#__codelineno-10-22" id="__codelineno-10-22" name="__codelineno-10-22"></a>
</span><span id="__span-10-23"><a href="#__codelineno-10-23" id="__codelineno-10-23" name="__codelineno-10-23"></a><span class="c"># 3. Agregar IPs de oficina/VPN (opcional)</span>
</span><span id="__span-10-24"><a href="#__codelineno-10-24" id="__codelineno-10-24" name="__codelineno-10-24"></a><span class="nv">$officeIPs</span> <span class="p">=</span> <span class="p">@(</span><span class="s2">"203.0.113.10"</span><span class="p">,</span> <span class="s2">"198.51.100.0/24"</span><span class="p">)</span>
</span><span id="__span-10-25"><a href="#__codelineno-10-25" id="__codelineno-10-25" name="__codelineno-10-25"></a><span class="k">foreach</span> <span class="p">(</span><span class="nv">$ip</span> <span class="k">in</span> <span class="nv">$officeIPs</span><span class="p">)</span> <span class="p">{</span>
</span><span id="__span-10-26"><a href="#__codelineno-10-26" id="__codelineno-10-26" name="__codelineno-10-26"></a>    <span class="nb">Add-AzStorageAccountNetworkRule</span> <span class="p">`</span>
</span><span id="__span-10-27"><a href="#__codelineno-10-27" id="__codelineno-10-27" name="__codelineno-10-27"></a>        <span class="n">-ResourceGroupName</span> <span class="s2">"myRG"</span> <span class="p">`</span>
</span><span id="__span-10-28"><a href="#__codelineno-10-28" id="__codelineno-10-28" name="__codelineno-10-28"></a>        <span class="n">-Name</span> <span class="s2">"mystorageaccount"</span> <span class="p">`</span>
</span><span id="__span-10-29"><a href="#__codelineno-10-29" id="__codelineno-10-29" name="__codelineno-10-29"></a>        <span class="n">-IPAddressOrRange</span> <span class="nv">$ip</span>
</span><span id="__span-10-30"><a href="#__codelineno-10-30" id="__codelineno-10-30" name="__codelineno-10-30"></a><span class="p">}</span>
</span></code></pre></div>
<h4 id="arquitectura-visual"><a class="toclink" href="2025/12/18/seguridad-en-azure-storage-gu%C3%ADa-completa-de-firewall-resource-instances-y-mejores-pr%C3%A1cticas/#arquitectura-visual">Arquitectura Visual</a></h4>
<div class="language-text highlight"><pre><span></span><code><span id="__span-11-1"><a href="#__codelineno-11-1" id="__codelineno-11-1" name="__codelineno-11-1"></a>┌─────────────────────────────────────────────────────────────┐
</span><span id="__span-11-2"><a href="#__codelineno-11-2" id="__codelineno-11-2" name="__codelineno-11-2"></a>│         Storage Account Firewall Configuration              │
</span><span id="__span-11-3"><a href="#__codelineno-11-3" id="__codelineno-11-3" name="__codelineno-11-3"></a>├─────────────────────────────────────────────────────────────┤
</span><span id="__span-11-4"><a href="#__codelineno-11-4" id="__codelineno-11-4" name="__codelineno-11-4"></a>│                                                             │
</span><span id="__span-11-5"><a href="#__codelineno-11-5" id="__codelineno-11-5" name="__codelineno-11-5"></a>│ Public network access: Selected networks                    │
</span><span id="__span-11-6"><a href="#__codelineno-11-6" id="__codelineno-11-6" name="__codelineno-11-6"></a>│ Default Action: DENY                                        │
</span><span id="__span-11-7"><a href="#__codelineno-11-7" id="__codelineno-11-7" name="__codelineno-11-7"></a>│                                                             │
</span><span id="__span-11-8"><a href="#__codelineno-11-8" id="__codelineno-11-8" name="__codelineno-11-8"></a>│ ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━│
</span><span id="__span-11-9"><a href="#__codelineno-11-9" id="__codelineno-11-9" name="__codelineno-11-9"></a>│                                                             │
</span><span id="__span-11-10"><a href="#__codelineno-11-10" id="__codelineno-11-10" name="__codelineno-11-10"></a>│ Exceptions (Bypass):                                        │
</span><span id="__span-11-11"><a href="#__codelineno-11-11" id="__codelineno-11-11" name="__codelineno-11-11"></a>│   ☐ AzureServices (NO - demasiado permisivo)               │
</span><span id="__span-11-12"><a href="#__codelineno-11-12" id="__codelineno-11-12" name="__codelineno-11-12"></a>│   ☑️ Logging (SÍ - para troubleshooting)                   │
</span><span id="__span-11-13"><a href="#__codelineno-11-13" id="__codelineno-11-13" name="__codelineno-11-13"></a>│   ☑️ Metrics (SÍ - para monitoreo)                         │
</span><span id="__span-11-14"><a href="#__codelineno-11-14" id="__codelineno-11-14" name="__codelineno-11-14"></a>│                                                             │
</span><span id="__span-11-15"><a href="#__codelineno-11-15" id="__codelineno-11-15" name="__codelineno-11-15"></a>│ ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━│
</span><span id="__span-11-16"><a href="#__codelineno-11-16" id="__codelineno-11-16" name="__codelineno-11-16"></a>│                                                             │
</span><span id="__span-11-17"><a href="#__codelineno-11-17" id="__codelineno-11-17" name="__codelineno-11-17"></a>│ Resource Instances (granular):                             │
</span><span id="__span-11-18"><a href="#__codelineno-11-18" id="__codelineno-11-18" name="__codelineno-11-18"></a>│   ✅ prod-synapse                                           │
</span><span id="__span-11-19"><a href="#__codelineno-11-19" id="__codelineno-11-19" name="__codelineno-11-19"></a>│   ✅ prod-adf                                               │
</span><span id="__span-11-20"><a href="#__codelineno-11-20" id="__codelineno-11-20" name="__codelineno-11-20"></a>│   ✅ prod-databricks                                        │
</span><span id="__span-11-21"><a href="#__codelineno-11-21" id="__codelineno-11-21" name="__codelineno-11-21"></a>│                                                             │
</span><span id="__span-11-22"><a href="#__codelineno-11-22" id="__codelineno-11-22" name="__codelineno-11-22"></a>│ VNet Rules: [subnets específicas]                          │
</span><span id="__span-11-23"><a href="#__codelineno-11-23" id="__codelineno-11-23" name="__codelineno-11-23"></a>│ IP Rules: [oficinas, VPN]                                  │
</span><span id="__span-11-24"><a href="#__codelineno-11-24" id="__codelineno-11-24" name="__codelineno-11-24"></a>│                                                             │
</span><span id="__span-11-25"><a href="#__codelineno-11-25" id="__codelineno-11-25" name="__codelineno-11-25"></a>└─────────────────────────────────────────────────────────────┘
</span></code></pre></div>
<h3 id="alcance-del-firewall-todos-los-servicios"><a class="toclink" href="2025/12/18/seguridad-en-azure-storage-gu%C3%ADa-completa-de-firewall-resource-instances-y-mejores-pr%C3%A1cticas/#alcance-del-firewall-todos-los-servicios">Alcance del Firewall: Todos los Servicios</a></h3>
<div class="admonition important">
<p class="admonition-title">Concepto Clave</p>
<p>El firewall de Storage Account protege <strong>TODOS</strong> los servicios, no puedes configurarlo por servicio individual.</p>
</div>
<h4 id="servicios-afectados"><a class="toclink" href="2025/12/18/seguridad-en-azure-storage-gu%C3%ADa-completa-de-firewall-resource-instances-y-mejores-pr%C3%A1cticas/#servicios-afectados">Servicios Afectados</a></h4>
<p>El firewall aplica a todos estos endpoints:</p>
<ul>
<li>🔵 <strong>Blob Storage</strong>: <code>https://{account}.blob.core.windows.net</code></li>
<li>📁 <strong>File Storage</strong>: <code>https://{account}.file.core.windows.net</code></li>
<li>📮 <strong>Queue Storage</strong>: <code>https://{account}.queue.core.windows.net</code></li>
<li>📊 <strong>Table Storage</strong>: <code>https://{account}.table.core.windows.net</code></li>
</ul>
<h4 id="control-granular-por-servicio"><a class="toclink" href="2025/12/18/seguridad-en-azure-storage-gu%C3%ADa-completa-de-firewall-resource-instances-y-mejores-pr%C3%A1cticas/#control-granular-por-servicio">Control Granular por Servicio</a></h4>
<p>Si necesitas que un recurso acceda solo a Blob pero no a Files, usa <strong>RBAC</strong>:</p>
<div class="language-powershell highlight"><pre><span></span><code><span id="__span-12-1"><a href="#__codelineno-12-1" id="__codelineno-12-1" name="__codelineno-12-1"></a><span class="c"># Firewall: Permite conexión al endpoint (todos los servicios)</span>
</span><span id="__span-12-2"><a href="#__codelineno-12-2" id="__codelineno-12-2" name="__codelineno-12-2"></a><span class="nb">Add-AzStorageAccountNetworkRule</span> <span class="n">-ResourceId</span> <span class="nv">$resourceId</span>
</span><span id="__span-12-3"><a href="#__codelineno-12-3" id="__codelineno-12-3" name="__codelineno-12-3"></a>
</span><span id="__span-12-4"><a href="#__codelineno-12-4" id="__codelineno-12-4" name="__codelineno-12-4"></a><span class="c"># RBAC: Controla acceso específico por servicio</span>
</span><span id="__span-12-5"><a href="#__codelineno-12-5" id="__codelineno-12-5" name="__codelineno-12-5"></a><span class="nb">New-AzRoleAssignment</span> <span class="p">`</span>
</span><span id="__span-12-6"><a href="#__codelineno-12-6" id="__codelineno-12-6" name="__codelineno-12-6"></a>    <span class="n">-ObjectId</span> <span class="nv">$principalId</span> <span class="p">`</span>
</span><span id="__span-12-7"><a href="#__codelineno-12-7" id="__codelineno-12-7" name="__codelineno-12-7"></a>    <span class="n">-RoleDefinitionName</span> <span class="s2">"Storage Blob Data Contributor"</span> <span class="p">`</span>  <span class="c"># Solo Blob</span>
</span><span id="__span-12-8"><a href="#__codelineno-12-8" id="__codelineno-12-8" name="__codelineno-12-8"></a>    <span class="n">-Scope</span> <span class="nv">$storageAccountScope</span>
</span><span id="__span-12-9"><a href="#__codelineno-12-9" id="__codelineno-12-9" name="__codelineno-12-9"></a>
</span><span id="__span-12-10"><a href="#__codelineno-12-10" id="__codelineno-12-10" name="__codelineno-12-10"></a><span class="c"># No asignas roles para Files, Queues o Tables</span>
</span><span id="__span-12-11"><a href="#__codelineno-12-11" id="__codelineno-12-11" name="__codelineno-12-11"></a><span class="c"># → Aunque el firewall permita conexión, no tiene permisos RBAC</span>
</span></code></pre></div>
<h3 id="validacion-de-configuracion"><a class="toclink" href="2025/12/18/seguridad-en-azure-storage-gu%C3%ADa-completa-de-firewall-resource-instances-y-mejores-pr%C3%A1cticas/#validacion-de-configuracion">Validación de Configuración</a></h3>
<h4 id="script-de-validacion-completa"><a class="toclink" href="2025/12/18/seguridad-en-azure-storage-gu%C3%ADa-completa-de-firewall-resource-instances-y-mejores-pr%C3%A1cticas/#script-de-validacion-completa">Script de Validación Completa</a></h4>
<div class="language-powershell highlight"><pre><span></span><code><span id="__span-13-1"><a href="#__codelineno-13-1" id="__codelineno-13-1" name="__codelineno-13-1"></a><span class="k">function</span> <span class="nb">Test-StorageAccountSecurityConfig</span> <span class="p">{</span>
</span><span id="__span-13-2"><a href="#__codelineno-13-2" id="__codelineno-13-2" name="__codelineno-13-2"></a>    <span class="k">param</span><span class="p">(</span>
</span><span id="__span-13-3"><a href="#__codelineno-13-3" id="__codelineno-13-3" name="__codelineno-13-3"></a>        <span class="no">[string]</span><span class="nv">$ResourceGroupName</span><span class="p">,</span>
</span><span id="__span-13-4"><a href="#__codelineno-13-4" id="__codelineno-13-4" name="__codelineno-13-4"></a>        <span class="no">[string]</span><span class="nv">$StorageAccountName</span>
</span><span id="__span-13-5"><a href="#__codelineno-13-5" id="__codelineno-13-5" name="__codelineno-13-5"></a>    <span class="p">)</span>
</span><span id="__span-13-6"><a href="#__codelineno-13-6" id="__codelineno-13-6" name="__codelineno-13-6"></a>
</span><span id="__span-13-7"><a href="#__codelineno-13-7" id="__codelineno-13-7" name="__codelineno-13-7"></a>    <span class="nv">$rules</span> <span class="p">=</span> <span class="nb">Get-AzStorageAccountNetworkRuleSet</span> <span class="p">`</span>
</span><span id="__span-13-8"><a href="#__codelineno-13-8" id="__codelineno-13-8" name="__codelineno-13-8"></a>        <span class="n">-ResourceGroupName</span> <span class="nv">$ResourceGroupName</span> <span class="p">`</span>
</span><span id="__span-13-9"><a href="#__codelineno-13-9" id="__codelineno-13-9" name="__codelineno-13-9"></a>        <span class="n">-Name</span> <span class="nv">$StorageAccountName</span>
</span><span id="__span-13-10"><a href="#__codelineno-13-10" id="__codelineno-13-10" name="__codelineno-13-10"></a>
</span><span id="__span-13-11"><a href="#__codelineno-13-11" id="__codelineno-13-11" name="__codelineno-13-11"></a>    <span class="nb">Write-Host</span> <span class="s2">"</span><span class="se">`n</span><span class="s2">🔍 VALIDACIÓN DE CONFIGURACIÓN ÓPTIMA"</span> <span class="n">-ForegroundColor</span> <span class="n">Cyan</span>
</span><span id="__span-13-12"><a href="#__codelineno-13-12" id="__codelineno-13-12" name="__codelineno-13-12"></a>    <span class="nb">Write-Host</span> <span class="s2">"═══════════════════════════════════════</span><span class="se">`n</span><span class="s2">"</span> <span class="n">-ForegroundColor</span> <span class="n">Cyan</span>
</span><span id="__span-13-13"><a href="#__codelineno-13-13" id="__codelineno-13-13" name="__codelineno-13-13"></a>
</span><span id="__span-13-14"><a href="#__codelineno-13-14" id="__codelineno-13-14" name="__codelineno-13-14"></a>    <span class="nv">$score</span> <span class="p">=</span> <span class="n">0</span>
</span><span id="__span-13-15"><a href="#__codelineno-13-15" id="__codelineno-13-15" name="__codelineno-13-15"></a>    <span class="nv">$maxScore</span> <span class="p">=</span> <span class="n">5</span>
</span><span id="__span-13-16"><a href="#__codelineno-13-16" id="__codelineno-13-16" name="__codelineno-13-16"></a>
</span><span id="__span-13-17"><a href="#__codelineno-13-17" id="__codelineno-13-17" name="__codelineno-13-17"></a>    <span class="c"># Check 1: DefaultAction</span>
</span><span id="__span-13-18"><a href="#__codelineno-13-18" id="__codelineno-13-18" name="__codelineno-13-18"></a>    <span class="k">if</span> <span class="p">(</span><span class="nv">$rules</span><span class="p">.</span><span class="n">DefaultAction</span> <span class="o">-eq</span> <span class="s2">"Deny"</span><span class="p">)</span> <span class="p">{</span>
</span><span id="__span-13-19"><a href="#__codelineno-13-19" id="__codelineno-13-19" name="__codelineno-13-19"></a>        <span class="nb">Write-Host</span> <span class="s2">"✅ DefaultAction: Deny (Correcto)"</span> <span class="n">-ForegroundColor</span> <span class="n">Green</span>
</span><span id="__span-13-20"><a href="#__codelineno-13-20" id="__codelineno-13-20" name="__codelineno-13-20"></a>        <span class="nv">$score</span><span class="p">++</span>
</span><span id="__span-13-21"><a href="#__codelineno-13-21" id="__codelineno-13-21" name="__codelineno-13-21"></a>    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
</span><span id="__span-13-22"><a href="#__codelineno-13-22" id="__codelineno-13-22" name="__codelineno-13-22"></a>        <span class="nb">Write-Host</span> <span class="s2">"❌ DefaultAction: Allow (Cambiar a Deny)"</span> <span class="n">-ForegroundColor</span> <span class="n">Red</span>
</span><span id="__span-13-23"><a href="#__codelineno-13-23" id="__codelineno-13-23" name="__codelineno-13-23"></a>    <span class="p">}</span>
</span><span id="__span-13-24"><a href="#__codelineno-13-24" id="__codelineno-13-24" name="__codelineno-13-24"></a>
</span><span id="__span-13-25"><a href="#__codelineno-13-25" id="__codelineno-13-25" name="__codelineno-13-25"></a>    <span class="c"># Check 2: Bypass óptimo</span>
</span><span id="__span-13-26"><a href="#__codelineno-13-26" id="__codelineno-13-26" name="__codelineno-13-26"></a>    <span class="k">if</span> <span class="p">(</span><span class="nv">$rules</span><span class="p">.</span><span class="n">Bypass</span> <span class="o">-notlike</span> <span class="s2">"*AzureServices*"</span> <span class="o">-and</span> 
</span><span id="__span-13-27"><a href="#__codelineno-13-27" id="__codelineno-13-27" name="__codelineno-13-27"></a>        <span class="nv">$rules</span><span class="p">.</span><span class="n">Bypass</span> <span class="o">-like</span> <span class="s2">"*Logging*"</span> <span class="o">-and</span> 
</span><span id="__span-13-28"><a href="#__codelineno-13-28" id="__codelineno-13-28" name="__codelineno-13-28"></a>        <span class="nv">$rules</span><span class="p">.</span><span class="n">Bypass</span> <span class="o">-like</span> <span class="s2">"*Metrics*"</span><span class="p">)</span> <span class="p">{</span>
</span><span id="__span-13-29"><a href="#__codelineno-13-29" id="__codelineno-13-29" name="__codelineno-13-29"></a>        <span class="nb">Write-Host</span> <span class="s2">"✅ Bypass: Logging,Metrics (Óptimo)"</span> <span class="n">-ForegroundColor</span> <span class="n">Green</span>
</span><span id="__span-13-30"><a href="#__codelineno-13-30" id="__codelineno-13-30" name="__codelineno-13-30"></a>        <span class="nv">$score</span><span class="p">++</span>
</span><span id="__span-13-31"><a href="#__codelineno-13-31" id="__codelineno-13-31" name="__codelineno-13-31"></a>    <span class="p">}</span> <span class="k">elseif</span> <span class="p">(</span><span class="nv">$rules</span><span class="p">.</span><span class="n">Bypass</span> <span class="o">-like</span> <span class="s2">"*AzureServices*"</span><span class="p">)</span> <span class="p">{</span>
</span><span id="__span-13-32"><a href="#__codelineno-13-32" id="__codelineno-13-32" name="__codelineno-13-32"></a>        <span class="nb">Write-Host</span> <span class="s2">"⚠️  Bypass incluye AzureServices (Considerar usar Resource Instances)"</span> <span class="n">-ForegroundColor</span> <span class="n">Yellow</span>
</span><span id="__span-13-33"><a href="#__codelineno-13-33" id="__codelineno-13-33" name="__codelineno-13-33"></a>    <span class="p">}</span>
</span><span id="__span-13-34"><a href="#__codelineno-13-34" id="__codelineno-13-34" name="__codelineno-13-34"></a>
</span><span id="__span-13-35"><a href="#__codelineno-13-35" id="__codelineno-13-35" name="__codelineno-13-35"></a>    <span class="c"># Check 3: Resource Instances</span>
</span><span id="__span-13-36"><a href="#__codelineno-13-36" id="__codelineno-13-36" name="__codelineno-13-36"></a>    <span class="k">if</span> <span class="p">(</span><span class="nv">$rules</span><span class="p">.</span><span class="n">ResourceAccessRules</span><span class="p">.</span><span class="n">Count</span> <span class="o">-gt</span> <span class="n">0</span><span class="p">)</span> <span class="p">{</span>
</span><span id="__span-13-37"><a href="#__codelineno-13-37" id="__codelineno-13-37" name="__codelineno-13-37"></a>        <span class="nb">Write-Host</span> <span class="s2">"✅ Resource Instances: </span><span class="p">$(</span><span class="nv">$rules</span><span class="p">.</span><span class="n">ResourceAccessRules</span><span class="p">.</span><span class="n">Count</span><span class="p">)</span><span class="s2"> configuradas"</span> <span class="n">-ForegroundColor</span> <span class="n">Green</span>
</span><span id="__span-13-38"><a href="#__codelineno-13-38" id="__codelineno-13-38" name="__codelineno-13-38"></a>        <span class="k">foreach</span> <span class="p">(</span><span class="nv">$rule</span> <span class="k">in</span> <span class="nv">$rules</span><span class="p">.</span><span class="n">ResourceAccessRules</span><span class="p">)</span> <span class="p">{</span>
</span><span id="__span-13-39"><a href="#__codelineno-13-39" id="__codelineno-13-39" name="__codelineno-13-39"></a>            <span class="nv">$resourceName</span> <span class="p">=</span> <span class="nv">$rule</span><span class="p">.</span><span class="n">ResourceId</span><span class="p">.</span><span class="n">Split</span><span class="p">(</span><span class="s1">'/'</span><span class="p">)[-</span><span class="n">1</span><span class="p">]</span>
</span><span id="__span-13-40"><a href="#__codelineno-13-40" id="__codelineno-13-40" name="__codelineno-13-40"></a>            <span class="nb">Write-Host</span> <span class="s2">"   → $resourceName"</span> <span class="n">-ForegroundColor</span> <span class="n">Gray</span>
</span><span id="__span-13-41"><a href="#__codelineno-13-41" id="__codelineno-13-41" name="__codelineno-13-41"></a>        <span class="p">}</span>
</span><span id="__span-13-42"><a href="#__codelineno-13-42" id="__codelineno-13-42" name="__codelineno-13-42"></a>        <span class="nv">$score</span><span class="p">++</span>
</span><span id="__span-13-43"><a href="#__codelineno-13-43" id="__codelineno-13-43" name="__codelineno-13-43"></a>    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
</span><span id="__span-13-44"><a href="#__codelineno-13-44" id="__codelineno-13-44" name="__codelineno-13-44"></a>        <span class="nb">Write-Host</span> <span class="s2">"⚠️  No hay Resource Instances configuradas"</span> <span class="n">-ForegroundColor</span> <span class="n">Yellow</span>
</span><span id="__span-13-45"><a href="#__codelineno-13-45" id="__codelineno-13-45" name="__codelineno-13-45"></a>    <span class="p">}</span>
</span><span id="__span-13-46"><a href="#__codelineno-13-46" id="__codelineno-13-46" name="__codelineno-13-46"></a>
</span><span id="__span-13-47"><a href="#__codelineno-13-47" id="__codelineno-13-47" name="__codelineno-13-47"></a>    <span class="c"># Check 4: VNet Rules</span>
</span><span id="__span-13-48"><a href="#__codelineno-13-48" id="__codelineno-13-48" name="__codelineno-13-48"></a>    <span class="k">if</span> <span class="p">(</span><span class="nv">$rules</span><span class="p">.</span><span class="n">VirtualNetworkRules</span><span class="p">.</span><span class="n">Count</span> <span class="o">-gt</span> <span class="n">0</span><span class="p">)</span> <span class="p">{</span>
</span><span id="__span-13-49"><a href="#__codelineno-13-49" id="__codelineno-13-49" name="__codelineno-13-49"></a>        <span class="nb">Write-Host</span> <span class="s2">"✅ VNet Rules: </span><span class="p">$(</span><span class="nv">$rules</span><span class="p">.</span><span class="n">VirtualNetworkRules</span><span class="p">.</span><span class="n">Count</span><span class="p">)</span><span class="s2">"</span> <span class="n">-ForegroundColor</span> <span class="n">Green</span>
</span><span id="__span-13-50"><a href="#__codelineno-13-50" id="__codelineno-13-50" name="__codelineno-13-50"></a>        <span class="nv">$score</span><span class="p">++</span>
</span><span id="__span-13-51"><a href="#__codelineno-13-51" id="__codelineno-13-51" name="__codelineno-13-51"></a>    <span class="p">}</span>
</span><span id="__span-13-52"><a href="#__codelineno-13-52" id="__codelineno-13-52" name="__codelineno-13-52"></a>
</span><span id="__span-13-53"><a href="#__codelineno-13-53" id="__codelineno-13-53" name="__codelineno-13-53"></a>    <span class="c"># Check 5: IP Rules</span>
</span><span id="__span-13-54"><a href="#__codelineno-13-54" id="__codelineno-13-54" name="__codelineno-13-54"></a>    <span class="k">if</span> <span class="p">(</span><span class="nv">$rules</span><span class="p">.</span><span class="n">IpRules</span><span class="p">.</span><span class="n">Count</span> <span class="o">-gt</span> <span class="n">0</span><span class="p">)</span> <span class="p">{</span>
</span><span id="__span-13-55"><a href="#__codelineno-13-55" id="__codelineno-13-55" name="__codelineno-13-55"></a>        <span class="nb">Write-Host</span> <span class="s2">"✅ IP Rules: </span><span class="p">$(</span><span class="nv">$rules</span><span class="p">.</span><span class="n">IpRules</span><span class="p">.</span><span class="n">Count</span><span class="p">)</span><span class="s2">"</span> <span class="n">-ForegroundColor</span> <span class="n">Green</span>
</span><span id="__span-13-56"><a href="#__codelineno-13-56" id="__codelineno-13-56" name="__codelineno-13-56"></a>        <span class="nv">$score</span><span class="p">++</span>
</span><span id="__span-13-57"><a href="#__codelineno-13-57" id="__codelineno-13-57" name="__codelineno-13-57"></a>    <span class="p">}</span>
</span><span id="__span-13-58"><a href="#__codelineno-13-58" id="__codelineno-13-58" name="__codelineno-13-58"></a>
</span><span id="__span-13-59"><a href="#__codelineno-13-59" id="__codelineno-13-59" name="__codelineno-13-59"></a>    <span class="c"># Resumen</span>
</span><span id="__span-13-60"><a href="#__codelineno-13-60" id="__codelineno-13-60" name="__codelineno-13-60"></a>    <span class="nb">Write-Host</span> <span class="s2">"</span><span class="se">`n</span><span class="s2">════════════════════════════════════════"</span> <span class="n">-ForegroundColor</span> <span class="n">Cyan</span>
</span><span id="__span-13-61"><a href="#__codelineno-13-61" id="__codelineno-13-61" name="__codelineno-13-61"></a>    <span class="nb">Write-Host</span> <span class="s2">"Puntaje de Seguridad: $score/$maxScore"</span> <span class="n">-ForegroundColor</span> <span class="p">$(</span>
</span><span id="__span-13-62"><a href="#__codelineno-13-62" id="__codelineno-13-62" name="__codelineno-13-62"></a>        <span class="k">if</span> <span class="p">(</span><span class="nv">$score</span> <span class="o">-eq</span> <span class="nv">$maxScore</span><span class="p">)</span> <span class="p">{</span> <span class="s2">"Green"</span> <span class="p">}</span> 
</span><span id="__span-13-63"><a href="#__codelineno-13-63" id="__codelineno-13-63" name="__codelineno-13-63"></a>        <span class="k">elseif</span> <span class="p">(</span><span class="nv">$score</span> <span class="o">-ge</span> <span class="n">3</span><span class="p">)</span> <span class="p">{</span> <span class="s2">"Yellow"</span> <span class="p">}</span> 
</span><span id="__span-13-64"><a href="#__codelineno-13-64" id="__codelineno-13-64" name="__codelineno-13-64"></a>        <span class="k">else</span> <span class="p">{</span> <span class="s2">"Red"</span> <span class="p">}</span>
</span><span id="__span-13-65"><a href="#__codelineno-13-65" id="__codelineno-13-65" name="__codelineno-13-65"></a>    <span class="p">)</span>
</span><span id="__span-13-66"><a href="#__codelineno-13-66" id="__codelineno-13-66" name="__codelineno-13-66"></a>
</span><span id="__span-13-67"><a href="#__codelineno-13-67" id="__codelineno-13-67" name="__codelineno-13-67"></a>    <span class="k">if</span> <span class="p">(</span><span class="nv">$score</span> <span class="o">-ge</span> <span class="n">4</span> <span class="o">-and</span> <span class="nv">$rules</span><span class="p">.</span><span class="n">Bypass</span> <span class="o">-notlike</span> <span class="s2">"*AzureServices*"</span><span class="p">)</span> <span class="p">{</span>
</span><span id="__span-13-68"><a href="#__codelineno-13-68" id="__codelineno-13-68" name="__codelineno-13-68"></a>        <span class="nb">Write-Host</span> <span class="s2">"🎉 CONFIGURACIÓN ÓPTIMA"</span> <span class="n">-ForegroundColor</span> <span class="n">Green</span>
</span><span id="__span-13-69"><a href="#__codelineno-13-69" id="__codelineno-13-69" name="__codelineno-13-69"></a>    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
</span><span id="__span-13-70"><a href="#__codelineno-13-70" id="__codelineno-13-70" name="__codelineno-13-70"></a>        <span class="nb">Write-Host</span> <span class="s2">"⚠️  Revisar configuración según recomendaciones"</span> <span class="n">-ForegroundColor</span> <span class="n">Yellow</span>
</span><span id="__span-13-71"><a href="#__codelineno-13-71" id="__codelineno-13-71" name="__codelineno-13-71"></a>    <span class="p">}</span>
</span><span id="__span-13-72"><a href="#__codelineno-13-72" id="__codelineno-13-72" name="__codelineno-13-72"></a><span class="p">}</span>
</span><span id="__span-13-73"><a href="#__codelineno-13-73" id="__codelineno-13-73" name="__codelineno-13-73"></a>
</span><span id="__span-13-74"><a href="#__codelineno-13-74" id="__codelineno-13-74" name="__codelineno-13-74"></a><span class="c"># Uso</span>
</span><span id="__span-13-75"><a href="#__codelineno-13-75" id="__codelineno-13-75" name="__codelineno-13-75"></a><span class="nb">Test-StorageAccountSecurityConfig</span> <span class="n">-ResourceGroupName</span> <span class="s2">"myRG"</span> <span class="n">-StorageAccountName</span> <span class="s2">"mystorageaccount"</span>
</span></code></pre></div>
<h3 id="mejores-practicas"><a class="toclink" href="2025/12/18/seguridad-en-azure-storage-gu%C3%ADa-completa-de-firewall-resource-instances-y-mejores-pr%C3%A1cticas/#mejores-practicas">Mejores Prácticas</a></h3>
<h4 id="recomendaciones-de-seguridad"><a class="toclink" href="2025/12/18/seguridad-en-azure-storage-gu%C3%ADa-completa-de-firewall-resource-instances-y-mejores-pr%C3%A1cticas/#recomendaciones-de-seguridad">✅ Recomendaciones de Seguridad</a></h4>
<ol>
<li><strong>Usa Resource Instances en lugar de Trusted Services</strong></li>
<li>Mayor control y trazabilidad</li>
<li>Cumple con Zero Trust</li>
<li>
<p>Mejor para compliance</p>
</li>
<li>
<p><strong>Siempre habilita Logging y Metrics</strong></p>
</li>
<li>Necesario para troubleshooting</li>
<li>No expone tus datos</li>
<li>
<p>Bajo riesgo de seguridad</p>
</li>
<li>
<p><strong>Aplica el principio de menor privilegio</strong></p>
</li>
<li>Firewall: Solo recursos que realmente necesitan acceso</li>
<li>
<p>RBAC: Solo los permisos mínimos necesarios</p>
</li>
<li>
<p><strong>Documenta tus Resource Instances</strong></p>
</li>
<li>Mantén un registro de qué recurso accede y por qué</li>
<li>
<p>Facilita auditorías y compliance</p>
</li>
<li>
<p><strong>Revisa periódicamente las reglas</strong></p>
</li>
<li>Elimina recursos que ya no existen</li>
<li>Verifica que las reglas siguen siendo necesarias</li>
</ol>
<h4 id="errores-comunes-a-evitar"><a class="toclink" href="2025/12/18/seguridad-en-azure-storage-gu%C3%ADa-completa-de-firewall-resource-instances-y-mejores-pr%C3%A1cticas/#errores-comunes-a-evitar">⚠️ Errores Comunes a Evitar</a></h4>
<div class="admonition danger">
<p class="admonition-title">No hagas esto</p>
<ul>
<li>❌ Dejar <code>DefaultAction: Allow</code> en producción</li>
<li>❌ Usar solo Trusted Services por conveniencia</li>
<li>❌ Olvidar asignar roles RBAC después de crear Resource Instance</li>
<li>❌ No documentar para qué sirve cada regla</li>
<li>❌ Deshabilitar Logging y Metrics</li>
</ul>
</div>
<h3 id="casos-especiales-servicios-que-requieren-trusted-services"><a class="toclink" href="2025/12/18/seguridad-en-azure-storage-gu%C3%ADa-completa-de-firewall-resource-instances-y-mejores-pr%C3%A1cticas/#casos-especiales-servicios-que-requieren-trusted-services">Casos Especiales: Servicios que Requieren Trusted Services</a></h3>
<p>Algunos servicios de Azure <strong>NO soportan Resource Instances</strong> y requieren que tengas habilitado <code>Bypass: AzureServices</code>. Es importante conocer estos casos para planificar tu estrategia de seguridad.</p>
<h4 id="azure-backup"><a class="toclink" href="2025/12/18/seguridad-en-azure-storage-gu%C3%ADa-completa-de-firewall-resource-instances-y-mejores-pr%C3%A1cticas/#azure-backup">Azure Backup</a></h4>
<p><strong>Azure Backup</strong> es uno de los servicios más importantes que requiere Trusted Services para ciertos escenarios:</p>
<div class="admonition warning">
<p class="admonition-title">Azure Backup y Trusted Services</p>
<p>Azure Backup necesita <code>Bypass: AzureServices</code> habilitado para:</p>
<ul>
<li><strong>Backup de discos no administrados</strong> (unmanaged disks) en VMs</li>
<li><strong>Restore de VMs</strong> con discos no administrados</li>
<li>Algunos escenarios de backup de Azure Files</li>
</ul>
<p><strong>NO necesita</strong> Trusted Services para:</p>
<ul>
<li>Backup de discos administrados (managed disks) - Azure los gestiona automáticamente</li>
</ul>
</div>
<h5 id="configuracion-para-azure-backup"><a class="toclink" href="2025/12/18/seguridad-en-azure-storage-gu%C3%ADa-completa-de-firewall-resource-instances-y-mejores-pr%C3%A1cticas/#configuracion-para-azure-backup">Configuración para Azure Backup</a></h5>
<p>Si usas Azure Backup, tienes dos opciones:</p>
<div class="tabbed-set tabbed-alternate" data-tabs="2:2"><input checked="checked" id="__tabbed_2_1" name="__tabbed_2" type="radio"><input id="__tabbed_2_2" name="__tabbed_2" type="radio"><div class="tabbed-labels"><label for="__tabbed_2_1">Opción 1: Trusted Services (Menos Seguro)</label><label for="__tabbed_2_2">Opción 2: Híbrida (Más Seguro)</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="language-powershell highlight"><pre><span></span><code><span id="__span-14-1"><a href="#__codelineno-14-1" id="__codelineno-14-1" name="__codelineno-14-1"></a><span class="c"># Habilitar Trusted Services para Azure Backup</span>
</span><span id="__span-14-2"><a href="#__codelineno-14-2" id="__codelineno-14-2" name="__codelineno-14-2"></a><span class="nb">Update-AzStorageAccountNetworkRuleSet</span> <span class="p">`</span>
</span><span id="__span-14-3"><a href="#__codelineno-14-3" id="__codelineno-14-3" name="__codelineno-14-3"></a>    <span class="n">-ResourceGroupName</span> <span class="s2">"myRG"</span> <span class="p">`</span>
</span><span id="__span-14-4"><a href="#__codelineno-14-4" id="__codelineno-14-4" name="__codelineno-14-4"></a>    <span class="n">-Name</span> <span class="s2">"mystorageaccount"</span> <span class="p">`</span>
</span><span id="__span-14-5"><a href="#__codelineno-14-5" id="__codelineno-14-5" name="__codelineno-14-5"></a>    <span class="n">-DefaultAction</span> <span class="n">Deny</span> <span class="p">`</span>
</span><span id="__span-14-6"><a href="#__codelineno-14-6" id="__codelineno-14-6" name="__codelineno-14-6"></a>    <span class="n">-Bypass</span> <span class="n">AzureServices</span><span class="p">,</span><span class="n">Logging</span><span class="p">,</span><span class="n">Metrics</span>
</span><span id="__span-14-7"><a href="#__codelineno-14-7" id="__codelineno-14-7" name="__codelineno-14-7"></a>
</span><span id="__span-14-8"><a href="#__codelineno-14-8" id="__codelineno-14-8" name="__codelineno-14-8"></a><span class="c"># ⚠️ Esto permite acceso a TODOS los servicios trusted</span>
</span><span id="__span-14-9"><a href="#__codelineno-14-9" id="__codelineno-14-9" name="__codelineno-14-9"></a><span class="c"># No solo Azure Backup</span>
</span></code></pre></div>
</div>
<div class="tabbed-block">
<div class="language-powershell highlight"><pre><span></span><code><span id="__span-15-1"><a href="#__codelineno-15-1" id="__codelineno-15-1" name="__codelineno-15-1"></a><span class="c"># Combinar Trusted Services + Resource Instances</span>
</span><span id="__span-15-2"><a href="#__codelineno-15-2" id="__codelineno-15-2" name="__codelineno-15-2"></a><span class="nb">Update-AzStorageAccountNetworkRuleSet</span> <span class="p">`</span>
</span><span id="__span-15-3"><a href="#__codelineno-15-3" id="__codelineno-15-3" name="__codelineno-15-3"></a>    <span class="n">-ResourceGroupName</span> <span class="s2">"myRG"</span> <span class="p">`</span>
</span><span id="__span-15-4"><a href="#__codelineno-15-4" id="__codelineno-15-4" name="__codelineno-15-4"></a>    <span class="n">-Name</span> <span class="s2">"mystorageaccount"</span> <span class="p">`</span>
</span><span id="__span-15-5"><a href="#__codelineno-15-5" id="__codelineno-15-5" name="__codelineno-15-5"></a>    <span class="n">-DefaultAction</span> <span class="n">Deny</span> <span class="p">`</span>
</span><span id="__span-15-6"><a href="#__codelineno-15-6" id="__codelineno-15-6" name="__codelineno-15-6"></a>    <span class="n">-Bypass</span> <span class="n">AzureServices</span><span class="p">,</span><span class="n">Logging</span><span class="p">,</span><span class="n">Metrics</span>  <span class="c"># Para Azure Backup</span>
</span><span id="__span-15-7"><a href="#__codelineno-15-7" id="__codelineno-15-7" name="__codelineno-15-7"></a>
</span><span id="__span-15-8"><a href="#__codelineno-15-8" id="__codelineno-15-8" name="__codelineno-15-8"></a><span class="c"># Agregar Resource Instances para otros servicios</span>
</span><span id="__span-15-9"><a href="#__codelineno-15-9" id="__codelineno-15-9" name="__codelineno-15-9"></a><span class="nb">Add-AzStorageAccountNetworkRule</span> <span class="p">`</span>
</span><span id="__span-15-10"><a href="#__codelineno-15-10" id="__codelineno-15-10" name="__codelineno-15-10"></a>    <span class="n">-TenantId</span> <span class="s2">"xxx"</span> <span class="p">`</span>
</span><span id="__span-15-11"><a href="#__codelineno-15-11" id="__codelineno-15-11" name="__codelineno-15-11"></a>    <span class="n">-ResourceId</span> <span class="s2">"/subscriptions/xxx/.../Microsoft.Synapse/workspaces/prod-synapse"</span>
</span><span id="__span-15-12"><a href="#__codelineno-15-12" id="__codelineno-15-12" name="__codelineno-15-12"></a>
</span><span id="__span-15-13"><a href="#__codelineno-15-13" id="__codelineno-15-13" name="__codelineno-15-13"></a><span class="c"># Resultado:</span>
</span><span id="__span-15-14"><a href="#__codelineno-15-14" id="__codelineno-15-14" name="__codelineno-15-14"></a><span class="c"># ✅ Azure Backup funciona (via Trusted Services)</span>
</span><span id="__span-15-15"><a href="#__codelineno-15-15" id="__codelineno-15-15" name="__codelineno-15-15"></a><span class="c"># ✅ Synapse tiene acceso controlado (via Resource Instance)</span>
</span><span id="__span-15-16"><a href="#__codelineno-15-16" id="__codelineno-15-16" name="__codelineno-15-16"></a><span class="c"># ⚠️ Otros servicios trusted también tienen acceso</span>
</span></code></pre></div>
</div>
</div>
</div>
<h4 id="otros-servicios-que-pueden-requerir-trusted-services"><a class="toclink" href="2025/12/18/seguridad-en-azure-storage-gu%C3%ADa-completa-de-firewall-resource-instances-y-mejores-pr%C3%A1cticas/#otros-servicios-que-pueden-requerir-trusted-services">Otros Servicios que Pueden Requerir Trusted Services</a></h4>
<table>
<thead>
<tr>
<th>Servicio</th>
<th>¿Soporta Resource Instances?</th>
<th>Notas</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Azure Backup</strong></td>
<td>❌ Solo vía Trusted Services</td>
<td>Para discos no administrados</td>
</tr>
<tr>
<td><strong>Azure Site Recovery</strong></td>
<td>❌ Solo vía Trusted Services</td>
<td>Replicación y DR</td>
</tr>
<tr>
<td><strong>Azure Import/Export</strong></td>
<td>❌ Solo vía Trusted Services</td>
<td>Transferencia masiva de datos</td>
</tr>
<tr>
<td><strong>Azure DevTest Labs</strong></td>
<td>❌ Solo vía Trusted Services</td>
<td>Creación de imágenes</td>
</tr>
<tr>
<td><strong>Azure Event Grid</strong></td>
<td>⚠️ Depende del escenario</td>
<td>Algunos casos necesitan Trusted Services</td>
</tr>
<tr>
<td><strong>Azure Synapse</strong></td>
<td>✅ Soporta Resource Instances</td>
<td><strong>Recomendado</strong> usar Resource Instances</td>
</tr>
<tr>
<td><strong>Azure Data Factory</strong></td>
<td>✅ Soporta Resource Instances</td>
<td><strong>Recomendado</strong> usar Resource Instances</td>
</tr>
<tr>
<td><strong>Azure Databricks</strong></td>
<td>✅ Soporta Resource Instances</td>
<td><strong>Recomendado</strong> usar Resource Instances</td>
</tr>
<tr>
<td><strong>Azure SQL Database</strong></td>
<td>✅ Soporta Resource Instances</td>
<td><strong>Recomendado</strong> usar Resource Instances</td>
</tr>
<tr>
<td><strong>Azure Stream Analytics</strong></td>
<td>✅ Soporta Resource Instances</td>
<td><strong>Recomendado</strong> usar Resource Instances</td>
</tr>
</tbody>
</table>
<h4 id="estrategia-recomendada-con-azure-backup"><a class="toclink" href="2025/12/18/seguridad-en-azure-storage-gu%C3%ADa-completa-de-firewall-resource-instances-y-mejores-pr%C3%A1cticas/#estrategia-recomendada-con-azure-backup">Estrategia Recomendada con Azure Backup</a></h4>
<p>Si necesitas usar Azure Backup pero quieres mantener la máxima seguridad:</p>
<ol>
<li>
<p><strong>Evalúa si realmente necesitas Trusted Services</strong>
</p><div class="language-powershell highlight"><pre><span></span><code><span id="__span-16-1"><a href="#__codelineno-16-1" id="__codelineno-16-1" name="__codelineno-16-1"></a><span class="c"># ¿Usas discos no administrados?</span>
</span><span id="__span-16-2"><a href="#__codelineno-16-2" id="__codelineno-16-2" name="__codelineno-16-2"></a><span class="nb">Get-AzVM</span> <span class="p">|</span> <span class="nb">Where-Object</span> <span class="p">{</span><span class="nv">$_</span><span class="p">.</span><span class="n">StorageProfile</span><span class="p">.</span><span class="n">OsDisk</span><span class="p">.</span><span class="n">ManagedDisk</span> <span class="o">-eq</span> <span class="nv">$null</span><span class="p">}</span>
</span><span id="__span-16-3"><a href="#__codelineno-16-3" id="__codelineno-16-3" name="__codelineno-16-3"></a>
</span><span id="__span-16-4"><a href="#__codelineno-16-4" id="__codelineno-16-4" name="__codelineno-16-4"></a><span class="c"># Si el resultado está vacío, NO necesitas Trusted Services para Backup</span>
</span></code></pre></div><p></p>
</li>
<li>
<p><strong>Migra a Managed Disks si es posible</strong></p>
</li>
<li>Los managed disks NO requieren Trusted Services</li>
<li>Mejor rendimiento y gestión</li>
<li>
<p>Recomendado por Microsoft</p>
</li>
<li>
<p><strong>Si DEBES usar Trusted Services, documéntalo</strong>
</p><div class="language-yaml highlight"><pre><span></span><code><span id="__span-17-1"><a href="#__codelineno-17-1" id="__codelineno-17-1" name="__codelineno-17-1"></a><span class="nt">Storage Account</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">mystorageaccount</span>
</span><span id="__span-17-2"><a href="#__codelineno-17-2" id="__codelineno-17-2" name="__codelineno-17-2"></a><span class="nt">Bypass</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">AzureServices</span>
</span><span id="__span-17-3"><a href="#__codelineno-17-3" id="__codelineno-17-3" name="__codelineno-17-3"></a><span class="nt">Motivo</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Azure Backup de VMs con discos no administrados</span>
</span><span id="__span-17-4"><a href="#__codelineno-17-4" id="__codelineno-17-4" name="__codelineno-17-4"></a><span class="nt">VMs afectadas</span><span class="p">:</span><span class="w"> </span>
</span><span id="__span-17-5"><a href="#__codelineno-17-5" id="__codelineno-17-5" name="__codelineno-17-5"></a><span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">vm-legacy-01</span>
</span><span id="__span-17-6"><a href="#__codelineno-17-6" id="__codelineno-17-6" name="__codelineno-17-6"></a><span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">vm-legacy-02</span>
</span><span id="__span-17-7"><a href="#__codelineno-17-7" id="__codelineno-17-7" name="__codelineno-17-7"></a><span class="nt">Plan de migración</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Q2 2026</span>
</span></code></pre></div><p></p>
</li>
<li>
<p><strong>Usa Resource Instances para todo lo demás</strong></p>
</li>
<li>Synapse, Data Factory, Databricks → Resource Instances</li>
<li>Solo Azure Backup usa Trusted Services</li>
<li>Documenta qué servicios usan cada método</li>
</ol>
<h4 id="ejemplo-de-configuracion-real-con-azure-backup"><a class="toclink" href="2025/12/18/seguridad-en-azure-storage-gu%C3%ADa-completa-de-firewall-resource-instances-y-mejores-pr%C3%A1cticas/#ejemplo-de-configuracion-real-con-azure-backup">Ejemplo de Configuración Real con Azure Backup</a></h4>
<div class="language-powershell highlight"><pre><span></span><code><span id="__span-18-1"><a href="#__codelineno-18-1" id="__codelineno-18-1" name="__codelineno-18-1"></a><span class="c"># Escenario: Necesitas Azure Backup + Synapse + Data Factory</span>
</span><span id="__span-18-2"><a href="#__codelineno-18-2" id="__codelineno-18-2" name="__codelineno-18-2"></a>
</span><span id="__span-18-3"><a href="#__codelineno-18-3" id="__codelineno-18-3" name="__codelineno-18-3"></a><span class="nv">$rgName</span> <span class="p">=</span> <span class="s2">"myResourceGroup"</span>
</span><span id="__span-18-4"><a href="#__codelineno-18-4" id="__codelineno-18-4" name="__codelineno-18-4"></a><span class="nv">$storageAccount</span> <span class="p">=</span> <span class="s2">"mystorageaccount"</span>
</span><span id="__span-18-5"><a href="#__codelineno-18-5" id="__codelineno-18-5" name="__codelineno-18-5"></a><span class="nv">$tenantId</span> <span class="p">=</span> <span class="s2">"your-tenant-id"</span>
</span><span id="__span-18-6"><a href="#__codelineno-18-6" id="__codelineno-18-6" name="__codelineno-18-6"></a>
</span><span id="__span-18-7"><a href="#__codelineno-18-7" id="__codelineno-18-7" name="__codelineno-18-7"></a><span class="c"># 1. Configurar con Trusted Services (requerido para Azure Backup)</span>
</span><span id="__span-18-8"><a href="#__codelineno-18-8" id="__codelineno-18-8" name="__codelineno-18-8"></a><span class="nb">Update-AzStorageAccountNetworkRuleSet</span> <span class="p">`</span>
</span><span id="__span-18-9"><a href="#__codelineno-18-9" id="__codelineno-18-9" name="__codelineno-18-9"></a>    <span class="n">-ResourceGroupName</span> <span class="nv">$rgName</span> <span class="p">`</span>
</span><span id="__span-18-10"><a href="#__codelineno-18-10" id="__codelineno-18-10" name="__codelineno-18-10"></a>    <span class="n">-Name</span> <span class="nv">$storageAccount</span> <span class="p">`</span>
</span><span id="__span-18-11"><a href="#__codelineno-18-11" id="__codelineno-18-11" name="__codelineno-18-11"></a>    <span class="n">-DefaultAction</span> <span class="n">Deny</span> <span class="p">`</span>
</span><span id="__span-18-12"><a href="#__codelineno-18-12" id="__codelineno-18-12" name="__codelineno-18-12"></a>    <span class="n">-Bypass</span> <span class="n">AzureServices</span><span class="p">,</span><span class="n">Logging</span><span class="p">,</span><span class="n">Metrics</span>
</span><span id="__span-18-13"><a href="#__codelineno-18-13" id="__codelineno-18-13" name="__codelineno-18-13"></a>
</span><span id="__span-18-14"><a href="#__codelineno-18-14" id="__codelineno-18-14" name="__codelineno-18-14"></a><span class="nb">Write-Host</span> <span class="s2">"✅ Trusted Services habilitado (Azure Backup)"</span> <span class="n">-ForegroundColor</span> <span class="n">Yellow</span>
</span><span id="__span-18-15"><a href="#__codelineno-18-15" id="__codelineno-18-15" name="__codelineno-18-15"></a>
</span><span id="__span-18-16"><a href="#__codelineno-18-16" id="__codelineno-18-16" name="__codelineno-18-16"></a><span class="c"># 2. Agregar Resource Instances para control granular de otros servicios</span>
</span><span id="__span-18-17"><a href="#__codelineno-18-17" id="__codelineno-18-17" name="__codelineno-18-17"></a><span class="c"># Aunque Trusted Services está habilitado, esto añade trazabilidad</span>
</span><span id="__span-18-18"><a href="#__codelineno-18-18" id="__codelineno-18-18" name="__codelineno-18-18"></a><span class="nv">$resources</span> <span class="p">=</span> <span class="p">@(</span>
</span><span id="__span-18-19"><a href="#__codelineno-18-19" id="__codelineno-18-19" name="__codelineno-18-19"></a>    <span class="s2">"/subscriptions/xxx/resourceGroups/rg1/providers/Microsoft.Synapse/workspaces/prod-synapse"</span><span class="p">,</span>
</span><span id="__span-18-20"><a href="#__codelineno-18-20" id="__codelineno-18-20" name="__codelineno-18-20"></a>    <span class="s2">"/subscriptions/xxx/resourceGroups/rg1/providers/Microsoft.DataFactory/factories/prod-adf"</span>
</span><span id="__span-18-21"><a href="#__codelineno-18-21" id="__codelineno-18-21" name="__codelineno-18-21"></a><span class="p">)</span>
</span><span id="__span-18-22"><a href="#__codelineno-18-22" id="__codelineno-18-22" name="__codelineno-18-22"></a>
</span><span id="__span-18-23"><a href="#__codelineno-18-23" id="__codelineno-18-23" name="__codelineno-18-23"></a><span class="k">foreach</span> <span class="p">(</span><span class="nv">$resourceId</span> <span class="k">in</span> <span class="nv">$resources</span><span class="p">)</span> <span class="p">{</span>
</span><span id="__span-18-24"><a href="#__codelineno-18-24" id="__codelineno-18-24" name="__codelineno-18-24"></a>    <span class="nb">Add-AzStorageAccountNetworkRule</span> <span class="p">`</span>
</span><span id="__span-18-25"><a href="#__codelineno-18-25" id="__codelineno-18-25" name="__codelineno-18-25"></a>        <span class="n">-ResourceGroupName</span> <span class="nv">$rgName</span> <span class="p">`</span>
</span><span id="__span-18-26"><a href="#__codelineno-18-26" id="__codelineno-18-26" name="__codelineno-18-26"></a>        <span class="n">-Name</span> <span class="nv">$storageAccount</span> <span class="p">`</span>
</span><span id="__span-18-27"><a href="#__codelineno-18-27" id="__codelineno-18-27" name="__codelineno-18-27"></a>        <span class="n">-TenantId</span> <span class="nv">$tenantId</span> <span class="p">`</span>
</span><span id="__span-18-28"><a href="#__codelineno-18-28" id="__codelineno-18-28" name="__codelineno-18-28"></a>        <span class="n">-ResourceId</span> <span class="nv">$resourceId</span>
</span><span id="__span-18-29"><a href="#__codelineno-18-29" id="__codelineno-18-29" name="__codelineno-18-29"></a>
</span><span id="__span-18-30"><a href="#__codelineno-18-30" id="__codelineno-18-30" name="__codelineno-18-30"></a>    <span class="nb">Write-Host</span> <span class="s2">"✅ Resource Instance agregada: </span><span class="p">$(</span><span class="nv">$resourceId</span><span class="p">.</span><span class="n">Split</span><span class="p">(</span><span class="s1">'/'</span><span class="p">)[-</span><span class="n">1</span><span class="p">])</span><span class="s2">"</span> <span class="n">-ForegroundColor</span> <span class="n">Green</span>
</span><span id="__span-18-31"><a href="#__codelineno-18-31" id="__codelineno-18-31" name="__codelineno-18-31"></a><span class="p">}</span>
</span><span id="__span-18-32"><a href="#__codelineno-18-32" id="__codelineno-18-32" name="__codelineno-18-32"></a>
</span><span id="__span-18-33"><a href="#__codelineno-18-33" id="__codelineno-18-33" name="__codelineno-18-33"></a><span class="c"># 3. Documentar en tags</span>
</span><span id="__span-18-34"><a href="#__codelineno-18-34" id="__codelineno-18-34" name="__codelineno-18-34"></a><span class="nv">$tags</span> <span class="p">=</span> <span class="p">@{</span>
</span><span id="__span-18-35"><a href="#__codelineno-18-35" id="__codelineno-18-35" name="__codelineno-18-35"></a>    <span class="s2">"FirewallConfig"</span> <span class="p">=</span> <span class="s2">"TrustedServices+ResourceInstances"</span>
</span><span id="__span-18-36"><a href="#__codelineno-18-36" id="__codelineno-18-36" name="__codelineno-18-36"></a>    <span class="s2">"TrustedServicesReason"</span> <span class="p">=</span> <span class="s2">"Azure Backup - Unmanaged Disks"</span>
</span><span id="__span-18-37"><a href="#__codelineno-18-37" id="__codelineno-18-37" name="__codelineno-18-37"></a>    <span class="s2">"MigrationPlan"</span> <span class="p">=</span> <span class="s2">"Move to Managed Disks by Q2-2026"</span>
</span><span id="__span-18-38"><a href="#__codelineno-18-38" id="__codelineno-18-38" name="__codelineno-18-38"></a><span class="p">}</span>
</span><span id="__span-18-39"><a href="#__codelineno-18-39" id="__codelineno-18-39" name="__codelineno-18-39"></a>
</span><span id="__span-18-40"><a href="#__codelineno-18-40" id="__codelineno-18-40" name="__codelineno-18-40"></a><span class="nb">Update-AzStorageAccount</span> <span class="p">`</span>
</span><span id="__span-18-41"><a href="#__codelineno-18-41" id="__codelineno-18-41" name="__codelineno-18-41"></a>    <span class="n">-ResourceGroupName</span> <span class="nv">$rgName</span> <span class="p">`</span>
</span><span id="__span-18-42"><a href="#__codelineno-18-42" id="__codelineno-18-42" name="__codelineno-18-42"></a>    <span class="n">-Name</span> <span class="nv">$storageAccount</span> <span class="p">`</span>
</span><span id="__span-18-43"><a href="#__codelineno-18-43" id="__codelineno-18-43" name="__codelineno-18-43"></a>    <span class="n">-Tag</span> <span class="nv">$tags</span>
</span><span id="__span-18-44"><a href="#__codelineno-18-44" id="__codelineno-18-44" name="__codelineno-18-44"></a>
</span><span id="__span-18-45"><a href="#__codelineno-18-45" id="__codelineno-18-45" name="__codelineno-18-45"></a><span class="nb">Write-Host</span> <span class="s2">"✅ Configuración documentada en tags"</span> <span class="n">-ForegroundColor</span> <span class="n">Green</span>
</span></code></pre></div>
<div class="admonition tip">
<p class="admonition-title">Mejora Continua</p>
<p><strong>Planifica la eliminación de Trusted Services:</strong></p>
<ol>
<li>Identifica VMs con discos no administrados</li>
<li>Crea un plan de migración a managed disks</li>
<li>Una vez migrado, deshabilita Trusted Services</li>
<li>Usa solo Resource Instances para máxima seguridad</li>
</ol>
</div>
<h3 id="troubleshooting"><a class="toclink" href="2025/12/18/seguridad-en-azure-storage-gu%C3%ADa-completa-de-firewall-resource-instances-y-mejores-pr%C3%A1cticas/#troubleshooting">Troubleshooting</a></h3>
<h4 id="error-403-acceso-denegado"><a class="toclink" href="2025/12/18/seguridad-en-azure-storage-gu%C3%ADa-completa-de-firewall-resource-instances-y-mejores-pr%C3%A1cticas/#error-403-acceso-denegado">Error 403: Acceso Denegado</a></h4>
<p>Si recibes errores 403, verifica en este orden:</p>
<ol>
<li>
<p><strong>Firewall</strong>: ¿El recurso tiene una Resource Instance Rule?
   </p><div class="language-powershell highlight"><pre><span></span><code><span id="__span-19-1"><a href="#__codelineno-19-1" id="__codelineno-19-1" name="__codelineno-19-1"></a><span class="p">(</span><span class="nb">Get-AzStorageAccountNetworkRuleSet</span> <span class="n">-ResourceGroupName</span> <span class="s2">"rg"</span> <span class="n">-Name</span> <span class="s2">"sa"</span><span class="p">).</span><span class="n">ResourceAccessRules</span>
</span></code></pre></div><p></p>
</li>
<li>
<p><strong>RBAC</strong>: ¿La Managed Identity tiene roles asignados?
   </p><div class="language-powershell highlight"><pre><span></span><code><span id="__span-20-1"><a href="#__codelineno-20-1" id="__codelineno-20-1" name="__codelineno-20-1"></a><span class="nb">Get-AzRoleAssignment</span> <span class="n">-ObjectId</span> <span class="nv">$principalId</span> <span class="n">-Scope</span> <span class="nv">$storageScope</span>
</span></code></pre></div><p></p>
</li>
<li>
<p><strong>Managed Identity</strong>: ¿Está habilitada?
   </p><div class="language-powershell highlight"><pre><span></span><code><span id="__span-21-1"><a href="#__codelineno-21-1" id="__codelineno-21-1" name="__codelineno-21-1"></a><span class="nv">$workspace</span> <span class="p">=</span> <span class="nb">Get-AzSynapseWorkspace</span> <span class="n">-Name</span> <span class="s2">"myworkspace"</span>
</span><span id="__span-21-2"><a href="#__codelineno-21-2" id="__codelineno-21-2" name="__codelineno-21-2"></a><span class="nv">$workspace</span><span class="p">.</span><span class="n">Identity</span><span class="p">.</span><span class="nb">Type</span>
</span></code></pre></div><p></p>
</li>
<li>
<p><strong>Tenant</strong>: ¿Ambos recursos están en el mismo tenant?
   </p><div class="language-powershell highlight"><pre><span></span><code><span id="__span-22-1"><a href="#__codelineno-22-1" id="__codelineno-22-1" name="__codelineno-22-1"></a><span class="p">(</span><span class="nb">Get-AzResource</span> <span class="n">-ResourceId</span> <span class="nv">$resourceId</span><span class="p">).</span><span class="n">TenantId</span>
</span></code></pre></div><p></p>
</li>
</ol>
<h4 id="verificar-acceso-por-servicio"><a class="toclink" href="2025/12/18/seguridad-en-azure-storage-gu%C3%ADa-completa-de-firewall-resource-instances-y-mejores-pr%C3%A1cticas/#verificar-acceso-por-servicio">Verificar Acceso por Servicio</a></h4>
<div class="language-powershell highlight"><pre><span></span><code><span id="__span-23-1"><a href="#__codelineno-23-1" id="__codelineno-23-1" name="__codelineno-23-1"></a><span class="nv">$ctx</span> <span class="p">=</span> <span class="nb">New-AzStorageContext</span> <span class="n">-StorageAccountName</span> <span class="s2">"sa"</span> <span class="n">-UseConnectedAccount</span>
</span><span id="__span-23-2"><a href="#__codelineno-23-2" id="__codelineno-23-2" name="__codelineno-23-2"></a>
</span><span id="__span-23-3"><a href="#__codelineno-23-3" id="__codelineno-23-3" name="__codelineno-23-3"></a><span class="c"># Probar Blob</span>
</span><span id="__span-23-4"><a href="#__codelineno-23-4" id="__codelineno-23-4" name="__codelineno-23-4"></a><span class="k">try</span> <span class="p">{</span>
</span><span id="__span-23-5"><a href="#__codelineno-23-5" id="__codelineno-23-5" name="__codelineno-23-5"></a>    <span class="nb">Get-AzStorageContainer</span> <span class="n">-Context</span> <span class="nv">$ctx</span> <span class="n">-MaxCount</span> <span class="n">1</span>
</span><span id="__span-23-6"><a href="#__codelineno-23-6" id="__codelineno-23-6" name="__codelineno-23-6"></a>    <span class="nb">Write-Host</span> <span class="s2">"✅ Blob: Accesible"</span>
</span><span id="__span-23-7"><a href="#__codelineno-23-7" id="__codelineno-23-7" name="__codelineno-23-7"></a><span class="p">}</span> <span class="k">catch</span> <span class="p">{</span>
</span><span id="__span-23-8"><a href="#__codelineno-23-8" id="__codelineno-23-8" name="__codelineno-23-8"></a>    <span class="nb">Write-Host</span> <span class="s2">"❌ Blob: </span><span class="p">$(</span><span class="nv">$_</span><span class="p">.</span><span class="n">Exception</span><span class="p">.</span><span class="n">Message</span><span class="p">)</span><span class="s2">"</span>
</span><span id="__span-23-9"><a href="#__codelineno-23-9" id="__codelineno-23-9" name="__codelineno-23-9"></a><span class="p">}</span>
</span><span id="__span-23-10"><a href="#__codelineno-23-10" id="__codelineno-23-10" name="__codelineno-23-10"></a>
</span><span id="__span-23-11"><a href="#__codelineno-23-11" id="__codelineno-23-11" name="__codelineno-23-11"></a><span class="c"># Probar Queue</span>
</span><span id="__span-23-12"><a href="#__codelineno-23-12" id="__codelineno-23-12" name="__codelineno-23-12"></a><span class="k">try</span> <span class="p">{</span>
</span><span id="__span-23-13"><a href="#__codelineno-23-13" id="__codelineno-23-13" name="__codelineno-23-13"></a>    <span class="nb">Get-AzStorageQueue</span> <span class="n">-Context</span> <span class="nv">$ctx</span> <span class="p">|</span> <span class="nb">Select-Object</span> <span class="n">-First</span> <span class="n">1</span>
</span><span id="__span-23-14"><a href="#__codelineno-23-14" id="__codelineno-23-14" name="__codelineno-23-14"></a>    <span class="nb">Write-Host</span> <span class="s2">"✅ Queue: Accesible"</span>
</span><span id="__span-23-15"><a href="#__codelineno-23-15" id="__codelineno-23-15" name="__codelineno-23-15"></a><span class="p">}</span> <span class="k">catch</span> <span class="p">{</span>
</span><span id="__span-23-16"><a href="#__codelineno-23-16" id="__codelineno-23-16" name="__codelineno-23-16"></a>    <span class="nb">Write-Host</span> <span class="s2">"❌ Queue: </span><span class="p">$(</span><span class="nv">$_</span><span class="p">.</span><span class="n">Exception</span><span class="p">.</span><span class="n">Message</span><span class="p">)</span><span class="s2">"</span>
</span><span id="__span-23-17"><a href="#__codelineno-23-17" id="__codelineno-23-17" name="__codelineno-23-17"></a><span class="p">}</span>
</span></code></pre></div>
<h3 id="cuando-usar-private-endpoints"><a class="toclink" href="2025/12/18/seguridad-en-azure-storage-gu%C3%ADa-completa-de-firewall-resource-instances-y-mejores-pr%C3%A1cticas/#cuando-usar-private-endpoints">Cuándo Usar Private Endpoints</a></h3>
<p>Considera usar Private Endpoints en lugar de o además de las configuraciones de firewall cuando:</p>
<ul>
<li>✅ Necesitas cumplimiento estricto de compliance</li>
<li>✅ No quieres exponer endpoints públicos en absoluto</li>
<li>✅ Requieres conectividad desde On-Premises vía ExpressRoute</li>
<li>✅ La latencia es crítica y necesitas tráfico privado</li>
<li>✅ Presupuesto disponible (hay costos adicionales)</li>
</ul>
<p>La configuración con Resource Instances es suficiente cuando:</p>
<ul>
<li>✅ Los recursos están en Azure (no on-premises)</li>
<li>✅ El endpoint público con firewall es aceptable</li>
<li>✅ Quieres balancear seguridad y costos</li>
<li>✅ No hay requisitos de red privada obligatorios</li>
</ul>
<h3 id="conclusion"><a class="toclink" href="2025/12/18/seguridad-en-azure-storage-gu%C3%ADa-completa-de-firewall-resource-instances-y-mejores-pr%C3%A1cticas/#conclusion">Conclusión</a></h3>
<p>La seguridad de Azure Storage Account requiere una configuración cuidadosa del firewall. Las principales conclusiones son:</p>
<ol>
<li><strong>Resource Instances &gt; Trusted Services</strong> para control granular</li>
<li><strong>Siempre habilita Logging y Metrics</strong> para observabilidad</li>
<li><strong>Combina Firewall + RBAC</strong> para defensa en profundidad</li>
<li><strong>Un firewall protege todos los servicios</strong> (Blob, Files, Queue, Table)</li>
<li><strong>Sin Private Endpoints, usa Resource Instances</strong> como mejor práctica</li>
<li><strong>Azure Backup requiere Trusted Services</strong> para discos no administrados (considera migrar a managed disks)</li>
</ol>
<h4 id="configuracion-resumida-optima"><a class="toclink" href="2025/12/18/seguridad-en-azure-storage-gu%C3%ADa-completa-de-firewall-resource-instances-y-mejores-pr%C3%A1cticas/#configuracion-resumida-optima">Configuración Resumida Óptima</a></h4>
<div class="tabbed-set tabbed-alternate" data-tabs="3:2"><input checked="checked" id="__tabbed_3_1" name="__tabbed_3" type="radio"><input id="__tabbed_3_2" name="__tabbed_3" type="radio"><div class="tabbed-labels"><label for="__tabbed_3_1">Sin Azure Backup</label><label for="__tabbed_3_2">Con Azure Backup</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="language-powershell highlight"><pre><span></span><code><span id="__span-24-1"><a href="#__codelineno-24-1" id="__codelineno-24-1" name="__codelineno-24-1"></a><span class="c"># La configuración perfecta para producción sin Private Endpoints</span>
</span><span id="__span-24-2"><a href="#__codelineno-24-2" id="__codelineno-24-2" name="__codelineno-24-2"></a><span class="nb">Update-AzStorageAccountNetworkRuleSet</span> <span class="p">`</span>
</span><span id="__span-24-3"><a href="#__codelineno-24-3" id="__codelineno-24-3" name="__codelineno-24-3"></a>    <span class="n">-DefaultAction</span> <span class="n">Deny</span> <span class="p">`</span>
</span><span id="__span-24-4"><a href="#__codelineno-24-4" id="__codelineno-24-4" name="__codelineno-24-4"></a>    <span class="n">-Bypass</span> <span class="n">Logging</span><span class="p">,</span><span class="n">Metrics</span>  <span class="c"># NO AzureServices</span>
</span><span id="__span-24-5"><a href="#__codelineno-24-5" id="__codelineno-24-5" name="__codelineno-24-5"></a>
</span><span id="__span-24-6"><a href="#__codelineno-24-6" id="__codelineno-24-6" name="__codelineno-24-6"></a><span class="c"># Agregar solo recursos específicos necesarios</span>
</span><span id="__span-24-7"><a href="#__codelineno-24-7" id="__codelineno-24-7" name="__codelineno-24-7"></a><span class="nb">Add-AzStorageAccountNetworkRule</span> <span class="n">-ResourceId</span> <span class="nv">$specificResourceId</span>
</span><span id="__span-24-8"><a href="#__codelineno-24-8" id="__codelineno-24-8" name="__codelineno-24-8"></a>
</span><span id="__span-24-9"><a href="#__codelineno-24-9" id="__codelineno-24-9" name="__codelineno-24-9"></a><span class="c"># Asignar roles RBAC mínimos necesarios</span>
</span><span id="__span-24-10"><a href="#__codelineno-24-10" id="__codelineno-24-10" name="__codelineno-24-10"></a><span class="nb">New-AzRoleAssignment</span> <span class="n">-ObjectId</span> <span class="nv">$principalId</span> <span class="n">-RoleDefinitionName</span> <span class="s2">"Storage Blob Data Reader"</span>
</span></code></pre></div>
</div>
<div class="tabbed-block">
<div class="language-powershell highlight"><pre><span></span><code><span id="__span-25-1"><a href="#__codelineno-25-1" id="__codelineno-25-1" name="__codelineno-25-1"></a><span class="c"># Si necesitas Azure Backup para discos no administrados</span>
</span><span id="__span-25-2"><a href="#__codelineno-25-2" id="__codelineno-25-2" name="__codelineno-25-2"></a><span class="nb">Update-AzStorageAccountNetworkRuleSet</span> <span class="p">`</span>
</span><span id="__span-25-3"><a href="#__codelineno-25-3" id="__codelineno-25-3" name="__codelineno-25-3"></a>    <span class="n">-DefaultAction</span> <span class="n">Deny</span> <span class="p">`</span>
</span><span id="__span-25-4"><a href="#__codelineno-25-4" id="__codelineno-25-4" name="__codelineno-25-4"></a>    <span class="n">-Bypass</span> <span class="n">AzureServices</span><span class="p">,</span><span class="n">Logging</span><span class="p">,</span><span class="n">Metrics</span>  <span class="c"># Requerido para Azure Backup</span>
</span><span id="__span-25-5"><a href="#__codelineno-25-5" id="__codelineno-25-5" name="__codelineno-25-5"></a>
</span><span id="__span-25-6"><a href="#__codelineno-25-6" id="__codelineno-25-6" name="__codelineno-25-6"></a><span class="c"># Agregar Resource Instances para trazabilidad de otros servicios</span>
</span><span id="__span-25-7"><a href="#__codelineno-25-7" id="__codelineno-25-7" name="__codelineno-25-7"></a><span class="nb">Add-AzStorageAccountNetworkRule</span> <span class="n">-ResourceId</span> <span class="nv">$specificResourceId</span>
</span><span id="__span-25-8"><a href="#__codelineno-25-8" id="__codelineno-25-8" name="__codelineno-25-8"></a>
</span><span id="__span-25-9"><a href="#__codelineno-25-9" id="__codelineno-25-9" name="__codelineno-25-9"></a><span class="c"># Asignar roles RBAC</span>
</span><span id="__span-25-10"><a href="#__codelineno-25-10" id="__codelineno-25-10" name="__codelineno-25-10"></a><span class="nb">New-AzRoleAssignment</span> <span class="n">-ObjectId</span> <span class="nv">$principalId</span> <span class="n">-RoleDefinitionName</span> <span class="s2">"Storage Blob Data Reader"</span>
</span><span id="__span-25-11"><a href="#__codelineno-25-11" id="__codelineno-25-11" name="__codelineno-25-11"></a>
</span><span id="__span-25-12"><a href="#__codelineno-25-12" id="__codelineno-25-12" name="__codelineno-25-12"></a><span class="c"># Documentar y planificar migración a Managed Disks</span>
</span></code></pre></div>
</div>
</div>
</div>
<h3 id="referencias"><a class="toclink" href="2025/12/18/seguridad-en-azure-storage-gu%C3%ADa-completa-de-firewall-resource-instances-y-mejores-pr%C3%A1cticas/#referencias">Referencias</a></h3>
<ul>
<li><a href="https://learn.microsoft.com/en-us/azure/storage/common/storage-network-security">Azure Storage network security</a></li>
<li><a href="https://learn.microsoft.com/en-us/azure/storage/common/storage-network-security-resource-instances">Resource instance network rules</a></li>
<li><a href="https://learn.microsoft.com/en-us/azure/storage/common/storage-network-security-trusted-azure-services">Trusted Azure services</a></li>
<li><a href="https://learn.microsoft.com/en-us/azure/storage/common/storage-network-security-manage-exceptions">Manage network security exceptions</a></li>
</ul>
<hr>
<div class="admonition tip">
<p class="admonition-title">¿Necesitas ayuda?</p>
<p>Si tienes dudas sobre la configuración de seguridad de tu Storage Account, revisa la documentación oficial o abre un caso de soporte con Microsoft Azure.</p>
</div>
</div>
</article>
<article class="md-post md-post--excerpt">
<header class="md-post__header">
<nav class="md-post__authors md-typeset">
<span class="md-author">
<img alt="Rafael Fernández" src="https://avatars.githubusercontent.com/u/39990341">
</span>
</nav>
<div class="md-post__meta md-meta">
<ul class="md-meta__list">
<li class="md-meta__item">
<time datetime="2025-11-20 00:00:00+00:00">November 20, 2025</time></li>
<li class="md-meta__item">
            in
            
              <a class="md-meta__link" href="category/azure-services/">Azure Services</a></li>
<li class="md-meta__item">
            
              6 min read
            
          </li>
</ul>
</div>
</header>
<div class="md-post__content md-typeset">
<h2 id="autenticacion-python-en-maquinas-azure-arc-guia-practica"><a class="toclink" href="2025/11/20/autenticaci%C3%B3n-python-en-m%C3%A1quinas-azure-arc-gu%C3%ADa-pr%C3%A1ctica/">Autenticación Python en Máquinas Azure Arc: Guía Práctica</a></h2>
<h3 id="resumen"><a class="toclink" href="2025/11/20/autenticaci%C3%B3n-python-en-m%C3%A1quinas-azure-arc-gu%C3%ADa-pr%C3%A1ctica/#resumen">Resumen</a></h3>
<p>Los servidores enrolados en Azure Arc pueden autenticarse contra recursos Azure usando managed identity sin almacenar credenciales. Python + Azure SDK (<code>azure-identity</code>) simplifica esto con <code>DefaultAzureCredential</code> o <code>ManagedIdentityCredential</code>, accediendo al endpoint IMDS local (<code>http://localhost:40342</code>) que expone el agente Azure Connected Machine.</p>
<h3 id="que-es-azure-arc-enabled-servers"><a class="toclink" href="2025/11/20/autenticaci%C3%B3n-python-en-m%C3%A1quinas-azure-arc-gu%C3%ADa-pr%C3%A1ctica/#que-es-azure-arc-enabled-servers">¿Qué es Azure Arc-enabled servers?</a></h3>
<p>Azure Arc extiende el plano de control de Azure a servidores físicos y VMs fuera de Azure (on-premises, otras clouds, edge). Una vez enrolado, el servidor obtiene:</p>
<ul>
<li>Representación como recurso Azure (<code>Microsoft.HybridCompute/machines</code>)</li>
<li>System-assigned managed identity automática</li>
<li>Acceso a servicios Azure (Key Vault, Storage, Log Analytics, etc.) sin credenciales hard-coded</li>
<li>Gestión unificada (Policy, Update Management, extensiones VM)</li>
</ul>
<h3 id="como-funciona-la-autenticacion-en-azure-arc"><a class="toclink" href="2025/11/20/autenticaci%C3%B3n-python-en-m%C3%A1quinas-azure-arc-gu%C3%ADa-pr%C3%A1ctica/#como-funciona-la-autenticacion-en-azure-arc">Cómo funciona la autenticación en Azure Arc</a></h3>
<p>Cuando el agente <code>azcmagent</code> se instala y conecta, ocurre:</p>
<ol>
<li>Azure Resource Manager crea un service principal en Microsoft Entra ID para la identidad del servidor.</li>
<li>El agente configura un endpoint IMDS local en <code>http://localhost:40342</code> (no enrutable, solo accesible desde localhost).</li>
<li>Variables de entorno se establecen automáticamente:</li>
<li><code>IMDS_ENDPOINT=http://localhost:40342</code></li>
<li><code>IDENTITY_ENDPOINT=http://localhost:40342/metadata/identity/oauth2/token</code></li>
<li>Las aplicaciones solicitan tokens a este endpoint, sin exponer secretos.</li>
</ol>
<div class="admonition note">
<p class="admonition-title">Diferencia con Azure VMs</p>
<p>Azure VMs usan <code>http://169.254.169.254</code> (Azure IMDS), mientras que Arc usa <code>localhost:40342</code>. El SDK de Azure detecta automáticamente el entorno correcto.</p>
</div>
<h3 id="metodos-de-autenticacion-en-python"><a class="toclink" href="2025/11/20/autenticaci%C3%B3n-python-en-m%C3%A1quinas-azure-arc-gu%C3%ADa-pr%C3%A1ctica/#metodos-de-autenticacion-en-python">Métodos de autenticación en Python</a></h3>
<h4 id="opcion-1-defaultazurecredential-recomendada"><a class="toclink" href="2025/11/20/autenticaci%C3%B3n-python-en-m%C3%A1quinas-azure-arc-gu%C3%ADa-pr%C3%A1ctica/#opcion-1-defaultazurecredential-recomendada">Opción 1: DefaultAzureCredential (recomendada)</a></h4>
<p>Cadena de credenciales que prueba múltiples métodos en orden (variables de entorno, managed identity, Azure CLI, etc.). Funciona tanto en desarrollo local como en producción Arc sin cambios de código.</p>
<div class="language-python highlight"><pre><span></span><code><span id="__span-0-1"><a href="#__codelineno-0-1" id="__codelineno-0-1" name="__codelineno-0-1"></a><span class="kn">from</span><span class="w"> </span><span class="nn">azure.identity</span><span class="w"> </span><span class="kn">import</span> <span class="n">DefaultAzureCredential</span>
</span><span id="__span-0-2"><a href="#__codelineno-0-2" id="__codelineno-0-2" name="__codelineno-0-2"></a><span class="kn">from</span><span class="w"> </span><span class="nn">azure.keyvault.secrets</span><span class="w"> </span><span class="kn">import</span> <span class="n">SecretClient</span>
</span><span id="__span-0-3"><a href="#__codelineno-0-3" id="__codelineno-0-3" name="__codelineno-0-3"></a>
</span><span id="__span-0-4"><a href="#__codelineno-0-4" id="__codelineno-0-4" name="__codelineno-0-4"></a><span class="c1"># Credential chain automática (detecta Arc managed identity)</span>
</span><span id="__span-0-5"><a href="#__codelineno-0-5" id="__codelineno-0-5" name="__codelineno-0-5"></a><span class="n">credential</span> <span class="o">=</span> <span class="n">DefaultAzureCredential</span><span class="p">()</span>
</span><span id="__span-0-6"><a href="#__codelineno-0-6" id="__codelineno-0-6" name="__codelineno-0-6"></a>
</span><span id="__span-0-7"><a href="#__codelineno-0-7" id="__codelineno-0-7" name="__codelineno-0-7"></a><span class="c1"># Cliente Key Vault sin credenciales explícitas</span>
</span><span id="__span-0-8"><a href="#__codelineno-0-8" id="__codelineno-0-8" name="__codelineno-0-8"></a><span class="n">vault_url</span> <span class="o">=</span> <span class="s2">"https://my-vault.vault.azure.net"</span>
</span><span id="__span-0-9"><a href="#__codelineno-0-9" id="__codelineno-0-9" name="__codelineno-0-9"></a><span class="n">client</span> <span class="o">=</span> <span class="n">SecretClient</span><span class="p">(</span><span class="n">vault_url</span><span class="o">=</span><span class="n">vault_url</span><span class="p">,</span> <span class="n">credential</span><span class="o">=</span><span class="n">credential</span><span class="p">)</span>
</span><span id="__span-0-10"><a href="#__codelineno-0-10" id="__codelineno-0-10" name="__codelineno-0-10"></a>
</span><span id="__span-0-11"><a href="#__codelineno-0-11" id="__codelineno-0-11" name="__codelineno-0-11"></a><span class="c1"># Obtener secreto</span>
</span><span id="__span-0-12"><a href="#__codelineno-0-12" id="__codelineno-0-12" name="__codelineno-0-12"></a><span class="n">secret</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">get_secret</span><span class="p">(</span><span class="s2">"database-password"</span><span class="p">)</span>
</span><span id="__span-0-13"><a href="#__codelineno-0-13" id="__codelineno-0-13" name="__codelineno-0-13"></a><span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">"Secret value: </span><span class="si">{</span><span class="n">secret</span><span class="o">.</span><span class="n">value</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>
</span></code></pre></div>
<h4 id="opcion-2-managedidentitycredential-explicita"><a class="toclink" href="2025/11/20/autenticaci%C3%B3n-python-en-m%C3%A1quinas-azure-arc-gu%C3%ADa-pr%C3%A1ctica/#opcion-2-managedidentitycredential-explicita">Opción 2: ManagedIdentityCredential (explícita)</a></h4>
<p>Fuerza el uso de managed identity exclusivamente, útil cuando no quieres la cadena de fallback.</p>
<div class="language-python highlight"><pre><span></span><code><span id="__span-1-1"><a href="#__codelineno-1-1" id="__codelineno-1-1" name="__codelineno-1-1"></a><span class="kn">from</span><span class="w"> </span><span class="nn">azure.identity</span><span class="w"> </span><span class="kn">import</span> <span class="n">ManagedIdentityCredential</span>
</span><span id="__span-1-2"><a href="#__codelineno-1-2" id="__codelineno-1-2" name="__codelineno-1-2"></a><span class="kn">from</span><span class="w"> </span><span class="nn">azure.storage.blob</span><span class="w"> </span><span class="kn">import</span> <span class="n">BlobServiceClient</span>
</span><span id="__span-1-3"><a href="#__codelineno-1-3" id="__codelineno-1-3" name="__codelineno-1-3"></a>
</span><span id="__span-1-4"><a href="#__codelineno-1-4" id="__codelineno-1-4" name="__codelineno-1-4"></a><span class="c1"># System-assigned managed identity</span>
</span><span id="__span-1-5"><a href="#__codelineno-1-5" id="__codelineno-1-5" name="__codelineno-1-5"></a><span class="n">credential</span> <span class="o">=</span> <span class="n">ManagedIdentityCredential</span><span class="p">()</span>
</span><span id="__span-1-6"><a href="#__codelineno-1-6" id="__codelineno-1-6" name="__codelineno-1-6"></a>
</span><span id="__span-1-7"><a href="#__codelineno-1-7" id="__codelineno-1-7" name="__codelineno-1-7"></a><span class="c1"># Cliente Blob Storage</span>
</span><span id="__span-1-8"><a href="#__codelineno-1-8" id="__codelineno-1-8" name="__codelineno-1-8"></a><span class="n">account_url</span> <span class="o">=</span> <span class="s2">"https://mystorageaccount.blob.core.windows.net"</span>
</span><span id="__span-1-9"><a href="#__codelineno-1-9" id="__codelineno-1-9" name="__codelineno-1-9"></a><span class="n">blob_service</span> <span class="o">=</span> <span class="n">BlobServiceClient</span><span class="p">(</span><span class="n">account_url</span><span class="o">=</span><span class="n">account_url</span><span class="p">,</span> <span class="n">credential</span><span class="o">=</span><span class="n">credential</span><span class="p">)</span>
</span><span id="__span-1-10"><a href="#__codelineno-1-10" id="__codelineno-1-10" name="__codelineno-1-10"></a>
</span><span id="__span-1-11"><a href="#__codelineno-1-11" id="__codelineno-1-11" name="__codelineno-1-11"></a><span class="c1"># Listar containers</span>
</span><span id="__span-1-12"><a href="#__codelineno-1-12" id="__codelineno-1-12" name="__codelineno-1-12"></a><span class="k">for</span> <span class="n">container</span> <span class="ow">in</span> <span class="n">blob_service</span><span class="o">.</span><span class="n">list_containers</span><span class="p">():</span>
</span><span id="__span-1-13"><a href="#__codelineno-1-13" id="__codelineno-1-13" name="__codelineno-1-13"></a>    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">"Container: </span><span class="si">{</span><span class="n">container</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>
</span></code></pre></div>
<h4 id="opcion-3-user-assigned-managed-identity"><a class="toclink" href="2025/11/20/autenticaci%C3%B3n-python-en-m%C3%A1quinas-azure-arc-gu%C3%ADa-pr%C3%A1ctica/#opcion-3-user-assigned-managed-identity">Opción 3: User-assigned managed identity</a></h4>
<p>Si el servidor tiene múltiples identities user-assigned, especifica el <code>client_id</code>:</p>
<div class="language-python highlight"><pre><span></span><code><span id="__span-2-1"><a href="#__codelineno-2-1" id="__codelineno-2-1" name="__codelineno-2-1"></a><span class="kn">from</span><span class="w"> </span><span class="nn">azure.identity</span><span class="w"> </span><span class="kn">import</span> <span class="n">ManagedIdentityCredential</span>
</span><span id="__span-2-2"><a href="#__codelineno-2-2" id="__codelineno-2-2" name="__codelineno-2-2"></a>
</span><span id="__span-2-3"><a href="#__codelineno-2-3" id="__codelineno-2-3" name="__codelineno-2-3"></a><span class="c1"># User-assigned identity con client_id específico</span>
</span><span id="__span-2-4"><a href="#__codelineno-2-4" id="__codelineno-2-4" name="__codelineno-2-4"></a><span class="n">client_id</span> <span class="o">=</span> <span class="s2">"12345678-abcd-1234-abcd-1234567890ab"</span>
</span><span id="__span-2-5"><a href="#__codelineno-2-5" id="__codelineno-2-5" name="__codelineno-2-5"></a><span class="n">credential</span> <span class="o">=</span> <span class="n">ManagedIdentityCredential</span><span class="p">(</span><span class="n">client_id</span><span class="o">=</span><span class="n">client_id</span><span class="p">)</span>
</span><span id="__span-2-6"><a href="#__codelineno-2-6" id="__codelineno-2-6" name="__codelineno-2-6"></a>
</span><span id="__span-2-7"><a href="#__codelineno-2-7" id="__codelineno-2-7" name="__codelineno-2-7"></a><span class="c1"># Usa este credential con cualquier SDK Azure</span>
</span></code></pre></div>
<h4 id="opcion-4-msal-python-bajo-nivel"><a class="toclink" href="2025/11/20/autenticaci%C3%B3n-python-en-m%C3%A1quinas-azure-arc-gu%C3%ADa-pr%C3%A1ctica/#opcion-4-msal-python-bajo-nivel">Opción 4: MSAL Python (bajo nivel)</a></h4>
<p>Para casos avanzados, <code>msal</code> 1.29.0+ soporta managed identity directamente:</p>
<div class="language-python highlight"><pre><span></span><code><span id="__span-3-1"><a href="#__codelineno-3-1" id="__codelineno-3-1" name="__codelineno-3-1"></a><span class="kn">import</span><span class="w"> </span><span class="nn">msal</span>
</span><span id="__span-3-2"><a href="#__codelineno-3-2" id="__codelineno-3-2" name="__codelineno-3-2"></a><span class="kn">import</span><span class="w"> </span><span class="nn">requests</span>
</span><span id="__span-3-3"><a href="#__codelineno-3-3" id="__codelineno-3-3" name="__codelineno-3-3"></a>
</span><span id="__span-3-4"><a href="#__codelineno-3-4" id="__codelineno-3-4" name="__codelineno-3-4"></a><span class="c1"># System-assigned managed identity</span>
</span><span id="__span-3-5"><a href="#__codelineno-3-5" id="__codelineno-3-5" name="__codelineno-3-5"></a><span class="n">managed_identity</span> <span class="o">=</span> <span class="n">msal</span><span class="o">.</span><span class="n">SystemAssignedManagedIdentity</span><span class="p">()</span>
</span><span id="__span-3-6"><a href="#__codelineno-3-6" id="__codelineno-3-6" name="__codelineno-3-6"></a><span class="n">app</span> <span class="o">=</span> <span class="n">msal</span><span class="o">.</span><span class="n">ManagedIdentityClient</span><span class="p">(</span><span class="n">managed_identity</span><span class="p">,</span> <span class="n">http_client</span><span class="o">=</span><span class="n">requests</span><span class="o">.</span><span class="n">Session</span><span class="p">())</span>
</span><span id="__span-3-7"><a href="#__codelineno-3-7" id="__codelineno-3-7" name="__codelineno-3-7"></a>
</span><span id="__span-3-8"><a href="#__codelineno-3-8" id="__codelineno-3-8" name="__codelineno-3-8"></a><span class="c1"># Obtener token para Key Vault</span>
</span><span id="__span-3-9"><a href="#__codelineno-3-9" id="__codelineno-3-9" name="__codelineno-3-9"></a><span class="n">result</span> <span class="o">=</span> <span class="n">app</span><span class="o">.</span><span class="n">acquire_token_for_client</span><span class="p">(</span><span class="n">resource</span><span class="o">=</span><span class="s2">"https://vault.azure.net"</span><span class="p">)</span>
</span><span id="__span-3-10"><a href="#__codelineno-3-10" id="__codelineno-3-10" name="__codelineno-3-10"></a>
</span><span id="__span-3-11"><a href="#__codelineno-3-11" id="__codelineno-3-11" name="__codelineno-3-11"></a><span class="k">if</span> <span class="s2">"access_token"</span> <span class="ow">in</span> <span class="n">result</span><span class="p">:</span>
</span><span id="__span-3-12"><a href="#__codelineno-3-12" id="__codelineno-3-12" name="__codelineno-3-12"></a>    <span class="n">token</span> <span class="o">=</span> <span class="n">result</span><span class="p">[</span><span class="s2">"access_token"</span><span class="p">]</span>
</span><span id="__span-3-13"><a href="#__codelineno-3-13" id="__codelineno-3-13" name="__codelineno-3-13"></a>    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">"Token adquirido: </span><span class="si">{</span><span class="n">token</span><span class="p">[:</span><span class="mi">20</span><span class="p">]</span><span class="si">}</span><span class="s2">..."</span><span class="p">)</span>
</span><span id="__span-3-14"><a href="#__codelineno-3-14" id="__codelineno-3-14" name="__codelineno-3-14"></a><span class="k">else</span><span class="p">:</span>
</span><span id="__span-3-15"><a href="#__codelineno-3-15" id="__codelineno-3-15" name="__codelineno-3-15"></a>    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">"Error: </span><span class="si">{</span><span class="n">result</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">'error_description'</span><span class="p">)</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>
</span></code></pre></div>
<h3 id="ejemplo-completo-leer-secreto-de-key-vault"><a class="toclink" href="2025/11/20/autenticaci%C3%B3n-python-en-m%C3%A1quinas-azure-arc-gu%C3%ADa-pr%C3%A1ctica/#ejemplo-completo-leer-secreto-de-key-vault">Ejemplo completo: Leer secreto de Key Vault</a></h3>
<p>Escenario: Script Python en servidor Arc que obtiene credenciales DB desde Key Vault.</p>
<div class="language-python highlight"><pre><span></span><code><span id="__span-4-1"><a href="#__codelineno-4-1" id="__codelineno-4-1" name="__codelineno-4-1"></a><span class="ch">#!/usr/bin/env python3</span>
</span><span id="__span-4-2"><a href="#__codelineno-4-2" id="__codelineno-4-2" name="__codelineno-4-2"></a><span class="sd">"""</span>
</span><span id="__span-4-3"><a href="#__codelineno-4-3" id="__codelineno-4-3" name="__codelineno-4-3"></a><span class="sd">Script: get_db_credentials.py</span>
</span><span id="__span-4-4"><a href="#__codelineno-4-4" id="__codelineno-4-4" name="__codelineno-4-4"></a><span class="sd">Descripción: Obtiene credenciales de base de datos desde Azure Key Vault</span>
</span><span id="__span-4-5"><a href="#__codelineno-4-5" id="__codelineno-4-5" name="__codelineno-4-5"></a><span class="sd">             usando managed identity del servidor Azure Arc</span>
</span><span id="__span-4-6"><a href="#__codelineno-4-6" id="__codelineno-4-6" name="__codelineno-4-6"></a><span class="sd">Requisitos: pip install azure-identity azure-keyvault-secrets</span>
</span><span id="__span-4-7"><a href="#__codelineno-4-7" id="__codelineno-4-7" name="__codelineno-4-7"></a><span class="sd">"""</span>
</span><span id="__span-4-8"><a href="#__codelineno-4-8" id="__codelineno-4-8" name="__codelineno-4-8"></a>
</span><span id="__span-4-9"><a href="#__codelineno-4-9" id="__codelineno-4-9" name="__codelineno-4-9"></a><span class="kn">from</span><span class="w"> </span><span class="nn">azure.identity</span><span class="w"> </span><span class="kn">import</span> <span class="n">DefaultAzureCredential</span>
</span><span id="__span-4-10"><a href="#__codelineno-4-10" id="__codelineno-4-10" name="__codelineno-4-10"></a><span class="kn">from</span><span class="w"> </span><span class="nn">azure.keyvault.secrets</span><span class="w"> </span><span class="kn">import</span> <span class="n">SecretClient</span>
</span><span id="__span-4-11"><a href="#__codelineno-4-11" id="__codelineno-4-11" name="__codelineno-4-11"></a><span class="kn">import</span><span class="w"> </span><span class="nn">sys</span>
</span><span id="__span-4-12"><a href="#__codelineno-4-12" id="__codelineno-4-12" name="__codelineno-4-12"></a>
</span><span id="__span-4-13"><a href="#__codelineno-4-13" id="__codelineno-4-13" name="__codelineno-4-13"></a><span class="k">def</span><span class="w"> </span><span class="nf">get_secret</span><span class="p">(</span><span class="n">vault_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">secret_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="__span-4-14"><a href="#__codelineno-4-14" id="__codelineno-4-14" name="__codelineno-4-14"></a><span class="w">    </span><span class="sd">"""</span>
</span><span id="__span-4-15"><a href="#__codelineno-4-15" id="__codelineno-4-15" name="__codelineno-4-15"></a><span class="sd">    Obtiene un secreto de Azure Key Vault usando managed identity.</span>
</span><span id="__span-4-16"><a href="#__codelineno-4-16" id="__codelineno-4-16" name="__codelineno-4-16"></a>
</span><span id="__span-4-17"><a href="#__codelineno-4-17" id="__codelineno-4-17" name="__codelineno-4-17"></a><span class="sd">    Args:</span>
</span><span id="__span-4-18"><a href="#__codelineno-4-18" id="__codelineno-4-18" name="__codelineno-4-18"></a><span class="sd">        vault_name: Nombre del Key Vault (sin .vault.azure.net)</span>
</span><span id="__span-4-19"><a href="#__codelineno-4-19" id="__codelineno-4-19" name="__codelineno-4-19"></a><span class="sd">        secret_name: Nombre del secreto</span>
</span><span id="__span-4-20"><a href="#__codelineno-4-20" id="__codelineno-4-20" name="__codelineno-4-20"></a>
</span><span id="__span-4-21"><a href="#__codelineno-4-21" id="__codelineno-4-21" name="__codelineno-4-21"></a><span class="sd">    Returns:</span>
</span><span id="__span-4-22"><a href="#__codelineno-4-22" id="__codelineno-4-22" name="__codelineno-4-22"></a><span class="sd">        Valor del secreto</span>
</span><span id="__span-4-23"><a href="#__codelineno-4-23" id="__codelineno-4-23" name="__codelineno-4-23"></a><span class="sd">    """</span>
</span><span id="__span-4-24"><a href="#__codelineno-4-24" id="__codelineno-4-24" name="__codelineno-4-24"></a>    <span class="k">try</span><span class="p">:</span>
</span><span id="__span-4-25"><a href="#__codelineno-4-25" id="__codelineno-4-25" name="__codelineno-4-25"></a>        <span class="c1"># DefaultAzureCredential detecta automáticamente el entorno Arc</span>
</span><span id="__span-4-26"><a href="#__codelineno-4-26" id="__codelineno-4-26" name="__codelineno-4-26"></a>        <span class="n">credential</span> <span class="o">=</span> <span class="n">DefaultAzureCredential</span><span class="p">()</span>
</span><span id="__span-4-27"><a href="#__codelineno-4-27" id="__codelineno-4-27" name="__codelineno-4-27"></a>
</span><span id="__span-4-28"><a href="#__codelineno-4-28" id="__codelineno-4-28" name="__codelineno-4-28"></a>        <span class="n">vault_url</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">"https://</span><span class="si">{</span><span class="n">vault_name</span><span class="si">}</span><span class="s2">.vault.azure.net"</span>
</span><span id="__span-4-29"><a href="#__codelineno-4-29" id="__codelineno-4-29" name="__codelineno-4-29"></a>        <span class="n">client</span> <span class="o">=</span> <span class="n">SecretClient</span><span class="p">(</span><span class="n">vault_url</span><span class="o">=</span><span class="n">vault_url</span><span class="p">,</span> <span class="n">credential</span><span class="o">=</span><span class="n">credential</span><span class="p">)</span>
</span><span id="__span-4-30"><a href="#__codelineno-4-30" id="__codelineno-4-30" name="__codelineno-4-30"></a>
</span><span id="__span-4-31"><a href="#__codelineno-4-31" id="__codelineno-4-31" name="__codelineno-4-31"></a>        <span class="c1"># Obtener secreto</span>
</span><span id="__span-4-32"><a href="#__codelineno-4-32" id="__codelineno-4-32" name="__codelineno-4-32"></a>        <span class="n">secret</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">get_secret</span><span class="p">(</span><span class="n">secret_name</span><span class="p">)</span>
</span><span id="__span-4-33"><a href="#__codelineno-4-33" id="__codelineno-4-33" name="__codelineno-4-33"></a>        <span class="k">return</span> <span class="n">secret</span><span class="o">.</span><span class="n">value</span>
</span><span id="__span-4-34"><a href="#__codelineno-4-34" id="__codelineno-4-34" name="__codelineno-4-34"></a>
</span><span id="__span-4-35"><a href="#__codelineno-4-35" id="__codelineno-4-35" name="__codelineno-4-35"></a>    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
</span><span id="__span-4-36"><a href="#__codelineno-4-36" id="__codelineno-4-36" name="__codelineno-4-36"></a>        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">"Error obteniendo secreto: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">"</span><span class="p">,</span> <span class="n">file</span><span class="o">=</span><span class="n">sys</span><span class="o">.</span><span class="n">stderr</span><span class="p">)</span>
</span><span id="__span-4-37"><a href="#__codelineno-4-37" id="__codelineno-4-37" name="__codelineno-4-37"></a>        <span class="n">sys</span><span class="o">.</span><span class="n">exit</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
</span><span id="__span-4-38"><a href="#__codelineno-4-38" id="__codelineno-4-38" name="__codelineno-4-38"></a>
</span><span id="__span-4-39"><a href="#__codelineno-4-39" id="__codelineno-4-39" name="__codelineno-4-39"></a><span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s2">"__main__"</span><span class="p">:</span>
</span><span id="__span-4-40"><a href="#__codelineno-4-40" id="__codelineno-4-40" name="__codelineno-4-40"></a>    <span class="c1"># Configuración</span>
</span><span id="__span-4-41"><a href="#__codelineno-4-41" id="__codelineno-4-41" name="__codelineno-4-41"></a>    <span class="n">VAULT_NAME</span> <span class="o">=</span> <span class="s2">"my-production-vault"</span>
</span><span id="__span-4-42"><a href="#__codelineno-4-42" id="__codelineno-4-42" name="__codelineno-4-42"></a>    <span class="n">DB_PASSWORD_SECRET</span> <span class="o">=</span> <span class="s2">"db-password"</span>
</span><span id="__span-4-43"><a href="#__codelineno-4-43" id="__codelineno-4-43" name="__codelineno-4-43"></a>
</span><span id="__span-4-44"><a href="#__codelineno-4-44" id="__codelineno-4-44" name="__codelineno-4-44"></a>    <span class="c1"># Obtener credencial</span>
</span><span id="__span-4-45"><a href="#__codelineno-4-45" id="__codelineno-4-45" name="__codelineno-4-45"></a>    <span class="n">password</span> <span class="o">=</span> <span class="n">get_secret</span><span class="p">(</span><span class="n">VAULT_NAME</span><span class="p">,</span> <span class="n">DB_PASSWORD_SECRET</span><span class="p">)</span>
</span><span id="__span-4-46"><a href="#__codelineno-4-46" id="__codelineno-4-46" name="__codelineno-4-46"></a>    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">"Credencial obtenida exitosamente (longitud: </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">password</span><span class="p">)</span><span class="si">}</span><span class="s2"> caracteres)"</span><span class="p">)</span>
</span><span id="__span-4-47"><a href="#__codelineno-4-47" id="__codelineno-4-47" name="__codelineno-4-47"></a>
</span><span id="__span-4-48"><a href="#__codelineno-4-48" id="__codelineno-4-48" name="__codelineno-4-48"></a>    <span class="c1"># Usar password para conectar a DB (no imprimir en logs reales)</span>
</span><span id="__span-4-49"><a href="#__codelineno-4-49" id="__codelineno-4-49" name="__codelineno-4-49"></a>    <span class="c1"># connection_string = f"Server=myserver;Database=mydb;User=admin;Password={password}"</span>
</span></code></pre></div>
<p><strong>Requisitos previos:</strong></p>
<ol>
<li>Servidor enrolado en Azure Arc con managed identity habilitada (por defecto).</li>
<li>Identity del servidor con RBAC apropiado en Key Vault:</li>
</ol>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-5-1"><a href="#__codelineno-5-1" id="__codelineno-5-1" name="__codelineno-5-1"></a><span class="c1"># Variables</span>
</span><span id="__span-5-2"><a href="#__codelineno-5-2" id="__codelineno-5-2" name="__codelineno-5-2"></a><span class="nv">RESOURCE_GROUP</span><span class="o">=</span><span class="s2">"my-rg"</span>
</span><span id="__span-5-3"><a href="#__codelineno-5-3" id="__codelineno-5-3" name="__codelineno-5-3"></a><span class="nv">SERVER_NAME</span><span class="o">=</span><span class="s2">"my-arc-server"</span>
</span><span id="__span-5-4"><a href="#__codelineno-5-4" id="__codelineno-5-4" name="__codelineno-5-4"></a><span class="nv">VAULT_NAME</span><span class="o">=</span><span class="s2">"my-production-vault"</span>
</span><span id="__span-5-5"><a href="#__codelineno-5-5" id="__codelineno-5-5" name="__codelineno-5-5"></a>
</span><span id="__span-5-6"><a href="#__codelineno-5-6" id="__codelineno-5-6" name="__codelineno-5-6"></a><span class="c1"># Obtener el principal ID de la managed identity</span>
</span><span id="__span-5-7"><a href="#__codelineno-5-7" id="__codelineno-5-7" name="__codelineno-5-7"></a><span class="nv">PRINCIPAL_ID</span><span class="o">=</span><span class="k">$(</span>az<span class="w"> </span>connectedmachine<span class="w"> </span>show<span class="w"> </span><span class="se">\</span>
</span><span id="__span-5-8"><a href="#__codelineno-5-8" id="__codelineno-5-8" name="__codelineno-5-8"></a><span class="w">    </span>--resource-group<span class="w"> </span><span class="nv">$RESOURCE_GROUP</span><span class="w"> </span><span class="se">\</span>
</span><span id="__span-5-9"><a href="#__codelineno-5-9" id="__codelineno-5-9" name="__codelineno-5-9"></a><span class="w">    </span>--name<span class="w"> </span><span class="nv">$SERVER_NAME</span><span class="w"> </span><span class="se">\</span>
</span><span id="__span-5-10"><a href="#__codelineno-5-10" id="__codelineno-5-10" name="__codelineno-5-10"></a><span class="w">    </span>--query<span class="w"> </span>identity.principalId<span class="w"> </span>-o<span class="w"> </span>tsv<span class="k">)</span>
</span><span id="__span-5-11"><a href="#__codelineno-5-11" id="__codelineno-5-11" name="__codelineno-5-11"></a>
</span><span id="__span-5-12"><a href="#__codelineno-5-12" id="__codelineno-5-12" name="__codelineno-5-12"></a><span class="c1"># Asignar rol "Key Vault Secrets User" (RBAC)</span>
</span><span id="__span-5-13"><a href="#__codelineno-5-13" id="__codelineno-5-13" name="__codelineno-5-13"></a>az<span class="w"> </span>role<span class="w"> </span>assignment<span class="w"> </span>create<span class="w"> </span><span class="se">\</span>
</span><span id="__span-5-14"><a href="#__codelineno-5-14" id="__codelineno-5-14" name="__codelineno-5-14"></a><span class="w">    </span>--assignee<span class="w"> </span><span class="nv">$PRINCIPAL_ID</span><span class="w"> </span><span class="se">\</span>
</span><span id="__span-5-15"><a href="#__codelineno-5-15" id="__codelineno-5-15" name="__codelineno-5-15"></a><span class="w">    </span>--role<span class="w"> </span><span class="s2">"Key Vault Secrets User"</span><span class="w"> </span><span class="se">\</span>
</span><span id="__span-5-16"><a href="#__codelineno-5-16" id="__codelineno-5-16" name="__codelineno-5-16"></a><span class="w">    </span>--scope<span class="w"> </span>/subscriptions/<span class="k">$(</span>az<span class="w"> </span>account<span class="w"> </span>show<span class="w"> </span>--query<span class="w"> </span>id<span class="w"> </span>-o<span class="w"> </span>tsv<span class="k">)</span>/resourceGroups/<span class="nv">$RESOURCE_GROUP</span>/providers/Microsoft.KeyVault/vaults/<span class="nv">$VAULT_NAME</span>
</span></code></pre></div>
<h3 id="validar-managed-identity-en-el-servidor"><a class="toclink" href="2025/11/20/autenticaci%C3%B3n-python-en-m%C3%A1quinas-azure-arc-gu%C3%ADa-pr%C3%A1ctica/#validar-managed-identity-en-el-servidor">Validar managed identity en el servidor</a></h3>
<p>Antes de ejecutar código Python, verifica que el endpoint IMDS responde:</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-6-1"><a href="#__codelineno-6-1" id="__codelineno-6-1" name="__codelineno-6-1"></a><span class="c1"># Variables de entorno expuestas por el agente Arc</span>
</span><span id="__span-6-2"><a href="#__codelineno-6-2" id="__codelineno-6-2" name="__codelineno-6-2"></a><span class="nb">echo</span><span class="w"> </span><span class="nv">$IMDS_ENDPOINT</span>
</span><span id="__span-6-3"><a href="#__codelineno-6-3" id="__codelineno-6-3" name="__codelineno-6-3"></a><span class="c1"># Salida esperada: http://localhost:40342</span>
</span><span id="__span-6-4"><a href="#__codelineno-6-4" id="__codelineno-6-4" name="__codelineno-6-4"></a>
</span><span id="__span-6-5"><a href="#__codelineno-6-5" id="__codelineno-6-5" name="__codelineno-6-5"></a><span class="nb">echo</span><span class="w"> </span><span class="nv">$IDENTITY_ENDPOINT</span>
</span><span id="__span-6-6"><a href="#__codelineno-6-6" id="__codelineno-6-6" name="__codelineno-6-6"></a><span class="c1"># Salida esperada: http://localhost:40342/metadata/identity/oauth2/token</span>
</span><span id="__span-6-7"><a href="#__codelineno-6-7" id="__codelineno-6-7" name="__codelineno-6-7"></a>
</span><span id="__span-6-8"><a href="#__codelineno-6-8" id="__codelineno-6-8" name="__codelineno-6-8"></a><span class="c1"># Test manual del endpoint (requiere header Metadata:true)</span>
</span><span id="__span-6-9"><a href="#__codelineno-6-9" id="__codelineno-6-9" name="__codelineno-6-9"></a>curl<span class="w"> </span>-H<span class="w"> </span><span class="s2">"Metadata:true"</span><span class="w"> </span><span class="se">\</span>
</span><span id="__span-6-10"><a href="#__codelineno-6-10" id="__codelineno-6-10" name="__codelineno-6-10"></a><span class="w">    </span><span class="s2">"http://localhost:40342/metadata/identity/oauth2/token?api-version=2020-06-01&amp;resource=https://vault.azure.net"</span>
</span></code></pre></div>
<p>Respuesta exitosa (JSON con <code>access_token</code>, <code>expires_on</code>, etc.):</p>
<div class="language-json highlight"><pre><span></span><code><span id="__span-7-1"><a href="#__codelineno-7-1" id="__codelineno-7-1" name="__codelineno-7-1"></a><span class="p">{</span>
</span><span id="__span-7-2"><a href="#__codelineno-7-2" id="__codelineno-7-2" name="__codelineno-7-2"></a><span class="w">  </span><span class="nt">"access_token"</span><span class="p">:</span><span class="w"> </span><span class="s2">"eyJ0eXAiOiJKV1QiLCJhbGc..."</span><span class="p">,</span>
</span><span id="__span-7-3"><a href="#__codelineno-7-3" id="__codelineno-7-3" name="__codelineno-7-3"></a><span class="w">  </span><span class="nt">"expires_on"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1700000000"</span><span class="p">,</span>
</span><span id="__span-7-4"><a href="#__codelineno-7-4" id="__codelineno-7-4" name="__codelineno-7-4"></a><span class="w">  </span><span class="nt">"resource"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://vault.azure.net"</span><span class="p">,</span>
</span><span id="__span-7-5"><a href="#__codelineno-7-5" id="__codelineno-7-5" name="__codelineno-7-5"></a><span class="w">  </span><span class="nt">"token_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Bearer"</span>
</span><span id="__span-7-6"><a href="#__codelineno-7-6" id="__codelineno-7-6" name="__codelineno-7-6"></a><span class="p">}</span>
</span></code></pre></div>
<h3 id="troubleshooting-comun"><a class="toclink" href="2025/11/20/autenticaci%C3%B3n-python-en-m%C3%A1quinas-azure-arc-gu%C3%ADa-pr%C3%A1ctica/#troubleshooting-comun">Troubleshooting común</a></h3>
<h4 id="error-no-managed-identity-endpoint-found"><a class="toclink" href="2025/11/20/autenticaci%C3%B3n-python-en-m%C3%A1quinas-azure-arc-gu%C3%ADa-pr%C3%A1ctica/#error-no-managed-identity-endpoint-found">Error: "No managed identity endpoint found"</a></h4>
<p><strong>Causa:</strong> El agente Arc no está instalado o no ha configurado el endpoint IMDS.</p>
<p><strong>Solución:</strong></p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-8-1"><a href="#__codelineno-8-1" id="__codelineno-8-1" name="__codelineno-8-1"></a><span class="c1"># Verificar estado del agente</span>
</span><span id="__span-8-2"><a href="#__codelineno-8-2" id="__codelineno-8-2" name="__codelineno-8-2"></a>sudo<span class="w"> </span>azcmagent<span class="w"> </span>show
</span><span id="__span-8-3"><a href="#__codelineno-8-3" id="__codelineno-8-3" name="__codelineno-8-3"></a>
</span><span id="__span-8-4"><a href="#__codelineno-8-4" id="__codelineno-8-4" name="__codelineno-8-4"></a><span class="c1"># Si está desconectado, reconectar</span>
</span><span id="__span-8-5"><a href="#__codelineno-8-5" id="__codelineno-8-5" name="__codelineno-8-5"></a>sudo<span class="w"> </span>azcmagent<span class="w"> </span>connect<span class="w"> </span><span class="se">\</span>
</span><span id="__span-8-6"><a href="#__codelineno-8-6" id="__codelineno-8-6" name="__codelineno-8-6"></a><span class="w">    </span>--resource-group<span class="w"> </span><span class="s2">"my-rg"</span><span class="w"> </span><span class="se">\</span>
</span><span id="__span-8-7"><a href="#__codelineno-8-7" id="__codelineno-8-7" name="__codelineno-8-7"></a><span class="w">    </span>--tenant-id<span class="w"> </span><span class="s2">"tenant-id"</span><span class="w"> </span><span class="se">\</span>
</span><span id="__span-8-8"><a href="#__codelineno-8-8" id="__codelineno-8-8" name="__codelineno-8-8"></a><span class="w">    </span>--location<span class="w"> </span><span class="s2">"westeurope"</span><span class="w"> </span><span class="se">\</span>
</span><span id="__span-8-9"><a href="#__codelineno-8-9" id="__codelineno-8-9" name="__codelineno-8-9"></a><span class="w">    </span>--subscription-id<span class="w"> </span><span class="s2">"sub-id"</span>
</span></code></pre></div>
<h4 id="error-aadsts700016-application-not-found"><a class="toclink" href="2025/11/20/autenticaci%C3%B3n-python-en-m%C3%A1quinas-azure-arc-gu%C3%ADa-pr%C3%A1ctica/#error-aadsts700016-application-not-found">Error: "AADSTS700016: Application not found"</a></h4>
<p><strong>Causa:</strong> La managed identity no tiene permisos RBAC sobre el recurso destino.</p>
<p><strong>Solución:</strong> Asignar rol apropiado (ver ejemplo de Key Vault arriba). Roles comunes:</p>
<ul>
<li>Key Vault: <code>Key Vault Secrets User</code> (lectura secretos)</li>
<li>Storage: <code>Storage Blob Data Reader</code> (lectura blobs)</li>
<li>Log Analytics: <code>Log Analytics Reader</code> (consultas)</li>
</ul>
<h4 id="error-credentialunavailableerror-managedidentitycredential-authentication-unavailable"><a class="toclink" href="2025/11/20/autenticaci%C3%B3n-python-en-m%C3%A1quinas-azure-arc-gu%C3%ADa-pr%C3%A1ctica/#error-credentialunavailableerror-managedidentitycredential-authentication-unavailable">Error: "CredentialUnavailableError: ManagedIdentityCredential authentication unavailable"</a></h4>
<p><strong>Causa:</strong> Ejecutando código fuera de un entorno con managed identity (ej: laptop local).</p>
<p><strong>Solución:</strong> <code>DefaultAzureCredential</code> caerá en otros métodos (Azure CLI, variables de entorno). Para testing local:</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-9-1"><a href="#__codelineno-9-1" id="__codelineno-9-1" name="__codelineno-9-1"></a><span class="c1"># Autenticarse con Azure CLI (DefaultAzureCredential lo detectará)</span>
</span><span id="__span-9-2"><a href="#__codelineno-9-2" id="__codelineno-9-2" name="__codelineno-9-2"></a>az<span class="w"> </span>login
</span><span id="__span-9-3"><a href="#__codelineno-9-3" id="__codelineno-9-3" name="__codelineno-9-3"></a>
</span><span id="__span-9-4"><a href="#__codelineno-9-4" id="__codelineno-9-4" name="__codelineno-9-4"></a><span class="c1"># O usar service principal con variables de entorno</span>
</span><span id="__span-9-5"><a href="#__codelineno-9-5" id="__codelineno-9-5" name="__codelineno-9-5"></a><span class="nb">export</span><span class="w"> </span><span class="nv">AZURE_CLIENT_ID</span><span class="o">=</span><span class="s2">"app-id"</span>
</span><span id="__span-9-6"><a href="#__codelineno-9-6" id="__codelineno-9-6" name="__codelineno-9-6"></a><span class="nb">export</span><span class="w"> </span><span class="nv">AZURE_CLIENT_SECRET</span><span class="o">=</span><span class="s2">"secret"</span>
</span><span id="__span-9-7"><a href="#__codelineno-9-7" id="__codelineno-9-7" name="__codelineno-9-7"></a><span class="nb">export</span><span class="w"> </span><span class="nv">AZURE_TENANT_ID</span><span class="o">=</span><span class="s2">"tenant-id"</span>
</span></code></pre></div>
<h3 id="permisos-y-seguridad"><a class="toclink" href="2025/11/20/autenticaci%C3%B3n-python-en-m%C3%A1quinas-azure-arc-gu%C3%ADa-pr%C3%A1ctica/#permisos-y-seguridad">Permisos y seguridad</a></h3>
<h4 id="principio-de-minimo-privilegio"><a class="toclink" href="2025/11/20/autenticaci%C3%B3n-python-en-m%C3%A1quinas-azure-arc-gu%C3%ADa-pr%C3%A1ctica/#principio-de-minimo-privilegio">Principio de mínimo privilegio</a></h4>
<p>Asigna solo los permisos necesarios:</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-10-1"><a href="#__codelineno-10-1" id="__codelineno-10-1" name="__codelineno-10-1"></a><span class="c1"># ❌ MAL: Owner en toda la suscripción</span>
</span><span id="__span-10-2"><a href="#__codelineno-10-2" id="__codelineno-10-2" name="__codelineno-10-2"></a>az<span class="w"> </span>role<span class="w"> </span>assignment<span class="w"> </span>create<span class="w"> </span>--assignee<span class="w"> </span><span class="nv">$PRINCIPAL_ID</span><span class="w"> </span>--role<span class="w"> </span><span class="s2">"Owner"</span><span class="w"> </span>--subscription<span class="w"> </span><span class="nv">$SUB_ID</span>
</span><span id="__span-10-3"><a href="#__codelineno-10-3" id="__codelineno-10-3" name="__codelineno-10-3"></a>
</span><span id="__span-10-4"><a href="#__codelineno-10-4" id="__codelineno-10-4" name="__codelineno-10-4"></a><span class="c1"># ✅ BIEN: Lectura específica en un Key Vault</span>
</span><span id="__span-10-5"><a href="#__codelineno-10-5" id="__codelineno-10-5" name="__codelineno-10-5"></a>az<span class="w"> </span>role<span class="w"> </span>assignment<span class="w"> </span>create<span class="w"> </span>--assignee<span class="w"> </span><span class="nv">$PRINCIPAL_ID</span><span class="w"> </span>--role<span class="w"> </span><span class="s2">"Key Vault Secrets User"</span><span class="w"> </span>--scope<span class="w"> </span><span class="nv">$VAULT_ID</span>
</span></code></pre></div>
<h4 id="control-de-acceso-local"><a class="toclink" href="2025/11/20/autenticaci%C3%B3n-python-en-m%C3%A1quinas-azure-arc-gu%C3%ADa-pr%C3%A1ctica/#control-de-acceso-local">Control de acceso local</a></h4>
<p>Solo usuarios con privilegios elevados pueden obtener tokens managed identity:</p>
<ul>
<li><strong>Windows:</strong> Miembros de <code>Administrators</code> o grupo <code>Hybrid Agent Extension Applications</code></li>
<li><strong>Linux:</strong> Miembros del grupo <code>himds</code></li>
</ul>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-11-1"><a href="#__codelineno-11-1" id="__codelineno-11-1" name="__codelineno-11-1"></a><span class="c1"># Linux: Añadir usuario al grupo himds (con precaución)</span>
</span><span id="__span-11-2"><a href="#__codelineno-11-2" id="__codelineno-11-2" name="__codelineno-11-2"></a>sudo<span class="w"> </span>usermod<span class="w"> </span>-aG<span class="w"> </span>himds<span class="w"> </span>myappuser
</span><span id="__span-11-3"><a href="#__codelineno-11-3" id="__codelineno-11-3" name="__codelineno-11-3"></a>
</span><span id="__span-11-4"><a href="#__codelineno-11-4" id="__codelineno-11-4" name="__codelineno-11-4"></a><span class="c1"># Verificar membership</span>
</span><span id="__span-11-5"><a href="#__codelineno-11-5" id="__codelineno-11-5" name="__codelineno-11-5"></a>groups<span class="w"> </span>myappuser
</span></code></pre></div>
<h3 id="buenas-practicas"><a class="toclink" href="2025/11/20/autenticaci%C3%B3n-python-en-m%C3%A1quinas-azure-arc-gu%C3%ADa-pr%C3%A1ctica/#buenas-practicas">Buenas prácticas</a></h3>
<ol>
<li><strong>Usa <code>DefaultAzureCredential</code> por defecto:</strong> Funciona en dev y producción sin cambios.</li>
<li><strong>No almacenes tokens:</strong> Deja que el SDK los renueve automáticamente.</li>
<li><strong>Logging seguro:</strong> No imprimas tokens o secretos en logs (<code>print(token)</code> ❌).</li>
<li><strong>Auditoría:</strong> Habilita diagnostic logs en Key Vault/Storage para rastrear accesos:</li>
</ol>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-12-1"><a href="#__codelineno-12-1" id="__codelineno-12-1" name="__codelineno-12-1"></a>az<span class="w"> </span>monitor<span class="w"> </span>diagnostic-settings<span class="w"> </span>create<span class="w"> </span><span class="se">\</span>
</span><span id="__span-12-2"><a href="#__codelineno-12-2" id="__codelineno-12-2" name="__codelineno-12-2"></a><span class="w">    </span>--resource<span class="w"> </span><span class="nv">$VAULT_ID</span><span class="w"> </span><span class="se">\</span>
</span><span id="__span-12-3"><a href="#__codelineno-12-3" id="__codelineno-12-3" name="__codelineno-12-3"></a><span class="w">    </span>--name<span class="w"> </span><span class="s2">"audit-logs"</span><span class="w"> </span><span class="se">\</span>
</span><span id="__span-12-4"><a href="#__codelineno-12-4" id="__codelineno-12-4" name="__codelineno-12-4"></a><span class="w">    </span>--logs<span class="w"> </span><span class="s1">'[{"category":"AuditEvent","enabled":true}]'</span><span class="w"> </span><span class="se">\</span>
</span><span id="__span-12-5"><a href="#__codelineno-12-5" id="__codelineno-12-5" name="__codelineno-12-5"></a><span class="w">    </span>--workspace<span class="w"> </span><span class="nv">$LOG_ANALYTICS_WORKSPACE_ID</span>
</span></code></pre></div>
<ol>
<li><strong>Timeout y reintentos:</strong> El SDK maneja reintentos, pero para scripts long-running:</li>
</ol>
<div class="language-python highlight"><pre><span></span><code><span id="__span-13-1"><a href="#__codelineno-13-1" id="__codelineno-13-1" name="__codelineno-13-1"></a><span class="kn">from</span><span class="w"> </span><span class="nn">azure.core.exceptions</span><span class="w"> </span><span class="kn">import</span> <span class="n">AzureError</span>
</span><span id="__span-13-2"><a href="#__codelineno-13-2" id="__codelineno-13-2" name="__codelineno-13-2"></a><span class="kn">import</span><span class="w"> </span><span class="nn">time</span>
</span><span id="__span-13-3"><a href="#__codelineno-13-3" id="__codelineno-13-3" name="__codelineno-13-3"></a>
</span><span id="__span-13-4"><a href="#__codelineno-13-4" id="__codelineno-13-4" name="__codelineno-13-4"></a><span class="k">def</span><span class="w"> </span><span class="nf">get_secret_with_retry</span><span class="p">(</span><span class="n">client</span><span class="p">,</span> <span class="n">secret_name</span><span class="p">,</span> <span class="n">max_retries</span><span class="o">=</span><span class="mi">3</span><span class="p">):</span>
</span><span id="__span-13-5"><a href="#__codelineno-13-5" id="__codelineno-13-5" name="__codelineno-13-5"></a>    <span class="k">for</span> <span class="n">attempt</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">max_retries</span><span class="p">):</span>
</span><span id="__span-13-6"><a href="#__codelineno-13-6" id="__codelineno-13-6" name="__codelineno-13-6"></a>        <span class="k">try</span><span class="p">:</span>
</span><span id="__span-13-7"><a href="#__codelineno-13-7" id="__codelineno-13-7" name="__codelineno-13-7"></a>            <span class="k">return</span> <span class="n">client</span><span class="o">.</span><span class="n">get_secret</span><span class="p">(</span><span class="n">secret_name</span><span class="p">)</span><span class="o">.</span><span class="n">value</span>
</span><span id="__span-13-8"><a href="#__codelineno-13-8" id="__codelineno-13-8" name="__codelineno-13-8"></a>        <span class="k">except</span> <span class="n">AzureError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
</span><span id="__span-13-9"><a href="#__codelineno-13-9" id="__codelineno-13-9" name="__codelineno-13-9"></a>            <span class="k">if</span> <span class="n">attempt</span> <span class="o">&lt;</span> <span class="n">max_retries</span> <span class="o">-</span> <span class="mi">1</span><span class="p">:</span>
</span><span id="__span-13-10"><a href="#__codelineno-13-10" id="__codelineno-13-10" name="__codelineno-13-10"></a>                <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">2</span> <span class="o">**</span> <span class="n">attempt</span><span class="p">)</span>  <span class="c1"># Exponential backoff</span>
</span><span id="__span-13-11"><a href="#__codelineno-13-11" id="__codelineno-13-11" name="__codelineno-13-11"></a>                <span class="k">continue</span>
</span><span id="__span-13-12"><a href="#__codelineno-13-12" id="__codelineno-13-12" name="__codelineno-13-12"></a>            <span class="k">raise</span>
</span></code></pre></div>
<h3 id="instalacion-de-dependencias"><a class="toclink" href="2025/11/20/autenticaci%C3%B3n-python-en-m%C3%A1quinas-azure-arc-gu%C3%ADa-pr%C3%A1ctica/#instalacion-de-dependencias">Instalación de dependencias</a></h3>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-14-1"><a href="#__codelineno-14-1" id="__codelineno-14-1" name="__codelineno-14-1"></a><span class="c1"># Instalar Azure SDK para identidad y servicios específicos</span>
</span><span id="__span-14-2"><a href="#__codelineno-14-2" id="__codelineno-14-2" name="__codelineno-14-2"></a>pip<span class="w"> </span>install<span class="w"> </span>azure-identity<span class="w"> </span>azure-keyvault-secrets<span class="w"> </span>azure-storage-blob
</span><span id="__span-14-3"><a href="#__codelineno-14-3" id="__codelineno-14-3" name="__codelineno-14-3"></a>
</span><span id="__span-14-4"><a href="#__codelineno-14-4" id="__codelineno-14-4" name="__codelineno-14-4"></a><span class="c1"># Para desarrollo, incluye azure-cli para testing local</span>
</span><span id="__span-14-5"><a href="#__codelineno-14-5" id="__codelineno-14-5" name="__codelineno-14-5"></a>pip<span class="w"> </span>install<span class="w"> </span>azure-cli
</span></code></pre></div>
<p>Archivo <code>requirements.txt</code> recomendado:</p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-15-1"><a href="#__codelineno-15-1" id="__codelineno-15-1" name="__codelineno-15-1"></a>azure-identity&gt;=1.15.0
</span><span id="__span-15-2"><a href="#__codelineno-15-2" id="__codelineno-15-2" name="__codelineno-15-2"></a>azure-keyvault-secrets&gt;=4.7.0
</span><span id="__span-15-3"><a href="#__codelineno-15-3" id="__codelineno-15-3" name="__codelineno-15-3"></a>azure-storage-blob&gt;=12.19.0
</span></code></pre></div>
<h3 id="referencias"><a class="toclink" href="2025/11/20/autenticaci%C3%B3n-python-en-m%C3%A1quinas-azure-arc-gu%C3%ADa-pr%C3%A1ctica/#referencias">Referencias</a></h3>
<p>Documentación oficial validada:</p>
<ul>
<li>Autenticación managed identity en Azure Arc: <a href="https://learn.microsoft.com/en-us/azure/azure-arc/servers/managed-identity-authentication">https://learn.microsoft.com/en-us/azure/azure-arc/servers/managed-identity-authentication</a></li>
<li>Azure Identity library para Python: <a href="https://learn.microsoft.com/en-us/python/api/overview/azure/identity-readme">https://learn.microsoft.com/en-us/python/api/overview/azure/identity-readme</a></li>
<li>Managed identities overview: <a href="https://learn.microsoft.com/en-us/entra/identity/managed-identities-azure-resources/overview">https://learn.microsoft.com/en-us/entra/identity/managed-identities-azure-resources/overview</a></li>
<li>MSAL Python managed identity: <a href="https://learn.microsoft.com/en-us/entra/msal/python/advanced/managed-identity">https://learn.microsoft.com/en-us/entra/msal/python/advanced/managed-identity</a></li>
<li>Security overview Azure Arc: <a href="https://learn.microsoft.com/en-us/azure/cloud-adoption-framework/scenarios/hybrid/arc-enabled-servers/eslz-identity-and-access-management">https://learn.microsoft.com/en-us/azure/cloud-adoption-framework/scenarios/hybrid/arc-enabled-servers/eslz-identity-and-access-management</a></li>
</ul>
</div>
</article>
<article class="md-post md-post--excerpt">
<header class="md-post__header">
<nav class="md-post__authors md-typeset">
<span class="md-author">
<img alt="Rafael Fernández" src="https://avatars.githubusercontent.com/u/39990341">
</span>
</nav>
<div class="md-post__meta md-meta">
<ul class="md-meta__list">
<li class="md-meta__item">
<time datetime="2025-11-20 00:00:00+00:00">November 20, 2025</time></li>
<li class="md-meta__item">
            in
            
              <a class="md-meta__link" href="category/azure-updates/">Azure Updates</a></li>
<li class="md-meta__item">
            
              2 min read
            
          </li>
</ul>
</div>
</header>
<div class="md-post__content md-typeset">
<h2 id="microsoft-ignite-2025-book-of-news-tu-guia-rapida-a-las-novedades"><a class="toclink" href="2025/11/20/microsoft-ignite-2025-book-of-news-tu-gu%C3%ADa-r%C3%A1pida-a-las-novedades/">Microsoft Ignite 2025 Book of News: Tu Guía Rápida a las Novedades</a></h2>
<h3 id="resumen"><a class="toclink" href="2025/11/20/microsoft-ignite-2025-book-of-news-tu-gu%C3%ADa-r%C3%A1pida-a-las-novedades/#resumen">Resumen</a></h3>
<p>El Book of News de Microsoft Ignite es el documento oficial que condensa todos los anuncios del evento más importante de Microsoft para profesionales IT y desarrolladores. En lugar de revisar cientos de sesiones, este recurso te da acceso directo a las innovaciones clave en Azure, IA, seguridad y productividad.</p>
<h3 id="que-es-el-book-of-news"><a class="toclink" href="2025/11/20/microsoft-ignite-2025-book-of-news-tu-gu%C3%ADa-r%C3%A1pida-a-las-novedades/#que-es-el-book-of-news">¿Qué es el Book of News?</a></h3>
<p>El <strong>Book of News</strong> es una publicación digital que Microsoft lanza durante Ignite con:</p>
<ul>
<li><strong>Anuncios consolidados:</strong> Todos los launches de productos, servicios y features en un solo lugar</li>
<li><strong>Categorización clara:</strong> Agrupado por áreas (Azure, Microsoft 365, Security, Copilot, etc.)</li>
<li><strong>Enlaces directos:</strong> Cada anuncio vincula a documentación técnica, blogs y recursos</li>
<li><strong>Formato navegable:</strong> Búsqueda, filtros por tema, y versión descargable</li>
</ul>
<p>Es la fuente autoritativa para equipos técnicos que necesitan evaluar el impacto de las novedades en sus entornos sin esperar a que la información se disperse en múltiples canales.</p>
<h3 id="para-que-sirve"><a class="toclink" href="2025/11/20/microsoft-ignite-2025-book-of-news-tu-gu%C3%ADa-r%C3%A1pida-a-las-novedades/#para-que-sirve">Para qué sirve</a></h3>
<h4 id="casos-de-uso-tipicos"><a class="toclink" href="2025/11/20/microsoft-ignite-2025-book-of-news-tu-gu%C3%ADa-r%C3%A1pida-a-las-novedades/#casos-de-uso-tipicos">Casos de uso típicos</a></h4>
<p><strong>Arquitectos y decision-makers:</strong></p>
<ul>
<li>Identificar nuevas capacidades para roadmaps técnicos</li>
<li>Evaluar deprecations y migraciones necesarias</li>
<li>Comparar features GA vs Preview</li>
</ul>
<p><strong>Equipos DevOps:</strong></p>
<ul>
<li>Detectar mejoras en pipelines (GitHub, Azure DevOps)</li>
<li>Revisar nuevos servicios de observabilidad/monitoring</li>
<li>Actualizar IaC (Bicep/Terraform) con recursos nuevos</li>
</ul>
<p><strong>Admins de seguridad:</strong></p>
<ul>
<li>Cambios en Microsoft Defender, Entra ID, Purview</li>
<li>Nuevas políticas de compliance y governance</li>
<li>Features de Zero Trust y confidential computing</li>
</ul>
<p><strong>Desarrolladores:</strong></p>
<ul>
<li>SDKs y APIs nuevas (Azure OpenAI, Cosmos DB, etc.)</li>
<li>Integraciones con Copilot y herramientas IA</li>
<li>Lenguajes y frameworks soportados</li>
</ul>
<h3 id="mind-map-novedades-ignite-2025"><a class="toclink" href="2025/11/20/microsoft-ignite-2025-book-of-news-tu-gu%C3%ADa-r%C3%A1pida-a-las-novedades/#mind-map-novedades-ignite-2025">Mind Map: Novedades Ignite 2025</a></h3>
<p>Visualización rápida de las áreas clave del evento (generada con NotebookLM):</p>
<p><img alt="Mind Map Microsoft Ignite 2025" src="2025/11/NotebookLM_Mind_Map.png"></p>
<p>Este mapa conceptual resume las categorías principales:</p>
<ul>
<li><strong>Azure AI &amp; Copilot:</strong> Modelos, agentes, integración empresarial</li>
<li><strong>Infrastructure &amp; Compute:</strong> VMs, Kubernetes, Arc, networking</li>
<li><strong>Data &amp; Analytics:</strong> Fabric, Synapse, Cosmos DB, Data Governance</li>
<li><strong>Security &amp; Compliance:</strong> Entra, Defender, Purview, Zero Trust</li>
<li><strong>Developer Tools:</strong> GitHub, Visual Studio, Azure DevOps</li>
<li><strong>Microsoft 365 &amp; Productivity:</strong> Teams, Viva, Loop, features Copilot</li>
</ul>
<h3 id="acceso-directo"><a class="toclink" href="2025/11/20/microsoft-ignite-2025-book-of-news-tu-gu%C3%ADa-r%C3%A1pida-a-las-novedades/#acceso-directo">Acceso directo</a></h3>
<p><strong>Book of News oficial:</strong><br>
<a href="https://news.microsoft.com/ignite-2025-book-of-news/?msockid=25575f14f26964eb1e8b4ceaf3d06597">https://news.microsoft.com/ignite-2025-book-of-news/</a></p>
<p><strong>Recursos complementarios:</strong></p>
<ul>
<li>Azure Updates: <a href="https://azure.microsoft.com/updates/">https://azure.microsoft.com/updates/</a></li>
<li>Ignite Sesiones on-demand: <a href="https://ignite.microsoft.com/sessions">https://ignite.microsoft.com/sessions</a></li>
<li>Microsoft Tech Community: <a href="https://techcommunity.microsoft.com/">https://techcommunity.microsoft.com/</a></li>
</ul>
<h3 id="workflow-recomendado-post-ignite"><a class="toclink" href="2025/11/20/microsoft-ignite-2025-book-of-news-tu-gu%C3%ADa-r%C3%A1pida-a-las-novedades/#workflow-recomendado-post-ignite">Workflow recomendado post-Ignite</a></h3>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-0-1"><a href="#__codelineno-0-1" id="__codelineno-0-1" name="__codelineno-0-1"></a><span class="c1"># 1. Review Book of News (filtrar tu stack)</span>
</span><span id="__span-0-2"><a href="#__codelineno-0-2" id="__codelineno-0-2" name="__codelineno-0-2"></a><span class="c1"># 2. Identifica 3-5 anuncios de alto impacto</span>
</span><span id="__span-0-3"><a href="#__codelineno-0-3" id="__codelineno-0-3" name="__codelineno-0-3"></a><span class="c1"># 3. Lee docs técnicas vinculadas</span>
</span><span id="__span-0-4"><a href="#__codelineno-0-4" id="__codelineno-0-4" name="__codelineno-0-4"></a><span class="c1"># 4. Crea PoC para features Preview críticos</span>
</span><span id="__span-0-5"><a href="#__codelineno-0-5" id="__codelineno-0-5" name="__codelineno-0-5"></a><span class="c1"># 5. Planifica adopción GA en roadmap Q1/Q2</span>
</span><span id="__span-0-6"><a href="#__codelineno-0-6" id="__codelineno-0-6" name="__codelineno-0-6"></a><span class="c1"># 6. Comunica cambios a stakeholders (infra, security, dev teams)</span>
</span></code></pre></div>
<h3 id="conclusion"><a class="toclink" href="2025/11/20/microsoft-ignite-2025-book-of-news-tu-gu%C3%ADa-r%C3%A1pida-a-las-novedades/#conclusion">Conclusión</a></h3>
<p>El Book of News no es solo un catálogo de marketing: es una herramienta de planning estratégico. Invertir 2-3 horas revisándolo después de Ignite te ahorra semanas de investigación dispersa y te pone adelante en adopción de tecnologías que tus competidores descubrirán meses después.</p>
<p>Marca la URL, revísala trimestralmente (Microsoft actualiza entradas con GAs), y úsala como checklist de innovación para tu organización.</p>
</div>
</article>
<article class="md-post md-post--excerpt">
<header class="md-post__header">
<nav class="md-post__authors md-typeset">
<span class="md-author">
<img alt="Rafael Fernández" src="https://avatars.githubusercontent.com/u/39990341">
</span>
</nav>
<div class="md-post__meta md-meta">
<ul class="md-meta__list">
<li class="md-meta__item">
<time datetime="2025-11-16 00:00:00+00:00">November 16, 2025</time></li>
<li class="md-meta__item">
            in
            
              <a class="md-meta__link" href="category/devops/">DevOps</a></li>
<li class="md-meta__item">
            
              3 min read
            
          </li>
</ul>
</div>
</header>
<div class="md-post__content md-typeset">
<h2 id="clonar-un-repositorio-de-github-de-una-organizacion-a-otra-guia-paso-a-paso"><a class="toclink" href="2025/11/16/clonar-un-repositorio-de-github-de-una-organizaci%C3%B3n-a-otra-gu%C3%ADa-paso-a-paso/">Clonar un Repositorio de GitHub de una organización a otra: Guía Paso a Paso</a></h2>
<h3 id="resumen"><a class="toclink" href="2025/11/16/clonar-un-repositorio-de-github-de-una-organizaci%C3%B3n-a-otra-gu%C3%ADa-paso-a-paso/#resumen">Resumen</a></h3>
<p>Clonar un repositorio de GitHub entre organizaciones es útil cuando no puedes (o no te conviene) transferir el ownership. Con el enfoque correcto, duplicas todo el historial, ramas y tags en un repo nuevo sin romper nada en el origen.</p>
<h3 id="cuando-clonar-y-no-transferir"><a class="toclink" href="2025/11/16/clonar-un-repositorio-de-github-de-una-organizaci%C3%B3n-a-otra-gu%C3%ADa-paso-a-paso/#cuando-clonar-y-no-transferir">¿Cuándo clonar y no transferir?</a></h3>
<ul>
<li>Transferir no es posible por políticas de la organización o compliance.</li>
<li>Necesitas mantener el repo original activo (p. ej., hard fork interno).</li>
<li>Quieres validar/limitar qué migra (código e historial sí; issues/PRs no).</li>
</ul>
<h3 id="requisitos"><a class="toclink" href="2025/11/16/clonar-un-repositorio-de-github-de-una-organizaci%C3%B3n-a-otra-gu%C3%ADa-paso-a-paso/#requisitos">Requisitos</a></h3>
<ul>
<li>Permisos de lectura en el repo origen y de escritura en el repo destino.</li>
<li>Repo destino creado y vacío en la organización de destino.</li>
<li>Autenticación configurada:</li>
<li>SSH: tener clave cargada en GitHub.</li>
<li>HTTPS: usar PAT con permisos <code>repo</code> para push.</li>
<li>Opcional: <code>gh</code> CLI para crear el repo destino desde terminal.</li>
</ul>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p><code>git push --mirror</code> sobrescribe refs del remoto destino. Úsalo solo hacia un repo nuevo/vacío o cuando estés seguro de querer reemplazarlo por completo.</p>
</div>
<h3 id="pasos-ssh-opcion-rapida"><a class="toclink" href="2025/11/16/clonar-un-repositorio-de-github-de-una-organizaci%C3%B3n-a-otra-gu%C3%ADa-paso-a-paso/#pasos-ssh-opcion-rapida">Pasos (SSH) — Opción rápida</a></h3>
<p>Este flujo parte de un repo público origen y un repo vacío destino. Define primero las variables y luego ejecuta los comandos.</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-0-1"><a href="#__codelineno-0-1" id="__codelineno-0-1" name="__codelineno-0-1"></a><span class="c1"># Variables</span>
</span><span id="__span-0-2"><a href="#__codelineno-0-2" id="__codelineno-0-2" name="__codelineno-0-2"></a><span class="nv">ORG_SOURCE</span><span class="o">=</span><span class="s2">"source-org"</span>
</span><span id="__span-0-3"><a href="#__codelineno-0-3" id="__codelineno-0-3" name="__codelineno-0-3"></a><span class="nv">ORG_DEST</span><span class="o">=</span><span class="s2">"dest-org"</span>
</span><span id="__span-0-4"><a href="#__codelineno-0-4" id="__codelineno-0-4" name="__codelineno-0-4"></a><span class="nv">REPO_NAME</span><span class="o">=</span><span class="s2">"my-repo"</span>
</span><span id="__span-0-5"><a href="#__codelineno-0-5" id="__codelineno-0-5" name="__codelineno-0-5"></a>
</span><span id="__span-0-6"><a href="#__codelineno-0-6" id="__codelineno-0-6" name="__codelineno-0-6"></a>git<span class="w"> </span>clone<span class="w"> </span>git@github.com:<span class="nv">$ORG_SOURCE</span>/<span class="nv">$REPO_NAME</span>
</span><span id="__span-0-7"><a href="#__codelineno-0-7" id="__codelineno-0-7" name="__codelineno-0-7"></a><span class="nb">cd</span><span class="w"> </span><span class="nv">$REPO_NAME</span>
</span><span id="__span-0-8"><a href="#__codelineno-0-8" id="__codelineno-0-8" name="__codelineno-0-8"></a>git<span class="w"> </span>remote<span class="w"> </span>rename<span class="w"> </span>origin<span class="w"> </span><span class="nb">source</span>
</span><span id="__span-0-9"><a href="#__codelineno-0-9" id="__codelineno-0-9" name="__codelineno-0-9"></a>git<span class="w"> </span>remote<span class="w"> </span>add<span class="w"> </span>origin<span class="w"> </span>git@github.com:<span class="nv">$ORG_DEST</span>/<span class="nv">$REPO_NAME</span>
</span><span id="__span-0-10"><a href="#__codelineno-0-10" id="__codelineno-0-10" name="__codelineno-0-10"></a>git<span class="w"> </span>push<span class="w"> </span>--mirror<span class="w"> </span>origin
</span><span id="__span-0-11"><a href="#__codelineno-0-11" id="__codelineno-0-11" name="__codelineno-0-11"></a>git<span class="w"> </span>remote<span class="w"> </span>remove<span class="w"> </span><span class="nb">source</span>
</span></code></pre></div>
<h3 id="pasos-https-alternativa-con-pat"><a class="toclink" href="2025/11/16/clonar-un-repositorio-de-github-de-una-organizaci%C3%B3n-a-otra-gu%C3%ADa-paso-a-paso/#pasos-https-alternativa-con-pat">Pasos (HTTPS) — Alternativa con PAT</a></h3>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-1-1"><a href="#__codelineno-1-1" id="__codelineno-1-1" name="__codelineno-1-1"></a><span class="c1"># Variables</span>
</span><span id="__span-1-2"><a href="#__codelineno-1-2" id="__codelineno-1-2" name="__codelineno-1-2"></a><span class="nv">ORG_SOURCE</span><span class="o">=</span><span class="s2">"source-org"</span>
</span><span id="__span-1-3"><a href="#__codelineno-1-3" id="__codelineno-1-3" name="__codelineno-1-3"></a><span class="nv">ORG_DEST</span><span class="o">=</span><span class="s2">"dest-org"</span>
</span><span id="__span-1-4"><a href="#__codelineno-1-4" id="__codelineno-1-4" name="__codelineno-1-4"></a><span class="nv">REPO_NAME</span><span class="o">=</span><span class="s2">"my-repo"</span>
</span><span id="__span-1-5"><a href="#__codelineno-1-5" id="__codelineno-1-5" name="__codelineno-1-5"></a>
</span><span id="__span-1-6"><a href="#__codelineno-1-6" id="__codelineno-1-6" name="__codelineno-1-6"></a>git<span class="w"> </span>clone<span class="w"> </span>https://github.com/<span class="nv">$ORG_SOURCE</span>/<span class="nv">$REPO_NAME</span>.git
</span><span id="__span-1-7"><a href="#__codelineno-1-7" id="__codelineno-1-7" name="__codelineno-1-7"></a><span class="nb">cd</span><span class="w"> </span><span class="nv">$REPO_NAME</span>
</span><span id="__span-1-8"><a href="#__codelineno-1-8" id="__codelineno-1-8" name="__codelineno-1-8"></a>git<span class="w"> </span>remote<span class="w"> </span>rename<span class="w"> </span>origin<span class="w"> </span><span class="nb">source</span>
</span><span id="__span-1-9"><a href="#__codelineno-1-9" id="__codelineno-1-9" name="__codelineno-1-9"></a>git<span class="w"> </span>remote<span class="w"> </span>add<span class="w"> </span>origin<span class="w"> </span>https://github.com/<span class="nv">$ORG_DEST</span>/<span class="nv">$REPO_NAME</span>.git
</span><span id="__span-1-10"><a href="#__codelineno-1-10" id="__codelineno-1-10" name="__codelineno-1-10"></a>git<span class="w"> </span>push<span class="w"> </span>--mirror<span class="w"> </span>origin
</span><span id="__span-1-11"><a href="#__codelineno-1-11" id="__codelineno-1-11" name="__codelineno-1-11"></a>git<span class="w"> </span>remote<span class="w"> </span>remove<span class="w"> </span><span class="nb">source</span>
</span></code></pre></div>
<p>Al hacer push, Git solicitará usuario/token del PAT con permisos <code>repo</code>.</p>
<h3 id="opcion-recomendada-mirror-real-bare-clone"><a class="toclink" href="2025/11/16/clonar-un-repositorio-de-github-de-una-organizaci%C3%B3n-a-otra-gu%C3%ADa-paso-a-paso/#opcion-recomendada-mirror-real-bare-clone">Opción recomendada (mirror real) — Bare clone</a></h3>
<p>Para evitar empujar refs de seguimiento remotas innecesarias, puedes usar un espejo bare. Es el patrón que recomienda GitHub para duplicar repos.</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-2-1"><a href="#__codelineno-2-1" id="__codelineno-2-1" name="__codelineno-2-1"></a><span class="c1"># Variables</span>
</span><span id="__span-2-2"><a href="#__codelineno-2-2" id="__codelineno-2-2" name="__codelineno-2-2"></a><span class="nv">ORG_SOURCE</span><span class="o">=</span><span class="s2">"source-org"</span>
</span><span id="__span-2-3"><a href="#__codelineno-2-3" id="__codelineno-2-3" name="__codelineno-2-3"></a><span class="nv">ORG_DEST</span><span class="o">=</span><span class="s2">"dest-org"</span>
</span><span id="__span-2-4"><a href="#__codelineno-2-4" id="__codelineno-2-4" name="__codelineno-2-4"></a><span class="nv">REPO_NAME</span><span class="o">=</span><span class="s2">"my-repo"</span>
</span><span id="__span-2-5"><a href="#__codelineno-2-5" id="__codelineno-2-5" name="__codelineno-2-5"></a>
</span><span id="__span-2-6"><a href="#__codelineno-2-6" id="__codelineno-2-6" name="__codelineno-2-6"></a><span class="c1"># 1) Crear un mirror local (bare)</span>
</span><span id="__span-2-7"><a href="#__codelineno-2-7" id="__codelineno-2-7" name="__codelineno-2-7"></a>git<span class="w"> </span>clone<span class="w"> </span>--mirror<span class="w"> </span>git@github.com:<span class="nv">$ORG_SOURCE</span>/<span class="nv">$REPO_NAME</span>
</span><span id="__span-2-8"><a href="#__codelineno-2-8" id="__codelineno-2-8" name="__codelineno-2-8"></a>
</span><span id="__span-2-9"><a href="#__codelineno-2-9" id="__codelineno-2-9" name="__codelineno-2-9"></a><span class="nb">cd</span><span class="w"> </span><span class="nv">$REPO_NAME</span>.git
</span><span id="__span-2-10"><a href="#__codelineno-2-10" id="__codelineno-2-10" name="__codelineno-2-10"></a>
</span><span id="__span-2-11"><a href="#__codelineno-2-11" id="__codelineno-2-11" name="__codelineno-2-11"></a><span class="c1"># 2) Añadir el remoto destino (repo vacío)</span>
</span><span id="__span-2-12"><a href="#__codelineno-2-12" id="__codelineno-2-12" name="__codelineno-2-12"></a>git<span class="w"> </span>remote<span class="w"> </span>add<span class="w"> </span>mirror<span class="w"> </span>git@github.com:<span class="nv">$ORG_DEST</span>/<span class="nv">$REPO_NAME</span>
</span><span id="__span-2-13"><a href="#__codelineno-2-13" id="__codelineno-2-13" name="__codelineno-2-13"></a>
</span><span id="__span-2-14"><a href="#__codelineno-2-14" id="__codelineno-2-14" name="__codelineno-2-14"></a><span class="c1"># 3) Empujar todas las refs (branches, tags, notes)</span>
</span><span id="__span-2-15"><a href="#__codelineno-2-15" id="__codelineno-2-15" name="__codelineno-2-15"></a>git<span class="w"> </span>push<span class="w"> </span>--mirror<span class="w"> </span>mirror
</span></code></pre></div>
<h3 id="crear-el-repo-destino-rapido-con-gh-cli"><a class="toclink" href="2025/11/16/clonar-un-repositorio-de-github-de-una-organizaci%C3%B3n-a-otra-gu%C3%ADa-paso-a-paso/#crear-el-repo-destino-rapido-con-gh-cli">Crear el repo destino (rápido con gh CLI)</a></h3>
<p>Si aún no existe el repo en la organización destino:</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-3-1"><a href="#__codelineno-3-1" id="__codelineno-3-1" name="__codelineno-3-1"></a><span class="c1"># Autentícate si es necesario</span>
</span><span id="__span-3-2"><a href="#__codelineno-3-2" id="__codelineno-3-2" name="__codelineno-3-2"></a>gh<span class="w"> </span>auth<span class="w"> </span>login
</span><span id="__span-3-3"><a href="#__codelineno-3-3" id="__codelineno-3-3" name="__codelineno-3-3"></a>
</span><span id="__span-3-4"><a href="#__codelineno-3-4" id="__codelineno-3-4" name="__codelineno-3-4"></a><span class="c1"># Variables</span>
</span><span id="__span-3-5"><a href="#__codelineno-3-5" id="__codelineno-3-5" name="__codelineno-3-5"></a><span class="nv">ORG_DEST</span><span class="o">=</span><span class="s2">"dest-org"</span>
</span><span id="__span-3-6"><a href="#__codelineno-3-6" id="__codelineno-3-6" name="__codelineno-3-6"></a><span class="nv">REPO_NAME</span><span class="o">=</span><span class="s2">"my-repo"</span>
</span><span id="__span-3-7"><a href="#__codelineno-3-7" id="__codelineno-3-7" name="__codelineno-3-7"></a>
</span><span id="__span-3-8"><a href="#__codelineno-3-8" id="__codelineno-3-8" name="__codelineno-3-8"></a><span class="c1"># Crea el repo vacío en la organización de destino</span>
</span><span id="__span-3-9"><a href="#__codelineno-3-9" id="__codelineno-3-9" name="__codelineno-3-9"></a>gh<span class="w"> </span>repo<span class="w"> </span>create<span class="w"> </span><span class="s2">"</span><span class="nv">$ORG_DEST</span><span class="s2">/</span><span class="nv">$REPO_NAME</span><span class="s2">"</span><span class="w"> </span>--private<span class="w"> </span>--confirm
</span></code></pre></div>
<h3 id="validaciones-rapidas"><a class="toclink" href="2025/11/16/clonar-un-repositorio-de-github-de-una-organizaci%C3%B3n-a-otra-gu%C3%ADa-paso-a-paso/#validaciones-rapidas">Validaciones rápidas</a></h3>
<ul>
<li>Verifica ramas y tags en el remoto destino:</li>
</ul>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-4-1"><a href="#__codelineno-4-1" id="__codelineno-4-1" name="__codelineno-4-1"></a>git<span class="w"> </span>ls-remote<span class="w"> </span>--heads<span class="w"> </span>origin
</span><span id="__span-4-2"><a href="#__codelineno-4-2" id="__codelineno-4-2" name="__codelineno-4-2"></a>git<span class="w"> </span>ls-remote<span class="w"> </span>--tags<span class="w"> </span>origin
</span></code></pre></div>
<ul>
<li>Abre el repo destino en GitHub y comprueba default branch, tags y commits.</li>
</ul>
<h3 id="que-no-migra-con-este-metodo"><a class="toclink" href="2025/11/16/clonar-un-repositorio-de-github-de-una-organizaci%C3%B3n-a-otra-gu%C3%ADa-paso-a-paso/#que-no-migra-con-este-metodo">Qué NO migra con este método</a></h3>
<ul>
<li>Issues, PRs, Discussions, Projects, Releases, Wikis y Secrets.</li>
<li>Para migrarlos, usa herramientas específicas (GitHub API/gh extensions) o realiza export/import manual según el caso.</li>
</ul>
<h3 id="limpieza-y-siguientes-pasos"><a class="toclink" href="2025/11/16/clonar-un-repositorio-de-github-de-una-organizaci%C3%B3n-a-otra-gu%C3%ADa-paso-a-paso/#limpieza-y-siguientes-pasos">Limpieza y siguientes pasos</a></h3>
<ul>
<li>Configura reglas de protección de rama en el repo destino.</li>
<li>Revisa y recrea Secrets, variables de entorno y Webhooks.</li>
<li>Actualiza pipelines (CI/CD) y badges que apunten al repo nuevo.</li>
<li>Considera archivar el repo origen si ya no se pretende usar.</li>
</ul>
<h3 id="buenas-practicas"><a class="toclink" href="2025/11/16/clonar-un-repositorio-de-github-de-una-organizaci%C3%B3n-a-otra-gu%C3%ADa-paso-a-paso/#buenas-practicas">Buenas prácticas</a></h3>
<ul>
<li>Usa SSH para entornos corporativos; HTTPS+PAT para automatizaciones.</li>
<li>Documenta la operación (fecha, responsables, commit de verificación).</li>
<li>Repite el proceso en un repo de prueba antes de hacerlo en producción.</li>
<li>Si el repo usa Git LFS, verifica que los objetos LFS estén correctamente en el destino.</li>
</ul>
<h3 id="referencias"><a class="toclink" href="2025/11/16/clonar-un-repositorio-de-github-de-una-organizaci%C3%B3n-a-otra-gu%C3%ADa-paso-a-paso/#referencias">Referencias</a></h3>
<ul>
<li>Duplicar un repositorio: https://docs.github.com/en/repositories/creating-and-managing-repositories/duplicating-a-repository</li>
<li>Transferir un repositorio: https://docs.github.com/en/repositories/creating-and-managing-repositories/transferring-a-repository</li>
<li>Autenticación SSH en GitHub: https://docs.github.com/en/authentication/connecting-to-github-with-ssh</li>
<li>gh CLI (<code>gh repo create</code>): https://cli.github.com/manual/gh_repo_create</li>
</ul>
</div>
</article>
<article class="md-post md-post--excerpt">
<header class="md-post__header">
<nav class="md-post__authors md-typeset">
<span class="md-author">
<img alt="Rafael Fernández" src="https://avatars.githubusercontent.com/u/39990341">
</span>
</nav>
<div class="md-post__meta md-meta">
<ul class="md-meta__list">
<li class="md-meta__item">
<time datetime="2025-11-11 00:00:00+00:00">November 11, 2025</time></li>
<li class="md-meta__item">
            in
            
              <a class="md-meta__link" href="category/azure-services/">Azure Services</a></li>
<li class="md-meta__item">
            
              9 min read
            
          </li>
</ul>
</div>
</header>
<div class="md-post__content md-typeset">
<h2 id="azure-storage-priority-replication-replicacion-acelerada-con-sla"><a class="toclink" href="2025/11/11/azure-storage-priority-replication-replicaci%C3%B3n-acelerada-con-sla/">Azure Storage Priority Replication: Replicación acelerada con SLA</a></h2>
<h3 id="resumen"><a class="toclink" href="2025/11/11/azure-storage-priority-replication-replicaci%C3%B3n-acelerada-con-sla/#resumen">Resumen</a></h3>
<p>Priority Replication acelera la replicación de datos en Azure Storage con SLA de 15 minutos para cumplir requisitos estrictos de RPO (Recovery Point Objective). Disponible para geo-redundancia (GRS/GZRS) y Object Replication entre cuentas.</p>
<h3 id="que-es-priority-replication"><a class="toclink" href="2025/11/11/azure-storage-priority-replication-replicaci%C3%B3n-acelerada-con-sla/#que-es-priority-replication">¿Qué es Priority Replication?</a></h3>
<p>Priority Replication es una capacidad de Azure Storage que <strong>prioriza el tráfico de replicación</strong> y proporciona <strong>garantías SLA</strong> para sincronización de datos entre regiones. Diseñada para escenarios donde el tiempo de replicación es crítico para cumplimiento y continuidad de negocio.</p>
<p><strong>Dos variantes disponibles</strong>:</p>
<ol>
<li><strong>Geo Priority Replication</strong>: Para cuentas con GRS/GZRS (redundancia entre regiones)</li>
<li><strong>Object Replication Priority</strong>: Para políticas de Object Replication entre cuentas</li>
</ol>
<p><strong>SLA clave</strong>: 99.0% del mes de facturación con Last Sync Time (LST) ≤ 15 minutos</p>
<h3 id="geo-priority-replication"><a class="toclink" href="2025/11/11/azure-storage-priority-replication-replicaci%C3%B3n-acelerada-con-sla/#geo-priority-replication">Geo Priority Replication</a></h3>
<p>Acelera la replicación entre región primaria y secundaria para cuentas con GRS (Geo-Redundant Storage) o GZRS (Geo-Zone-Redundant Storage).</p>
<h4 id="disponibilidad-y-limitaciones"><a class="toclink" href="2025/11/11/azure-storage-priority-replication-replicaci%C3%B3n-acelerada-con-sla/#disponibilidad-y-limitaciones">Disponibilidad y limitaciones</a></h4>
<p><strong>Regiones soportadas</strong>: Todas las regiones públicas con GRS/GZRS <strong>excepto</strong>:</p>
<ul>
<li>West India</li>
<li>Switzerland West</li>
</ul>
<p><strong>Requisitos para GZRS</strong>:</p>
<ul>
<li>Región debe soportar Availability Zones</li>
<li>Región debe tener paired region</li>
</ul>
<h4 id="beneficios-principales"><a class="toclink" href="2025/11/11/azure-storage-priority-replication-replicaci%C3%B3n-acelerada-con-sla/#beneficios-principales">Beneficios principales</a></h4>
<ol>
<li><strong>RPO garantizado</strong>: Confianza en tiempo de sincronización para cumplimiento</li>
<li><strong>Failover sin sorpresas</strong>: LST predecible si ocurre failover no planificado</li>
<li><strong>Monitoreo mejorado</strong>: Telemetría detallada vía Azure Monitor</li>
<li><strong>SLA respaldado</strong>: Garantía de 99.0% del mes con lag ≤ 15 minutos</li>
</ol>
<h4 id="exclusiones-del-sla"><a class="toclink" href="2025/11/11/azure-storage-priority-replication-replicaci%C3%B3n-acelerada-con-sla/#exclusiones-del-sla">Exclusiones del SLA</a></h4>
<p>El SLA <strong>NO aplica</strong> en estos casos:</p>
<p><strong>Por tipo de blob</strong>:</p>
<ul>
<li>Page blobs y append blobs (SLA solo para Block Blobs)</li>
<li>Cuentas con llamadas API de Page/Append Blob en últimos 30 días</li>
<li>Cuentas con features que crean estos blobs (Change Feed, Object Replication, logs en Azure Monitor)</li>
</ul>
<p><strong>Por condición de cuenta</strong>:</p>
<ul>
<li>LST &gt; 15 minutos durante habilitación de la feature</li>
<li>Transfer rate &gt; 1 Gbps con backlog pendiente</li>
<li>
<blockquote>
<p>100 CopyBlob requests/segundo con backlog pendiente</p>
</blockquote>
</li>
</ul>
<p><strong>Por eventos operacionales</strong>:</p>
<ul>
<li>Unplanned failover (desactiva automáticamente la feature)</li>
<li>Durante conversión GRS ↔ GZRS (no afecta si se mantiene dentro de guardrails)</li>
</ul>
<h4 id="habilitar-geo-priority-replication"><a class="toclink" href="2025/11/11/azure-storage-priority-replication-replicaci%C3%B3n-acelerada-con-sla/#habilitar-geo-priority-replication">Habilitar Geo Priority Replication</a></h4>
<h5 id="durante-creacion-de-cuenta-nueva"><a class="toclink" href="2025/11/11/azure-storage-priority-replication-replicaci%C3%B3n-acelerada-con-sla/#durante-creacion-de-cuenta-nueva">Durante creación de cuenta nueva</a></h5>
<p><strong>Azure CLI</strong>:</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-0-1"><a href="#__codelineno-0-1" id="__codelineno-0-1" name="__codelineno-0-1"></a><span class="c1"># Variables</span>
</span><span id="__span-0-2"><a href="#__codelineno-0-2" id="__codelineno-0-2" name="__codelineno-0-2"></a><span class="nv">RESOURCE_GROUP</span><span class="o">=</span><span class="s2">"rg-storage-prod"</span>
</span><span id="__span-0-3"><a href="#__codelineno-0-3" id="__codelineno-0-3" name="__codelineno-0-3"></a><span class="nv">STORAGE_ACCOUNT</span><span class="o">=</span><span class="s2">"stgeopriorityprod"</span>
</span><span id="__span-0-4"><a href="#__codelineno-0-4" id="__codelineno-0-4" name="__codelineno-0-4"></a><span class="nv">LOCATION</span><span class="o">=</span><span class="s2">"westeurope"</span>
</span><span id="__span-0-5"><a href="#__codelineno-0-5" id="__codelineno-0-5" name="__codelineno-0-5"></a>
</span><span id="__span-0-6"><a href="#__codelineno-0-6" id="__codelineno-0-6" name="__codelineno-0-6"></a><span class="c1"># Crear cuenta con Geo Priority Replication</span>
</span><span id="__span-0-7"><a href="#__codelineno-0-7" id="__codelineno-0-7" name="__codelineno-0-7"></a>az<span class="w"> </span>storage<span class="w"> </span>account<span class="w"> </span>create<span class="w"> </span><span class="se">\</span>
</span><span id="__span-0-8"><a href="#__codelineno-0-8" id="__codelineno-0-8" name="__codelineno-0-8"></a><span class="w">  </span>--name<span class="w"> </span><span class="nv">$STORAGE_ACCOUNT</span><span class="w"> </span><span class="se">\</span>
</span><span id="__span-0-9"><a href="#__codelineno-0-9" id="__codelineno-0-9" name="__codelineno-0-9"></a><span class="w">  </span>--resource-group<span class="w"> </span><span class="nv">$RESOURCE_GROUP</span><span class="w"> </span><span class="se">\</span>
</span><span id="__span-0-10"><a href="#__codelineno-0-10" id="__codelineno-0-10" name="__codelineno-0-10"></a><span class="w">  </span>--location<span class="w"> </span><span class="nv">$LOCATION</span><span class="w"> </span><span class="se">\</span>
</span><span id="__span-0-11"><a href="#__codelineno-0-11" id="__codelineno-0-11" name="__codelineno-0-11"></a><span class="w">  </span>--sku<span class="w"> </span>Standard_GRS<span class="w"> </span><span class="se">\</span>
</span><span id="__span-0-12"><a href="#__codelineno-0-12" id="__codelineno-0-12" name="__codelineno-0-12"></a><span class="w">  </span>--enable-blob-geo-priority-replication<span class="w"> </span><span class="nb">true</span>
</span></code></pre></div>
<p><strong>Azure PowerShell</strong>:</p>
<div class="language-powershell highlight"><pre><span></span><code><span id="__span-1-1"><a href="#__codelineno-1-1" id="__codelineno-1-1" name="__codelineno-1-1"></a><span class="c"># Variables</span>
</span><span id="__span-1-2"><a href="#__codelineno-1-2" id="__codelineno-1-2" name="__codelineno-1-2"></a><span class="nv">$rgName</span> <span class="p">=</span> <span class="s2">"rg-storage-prod"</span>
</span><span id="__span-1-3"><a href="#__codelineno-1-3" id="__codelineno-1-3" name="__codelineno-1-3"></a><span class="nv">$storageAccountName</span> <span class="p">=</span> <span class="s2">"stgeopriorityprod"</span>
</span><span id="__span-1-4"><a href="#__codelineno-1-4" id="__codelineno-1-4" name="__codelineno-1-4"></a><span class="nv">$location</span> <span class="p">=</span> <span class="s2">"westeurope"</span>
</span><span id="__span-1-5"><a href="#__codelineno-1-5" id="__codelineno-1-5" name="__codelineno-1-5"></a>
</span><span id="__span-1-6"><a href="#__codelineno-1-6" id="__codelineno-1-6" name="__codelineno-1-6"></a><span class="c"># Crear cuenta con Geo Priority Replication</span>
</span><span id="__span-1-7"><a href="#__codelineno-1-7" id="__codelineno-1-7" name="__codelineno-1-7"></a><span class="nv">$account</span> <span class="p">=</span> <span class="nb">New-AzStorageAccount</span> <span class="p">`</span>
</span><span id="__span-1-8"><a href="#__codelineno-1-8" id="__codelineno-1-8" name="__codelineno-1-8"></a>  <span class="n">-ResourceGroupName</span> <span class="nv">$rgName</span> <span class="p">`</span>
</span><span id="__span-1-9"><a href="#__codelineno-1-9" id="__codelineno-1-9" name="__codelineno-1-9"></a>  <span class="n">-StorageAccountName</span> <span class="nv">$storageAccountName</span> <span class="p">`</span>
</span><span id="__span-1-10"><a href="#__codelineno-1-10" id="__codelineno-1-10" name="__codelineno-1-10"></a>  <span class="n">-SkuName</span> <span class="n">Standard_GRS</span> <span class="p">`</span>
</span><span id="__span-1-11"><a href="#__codelineno-1-11" id="__codelineno-1-11" name="__codelineno-1-11"></a>  <span class="n">-Location</span> <span class="nv">$location</span> <span class="p">`</span>
</span><span id="__span-1-12"><a href="#__codelineno-1-12" id="__codelineno-1-12" name="__codelineno-1-12"></a>  <span class="n">-EnableBlobGeoPriorityReplication</span> <span class="nv">$true</span>
</span></code></pre></div>
<h5 id="en-cuentas-existentes"><a class="toclink" href="2025/11/11/azure-storage-priority-replication-replicaci%C3%B3n-acelerada-con-sla/#en-cuentas-existentes">En cuentas existentes</a></h5>
<p><strong>Habilitar</strong>:</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-2-1"><a href="#__codelineno-2-1" id="__codelineno-2-1" name="__codelineno-2-1"></a><span class="c1"># Azure CLI</span>
</span><span id="__span-2-2"><a href="#__codelineno-2-2" id="__codelineno-2-2" name="__codelineno-2-2"></a>az<span class="w"> </span>storage<span class="w"> </span>account<span class="w"> </span>update<span class="w"> </span><span class="se">\</span>
</span><span id="__span-2-3"><a href="#__codelineno-2-3" id="__codelineno-2-3" name="__codelineno-2-3"></a><span class="w">  </span>--name<span class="w"> </span><span class="nv">$STORAGE_ACCOUNT</span><span class="w"> </span><span class="se">\</span>
</span><span id="__span-2-4"><a href="#__codelineno-2-4" id="__codelineno-2-4" name="__codelineno-2-4"></a><span class="w">  </span>--resource-group<span class="w"> </span><span class="nv">$RESOURCE_GROUP</span><span class="w"> </span><span class="se">\</span>
</span><span id="__span-2-5"><a href="#__codelineno-2-5" id="__codelineno-2-5" name="__codelineno-2-5"></a><span class="w">  </span>--enable-blob-geo-priority-replication<span class="w"> </span><span class="nb">true</span>
</span></code></pre></div>
<div class="language-powershell highlight"><pre><span></span><code><span id="__span-3-1"><a href="#__codelineno-3-1" id="__codelineno-3-1" name="__codelineno-3-1"></a><span class="c"># PowerShell</span>
</span><span id="__span-3-2"><a href="#__codelineno-3-2" id="__codelineno-3-2" name="__codelineno-3-2"></a><span class="nb">Set-AzStorageAccount</span> <span class="p">`</span>
</span><span id="__span-3-3"><a href="#__codelineno-3-3" id="__codelineno-3-3" name="__codelineno-3-3"></a>  <span class="n">-ResourceGroupName</span> <span class="nv">$rgName</span> <span class="p">`</span>
</span><span id="__span-3-4"><a href="#__codelineno-3-4" id="__codelineno-3-4" name="__codelineno-3-4"></a>  <span class="n">-StorageAccountName</span> <span class="nv">$storageAccountName</span> <span class="p">`</span>
</span><span id="__span-3-5"><a href="#__codelineno-3-5" id="__codelineno-3-5" name="__codelineno-3-5"></a>  <span class="n">-EnableBlobGeoPriorityReplication</span> <span class="nv">$true</span>
</span></code></pre></div>
<p><strong>Deshabilitar</strong>:</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-4-1"><a href="#__codelineno-4-1" id="__codelineno-4-1" name="__codelineno-4-1"></a><span class="c1"># Azure CLI</span>
</span><span id="__span-4-2"><a href="#__codelineno-4-2" id="__codelineno-4-2" name="__codelineno-4-2"></a>az<span class="w"> </span>storage<span class="w"> </span>account<span class="w"> </span>update<span class="w"> </span><span class="se">\</span>
</span><span id="__span-4-3"><a href="#__codelineno-4-3" id="__codelineno-4-3" name="__codelineno-4-3"></a><span class="w">  </span>--name<span class="w"> </span><span class="nv">$STORAGE_ACCOUNT</span><span class="w"> </span><span class="se">\</span>
</span><span id="__span-4-4"><a href="#__codelineno-4-4" id="__codelineno-4-4" name="__codelineno-4-4"></a><span class="w">  </span>--resource-group<span class="w"> </span><span class="nv">$RESOURCE_GROUP</span><span class="w"> </span><span class="se">\</span>
</span><span id="__span-4-5"><a href="#__codelineno-4-5" id="__codelineno-4-5" name="__codelineno-4-5"></a><span class="w">  </span>--enable-blob-geo-priority-replication<span class="w"> </span><span class="nb">false</span>
</span></code></pre></div>
<div class="language-powershell highlight"><pre><span></span><code><span id="__span-5-1"><a href="#__codelineno-5-1" id="__codelineno-5-1" name="__codelineno-5-1"></a><span class="c"># PowerShell</span>
</span><span id="__span-5-2"><a href="#__codelineno-5-2" id="__codelineno-5-2" name="__codelineno-5-2"></a><span class="nb">Set-AzStorageAccount</span> <span class="p">`</span>
</span><span id="__span-5-3"><a href="#__codelineno-5-3" id="__codelineno-5-3" name="__codelineno-5-3"></a>  <span class="n">-ResourceGroupName</span> <span class="nv">$rgName</span> <span class="p">`</span>
</span><span id="__span-5-4"><a href="#__codelineno-5-4" id="__codelineno-5-4" name="__codelineno-5-4"></a>  <span class="n">-StorageAccountName</span> <span class="nv">$storageAccountName</span> <span class="p">`</span>
</span><span id="__span-5-5"><a href="#__codelineno-5-5" id="__codelineno-5-5" name="__codelineno-5-5"></a>  <span class="n">-EnableBlobGeoPriorityReplication</span> <span class="nv">$false</span>
</span></code></pre></div>
<h4 id="monitorear-cumplimiento-con-geo-blob-lag"><a class="toclink" href="2025/11/11/azure-storage-priority-replication-replicaci%C3%B3n-acelerada-con-sla/#monitorear-cumplimiento-con-geo-blob-lag">Monitorear cumplimiento con Geo Blob Lag</a></h4>
<p><strong>Métrica nueva (Preview)</strong>: <code>Geo Blob Lag</code> - segundos desde última copia completa entre regiones.</p>
<p><strong>Habilitar preview</strong>:</p>
<ol>
<li>Azure Portal → Subscriptions → Preview features</li>
<li>Feature: <code>AllowGeoPriorityReplicationMetricsInPortal</code></li>
<li>Provider: <code>Microsoft.Storage</code></li>
</ol>
<p><strong>Acceder a métricas</strong>:</p>
<ul>
<li>Portal: Storage Account → <strong>Redundancy</strong> o <strong>Metrics</strong></li>
<li>Métrica: <strong>Geo Blob Lag metric (preview)</strong></li>
</ul>
<div class="admonition warning">
<p class="admonition-title">Tiempo de activación</p>
<p>Las métricas pueden tardar hasta <strong>24 horas</strong> en aparecer tras registrar la feature.</p>
</div>
<p><strong>Uso para validar SLA</strong>:</p>
<p>Monitorear que el lag se mantiene ≤ 15 minutos durante el 99% del mes. Si excede, ese período se excluye del SLA.</p>
<h3 id="object-replication-priority"><a class="toclink" href="2025/11/11/azure-storage-priority-replication-replicaci%C3%B3n-acelerada-con-sla/#object-replication-priority">Object Replication Priority</a></h3>
<p>Acelera la replicación entre cuentas de storage usando Object Replication policies. Garantiza que 99.0% de objetos se replican en <strong>≤ 15 minutos</strong> cuando origen y destino están en el <strong>mismo continente</strong>.</p>
<h4 id="disponibilidad"><a class="toclink" href="2025/11/11/azure-storage-priority-replication-replicaci%C3%B3n-acelerada-con-sla/#disponibilidad">Disponibilidad</a></h4>
<p><strong>Regiones soportadas</strong>: Todas las regiones públicas <strong>excepto</strong>:</p>
<ul>
<li>West India</li>
<li>Switzerland West</li>
</ul>
<p><strong>Portal experience</strong> (Preview):</p>
<ul>
<li>Feature: <code>AllowPriorityObjectReplicationInPortal</code></li>
<li>Provider: <code>Microsoft.Storage</code></li>
</ul>
<h4 id="beneficios-principales_1"><a class="toclink" href="2025/11/11/azure-storage-priority-replication-replicaci%C3%B3n-acelerada-con-sla/#beneficios-principales_1">Beneficios principales</a></h4>
<ol>
<li><strong>SLA de rendimiento</strong>: 99% de objetos en ≤ 15 minutos (mismo continente)</li>
<li><strong>Métricas automáticas</strong>: Activación automática de OR metrics</li>
<li><strong>Visibilidad mejorada</strong>: Time buckets (0-5 min, 5-10 min, &gt;24h)</li>
<li><strong>DR garantizado</strong>: Confianza en tiempos para disaster recovery</li>
</ol>
<h4 id="exclusiones-del-sla_1"><a class="toclink" href="2025/11/11/azure-storage-priority-replication-replicaci%C3%B3n-acelerada-con-sla/#exclusiones-del-sla_1">Exclusiones del SLA</a></h4>
<p>El SLA <strong>NO aplica</strong> a:</p>
<p><strong>Por características del objeto</strong>:</p>
<ul>
<li>Objetos &gt; 5 GB</li>
<li>Objetos modificados &gt; 10 veces/segundo</li>
</ul>
<p><strong>Por geografía</strong>:</p>
<ul>
<li>Origen y destino en continentes diferentes</li>
</ul>
<p><strong>Por tamaño de cuenta</strong>:</p>
<ul>
<li>Cuentas &gt; 5 PB</li>
<li>Cuentas con &gt; 10 mil millones de blobs</li>
</ul>
<p><strong>Por condiciones operativas</strong>:</p>
<ul>
<li>Transfer rate &gt; 1 Gbps con backlog pendiente</li>
<li>
<blockquote>
<p>1,000 PUT/DELETE ops/segundo con backlog pendiente</p>
</blockquote>
</li>
<li>Durante replicación de blobs existentes tras crear/actualizar policy</li>
</ul>
<div class="admonition note">
<p class="admonition-title">Limitación de políticas</p>
<p>Solo <strong>1 policy</strong> por cuenta origen puede tener Priority Replication habilitado (aunque la cuenta soporte hasta 2 policies).</p>
</div>
<h4 id="habilitar-object-replication-priority"><a class="toclink" href="2025/11/11/azure-storage-priority-replication-replicaci%C3%B3n-acelerada-con-sla/#habilitar-object-replication-priority">Habilitar Object Replication Priority</a></h4>
<h5 id="durante-creacion-de-nueva-policy"><a class="toclink" href="2025/11/11/azure-storage-priority-replication-replicaci%C3%B3n-acelerada-con-sla/#durante-creacion-de-nueva-policy">Durante creación de nueva policy</a></h5>
<p><strong>Azure CLI</strong>:</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-6-1"><a href="#__codelineno-6-1" id="__codelineno-6-1" name="__codelineno-6-1"></a><span class="c1"># Variables</span>
</span><span id="__span-6-2"><a href="#__codelineno-6-2" id="__codelineno-6-2" name="__codelineno-6-2"></a><span class="nv">SRC_ACCOUNT</span><span class="o">=</span><span class="s2">"stgsourceprod"</span>
</span><span id="__span-6-3"><a href="#__codelineno-6-3" id="__codelineno-6-3" name="__codelineno-6-3"></a><span class="nv">DST_ACCOUNT</span><span class="o">=</span><span class="s2">"stgdestinationdr"</span>
</span><span id="__span-6-4"><a href="#__codelineno-6-4" id="__codelineno-6-4" name="__codelineno-6-4"></a><span class="nv">SRC_CONTAINER</span><span class="o">=</span><span class="s2">"data"</span>
</span><span id="__span-6-5"><a href="#__codelineno-6-5" id="__codelineno-6-5" name="__codelineno-6-5"></a><span class="nv">DST_CONTAINER</span><span class="o">=</span><span class="s2">"data-replica"</span>
</span><span id="__span-6-6"><a href="#__codelineno-6-6" id="__codelineno-6-6" name="__codelineno-6-6"></a>
</span><span id="__span-6-7"><a href="#__codelineno-6-7" id="__codelineno-6-7" name="__codelineno-6-7"></a><span class="c1"># Crear policy con Priority Replication</span>
</span><span id="__span-6-8"><a href="#__codelineno-6-8" id="__codelineno-6-8" name="__codelineno-6-8"></a>az<span class="w"> </span>storage<span class="w"> </span>account<span class="w"> </span>or-policy<span class="w"> </span>create<span class="w"> </span><span class="se">\</span>
</span><span id="__span-6-9"><a href="#__codelineno-6-9" id="__codelineno-6-9" name="__codelineno-6-9"></a><span class="w">  </span>--account-name<span class="w"> </span><span class="nv">$DST_ACCOUNT</span><span class="w"> </span><span class="se">\</span>
</span><span id="__span-6-10"><a href="#__codelineno-6-10" id="__codelineno-6-10" name="__codelineno-6-10"></a><span class="w">  </span>--source-account<span class="w"> </span><span class="nv">$SRC_ACCOUNT</span><span class="w"> </span><span class="se">\</span>
</span><span id="__span-6-11"><a href="#__codelineno-6-11" id="__codelineno-6-11" name="__codelineno-6-11"></a><span class="w">  </span>--destination-container<span class="w"> </span><span class="nv">$DST_CONTAINER</span><span class="w"> </span><span class="se">\</span>
</span><span id="__span-6-12"><a href="#__codelineno-6-12" id="__codelineno-6-12" name="__codelineno-6-12"></a><span class="w">  </span>--source-container<span class="w"> </span><span class="nv">$SRC_CONTAINER</span><span class="w"> </span><span class="se">\</span>
</span><span id="__span-6-13"><a href="#__codelineno-6-13" id="__codelineno-6-13" name="__codelineno-6-13"></a><span class="w">  </span>--min-creation-time<span class="w"> </span><span class="s2">"2025-11-11T00:00:00Z"</span><span class="w"> </span><span class="se">\</span>
</span><span id="__span-6-14"><a href="#__codelineno-6-14" id="__codelineno-6-14" name="__codelineno-6-14"></a><span class="w">  </span>--enable-metrics<span class="w"> </span><span class="nb">true</span><span class="w"> </span><span class="se">\</span>
</span><span id="__span-6-15"><a href="#__codelineno-6-15" id="__codelineno-6-15" name="__codelineno-6-15"></a><span class="w">  </span>--priority-replication<span class="w"> </span><span class="nb">true</span>
</span></code></pre></div>
<p><strong>Azure PowerShell</strong>:</p>
<div class="language-powershell highlight"><pre><span></span><code><span id="__span-7-1"><a href="#__codelineno-7-1" id="__codelineno-7-1" name="__codelineno-7-1"></a><span class="c"># Variables</span>
</span><span id="__span-7-2"><a href="#__codelineno-7-2" id="__codelineno-7-2" name="__codelineno-7-2"></a><span class="nv">$rgName</span> <span class="p">=</span> <span class="s2">"rg-storage-prod"</span>
</span><span id="__span-7-3"><a href="#__codelineno-7-3" id="__codelineno-7-3" name="__codelineno-7-3"></a><span class="nv">$srcAccountName</span> <span class="p">=</span> <span class="s2">"stgsourceprod"</span>
</span><span id="__span-7-4"><a href="#__codelineno-7-4" id="__codelineno-7-4" name="__codelineno-7-4"></a><span class="nv">$dstAccountName</span> <span class="p">=</span> <span class="s2">"stgdestinationdr"</span>
</span><span id="__span-7-5"><a href="#__codelineno-7-5" id="__codelineno-7-5" name="__codelineno-7-5"></a><span class="nv">$srcAccountResourceID</span> <span class="p">=</span> <span class="s2">"/subscriptions/{sub-id}/resourceGroups/{rg}/providers/Microsoft.Storage/storageAccounts/$srcAccountName"</span>
</span><span id="__span-7-6"><a href="#__codelineno-7-6" id="__codelineno-7-6" name="__codelineno-7-6"></a><span class="nv">$srcContainer</span> <span class="p">=</span> <span class="s2">"data"</span>
</span><span id="__span-7-7"><a href="#__codelineno-7-7" id="__codelineno-7-7" name="__codelineno-7-7"></a><span class="nv">$dstContainer</span> <span class="p">=</span> <span class="s2">"data-replica"</span>
</span><span id="__span-7-8"><a href="#__codelineno-7-8" id="__codelineno-7-8" name="__codelineno-7-8"></a>
</span><span id="__span-7-9"><a href="#__codelineno-7-9" id="__codelineno-7-9" name="__codelineno-7-9"></a><span class="c"># Crear regla y policy con Priority Replication</span>
</span><span id="__span-7-10"><a href="#__codelineno-7-10" id="__codelineno-7-10" name="__codelineno-7-10"></a><span class="nv">$rule</span> <span class="p">=</span> <span class="nb">New-AzStorageObjectReplicationPolicyRule</span> <span class="p">`</span>
</span><span id="__span-7-11"><a href="#__codelineno-7-11" id="__codelineno-7-11" name="__codelineno-7-11"></a>  <span class="n">-SourceContainer</span> <span class="nv">$srcContainer</span> <span class="p">`</span>
</span><span id="__span-7-12"><a href="#__codelineno-7-12" id="__codelineno-7-12" name="__codelineno-7-12"></a>  <span class="n">-DestinationContainer</span> <span class="nv">$dstContainer</span>
</span><span id="__span-7-13"><a href="#__codelineno-7-13" id="__codelineno-7-13" name="__codelineno-7-13"></a>
</span><span id="__span-7-14"><a href="#__codelineno-7-14" id="__codelineno-7-14" name="__codelineno-7-14"></a><span class="nv">$dstPolicy</span> <span class="p">=</span> <span class="nb">Set-AzStorageObjectReplicationPolicy</span> <span class="p">`</span>
</span><span id="__span-7-15"><a href="#__codelineno-7-15" id="__codelineno-7-15" name="__codelineno-7-15"></a>  <span class="n">-ResourceGroupName</span> <span class="nv">$rgName</span> <span class="p">`</span>
</span><span id="__span-7-16"><a href="#__codelineno-7-16" id="__codelineno-7-16" name="__codelineno-7-16"></a>  <span class="n">-StorageAccountName</span> <span class="nv">$dstAccountName</span> <span class="p">`</span>
</span><span id="__span-7-17"><a href="#__codelineno-7-17" id="__codelineno-7-17" name="__codelineno-7-17"></a>  <span class="n">-PolicyId</span> <span class="k">default</span> <span class="p">`</span>
</span><span id="__span-7-18"><a href="#__codelineno-7-18" id="__codelineno-7-18" name="__codelineno-7-18"></a>  <span class="n">-SourceAccount</span> <span class="nv">$srcAccountResourceID</span> <span class="p">`</span>
</span><span id="__span-7-19"><a href="#__codelineno-7-19" id="__codelineno-7-19" name="__codelineno-7-19"></a>  <span class="n">-Rule</span> <span class="nv">$rule</span> <span class="p">`</span>
</span><span id="__span-7-20"><a href="#__codelineno-7-20" id="__codelineno-7-20" name="__codelineno-7-20"></a>  <span class="n">-EnableMetric</span> <span class="nv">$true</span> <span class="p">`</span>
</span><span id="__span-7-21"><a href="#__codelineno-7-21" id="__codelineno-7-21" name="__codelineno-7-21"></a>  <span class="n">-EnablePriorityReplication</span> <span class="nv">$true</span>
</span><span id="__span-7-22"><a href="#__codelineno-7-22" id="__codelineno-7-22" name="__codelineno-7-22"></a>
</span><span id="__span-7-23"><a href="#__codelineno-7-23" id="__codelineno-7-23" name="__codelineno-7-23"></a><span class="c"># Aplicar policy en cuenta origen</span>
</span><span id="__span-7-24"><a href="#__codelineno-7-24" id="__codelineno-7-24" name="__codelineno-7-24"></a><span class="nv">$srcPolicy</span> <span class="p">=</span> <span class="nb">Set-AzStorageObjectReplicationPolicy</span> <span class="p">`</span>
</span><span id="__span-7-25"><a href="#__codelineno-7-25" id="__codelineno-7-25" name="__codelineno-7-25"></a>  <span class="n">-ResourceGroupName</span> <span class="nv">$rgName</span> <span class="p">`</span>
</span><span id="__span-7-26"><a href="#__codelineno-7-26" id="__codelineno-7-26" name="__codelineno-7-26"></a>  <span class="n">-StorageAccountName</span> <span class="nv">$srcAccountName</span> <span class="p">`</span>
</span><span id="__span-7-27"><a href="#__codelineno-7-27" id="__codelineno-7-27" name="__codelineno-7-27"></a>  <span class="n">-InputObject</span> <span class="nv">$dstPolicy</span>
</span><span id="__span-7-28"><a href="#__codelineno-7-28" id="__codelineno-7-28" name="__codelineno-7-28"></a>
</span><span id="__span-7-29"><a href="#__codelineno-7-29" id="__codelineno-7-29" name="__codelineno-7-29"></a><span class="c"># Verificar habilitación</span>
</span><span id="__span-7-30"><a href="#__codelineno-7-30" id="__codelineno-7-30" name="__codelineno-7-30"></a><span class="nv">$srcPolicy</span><span class="p">.</span><span class="n">PriorityReplication</span><span class="p">.</span><span class="n">Enabled</span>
</span></code></pre></div>
<h5 id="en-policies-existentes"><a class="toclink" href="2025/11/11/azure-storage-priority-replication-replicaci%C3%B3n-acelerada-con-sla/#en-policies-existentes">En policies existentes</a></h5>
<p><strong>Habilitar</strong>:</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-8-1"><a href="#__codelineno-8-1" id="__codelineno-8-1" name="__codelineno-8-1"></a><span class="c1"># Azure CLI</span>
</span><span id="__span-8-2"><a href="#__codelineno-8-2" id="__codelineno-8-2" name="__codelineno-8-2"></a>az<span class="w"> </span>storage<span class="w"> </span>account<span class="w"> </span>or-policy<span class="w"> </span>update<span class="w"> </span><span class="se">\</span>
</span><span id="__span-8-3"><a href="#__codelineno-8-3" id="__codelineno-8-3" name="__codelineno-8-3"></a><span class="w">  </span>--account-name<span class="w"> </span><span class="nv">$DST_ACCOUNT</span><span class="w"> </span><span class="se">\</span>
</span><span id="__span-8-4"><a href="#__codelineno-8-4" id="__codelineno-8-4" name="__codelineno-8-4"></a><span class="w">  </span>--source-account<span class="w"> </span><span class="nv">$SRC_ACCOUNT</span><span class="w"> </span><span class="se">\</span>
</span><span id="__span-8-5"><a href="#__codelineno-8-5" id="__codelineno-8-5" name="__codelineno-8-5"></a><span class="w">  </span>--destination-container<span class="w"> </span><span class="nv">$DST_CONTAINER</span><span class="w"> </span><span class="se">\</span>
</span><span id="__span-8-6"><a href="#__codelineno-8-6" id="__codelineno-8-6" name="__codelineno-8-6"></a><span class="w">  </span>--source-container<span class="w"> </span><span class="nv">$SRC_CONTAINER</span><span class="w"> </span><span class="se">\</span>
</span><span id="__span-8-7"><a href="#__codelineno-8-7" id="__codelineno-8-7" name="__codelineno-8-7"></a><span class="w">  </span>--min-creation-time<span class="w"> </span><span class="s2">"2025-11-11T00:00:00Z"</span><span class="w"> </span><span class="se">\</span>
</span><span id="__span-8-8"><a href="#__codelineno-8-8" id="__codelineno-8-8" name="__codelineno-8-8"></a><span class="w">  </span>--enable-metrics<span class="w"> </span><span class="nb">true</span><span class="w"> </span><span class="se">\</span>
</span><span id="__span-8-9"><a href="#__codelineno-8-9" id="__codelineno-8-9" name="__codelineno-8-9"></a><span class="w">  </span>--priority-replication<span class="w"> </span><span class="nb">true</span>
</span></code></pre></div>
<div class="language-powershell highlight"><pre><span></span><code><span id="__span-9-1"><a href="#__codelineno-9-1" id="__codelineno-9-1" name="__codelineno-9-1"></a><span class="c"># PowerShell</span>
</span><span id="__span-9-2"><a href="#__codelineno-9-2" id="__codelineno-9-2" name="__codelineno-9-2"></a><span class="nv">$dstPolicy</span> <span class="p">=</span> <span class="nb">Set-AzStorageObjectReplicationPolicy</span> <span class="p">`</span>
</span><span id="__span-9-3"><a href="#__codelineno-9-3" id="__codelineno-9-3" name="__codelineno-9-3"></a>  <span class="n">-ResourceGroupName</span> <span class="nv">$rgName</span> <span class="p">`</span>
</span><span id="__span-9-4"><a href="#__codelineno-9-4" id="__codelineno-9-4" name="__codelineno-9-4"></a>  <span class="n">-StorageAccountName</span> <span class="nv">$dstAccountName</span> <span class="p">`</span>
</span><span id="__span-9-5"><a href="#__codelineno-9-5" id="__codelineno-9-5" name="__codelineno-9-5"></a>  <span class="n">-PolicyId</span> <span class="k">default</span> <span class="p">`</span>
</span><span id="__span-9-6"><a href="#__codelineno-9-6" id="__codelineno-9-6" name="__codelineno-9-6"></a>  <span class="n">-SourceAccount</span> <span class="nv">$srcAccountResourceID</span> <span class="p">`</span>
</span><span id="__span-9-7"><a href="#__codelineno-9-7" id="__codelineno-9-7" name="__codelineno-9-7"></a>  <span class="n">-Rule</span> <span class="nv">$rule</span> <span class="p">`</span>
</span><span id="__span-9-8"><a href="#__codelineno-9-8" id="__codelineno-9-8" name="__codelineno-9-8"></a>  <span class="n">-EnableMetric</span> <span class="nv">$true</span> <span class="p">`</span>
</span><span id="__span-9-9"><a href="#__codelineno-9-9" id="__codelineno-9-9" name="__codelineno-9-9"></a>  <span class="n">-EnablePriorityReplication</span> <span class="nv">$true</span>
</span><span id="__span-9-10"><a href="#__codelineno-9-10" id="__codelineno-9-10" name="__codelineno-9-10"></a>
</span><span id="__span-9-11"><a href="#__codelineno-9-11" id="__codelineno-9-11" name="__codelineno-9-11"></a><span class="nv">$srcPolicy</span> <span class="p">=</span> <span class="nb">Set-AzStorageObjectReplicationPolicy</span> <span class="p">`</span>
</span><span id="__span-9-12"><a href="#__codelineno-9-12" id="__codelineno-9-12" name="__codelineno-9-12"></a>  <span class="n">-ResourceGroupName</span> <span class="nv">$rgName</span> <span class="p">`</span>
</span><span id="__span-9-13"><a href="#__codelineno-9-13" id="__codelineno-9-13" name="__codelineno-9-13"></a>  <span class="n">-StorageAccountName</span> <span class="nv">$srcAccountName</span> <span class="p">`</span>
</span><span id="__span-9-14"><a href="#__codelineno-9-14" id="__codelineno-9-14" name="__codelineno-9-14"></a>  <span class="n">-InputObject</span> <span class="nv">$dstPolicy</span>
</span><span id="__span-9-15"><a href="#__codelineno-9-15" id="__codelineno-9-15" name="__codelineno-9-15"></a>
</span><span id="__span-9-16"><a href="#__codelineno-9-16" id="__codelineno-9-16" name="__codelineno-9-16"></a><span class="c"># Confirmar</span>
</span><span id="__span-9-17"><a href="#__codelineno-9-17" id="__codelineno-9-17" name="__codelineno-9-17"></a><span class="nv">$srcPolicy</span><span class="p">.</span><span class="n">PriorityReplication</span><span class="p">.</span><span class="n">Enabled</span>
</span></code></pre></div>
<p><strong>Deshabilitar</strong>:</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-10-1"><a href="#__codelineno-10-1" id="__codelineno-10-1" name="__codelineno-10-1"></a><span class="c1"># Azure CLI</span>
</span><span id="__span-10-2"><a href="#__codelineno-10-2" id="__codelineno-10-2" name="__codelineno-10-2"></a>az<span class="w"> </span>storage<span class="w"> </span>account<span class="w"> </span>or-policy<span class="w"> </span>update<span class="w"> </span><span class="se">\</span>
</span><span id="__span-10-3"><a href="#__codelineno-10-3" id="__codelineno-10-3" name="__codelineno-10-3"></a><span class="w">  </span>--account-name<span class="w"> </span><span class="nv">$DST_ACCOUNT</span><span class="w"> </span><span class="se">\</span>
</span><span id="__span-10-4"><a href="#__codelineno-10-4" id="__codelineno-10-4" name="__codelineno-10-4"></a><span class="w">  </span>--source-account<span class="w"> </span><span class="nv">$SRC_ACCOUNT</span><span class="w"> </span><span class="se">\</span>
</span><span id="__span-10-5"><a href="#__codelineno-10-5" id="__codelineno-10-5" name="__codelineno-10-5"></a><span class="w">  </span>--destination-container<span class="w"> </span><span class="nv">$DST_CONTAINER</span><span class="w"> </span><span class="se">\</span>
</span><span id="__span-10-6"><a href="#__codelineno-10-6" id="__codelineno-10-6" name="__codelineno-10-6"></a><span class="w">  </span>--source-container<span class="w"> </span><span class="nv">$SRC_CONTAINER</span><span class="w"> </span><span class="se">\</span>
</span><span id="__span-10-7"><a href="#__codelineno-10-7" id="__codelineno-10-7" name="__codelineno-10-7"></a><span class="w">  </span>--min-creation-time<span class="w"> </span><span class="s2">"2025-11-11T00:00:00Z"</span><span class="w"> </span><span class="se">\</span>
</span><span id="__span-10-8"><a href="#__codelineno-10-8" id="__codelineno-10-8" name="__codelineno-10-8"></a><span class="w">  </span>--enable-metrics<span class="w"> </span><span class="nb">true</span><span class="w"> </span><span class="se">\</span>
</span><span id="__span-10-9"><a href="#__codelineno-10-9" id="__codelineno-10-9" name="__codelineno-10-9"></a><span class="w">  </span>--priority-replication<span class="w"> </span><span class="nb">false</span>
</span></code></pre></div>
<div class="language-powershell highlight"><pre><span></span><code><span id="__span-11-1"><a href="#__codelineno-11-1" id="__codelineno-11-1" name="__codelineno-11-1"></a><span class="c"># PowerShell - cambiar a $false</span>
</span><span id="__span-11-2"><a href="#__codelineno-11-2" id="__codelineno-11-2" name="__codelineno-11-2"></a><span class="nv">$dstPolicy</span> <span class="p">=</span> <span class="nb">Set-AzStorageObjectReplicationPolicy</span> <span class="p">`</span>
</span><span id="__span-11-3"><a href="#__codelineno-11-3" id="__codelineno-11-3" name="__codelineno-11-3"></a>  <span class="n">-ResourceGroupName</span> <span class="nv">$rgName</span> <span class="p">`</span>
</span><span id="__span-11-4"><a href="#__codelineno-11-4" id="__codelineno-11-4" name="__codelineno-11-4"></a>  <span class="n">-StorageAccountName</span> <span class="nv">$dstAccountName</span> <span class="p">`</span>
</span><span id="__span-11-5"><a href="#__codelineno-11-5" id="__codelineno-11-5" name="__codelineno-11-5"></a>  <span class="n">-PolicyId</span> <span class="k">default</span> <span class="p">`</span>
</span><span id="__span-11-6"><a href="#__codelineno-11-6" id="__codelineno-11-6" name="__codelineno-11-6"></a>  <span class="n">-SourceAccount</span> <span class="nv">$srcAccountResourceID</span> <span class="p">`</span>
</span><span id="__span-11-7"><a href="#__codelineno-11-7" id="__codelineno-11-7" name="__codelineno-11-7"></a>  <span class="n">-Rule</span> <span class="nv">$rule</span> <span class="p">`</span>
</span><span id="__span-11-8"><a href="#__codelineno-11-8" id="__codelineno-11-8" name="__codelineno-11-8"></a>  <span class="n">-EnableMetric</span> <span class="nv">$true</span> <span class="p">`</span>
</span><span id="__span-11-9"><a href="#__codelineno-11-9" id="__codelineno-11-9" name="__codelineno-11-9"></a>  <span class="n">-EnablePriorityReplication</span> <span class="nv">$false</span>
</span></code></pre></div>
<h4 id="monitorear-sla-de-object-replication"><a class="toclink" href="2025/11/11/azure-storage-priority-replication-replicaci%C3%B3n-acelerada-con-sla/#monitorear-sla-de-object-replication">Monitorear SLA de Object Replication</a></h4>
<p>Cuando OR Priority Replication está habilitada, <strong>OR metrics se activan automáticamente</strong>.</p>
<p><strong>Métricas disponibles</strong>:</p>
<table>
<thead>
<tr>
<th>Métrica</th>
<th>Descripción</th>
<th>Dimensiones</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>Operations pending for replication</code></td>
<td>Total de operaciones pendientes</td>
<td>Time buckets</td>
</tr>
<tr>
<td><code>Bytes pending for replication</code></td>
<td>Bytes pendientes de replicar</td>
<td>Time buckets</td>
</tr>
</tbody>
</table>
<p><strong>Time buckets</strong>:</p>
<ul>
<li>0-5 minutos</li>
<li>5-10 minutos</li>
<li>10-15 minutos</li>
<li>15-30 minutos</li>
<li>30 minutos - 2 horas</li>
<li>2-8 horas</li>
<li>8-24 horas</li>
<li>
<blockquote>
<p>24 horas</p>
</blockquote>
</li>
</ul>
<p><strong>Validar SLA</strong>:</p>
<p>Monitorear que buckets grandes (&gt;15 min) estén en <strong>cero o cerca de cero</strong> durante el mes.</p>
<p><strong>Verificar replicación de blob individual</strong>:</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-12-1"><a href="#__codelineno-12-1" id="__codelineno-12-1" name="__codelineno-12-1"></a><span class="c1"># Comprobar estado de replicación</span>
</span><span id="__span-12-2"><a href="#__codelineno-12-2" id="__codelineno-12-2" name="__codelineno-12-2"></a>az<span class="w"> </span>storage<span class="w"> </span>blob<span class="w"> </span>show<span class="w"> </span><span class="se">\</span>
</span><span id="__span-12-3"><a href="#__codelineno-12-3" id="__codelineno-12-3" name="__codelineno-12-3"></a><span class="w">  </span>--account-name<span class="w"> </span><span class="nv">$SRC_ACCOUNT</span><span class="w"> </span><span class="se">\</span>
</span><span id="__span-12-4"><a href="#__codelineno-12-4" id="__codelineno-12-4" name="__codelineno-12-4"></a><span class="w">  </span>--container-name<span class="w"> </span><span class="nv">$SRC_CONTAINER</span><span class="w"> </span><span class="se">\</span>
</span><span id="__span-12-5"><a href="#__codelineno-12-5" id="__codelineno-12-5" name="__codelineno-12-5"></a><span class="w">  </span>--name<span class="w"> </span>myblob.txt<span class="w"> </span><span class="se">\</span>
</span><span id="__span-12-6"><a href="#__codelineno-12-6" id="__codelineno-12-6" name="__codelineno-12-6"></a><span class="w">  </span>--query<span class="w"> </span><span class="s1">'objectReplicationSourceProperties[].rules[].status'</span><span class="w"> </span><span class="se">\</span>
</span><span id="__span-12-7"><a href="#__codelineno-12-7" id="__codelineno-12-7" name="__codelineno-12-7"></a><span class="w">  </span>--output<span class="w"> </span>tsv<span class="w"> </span><span class="se">\</span>
</span><span id="__span-12-8"><a href="#__codelineno-12-8" id="__codelineno-12-8" name="__codelineno-12-8"></a><span class="w">  </span>--auth-mode<span class="w"> </span>login
</span></code></pre></div>
<p>Estado <code>Completed</code> = blob disponible en destino garantizado.</p>
<h3 id="precios"><a class="toclink" href="2025/11/11/azure-storage-priority-replication-replicaci%C3%B3n-acelerada-con-sla/#precios">Precios</a></h3>
<h4 id="geo-priority-replication_1"><a class="toclink" href="2025/11/11/azure-storage-priority-replication-replicaci%C3%B3n-acelerada-con-sla/#geo-priority-replication_1">Geo Priority Replication</a></h4>
<p><strong>Inicio de facturación</strong>: 1 de enero de 2026</p>
<ul>
<li>Cuentas existentes con feature habilitada</li>
<li>Cuentas nuevas que habiliten la feature</li>
</ul>
<p><strong>Coste</strong>: Por GB (consultar <a href="https://azure.microsoft.com/pricing/details/storage/">Azure Storage Pricing</a>)</p>
<h4 id="object-replication-priority_1"><a class="toclink" href="2025/11/11/azure-storage-priority-replication-replicaci%C3%B3n-acelerada-con-sla/#object-replication-priority_1">Object Replication Priority</a></h4>
<p><strong>Coste</strong>: Por GB de nuevo ingress</p>
<p><strong>Costes adicionales estándar</strong> (igual que OR normal):</p>
<ul>
<li>Transacciones de lectura (origen)</li>
<li>Transacciones de escritura (destino)</li>
<li>Network egress</li>
</ul>
<div class="admonition warning">
<p class="admonition-title">Facturación post-desactivación</p>
<p>Ambas features facturan durante <strong>30 días</strong> adicionales tras deshabilitarlas.</p>
</div>
<h3 id="casos-de-uso"><a class="toclink" href="2025/11/11/azure-storage-priority-replication-replicaci%C3%B3n-acelerada-con-sla/#casos-de-uso">Casos de uso</a></h3>
<h4 id="cumplimiento-normativo-estricto"><a class="toclink" href="2025/11/11/azure-storage-priority-replication-replicaci%C3%B3n-acelerada-con-sla/#cumplimiento-normativo-estricto">Cumplimiento normativo estricto</a></h4>
<p><strong>Escenario</strong>: Sector financiero/salud con regulaciones de RPO &lt; 15 minutos.</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-13-1"><a href="#__codelineno-13-1" id="__codelineno-13-1" name="__codelineno-13-1"></a><span class="c1"># Storage account para datos regulados</span>
</span><span id="__span-13-2"><a href="#__codelineno-13-2" id="__codelineno-13-2" name="__codelineno-13-2"></a>az<span class="w"> </span>storage<span class="w"> </span>account<span class="w"> </span>create<span class="w"> </span><span class="se">\</span>
</span><span id="__span-13-3"><a href="#__codelineno-13-3" id="__codelineno-13-3" name="__codelineno-13-3"></a><span class="w">  </span>--name<span class="w"> </span>stgcomplianceprod<span class="w"> </span><span class="se">\</span>
</span><span id="__span-13-4"><a href="#__codelineno-13-4" id="__codelineno-13-4" name="__codelineno-13-4"></a><span class="w">  </span>--resource-group<span class="w"> </span>rg-compliance<span class="w"> </span><span class="se">\</span>
</span><span id="__span-13-5"><a href="#__codelineno-13-5" id="__codelineno-13-5" name="__codelineno-13-5"></a><span class="w">  </span>--location<span class="w"> </span>westeurope<span class="w"> </span><span class="se">\</span>
</span><span id="__span-13-6"><a href="#__codelineno-13-6" id="__codelineno-13-6" name="__codelineno-13-6"></a><span class="w">  </span>--sku<span class="w"> </span>Standard_GZRS<span class="w"> </span><span class="se">\</span>
</span><span id="__span-13-7"><a href="#__codelineno-13-7" id="__codelineno-13-7" name="__codelineno-13-7"></a><span class="w">  </span>--enable-blob-geo-priority-replication<span class="w"> </span><span class="nb">true</span><span class="w"> </span><span class="se">\</span>
</span><span id="__span-13-8"><a href="#__codelineno-13-8" id="__codelineno-13-8" name="__codelineno-13-8"></a><span class="w">  </span>--tags<span class="w"> </span><span class="s2">"Compliance=Financial"</span><span class="w"> </span><span class="s2">"RPO=15min"</span>
</span></code></pre></div>
<p><strong>Validación</strong>:</p>
<ul>
<li>Monitorear Geo Blob Lag diariamente</li>
<li>Alertas si lag &gt; 10 minutos</li>
<li>Reportes mensuales de LST para auditorías</li>
</ul>
<h4 id="disaster-recovery-con-rtorpo-garantizados"><a class="toclink" href="2025/11/11/azure-storage-priority-replication-replicaci%C3%B3n-acelerada-con-sla/#disaster-recovery-con-rtorpo-garantizados">Disaster Recovery con RTO/RPO garantizados</a></h4>
<p><strong>Escenario</strong>: Aplicación crítica con SLA de DR &lt; 1 hora.</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-14-1"><a href="#__codelineno-14-1" id="__codelineno-14-1" name="__codelineno-14-1"></a><span class="c1"># Source: Producción (North Europe)</span>
</span><span id="__span-14-2"><a href="#__codelineno-14-2" id="__codelineno-14-2" name="__codelineno-14-2"></a><span class="nv">SRC_ACCOUNT</span><span class="o">=</span><span class="s2">"stgappprodneu"</span>
</span><span id="__span-14-3"><a href="#__codelineno-14-3" id="__codelineno-14-3" name="__codelineno-14-3"></a><span class="c1"># Destination: DR (West Europe)</span>
</span><span id="__span-14-4"><a href="#__codelineno-14-4" id="__codelineno-14-4" name="__codelineno-14-4"></a><span class="nv">DST_ACCOUNT</span><span class="o">=</span><span class="s2">"stgappdrweu"</span>
</span><span id="__span-14-5"><a href="#__codelineno-14-5" id="__codelineno-14-5" name="__codelineno-14-5"></a>
</span><span id="__span-14-6"><a href="#__codelineno-14-6" id="__codelineno-14-6" name="__codelineno-14-6"></a><span class="c1"># Policy OR con Priority Replication</span>
</span><span id="__span-14-7"><a href="#__codelineno-14-7" id="__codelineno-14-7" name="__codelineno-14-7"></a>az<span class="w"> </span>storage<span class="w"> </span>account<span class="w"> </span>or-policy<span class="w"> </span>create<span class="w"> </span><span class="se">\</span>
</span><span id="__span-14-8"><a href="#__codelineno-14-8" id="__codelineno-14-8" name="__codelineno-14-8"></a><span class="w">  </span>--account-name<span class="w"> </span><span class="nv">$DST_ACCOUNT</span><span class="w"> </span><span class="se">\</span>
</span><span id="__span-14-9"><a href="#__codelineno-14-9" id="__codelineno-14-9" name="__codelineno-14-9"></a><span class="w">  </span>--source-account<span class="w"> </span><span class="nv">$SRC_ACCOUNT</span><span class="w"> </span><span class="se">\</span>
</span><span id="__span-14-10"><a href="#__codelineno-14-10" id="__codelineno-14-10" name="__codelineno-14-10"></a><span class="w">  </span>--destination-container<span class="w"> </span>app-data<span class="w"> </span><span class="se">\</span>
</span><span id="__span-14-11"><a href="#__codelineno-14-11" id="__codelineno-14-11" name="__codelineno-14-11"></a><span class="w">  </span>--source-container<span class="w"> </span>app-data<span class="w"> </span><span class="se">\</span>
</span><span id="__span-14-12"><a href="#__codelineno-14-12" id="__codelineno-14-12" name="__codelineno-14-12"></a><span class="w">  </span>--min-creation-time<span class="w"> </span><span class="s2">"2025-11-11T00:00:00Z"</span><span class="w"> </span><span class="se">\</span>
</span><span id="__span-14-13"><a href="#__codelineno-14-13" id="__codelineno-14-13" name="__codelineno-14-13"></a><span class="w">  </span>--enable-metrics<span class="w"> </span><span class="nb">true</span><span class="w"> </span><span class="se">\</span>
</span><span id="__span-14-14"><a href="#__codelineno-14-14" id="__codelineno-14-14" name="__codelineno-14-14"></a><span class="w">  </span>--priority-replication<span class="w"> </span><span class="nb">true</span>
</span></code></pre></div>
<p><strong>Beneficio</strong>: Confianza en que datos están en DR site en ≤ 15 minutos.</p>
<h4 id="arquitectura-multi-region-con-ha"><a class="toclink" href="2025/11/11/azure-storage-priority-replication-replicaci%C3%B3n-acelerada-con-sla/#arquitectura-multi-region-con-ha">Arquitectura multi-región con HA</a></h4>
<p><strong>Escenario</strong>: Servicio global con réplicas en múltiples continentes.</p>
<pre class="mermaid"><code>graph LR
    A[Primary<br>West Europe<br>GRS+Priority] --&gt; B[Secondary<br>North Europe<br>Paired region]
    A --&gt; C[OR Priority<br>East US<br>Read replica]
    A --&gt; D[OR Priority<br>Southeast Asia<br>Read replica]

    style A fill:#0078d4,color:#fff
    style B fill:#50e6ff,color:#000
    style C fill:#50e6ff,color:#000
    style D fill:#50e6ff,color:#000
</code></pre>
<p><strong>Configuración</strong>:</p>
<ol>
<li><strong>Primary (West Europe)</strong>: GRS + Geo Priority Replication</li>
<li><strong>Secondary paired (North Europe)</strong>: Automático con GRS</li>
<li><strong>US replica</strong>: Object Replication Priority (mismo continente que origen - garantiza SLA)</li>
<li><strong>Asia replica</strong>: Object Replication normal (diferente continente - sin SLA)</li>
</ol>
<h4 id="sincronizacion-de-entornos-devtest"><a class="toclink" href="2025/11/11/azure-storage-priority-replication-replicaci%C3%B3n-acelerada-con-sla/#sincronizacion-de-entornos-devtest">Sincronización de entornos Dev/Test</a></h4>
<p><strong>Escenario</strong>: Copiar producción a staging con datos frescos.</p>
<div class="language-powershell highlight"><pre><span></span><code><span id="__span-15-1"><a href="#__codelineno-15-1" id="__codelineno-15-1" name="__codelineno-15-1"></a><span class="c"># Policy OR Priority: Prod → Staging</span>
</span><span id="__span-15-2"><a href="#__codelineno-15-2" id="__codelineno-15-2" name="__codelineno-15-2"></a><span class="nv">$rule</span> <span class="p">=</span> <span class="nb">New-AzStorageObjectReplicationPolicyRule</span> <span class="p">`</span>
</span><span id="__span-15-3"><a href="#__codelineno-15-3" id="__codelineno-15-3" name="__codelineno-15-3"></a>  <span class="n">-SourceContainer</span> <span class="s2">"production-data"</span> <span class="p">`</span>
</span><span id="__span-15-4"><a href="#__codelineno-15-4" id="__codelineno-15-4" name="__codelineno-15-4"></a>  <span class="n">-DestinationContainer</span> <span class="s2">"staging-data"</span>
</span><span id="__span-15-5"><a href="#__codelineno-15-5" id="__codelineno-15-5" name="__codelineno-15-5"></a>
</span><span id="__span-15-6"><a href="#__codelineno-15-6" id="__codelineno-15-6" name="__codelineno-15-6"></a><span class="nv">$policy</span> <span class="p">=</span> <span class="nb">Set-AzStorageObjectReplicationPolicy</span> <span class="p">`</span>
</span><span id="__span-15-7"><a href="#__codelineno-15-7" id="__codelineno-15-7" name="__codelineno-15-7"></a>  <span class="n">-ResourceGroupName</span> <span class="s2">"rg-prod"</span> <span class="p">`</span>
</span><span id="__span-15-8"><a href="#__codelineno-15-8" id="__codelineno-15-8" name="__codelineno-15-8"></a>  <span class="n">-StorageAccountName</span> <span class="s2">"stgstaging"</span> <span class="p">`</span>
</span><span id="__span-15-9"><a href="#__codelineno-15-9" id="__codelineno-15-9" name="__codelineno-15-9"></a>  <span class="n">-PolicyId</span> <span class="k">default</span> <span class="p">`</span>
</span><span id="__span-15-10"><a href="#__codelineno-15-10" id="__codelineno-15-10" name="__codelineno-15-10"></a>  <span class="n">-SourceAccount</span> <span class="s2">"/subscriptions/{id}/resourceGroups/rg-prod/providers/Microsoft.Storage/storageAccounts/stgprod"</span> <span class="p">`</span>
</span><span id="__span-15-11"><a href="#__codelineno-15-11" id="__codelineno-15-11" name="__codelineno-15-11"></a>  <span class="n">-Rule</span> <span class="nv">$rule</span> <span class="p">`</span>
</span><span id="__span-15-12"><a href="#__codelineno-15-12" id="__codelineno-15-12" name="__codelineno-15-12"></a>  <span class="n">-EnableMetric</span> <span class="nv">$true</span> <span class="p">`</span>
</span><span id="__span-15-13"><a href="#__codelineno-15-13" id="__codelineno-15-13" name="__codelineno-15-13"></a>  <span class="n">-EnablePriorityReplication</span> <span class="nv">$true</span>
</span></code></pre></div>
<p><strong>Beneficio</strong>: Staging siempre con datos &lt; 15 minutos antiguos.</p>
<h3 id="arquitectura-recomendada"><a class="toclink" href="2025/11/11/azure-storage-priority-replication-replicaci%C3%B3n-acelerada-con-sla/#arquitectura-recomendada">Arquitectura recomendada</a></h3>
<h4 id="patron-geo-redundant-object-replication"><a class="toclink" href="2025/11/11/azure-storage-priority-replication-replicaci%C3%B3n-acelerada-con-sla/#patron-geo-redundant-object-replication">Patrón Geo-Redundant + Object Replication</a></h4>
<pre class="mermaid"><code>graph TB
    subgraph "Región Primaria: West Europe"
        A[Storage Account<br>GRS + Geo Priority]
        A1[Block Blobs<br>Producción]
        A --&gt; A1
    end

    subgraph "Paired Region: North Europe"
        B[Secondary Storage<br>Automático GRS]
        B1[Block Blobs<br>Replica GRS]
        B --&gt; B1
    end

    subgraph "Región DR: East US"
        C[Storage Account<br>OR Destination]
        C1[Replica<br>OR Priority]
        C --&gt; C1
    end

    subgraph "Región Analítica: West US"
        D[Storage Account<br>OR Destination]
        D1[Replica<br>OR Normal]
        D --&gt; D1
    end

    A1 --&gt;|Geo Replication<br>LST ≤ 15min SLA| B1
    A1 --&gt;|OR Priority<br>99% ≤ 15min| C1
    A1 --&gt;|OR Standard<br>Async| D1

    style A fill:#0078d4,color:#fff
    style B fill:#50e6ff,color:#000
    style C fill:#50e6ff,color:#000
    style D fill:#e6e6e6,color:#000
</code></pre>
<p><strong>Capas de protección</strong>:</p>
<ol>
<li><strong>Local redundancy</strong>: ZRS/LRS en región primaria</li>
<li><strong>Geo redundancy con SLA</strong>: Geo Priority Replication a paired region</li>
<li><strong>DR cross-region con SLA</strong>: OR Priority a región DR (mismo continente)</li>
<li><strong>Analítica/archive</strong>: OR estándar a región de análisis</li>
</ol>
<h3 id="buenas-practicas"><a class="toclink" href="2025/11/11/azure-storage-priority-replication-replicaci%C3%B3n-acelerada-con-sla/#buenas-practicas">Buenas prácticas</a></h3>
<h4 id="diseno-de-cuenta"><a class="toclink" href="2025/11/11/azure-storage-priority-replication-replicaci%C3%B3n-acelerada-con-sla/#diseno-de-cuenta">Diseño de cuenta</a></h4>
<ol>
<li><strong>Segregar por SLA</strong>:</li>
<li>Cuentas con Priority Replication: Solo Block Blobs</li>
<li>
<p>Cuentas con Page/Append Blobs: Sin Priority Replication</p>
</li>
<li>
<p><strong>Evitar exclusiones del SLA</strong>:</p>
</li>
<li>No habilitar Change Feed si no es necesario</li>
<li>No activar diagnostic logs a storage en cuenta con Priority Replication</li>
<li>
<p>Usar cuentas dedicadas para logs (sin Priority)</p>
</li>
<li>
<p><strong>Tagging para governance</strong>:</p>
</li>
</ol>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-16-1"><a href="#__codelineno-16-1" id="__codelineno-16-1" name="__codelineno-16-1"></a>az<span class="w"> </span>storage<span class="w"> </span>account<span class="w"> </span>create<span class="w"> </span><span class="se">\</span>
</span><span id="__span-16-2"><a href="#__codelineno-16-2" id="__codelineno-16-2" name="__codelineno-16-2"></a><span class="w">  </span>--name<span class="w"> </span><span class="nv">$STORAGE_ACCOUNT</span><span class="w"> </span><span class="se">\</span>
</span><span id="__span-16-3"><a href="#__codelineno-16-3" id="__codelineno-16-3" name="__codelineno-16-3"></a><span class="w">  </span>--resource-group<span class="w"> </span><span class="nv">$RESOURCE_GROUP</span><span class="w"> </span><span class="se">\</span>
</span><span id="__span-16-4"><a href="#__codelineno-16-4" id="__codelineno-16-4" name="__codelineno-16-4"></a><span class="w">  </span>--tags<span class="w"> </span><span class="se">\</span>
</span><span id="__span-16-5"><a href="#__codelineno-16-5" id="__codelineno-16-5" name="__codelineno-16-5"></a><span class="w">    </span><span class="s2">"PriorityReplication=Enabled"</span><span class="w"> </span><span class="se">\</span>
</span><span id="__span-16-6"><a href="#__codelineno-16-6" id="__codelineno-16-6" name="__codelineno-16-6"></a><span class="w">    </span><span class="s2">"SLA-RPO=15min"</span><span class="w"> </span><span class="se">\</span>
</span><span id="__span-16-7"><a href="#__codelineno-16-7" id="__codelineno-16-7" name="__codelineno-16-7"></a><span class="w">    </span><span class="s2">"CostCenter=IT-Production"</span><span class="w"> </span><span class="se">\</span>
</span><span id="__span-16-8"><a href="#__codelineno-16-8" id="__codelineno-16-8" name="__codelineno-16-8"></a><span class="w">    </span><span class="s2">"Compliance=Required"</span>
</span></code></pre></div>
<h4 id="monitoreo-proactivo"><a class="toclink" href="2025/11/11/azure-storage-priority-replication-replicaci%C3%B3n-acelerada-con-sla/#monitoreo-proactivo">Monitoreo proactivo</a></h4>
<p><strong>Alertas recomendadas</strong>:</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-17-1"><a href="#__codelineno-17-1" id="__codelineno-17-1" name="__codelineno-17-1"></a><span class="c1"># Alert si Geo Blob Lag &gt; 10 minutos (margen de seguridad)</span>
</span><span id="__span-17-2"><a href="#__codelineno-17-2" id="__codelineno-17-2" name="__codelineno-17-2"></a>az<span class="w"> </span>monitor<span class="w"> </span>metrics<span class="w"> </span>alert<span class="w"> </span>create<span class="w"> </span><span class="se">\</span>
</span><span id="__span-17-3"><a href="#__codelineno-17-3" id="__codelineno-17-3" name="__codelineno-17-3"></a><span class="w">  </span>--name<span class="w"> </span><span class="s2">"High-Geo-Lag-Alert"</span><span class="w"> </span><span class="se">\</span>
</span><span id="__span-17-4"><a href="#__codelineno-17-4" id="__codelineno-17-4" name="__codelineno-17-4"></a><span class="w">  </span>--resource<span class="w"> </span><span class="nv">$STORAGE_ACCOUNT_ID</span><span class="w"> </span><span class="se">\</span>
</span><span id="__span-17-5"><a href="#__codelineno-17-5" id="__codelineno-17-5" name="__codelineno-17-5"></a><span class="w">  </span>--condition<span class="w"> </span><span class="s2">"avg GeoBlobLag &gt; 600"</span><span class="w"> </span><span class="se">\</span>
</span><span id="__span-17-6"><a href="#__codelineno-17-6" id="__codelineno-17-6" name="__codelineno-17-6"></a><span class="w">  </span>--window-size<span class="w"> </span>5m<span class="w"> </span><span class="se">\</span>
</span><span id="__span-17-7"><a href="#__codelineno-17-7" id="__codelineno-17-7" name="__codelineno-17-7"></a><span class="w">  </span>--evaluation-frequency<span class="w"> </span>1m<span class="w"> </span><span class="se">\</span>
</span><span id="__span-17-8"><a href="#__codelineno-17-8" id="__codelineno-17-8" name="__codelineno-17-8"></a><span class="w">  </span>--action-group-id<span class="w"> </span><span class="nv">$ACTION_GROUP_ID</span>
</span></code></pre></div>
<p><strong>Dashboard de cumplimiento</strong>:</p>
<ul>
<li>Geo Blob Lag (hourly average)</li>
<li>OR pending operations por time bucket</li>
<li>Throughput vs 1 Gbps threshold</li>
<li>CopyBlob operations vs 100 ops/sec threshold</li>
</ul>
<h4 id="optimizacion-de-costes"><a class="toclink" href="2025/11/11/azure-storage-priority-replication-replicaci%C3%B3n-acelerada-con-sla/#optimizacion-de-costes">Optimización de costes</a></h4>
<ol>
<li><strong>Evaluar necesidad real de SLA</strong>:</li>
<li>Priority Replication: Workloads críticos con RPO estricto</li>
<li>
<p>GRS/OR estándar: Workloads tolerantes a lag &gt; 15 min</p>
</li>
<li>
<p><strong>Lifecycle management</strong>:</p>
</li>
</ol>
<div class="language-json highlight"><pre><span></span><code><span id="__span-18-1"><a href="#__codelineno-18-1" id="__codelineno-18-1" name="__codelineno-18-1"></a><span class="p">{</span>
</span><span id="__span-18-2"><a href="#__codelineno-18-2" id="__codelineno-18-2" name="__codelineno-18-2"></a><span class="w">  </span><span class="nt">"rules"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
</span><span id="__span-18-3"><a href="#__codelineno-18-3" id="__codelineno-18-3" name="__codelineno-18-3"></a><span class="w">    </span><span class="p">{</span>
</span><span id="__span-18-4"><a href="#__codelineno-18-4" id="__codelineno-18-4" name="__codelineno-18-4"></a><span class="w">      </span><span class="nt">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"tierToCool"</span><span class="p">,</span>
</span><span id="__span-18-5"><a href="#__codelineno-18-5" id="__codelineno-18-5" name="__codelineno-18-5"></a><span class="w">      </span><span class="nt">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Lifecycle"</span><span class="p">,</span>
</span><span id="__span-18-6"><a href="#__codelineno-18-6" id="__codelineno-18-6" name="__codelineno-18-6"></a><span class="w">      </span><span class="nt">"definition"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-18-7"><a href="#__codelineno-18-7" id="__codelineno-18-7" name="__codelineno-18-7"></a><span class="w">        </span><span class="nt">"filters"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-18-8"><a href="#__codelineno-18-8" id="__codelineno-18-8" name="__codelineno-18-8"></a><span class="w">          </span><span class="nt">"blobTypes"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"blockBlob"</span><span class="p">]</span>
</span><span id="__span-18-9"><a href="#__codelineno-18-9" id="__codelineno-18-9" name="__codelineno-18-9"></a><span class="w">        </span><span class="p">},</span>
</span><span id="__span-18-10"><a href="#__codelineno-18-10" id="__codelineno-18-10" name="__codelineno-18-10"></a><span class="w">        </span><span class="nt">"actions"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-18-11"><a href="#__codelineno-18-11" id="__codelineno-18-11" name="__codelineno-18-11"></a><span class="w">          </span><span class="nt">"baseBlob"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-18-12"><a href="#__codelineno-18-12" id="__codelineno-18-12" name="__codelineno-18-12"></a><span class="w">            </span><span class="nt">"tierToCool"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-18-13"><a href="#__codelineno-18-13" id="__codelineno-18-13" name="__codelineno-18-13"></a><span class="w">              </span><span class="nt">"daysAfterModificationGreaterThan"</span><span class="p">:</span><span class="w"> </span><span class="mi">30</span>
</span><span id="__span-18-14"><a href="#__codelineno-18-14" id="__codelineno-18-14" name="__codelineno-18-14"></a><span class="w">            </span><span class="p">}</span>
</span><span id="__span-18-15"><a href="#__codelineno-18-15" id="__codelineno-18-15" name="__codelineno-18-15"></a><span class="w">          </span><span class="p">}</span>
</span><span id="__span-18-16"><a href="#__codelineno-18-16" id="__codelineno-18-16" name="__codelineno-18-16"></a><span class="w">        </span><span class="p">}</span>
</span><span id="__span-18-17"><a href="#__codelineno-18-17" id="__codelineno-18-17" name="__codelineno-18-17"></a><span class="w">      </span><span class="p">}</span>
</span><span id="__span-18-18"><a href="#__codelineno-18-18" id="__codelineno-18-18" name="__codelineno-18-18"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-18-19"><a href="#__codelineno-18-19" id="__codelineno-18-19" name="__codelineno-18-19"></a><span class="w">  </span><span class="p">]</span>
</span><span id="__span-18-20"><a href="#__codelineno-18-20" id="__codelineno-18-20" name="__codelineno-18-20"></a><span class="p">}</span>
</span></code></pre></div>
<p>Datos en Cool tier siguen replicándose con Priority pero con menor coste de storage.</p>
<ol>
<li><strong>Revisar policies OR</strong>:</li>
<li>Una sola policy con Priority Replication por cuenta origen</li>
<li>Otras policies: OR estándar</li>
</ol>
<h4 id="seguridad"><a class="toclink" href="2025/11/11/azure-storage-priority-replication-replicaci%C3%B3n-acelerada-con-sla/#seguridad">Seguridad</a></h4>
<ol>
<li><strong>Network security</strong>:</li>
</ol>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-19-1"><a href="#__codelineno-19-1" id="__codelineno-19-1" name="__codelineno-19-1"></a><span class="c1"># Restringir acceso a VNETs</span>
</span><span id="__span-19-2"><a href="#__codelineno-19-2" id="__codelineno-19-2" name="__codelineno-19-2"></a>az<span class="w"> </span>storage<span class="w"> </span>account<span class="w"> </span>update<span class="w"> </span><span class="se">\</span>
</span><span id="__span-19-3"><a href="#__codelineno-19-3" id="__codelineno-19-3" name="__codelineno-19-3"></a><span class="w">  </span>--name<span class="w"> </span><span class="nv">$STORAGE_ACCOUNT</span><span class="w"> </span><span class="se">\</span>
</span><span id="__span-19-4"><a href="#__codelineno-19-4" id="__codelineno-19-4" name="__codelineno-19-4"></a><span class="w">  </span>--resource-group<span class="w"> </span><span class="nv">$RESOURCE_GROUP</span><span class="w"> </span><span class="se">\</span>
</span><span id="__span-19-5"><a href="#__codelineno-19-5" id="__codelineno-19-5" name="__codelineno-19-5"></a><span class="w">  </span>--default-action<span class="w"> </span>Deny
</span><span id="__span-19-6"><a href="#__codelineno-19-6" id="__codelineno-19-6" name="__codelineno-19-6"></a>
</span><span id="__span-19-7"><a href="#__codelineno-19-7" id="__codelineno-19-7" name="__codelineno-19-7"></a>az<span class="w"> </span>storage<span class="w"> </span>account<span class="w"> </span>network-rule<span class="w"> </span>add<span class="w"> </span><span class="se">\</span>
</span><span id="__span-19-8"><a href="#__codelineno-19-8" id="__codelineno-19-8" name="__codelineno-19-8"></a><span class="w">  </span>--account-name<span class="w"> </span><span class="nv">$STORAGE_ACCOUNT</span><span class="w"> </span><span class="se">\</span>
</span><span id="__span-19-9"><a href="#__codelineno-19-9" id="__codelineno-19-9" name="__codelineno-19-9"></a><span class="w">  </span>--resource-group<span class="w"> </span><span class="nv">$RESOURCE_GROUP</span><span class="w"> </span><span class="se">\</span>
</span><span id="__span-19-10"><a href="#__codelineno-19-10" id="__codelineno-19-10" name="__codelineno-19-10"></a><span class="w">  </span>--vnet-name<span class="w"> </span>my-vnet<span class="w"> </span><span class="se">\</span>
</span><span id="__span-19-11"><a href="#__codelineno-19-11" id="__codelineno-19-11" name="__codelineno-19-11"></a><span class="w">  </span>--subnet<span class="w"> </span>app-subnet
</span></code></pre></div>
<ol>
<li><strong>Encryption</strong>:</li>
<li>Customer-managed keys (CMK) para datos en reposo</li>
<li>
<p>HTTPS obligatorio para datos en tránsito</p>
</li>
<li>
<p><strong>RBAC granular</strong>:</p>
</li>
<li>Storage Blob Data Contributor: Apps que escriben</li>
<li>Storage Blob Data Reader: Apps DR que solo leen</li>
<li>Storage Account Contributor: Operadores que gestionan replicación</li>
</ol>
<h3 id="troubleshooting"><a class="toclink" href="2025/11/11/azure-storage-priority-replication-replicaci%C3%B3n-acelerada-con-sla/#troubleshooting">Troubleshooting</a></h3>
<h4 id="geo-blob-lag-15-minutos"><a class="toclink" href="2025/11/11/azure-storage-priority-replication-replicaci%C3%B3n-acelerada-con-sla/#geo-blob-lag-15-minutos">Geo Blob Lag &gt; 15 minutos</a></h4>
<p><strong>Diagnóstico</strong>:</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-20-1"><a href="#__codelineno-20-1" id="__codelineno-20-1" name="__codelineno-20-1"></a><span class="c1"># Ver LST actual</span>
</span><span id="__span-20-2"><a href="#__codelineno-20-2" id="__codelineno-20-2" name="__codelineno-20-2"></a>az<span class="w"> </span>storage<span class="w"> </span>account<span class="w"> </span>show<span class="w"> </span><span class="se">\</span>
</span><span id="__span-20-3"><a href="#__codelineno-20-3" id="__codelineno-20-3" name="__codelineno-20-3"></a><span class="w">  </span>--name<span class="w"> </span><span class="nv">$STORAGE_ACCOUNT</span><span class="w"> </span><span class="se">\</span>
</span><span id="__span-20-4"><a href="#__codelineno-20-4" id="__codelineno-20-4" name="__codelineno-20-4"></a><span class="w">  </span>--resource-group<span class="w"> </span><span class="nv">$RESOURCE_GROUP</span><span class="w"> </span><span class="se">\</span>
</span><span id="__span-20-5"><a href="#__codelineno-20-5" id="__codelineno-20-5" name="__codelineno-20-5"></a><span class="w">  </span>--query<span class="w"> </span><span class="s2">"geoReplicationStats.lastSyncTime"</span><span class="w"> </span><span class="se">\</span>
</span><span id="__span-20-6"><a href="#__codelineno-20-6" id="__codelineno-20-6" name="__codelineno-20-6"></a><span class="w">  </span>--output<span class="w"> </span>tsv
</span><span id="__span-20-7"><a href="#__codelineno-20-7" id="__codelineno-20-7" name="__codelineno-20-7"></a>
</span><span id="__span-20-8"><a href="#__codelineno-20-8" id="__codelineno-20-8" name="__codelineno-20-8"></a><span class="c1"># Comprobar throughput</span>
</span><span id="__span-20-9"><a href="#__codelineno-20-9" id="__codelineno-20-9" name="__codelineno-20-9"></a>az<span class="w"> </span>monitor<span class="w"> </span>metrics<span class="w"> </span>list<span class="w"> </span><span class="se">\</span>
</span><span id="__span-20-10"><a href="#__codelineno-20-10" id="__codelineno-20-10" name="__codelineno-20-10"></a><span class="w">  </span>--resource<span class="w"> </span><span class="nv">$STORAGE_ACCOUNT_ID</span><span class="w"> </span><span class="se">\</span>
</span><span id="__span-20-11"><a href="#__codelineno-20-11" id="__codelineno-20-11" name="__codelineno-20-11"></a><span class="w">  </span>--metric<span class="w"> </span><span class="s2">"Egress"</span><span class="w"> </span><span class="se">\</span>
</span><span id="__span-20-12"><a href="#__codelineno-20-12" id="__codelineno-20-12" name="__codelineno-20-12"></a><span class="w">  </span>--start-time<span class="w"> </span><span class="k">$(</span>date<span class="w"> </span>-u<span class="w"> </span>-d<span class="w"> </span><span class="s1">'1 hour ago'</span><span class="w"> </span>+%Y-%m-%dT%H:%M:%SZ<span class="k">)</span><span class="w"> </span><span class="se">\</span>
</span><span id="__span-20-13"><a href="#__codelineno-20-13" id="__codelineno-20-13" name="__codelineno-20-13"></a><span class="w">  </span>--interval<span class="w"> </span>PT5M<span class="w"> </span><span class="se">\</span>
</span><span id="__span-20-14"><a href="#__codelineno-20-14" id="__codelineno-20-14" name="__codelineno-20-14"></a><span class="w">  </span>--aggregation<span class="w"> </span>Average
</span></code></pre></div>
<p><strong>Causas comunes</strong>:</p>
<ol>
<li><strong>Throughput &gt; 1 Gbps</strong>: Reducir ingress o escalar a múltiples cuentas</li>
<li><strong>CopyBlob &gt; 100 ops/sec</strong>: Distribuir copies en el tiempo</li>
<li><strong>Page/Append blobs</strong>: Revisar si hay features creando estos blobs inadvertidamente</li>
</ol>
<h4 id="or-metrics-no-aparecen"><a class="toclink" href="2025/11/11/azure-storage-priority-replication-replicaci%C3%B3n-acelerada-con-sla/#or-metrics-no-aparecen">OR metrics no aparecen</a></h4>
<p><strong>Validaciones</strong>:</p>
<div class="language-powershell highlight"><pre><span></span><code><span id="__span-21-1"><a href="#__codelineno-21-1" id="__codelineno-21-1" name="__codelineno-21-1"></a><span class="c"># Comprobar que metrics están habilitadas</span>
</span><span id="__span-21-2"><a href="#__codelineno-21-2" id="__codelineno-21-2" name="__codelineno-21-2"></a><span class="nv">$policy</span> <span class="p">=</span> <span class="nb">Get-AzStorageObjectReplicationPolicy</span> <span class="p">`</span>
</span><span id="__span-21-3"><a href="#__codelineno-21-3" id="__codelineno-21-3" name="__codelineno-21-3"></a>  <span class="n">-ResourceGroupName</span> <span class="nv">$rgName</span> <span class="p">`</span>
</span><span id="__span-21-4"><a href="#__codelineno-21-4" id="__codelineno-21-4" name="__codelineno-21-4"></a>  <span class="n">-StorageAccountName</span> <span class="nv">$srcAccountName</span> <span class="p">`</span>
</span><span id="__span-21-5"><a href="#__codelineno-21-5" id="__codelineno-21-5" name="__codelineno-21-5"></a>  <span class="n">-PolicyId</span> <span class="nv">$policyId</span>
</span><span id="__span-21-6"><a href="#__codelineno-21-6" id="__codelineno-21-6" name="__codelineno-21-6"></a>
</span><span id="__span-21-7"><a href="#__codelineno-21-7" id="__codelineno-21-7" name="__codelineno-21-7"></a><span class="nv">$policy</span><span class="p">.</span><span class="n">EnableMetrics</span>
</span><span id="__span-21-8"><a href="#__codelineno-21-8" id="__codelineno-21-8" name="__codelineno-21-8"></a><span class="nv">$policy</span><span class="p">.</span><span class="n">PriorityReplication</span><span class="p">.</span><span class="n">Enabled</span>
</span></code></pre></div>
<p><strong>Solución</strong>:</p>
<ul>
<li>Esperar 24 horas tras habilitar</li>
<li>Verificar que hay tráfico de replicación activo</li>
<li>Comprobar que policy está en estado <code>Enabled</code></li>
</ul>
<h4 id="sla-no-se-cumple"><a class="toclink" href="2025/11/11/azure-storage-priority-replication-replicaci%C3%B3n-acelerada-con-sla/#sla-no-se-cumple">SLA no se cumple</a></h4>
<p><strong>Checklist de elegibilidad</strong>:</p>
<ul class="task-list">
<li class="task-list-item"><label class="task-list-control"><input disabled="" type="checkbox"><span class="task-list-indicator"></span></label> Solo Block Blobs (no Page/Append)</li>
<li class="task-list-item"><label class="task-list-control"><input disabled="" type="checkbox"><span class="task-list-indicator"></span></label> Sin llamadas API Page/Append en últimos 30 días</li>
<li class="task-list-item"><label class="task-list-control"><input disabled="" type="checkbox"><span class="task-list-indicator"></span></label> Throughput &lt; 1 Gbps</li>
<li class="task-list-item"><label class="task-list-control"><input disabled="" type="checkbox"><span class="task-list-indicator"></span></label> CopyBlob &lt; 100 ops/sec</li>
<li class="task-list-item"><label class="task-list-control"><input disabled="" type="checkbox"><span class="task-list-indicator"></span></label> LST ≤ 15 min al habilitar feature</li>
<li class="task-list-item"><label class="task-list-control"><input disabled="" type="checkbox"><span class="task-list-indicator"></span></label> OR: Origen y destino en mismo continente</li>
<li class="task-list-item"><label class="task-list-control"><input disabled="" type="checkbox"><span class="task-list-indicator"></span></label> OR: Objetos &lt; 5 GB</li>
<li class="task-list-item"><label class="task-list-control"><input disabled="" type="checkbox"><span class="task-list-indicator"></span></label> OR: No más de 10 modificaciones/segundo por objeto</li>
</ul>
<p><strong>Validar con Azure Support</strong>:</p>
<p>Abrir caso incluyendo:</p>
<ul>
<li>Storage Account ID</li>
<li>Período de incumplimiento (fechas/horas)</li>
<li>Métricas de Geo Blob Lag o OR pending operations</li>
<li>Confirmación de elegibilidad (checklist anterior)</li>
</ul>
<h3 id="referencias"><a class="toclink" href="2025/11/11/azure-storage-priority-replication-replicaci%C3%B3n-acelerada-con-sla/#referencias">Referencias</a></h3>
<ul>
<li><a href="https://learn.microsoft.com/en-us/azure/storage/common/storage-redundancy-priority-replication">Geo Priority Replication - Official Docs</a></li>
<li><a href="https://learn.microsoft.com/en-us/azure/storage/blobs/object-replication-priority-replication">Object Replication Priority - Official Docs</a></li>
<li><a href="https://www.microsoft.com/licensing/docs/view/Service-Level-Agreements-SLA-for-Online-Services">Azure Storage SLA Terms</a></li>
<li><a href="https://learn.microsoft.com/en-us/azure/storage/blobs/object-replication-overview">Object Replication Overview</a></li>
<li><a href="https://learn.microsoft.com/en-us/azure/storage/common/last-sync-time-get">Monitor Last Sync Time</a></li>
<li><a href="https://azure.microsoft.com/pricing/details/storage/">Azure Storage Pricing</a></li>
<li><a href="https://learn.microsoft.com/en-us/azure/reliability/regions-list">Azure Regions List</a></li>
</ul>
</div>
</article>
<article class="md-post md-post--excerpt">
<header class="md-post__header">
<nav class="md-post__authors md-typeset">
<span class="md-author">
<img alt="Rafael Fernández" src="https://avatars.githubusercontent.com/u/39990341">
</span>
</nav>
<div class="md-post__meta md-meta">
<ul class="md-meta__list">
<li class="md-meta__item">
<time datetime="2025-11-07 00:00:00+00:00">November 7, 2025</time></li>
<li class="md-meta__item">
            in
            
              <a class="md-meta__link" href="category/devops/">DevOps</a></li>
<li class="md-meta__item">
            
              10 min read
            
          </li>
</ul>
</div>
</header>
<div class="md-post__content md-typeset">
<h2 id="configurar-vscode-con-github-copilot-guia-practica"><a class="toclink" href="2025/11/07/configurar-vscode-con-github-copilot-gu%C3%ADa-pr%C3%A1ctica/">Configurar VSCode con GitHub Copilot: Guía práctica</a></h2>
<h3 id="resumen"><a class="toclink" href="2025/11/07/configurar-vscode-con-github-copilot-gu%C3%ADa-pr%C3%A1ctica/#resumen">Resumen</a></h3>
<p>Guía práctica para configurar GitHub Copilot en VSCode: custom instructions, prompt files, generación automática de conventional commits y uso de modos Ask/Edit/Agent para maximizar productividad en proyectos Azure/DevOps.</p>
<h3 id="que-es-github-copilot"><a class="toclink" href="2025/11/07/configurar-vscode-con-github-copilot-gu%C3%ADa-pr%C3%A1ctica/#que-es-github-copilot">¿Qué es GitHub Copilot?</a></h3>
<p>GitHub Copilot es un asistente de código basado en IA que sugiere código, genera tests, documenta funciones y responde preguntas técnicas directamente en tu editor. En VSCode, Copilot ofrece:</p>
<ul>
<li><strong>Completado de código inline</strong>: Sugerencias mientras escribes</li>
<li><strong>Chat interactivo</strong>: Conversaciones sobre tu código</li>
<li><strong>Generación de commits</strong>: Mensajes siguiendo conventional commits</li>
<li><strong>Modos de trabajo</strong>: Ask, Edit y Agent para diferentes escenarios</li>
</ul>
<h3 id="instalacion-en-vscode"><a class="toclink" href="2025/11/07/configurar-vscode-con-github-copilot-gu%C3%ADa-pr%C3%A1ctica/#instalacion-en-vscode">Instalación en VSCode</a></h3>
<p>Requisitos previos:</p>
<ul>
<li>VSCode 1.99 o superior</li>
<li>Cuenta GitHub con acceso a Copilot (<a href="https://github.com/copilot/free">Copilot Free</a> disponible)</li>
</ul>
<p>Pasos de instalación:</p>
<ol>
<li>Abrir VSCode</li>
<li>Ir a Extensions (<code>Ctrl+Shift+X</code>)</li>
<li>Buscar "GitHub Copilot"</li>
<li>Instalar dos extensiones:</li>
<li><strong>GitHub Copilot</strong> (autocompletado)</li>
<li><strong>GitHub Copilot Chat</strong> (chat interactivo)</li>
</ol>
<p>Autenticación:</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-0-1"><a href="#__codelineno-0-1" id="__codelineno-0-1" name="__codelineno-0-1"></a><span class="c1"># VSCode solicitará autenticación con GitHub</span>
</span><span id="__span-0-2"><a href="#__codelineno-0-2" id="__codelineno-0-2" name="__codelineno-0-2"></a><span class="c1"># Alternativamente desde Command Palette (Ctrl+Shift+P):</span>
</span><span id="__span-0-3"><a href="#__codelineno-0-3" id="__codelineno-0-3" name="__codelineno-0-3"></a>GitHub<span class="w"> </span>Copilot:<span class="w"> </span>Sign<span class="w"> </span>In
</span></code></pre></div>
<h3 id="custom-instructions"><a class="toclink" href="2025/11/07/configurar-vscode-con-github-copilot-gu%C3%ADa-pr%C3%A1ctica/#custom-instructions">Custom Instructions</a></h3>
<p>Las instrucciones personalizadas permiten definir reglas y contexto que Copilot aplicará automáticamente, eliminando la necesidad de repetir el mismo contexto en cada prompt.</p>
<h4 id="tipos-de-archivos-de-instrucciones"><a class="toclink" href="2025/11/07/configurar-vscode-con-github-copilot-gu%C3%ADa-pr%C3%A1ctica/#tipos-de-archivos-de-instrucciones">Tipos de archivos de instrucciones</a></h4>
<p>VSCode soporta tres tipos de archivos Markdown para instrucciones:</p>
<p><strong>1. <code>.github/copilot-instructions.md</code></strong> (instrucciones globales del workspace)</p>
<ul>
<li>Se aplica automáticamente a todas las conversaciones</li>
<li>Un único archivo en la raíz del repositorio</li>
<li>Compartido con todo el equipo vía Git</li>
</ul>
<p><strong>2. <code>.instructions.md</code></strong> (instrucciones específicas por archivo/tarea)</p>
<ul>
<li>Múltiples archivos para diferentes contextos</li>
<li>Usa frontmatter <code>applyTo</code> con glob patterns</li>
<li>Puede ser workspace o user-level (sincronizable)</li>
</ul>
<p><strong>3. <code>AGENTS.md</code></strong> (experimental, para múltiples agentes IA)</p>
<ul>
<li>En la raíz o subfolders del workspace</li>
<li>Útil si trabajas con varios agentes IA</li>
<li>Requiere habilitar <code>chat.useAgentsMdFile</code></li>
</ul>
<p>Estructura del proyecto:</p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-1-1"><a href="#__codelineno-1-1" id="__codelineno-1-1" name="__codelineno-1-1"></a>your-repo/
</span><span id="__span-1-2"><a href="#__codelineno-1-2" id="__codelineno-1-2" name="__codelineno-1-2"></a>├── .github/
</span><span id="__span-1-3"><a href="#__codelineno-1-3" id="__codelineno-1-3" name="__codelineno-1-3"></a>│   ├── copilot-instructions.md    ← Global workspace
</span><span id="__span-1-4"><a href="#__codelineno-1-4" id="__codelineno-1-4" name="__codelineno-1-4"></a>│   ├── instructions/               ← Instrucciones específicas
</span><span id="__span-1-5"><a href="#__codelineno-1-5" id="__codelineno-1-5" name="__codelineno-1-5"></a>│   │   ├── python.instructions.md
</span><span id="__span-1-6"><a href="#__codelineno-1-6" id="__codelineno-1-6" name="__codelineno-1-6"></a>│   │   └── terraform.instructions.md
</span><span id="__span-1-7"><a href="#__codelineno-1-7" id="__codelineno-1-7" name="__codelineno-1-7"></a>│   └── prompts/                    ← Prompts reutilizables
</span><span id="__span-1-8"><a href="#__codelineno-1-8" id="__codelineno-1-8" name="__codelineno-1-8"></a>├── AGENTS.md                        ← Para múltiples agentes (experimental)
</span><span id="__span-1-9"><a href="#__codelineno-1-9" id="__codelineno-1-9" name="__codelineno-1-9"></a>├── src/
</span><span id="__span-1-10"><a href="#__codelineno-1-10" id="__codelineno-1-10" name="__codelineno-1-10"></a>└── README.md
</span></code></pre></div>
<p>Ejemplo de instrucciones para proyectos Azure/DevOps:</p>
<div class="language-markdown highlight"><pre><span></span><code><span id="__span-2-1"><a href="#__codelineno-2-1" id="__codelineno-2-1" name="__codelineno-2-1"></a><span class="gh"># Instrucciones para GitHub Copilot</span>
</span><span id="__span-2-2"><a href="#__codelineno-2-2" id="__codelineno-2-2" name="__codelineno-2-2"></a>
</span><span id="__span-2-3"><a href="#__codelineno-2-3" id="__codelineno-2-3" name="__codelineno-2-3"></a><span class="gu">## Contexto del proyecto</span>
</span><span id="__span-2-4"><a href="#__codelineno-2-4" id="__codelineno-2-4" name="__codelineno-2-4"></a>
</span><span id="__span-2-5"><a href="#__codelineno-2-5" id="__codelineno-2-5" name="__codelineno-2-5"></a>Este repositorio contiene infraestructura Azure gestionada con Terraform y CI/CD con GitHub Actions.
</span><span id="__span-2-6"><a href="#__codelineno-2-6" id="__codelineno-2-6" name="__codelineno-2-6"></a>
</span><span id="__span-2-7"><a href="#__codelineno-2-7" id="__codelineno-2-7" name="__codelineno-2-7"></a><span class="gu">## Convenciones de código</span>
</span><span id="__span-2-8"><a href="#__codelineno-2-8" id="__codelineno-2-8" name="__codelineno-2-8"></a>
</span><span id="__span-2-9"><a href="#__codelineno-2-9" id="__codelineno-2-9" name="__codelineno-2-9"></a><span class="gu">### Terraform</span>
</span><span id="__span-2-10"><a href="#__codelineno-2-10" id="__codelineno-2-10" name="__codelineno-2-10"></a>
</span><span id="__span-2-11"><a href="#__codelineno-2-11" id="__codelineno-2-11" name="__codelineno-2-11"></a><span class="k">-</span><span class="w"> </span>Usar módulos para componentes reutilizables
</span><span id="__span-2-12"><a href="#__codelineno-2-12" id="__codelineno-2-12" name="__codelineno-2-12"></a><span class="k">-</span><span class="w"> </span>Variables en <span class="sb">`variables.tf`</span>, outputs en <span class="sb">`outputs.tf`</span>
</span><span id="__span-2-13"><a href="#__codelineno-2-13" id="__codelineno-2-13" name="__codelineno-2-13"></a><span class="k">-</span><span class="w"> </span>Naming: <span class="sb">`&lt;recurso&gt;-&lt;entorno&gt;-&lt;región&gt;`</span> (ejemplo: <span class="sb">`st-prod-weu`</span>)
</span><span id="__span-2-14"><a href="#__codelineno-2-14" id="__codelineno-2-14" name="__codelineno-2-14"></a><span class="k">-</span><span class="w"> </span>Tags obligatorios: Environment, Owner, CostCenter
</span><span id="__span-2-15"><a href="#__codelineno-2-15" id="__codelineno-2-15" name="__codelineno-2-15"></a>
</span><span id="__span-2-16"><a href="#__codelineno-2-16" id="__codelineno-2-16" name="__codelineno-2-16"></a><span class="gu">### Python</span>
</span><span id="__span-2-17"><a href="#__codelineno-2-17" id="__codelineno-2-17" name="__codelineno-2-17"></a>
</span><span id="__span-2-18"><a href="#__codelineno-2-18" id="__codelineno-2-18" name="__codelineno-2-18"></a><span class="k">-</span><span class="w"> </span>PEP 8 para estilo de código
</span><span id="__span-2-19"><a href="#__codelineno-2-19" id="__codelineno-2-19" name="__codelineno-2-19"></a><span class="k">-</span><span class="w"> </span>Type hints obligatorios en funciones públicas
</span><span id="__span-2-20"><a href="#__codelineno-2-20" id="__codelineno-2-20" name="__codelineno-2-20"></a><span class="k">-</span><span class="w"> </span>Docstrings en formato Google
</span><span id="__span-2-21"><a href="#__codelineno-2-21" id="__codelineno-2-21" name="__codelineno-2-21"></a><span class="k">-</span><span class="w"> </span>Tests con pytest, coverage mínimo 80%
</span><span id="__span-2-22"><a href="#__codelineno-2-22" id="__codelineno-2-22" name="__codelineno-2-22"></a>
</span><span id="__span-2-23"><a href="#__codelineno-2-23" id="__codelineno-2-23" name="__codelineno-2-23"></a><span class="gu">### Commits</span>
</span><span id="__span-2-24"><a href="#__codelineno-2-24" id="__codelineno-2-24" name="__codelineno-2-24"></a>
</span><span id="__span-2-25"><a href="#__codelineno-2-25" id="__codelineno-2-25" name="__codelineno-2-25"></a><span class="k">-</span><span class="w"> </span>Seguir conventional commits: <span class="sb">`type(scope): description`</span>
</span><span id="__span-2-26"><a href="#__codelineno-2-26" id="__codelineno-2-26" name="__codelineno-2-26"></a><span class="k">-</span><span class="w"> </span>Tipos permitidos: feat, fix, docs, chore, refactor, test
</span><span id="__span-2-27"><a href="#__codelineno-2-27" id="__codelineno-2-27" name="__codelineno-2-27"></a><span class="k">-</span><span class="w"> </span>Scope debe indicar área afectada: terraform, github-actions, scripts
</span><span id="__span-2-28"><a href="#__codelineno-2-28" id="__codelineno-2-28" name="__codelineno-2-28"></a>
</span><span id="__span-2-29"><a href="#__codelineno-2-29" id="__codelineno-2-29" name="__codelineno-2-29"></a><span class="gu">## Seguridad</span>
</span><span id="__span-2-30"><a href="#__codelineno-2-30" id="__codelineno-2-30" name="__codelineno-2-30"></a>
</span><span id="__span-2-31"><a href="#__codelineno-2-31" id="__codelineno-2-31" name="__codelineno-2-31"></a><span class="k">-</span><span class="w"> </span>NUNCA incluir credenciales hardcoded
</span><span id="__span-2-32"><a href="#__codelineno-2-32" id="__codelineno-2-32" name="__codelineno-2-32"></a><span class="k">-</span><span class="w"> </span>Usar Azure Key Vault para secretos
</span><span id="__span-2-33"><a href="#__codelineno-2-33" id="__codelineno-2-33" name="__codelineno-2-33"></a><span class="k">-</span><span class="w"> </span>Managed Identities sobre service principals
</span><span id="__span-2-34"><a href="#__codelineno-2-34" id="__codelineno-2-34" name="__codelineno-2-34"></a><span class="k">-</span><span class="w"> </span>Mínimo privilegio en roles RBAC
</span><span id="__span-2-35"><a href="#__codelineno-2-35" id="__codelineno-2-35" name="__codelineno-2-35"></a>
</span><span id="__span-2-36"><a href="#__codelineno-2-36" id="__codelineno-2-36" name="__codelineno-2-36"></a><span class="gu">## Referencias</span>
</span><span id="__span-2-37"><a href="#__codelineno-2-37" id="__codelineno-2-37" name="__codelineno-2-37"></a>
</span><span id="__span-2-38"><a href="#__codelineno-2-38" id="__codelineno-2-38" name="__codelineno-2-38"></a><span class="k">-</span><span class="w"> </span>Validar recursos Azure contra docs oficiales
</span><span id="__span-2-39"><a href="#__codelineno-2-39" id="__codelineno-2-39" name="__codelineno-2-39"></a><span class="k">-</span><span class="w"> </span>Seguir Azure Well-Architected Framework
</span><span id="__span-2-40"><a href="#__codelineno-2-40" id="__codelineno-2-40" name="__codelineno-2-40"></a><span class="k">-</span><span class="w"> </span>Bicep/Terraform: sintaxis actualizada
</span></code></pre></div>
<h4 id="habilitar-custom-instructions-en-vscode"><a class="toclink" href="2025/11/07/configurar-vscode-con-github-copilot-gu%C3%ADa-pr%C3%A1ctica/#habilitar-custom-instructions-en-vscode">Habilitar Custom Instructions en VSCode</a></h4>
<p><strong>Opción 1: Habilitar en Settings</strong></p>
<div class="language-json highlight"><pre><span></span><code><span id="__span-3-1"><a href="#__codelineno-3-1" id="__codelineno-3-1" name="__codelineno-3-1"></a><span class="p">{</span>
</span><span id="__span-3-2"><a href="#__codelineno-3-2" id="__codelineno-3-2" name="__codelineno-3-2"></a><span class="w">  </span><span class="nt">"github.copilot.chat.codeGeneration.useInstructionFiles"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span>
</span><span id="__span-3-3"><a href="#__codelineno-3-3" id="__codelineno-3-3" name="__codelineno-3-3"></a><span class="p">}</span>
</span></code></pre></div>
<p><strong>Opción 2: Generar automáticamente desde tu workspace</strong></p>
<p>VSCode puede analizar tu código y generar instrucciones que coincidan con tus prácticas:</p>
<ol>
<li>Chat view → <strong>Configure Chat</strong> → <strong>Generate Instructions</strong></li>
<li>Revisar y editar el archivo generado</li>
<li>Guardar en <code>.github/copilot-instructions.md</code></li>
</ol>
<p><strong>Validación</strong>: Cuando Copilot use las instrucciones, aparecerá el archivo en la lista de "References" de la respuesta.</p>
<h3 id="instrucciones-especificas-con-instructionsmd"><a class="toclink" href="2025/11/07/configurar-vscode-con-github-copilot-gu%C3%ADa-pr%C3%A1ctica/#instrucciones-especificas-con-instructionsmd">Instrucciones específicas con .instructions.md</a></h3>
<p>Además del archivo global, puedes crear instrucciones específicas para lenguajes, frameworks o tareas.</p>
<h4 id="formato-de-instructionsmd"><a class="toclink" href="2025/11/07/configurar-vscode-con-github-copilot-gu%C3%ADa-pr%C3%A1ctica/#formato-de-instructionsmd">Formato de .instructions.md</a></h4>
<p><strong>Estructura</strong>:</p>
<div class="language-markdown highlight"><pre><span></span><code><span id="__span-4-1"><a href="#__codelineno-4-1" id="__codelineno-4-1" name="__codelineno-4-1"></a>---
</span><span id="__span-4-2"><a href="#__codelineno-4-2" id="__codelineno-4-2" name="__codelineno-4-2"></a>description: "Descripción mostrada al hacer hover"
</span><span id="__span-4-3"><a href="#__codelineno-4-3" id="__codelineno-4-3" name="__codelineno-4-3"></a><span class="gu">applyTo: "**/*.py"  # Glob pattern (relativo al workspace root)</span>
</span><span id="__span-4-4"><a href="#__codelineno-4-4" id="__codelineno-4-4" name="__codelineno-4-4"></a><span class="gu">---</span>
</span><span id="__span-4-5"><a href="#__codelineno-4-5" id="__codelineno-4-5" name="__codelineno-4-5"></a>
</span><span id="__span-4-6"><a href="#__codelineno-4-6" id="__codelineno-4-6" name="__codelineno-4-6"></a><span class="gh"># Instrucciones específicas para Python</span>
</span><span id="__span-4-7"><a href="#__codelineno-4-7" id="__codelineno-4-7" name="__codelineno-4-7"></a>
</span><span id="__span-4-8"><a href="#__codelineno-4-8" id="__codelineno-4-8" name="__codelineno-4-8"></a><span class="k">-</span><span class="w"> </span>Seguir PEP 8
</span><span id="__span-4-9"><a href="#__codelineno-4-9" id="__codelineno-4-9" name="__codelineno-4-9"></a><span class="k">-</span><span class="w"> </span>Type hints obligatorios
</span><span id="__span-4-10"><a href="#__codelineno-4-10" id="__codelineno-4-10" name="__codelineno-4-10"></a><span class="k">-</span><span class="w"> </span>Docstrings en formato Google
</span></code></pre></div>
<p><strong>Ejemplo: Instrucciones para Terraform</strong></p>
<p>Archivo: <code>.github/instructions/terraform.instructions.md</code></p>
<div class="language-markdown highlight"><pre><span></span><code><span id="__span-5-1"><a href="#__codelineno-5-1" id="__codelineno-5-1" name="__codelineno-5-1"></a>---
</span><span id="__span-5-2"><a href="#__codelineno-5-2" id="__codelineno-5-2" name="__codelineno-5-2"></a>description: "Terraform coding standards"
</span><span id="__span-5-3"><a href="#__codelineno-5-3" id="__codelineno-5-3" name="__codelineno-5-3"></a><span class="gu">applyTo: "**/*.tf,**/*.tfvars"</span>
</span><span id="__span-5-4"><a href="#__codelineno-5-4" id="__codelineno-5-4" name="__codelineno-5-4"></a><span class="gu">---</span>
</span><span id="__span-5-5"><a href="#__codelineno-5-5" id="__codelineno-5-5" name="__codelineno-5-5"></a>
</span><span id="__span-5-6"><a href="#__codelineno-5-6" id="__codelineno-5-6" name="__codelineno-5-6"></a><span class="gh"># Terraform Best Practices</span>
</span><span id="__span-5-7"><a href="#__codelineno-5-7" id="__codelineno-5-7" name="__codelineno-5-7"></a>
</span><span id="__span-5-8"><a href="#__codelineno-5-8" id="__codelineno-5-8" name="__codelineno-5-8"></a><span class="k">-</span><span class="w"> </span>Usar módulos para componentes reutilizables
</span><span id="__span-5-9"><a href="#__codelineno-5-9" id="__codelineno-5-9" name="__codelineno-5-9"></a><span class="k">-</span><span class="w"> </span>Variables en variables.tf, outputs en outputs.tf
</span><span id="__span-5-10"><a href="#__codelineno-5-10" id="__codelineno-5-10" name="__codelineno-5-10"></a><span class="k">-</span><span class="w"> </span>Naming convention: <span class="sb">`&lt;resource&gt;-&lt;environment&gt;-&lt;region&gt;`</span>
</span><span id="__span-5-11"><a href="#__codelineno-5-11" id="__codelineno-5-11" name="__codelineno-5-11"></a><span class="k">-</span><span class="w"> </span>Tags obligatorios: Environment, Owner, CostCenter
</span><span id="__span-5-12"><a href="#__codelineno-5-12" id="__codelineno-5-12" name="__codelineno-5-12"></a><span class="k">-</span><span class="w"> </span>Encryption habilitado por defecto
</span><span id="__span-5-13"><a href="#__codelineno-5-13" id="__codelineno-5-13" name="__codelineno-5-13"></a><span class="k">-</span><span class="w"> </span>Validar con <span class="sb">`terraform validate`</span> y <span class="sb">`tflint`</span>
</span></code></pre></div>
<h4 id="crear-instrucciones-desde-vscode"><a class="toclink" href="2025/11/07/configurar-vscode-con-github-copilot-gu%C3%ADa-pr%C3%A1ctica/#crear-instrucciones-desde-vscode">Crear instrucciones desde VSCode</a></h4>
<p><strong>Comando</strong>: <code>Chat: New Instructions File</code> (<code>Ctrl+Shift+P</code>)</p>
<ol>
<li>Elegir ubicación:</li>
<li><strong>Workspace</strong>: <code>.github/instructions/</code> (compartido vía Git)</li>
<li><strong>User</strong>: Perfil de usuario (sincronizable entre dispositivos)</li>
<li>Nombrar archivo (ej: <code>python.instructions.md</code>)</li>
<li>Definir <code>applyTo</code> pattern en frontmatter</li>
<li>Escribir instrucciones en Markdown</li>
</ol>
<p><strong>Adjuntar manualmente</strong>: En Chat view → botón <code>+</code> → <strong>Instructions</strong> → seleccionar archivo</p>
<h4 id="sincronizar-instrucciones-de-usuario"><a class="toclink" href="2025/11/07/configurar-vscode-con-github-copilot-gu%C3%ADa-pr%C3%A1ctica/#sincronizar-instrucciones-de-usuario">Sincronizar instrucciones de usuario</a></h4>
<p>Las instrucciones user-level pueden sincronizarse entre dispositivos:</p>
<ol>
<li>Habilitar Settings Sync</li>
<li><code>Ctrl+Shift+P</code> → <strong>Settings Sync: Configure</strong></li>
<li>Seleccionar <strong>Prompts and Instructions</strong></li>
</ol>
<h3 id="prompt-files-githubprompts"><a class="toclink" href="2025/11/07/configurar-vscode-con-github-copilot-gu%C3%ADa-pr%C3%A1ctica/#prompt-files-githubprompts">Prompt Files (.github/prompts)</a></h3>
<p>Los prompt files permiten crear plantillas de prompts reutilizables compartibles con el equipo.</p>
<h4 id="crear-prompts-reutilizables"><a class="toclink" href="2025/11/07/configurar-vscode-con-github-copilot-gu%C3%ADa-pr%C3%A1ctica/#crear-prompts-reutilizables">Crear prompts reutilizables</a></h4>
<p>Ejemplo: Prompt para generar Terraform modules</p>
<p>Archivo: <code>.github/prompts/terraform-module.prompt.md</code></p>
<div class="language-markdown highlight"><pre><span></span><code><span id="__span-6-1"><a href="#__codelineno-6-1" id="__codelineno-6-1" name="__codelineno-6-1"></a>Crea un módulo Terraform para <span class="ni">#selection</span> siguiendo estas reglas:
</span><span id="__span-6-2"><a href="#__codelineno-6-2" id="__codelineno-6-2" name="__codelineno-6-2"></a>
</span><span id="__span-6-3"><a href="#__codelineno-6-3" id="__codelineno-6-3" name="__codelineno-6-3"></a><span class="k">1.</span> Estructura estándar:
</span><span id="__span-6-4"><a href="#__codelineno-6-4" id="__codelineno-6-4" name="__codelineno-6-4"></a><span class="w">   </span><span class="k">-</span><span class="w"> </span><span class="sb">`main.tf`</span>: recursos principales
</span><span id="__span-6-5"><a href="#__codelineno-6-5" id="__codelineno-6-5" name="__codelineno-6-5"></a><span class="w">   </span><span class="k">-</span><span class="w"> </span><span class="sb">`variables.tf`</span>: inputs con validation
</span><span id="__span-6-6"><a href="#__codelineno-6-6" id="__codelineno-6-6" name="__codelineno-6-6"></a><span class="w">   </span><span class="k">-</span><span class="w"> </span><span class="sb">`outputs.tf`</span>: valores exportados
</span><span id="__span-6-7"><a href="#__codelineno-6-7" id="__codelineno-6-7" name="__codelineno-6-7"></a><span class="w">   </span><span class="k">-</span><span class="w"> </span><span class="sb">`versions.tf`</span>: provider constraints
</span><span id="__span-6-8"><a href="#__codelineno-6-8" id="__codelineno-6-8" name="__codelineno-6-8"></a><span class="w">   </span><span class="k">-</span><span class="w"> </span><span class="sb">`README.md`</span>: documentación
</span><span id="__span-6-9"><a href="#__codelineno-6-9" id="__codelineno-6-9" name="__codelineno-6-9"></a>
</span><span id="__span-6-10"><a href="#__codelineno-6-10" id="__codelineno-6-10" name="__codelineno-6-10"></a><span class="k">2.</span> Convenciones:
</span><span id="__span-6-11"><a href="#__codelineno-6-11" id="__codelineno-6-11" name="__codelineno-6-11"></a><span class="w">   </span><span class="k">-</span><span class="w"> </span>Variables: descripción, tipo, validación con condition
</span><span id="__span-6-12"><a href="#__codelineno-6-12" id="__codelineno-6-12" name="__codelineno-6-12"></a><span class="w">   </span><span class="k">-</span><span class="w"> </span>Outputs: descripción clara del valor exportado
</span><span id="__span-6-13"><a href="#__codelineno-6-13" id="__codelineno-6-13" name="__codelineno-6-13"></a><span class="w">   </span><span class="k">-</span><span class="w"> </span>Tags: usar merge() con var.tags
</span><span id="__span-6-14"><a href="#__codelineno-6-14" id="__codelineno-6-14" name="__codelineno-6-14"></a>
</span><span id="__span-6-15"><a href="#__codelineno-6-15" id="__codelineno-6-15" name="__codelineno-6-15"></a><span class="k">3.</span> Seguridad:
</span><span id="__span-6-16"><a href="#__codelineno-6-16" id="__codelineno-6-16" name="__codelineno-6-16"></a><span class="w">   </span><span class="k">-</span><span class="w"> </span>Encryption habilitado por defecto
</span><span id="__span-6-17"><a href="#__codelineno-6-17" id="__codelineno-6-17" name="__codelineno-6-17"></a><span class="w">   </span><span class="k">-</span><span class="w"> </span>HTTPS obligatorio para endpoints
</span><span id="__span-6-18"><a href="#__codelineno-6-18" id="__codelineno-6-18" name="__codelineno-6-18"></a><span class="w">   </span><span class="k">-</span><span class="w"> </span>Logging habilitado
</span><span id="__span-6-19"><a href="#__codelineno-6-19" id="__codelineno-6-19" name="__codelineno-6-19"></a>
</span><span id="__span-6-20"><a href="#__codelineno-6-20" id="__codelineno-6-20" name="__codelineno-6-20"></a><span class="k">4.</span> Documentación:
</span><span id="__span-6-21"><a href="#__codelineno-6-21" id="__codelineno-6-21" name="__codelineno-6-21"></a><span class="w">   </span><span class="k">-</span><span class="w"> </span>README con ejemplos de uso
</span><span id="__span-6-22"><a href="#__codelineno-6-22" id="__codelineno-6-22" name="__codelineno-6-22"></a><span class="w">   </span><span class="k">-</span><span class="w"> </span>Terraform-docs compatible
</span></code></pre></div>
<p>Archivo: <code>.github/prompts/fix-security.prompt.md</code></p>
<div class="language-markdown highlight"><pre><span></span><code><span id="__span-7-1"><a href="#__codelineno-7-1" id="__codelineno-7-1" name="__codelineno-7-1"></a>Analiza <span class="ni">#file</span> en busca de problemas de seguridad:
</span><span id="__span-7-2"><a href="#__codelineno-7-2" id="__codelineno-7-2" name="__codelineno-7-2"></a>
</span><span id="__span-7-3"><a href="#__codelineno-7-3" id="__codelineno-7-3" name="__codelineno-7-3"></a><span class="k">-</span><span class="w"> </span>Credenciales hardcoded
</span><span id="__span-7-4"><a href="#__codelineno-7-4" id="__codelineno-7-4" name="__codelineno-7-4"></a><span class="k">-</span><span class="w"> </span>Endpoints HTTP (deben ser HTTPS)
</span><span id="__span-7-5"><a href="#__codelineno-7-5" id="__codelineno-7-5" name="__codelineno-7-5"></a><span class="k">-</span><span class="w"> </span>Secretos en logs
</span><span id="__span-7-6"><a href="#__codelineno-7-6" id="__codelineno-7-6" name="__codelineno-7-6"></a><span class="k">-</span><span class="w"> </span>Permisos excesivos en RBAC
</span><span id="__span-7-7"><a href="#__codelineno-7-7" id="__codelineno-7-7" name="__codelineno-7-7"></a><span class="k">-</span><span class="w"> </span>Resources sin encryption
</span><span id="__span-7-8"><a href="#__codelineno-7-8" id="__codelineno-7-8" name="__codelineno-7-8"></a><span class="k">-</span><span class="w"> </span>Network security groups demasiado permisivos
</span><span id="__span-7-9"><a href="#__codelineno-7-9" id="__codelineno-7-9" name="__codelineno-7-9"></a>
</span><span id="__span-7-10"><a href="#__codelineno-7-10" id="__codelineno-7-10" name="__codelineno-7-10"></a>Proporciona fix aplicando principio de mínimo privilegio y Zero Trust.
</span></code></pre></div>
<h4 id="usar-prompt-files"><a class="toclink" href="2025/11/07/configurar-vscode-con-github-copilot-gu%C3%ADa-pr%C3%A1ctica/#usar-prompt-files">Usar Prompt Files</a></h4>
<p>En Copilot Chat:</p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-8-1"><a href="#__codelineno-8-1" id="__codelineno-8-1" name="__codelineno-8-1"></a># Referenciar prompt file
</span><span id="__span-8-2"><a href="#__codelineno-8-2" id="__codelineno-8-2" name="__codelineno-8-2"></a>#prompt:terraform-module
</span><span id="__span-8-3"><a href="#__codelineno-8-3" id="__codelineno-8-3" name="__codelineno-8-3"></a>
</span><span id="__span-8-4"><a href="#__codelineno-8-4" id="__codelineno-8-4" name="__codelineno-8-4"></a># Combinar con referencias
</span><span id="__span-8-5"><a href="#__codelineno-8-5" id="__codelineno-8-5" name="__codelineno-8-5"></a>#prompt:fix-security #file:main.tf
</span><span id="__span-8-6"><a href="#__codelineno-8-6" id="__codelineno-8-6" name="__codelineno-8-6"></a>
</span><span id="__span-8-7"><a href="#__codelineno-8-7" id="__codelineno-8-7" name="__codelineno-8-7"></a># Agregar contexto adicional
</span><span id="__span-8-8"><a href="#__codelineno-8-8" id="__codelineno-8-8" name="__codelineno-8-8"></a>#prompt:terraform-module para Azure Storage con lifecycle policies
</span></code></pre></div>
<p>Desde UI:</p>
<ol>
<li>Abrir Copilot Chat (<code>Ctrl+Alt+I</code>)</li>
<li>Click en botón <code>+</code></li>
<li>Seleccionar "Prompt Files"</li>
<li>Elegir prompt deseado</li>
</ol>
<h3 id="conventional-commits-con-copilot"><a class="toclink" href="2025/11/07/configurar-vscode-con-github-copilot-gu%C3%ADa-pr%C3%A1ctica/#conventional-commits-con-copilot">Conventional Commits con Copilot</a></h3>
<p>GitHub Copilot puede generar mensajes de commit siguiendo conventional commits automáticamente.</p>
<h4 id="configuracion-para-conventional-commits"><a class="toclink" href="2025/11/07/configurar-vscode-con-github-copilot-gu%C3%ADa-pr%C3%A1ctica/#configuracion-para-conventional-commits">Configuración para Conventional Commits</a></h4>
<p><strong>Opción 1: Settings específico para commits</strong> (recomendado)</p>
<p>Desde VS Code 1.102+, usar setting dedicado:</p>
<div class="language-json highlight"><pre><span></span><code><span id="__span-9-1"><a href="#__codelineno-9-1" id="__codelineno-9-1" name="__codelineno-9-1"></a><span class="p">{</span>
</span><span id="__span-9-2"><a href="#__codelineno-9-2" id="__codelineno-9-2" name="__codelineno-9-2"></a><span class="w">  </span><span class="nt">"github.copilot.chat.commitMessageGeneration.instructions"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
</span><span id="__span-9-3"><a href="#__codelineno-9-3" id="__codelineno-9-3" name="__codelineno-9-3"></a><span class="w">    </span><span class="p">{</span>
</span><span id="__span-9-4"><a href="#__codelineno-9-4" id="__codelineno-9-4" name="__codelineno-9-4"></a><span class="w">      </span><span class="nt">"text"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Seguir Conventional Commits 1.0.0: &lt;type&gt;(&lt;scope&gt;): &lt;description&gt;"</span>
</span><span id="__span-9-5"><a href="#__codelineno-9-5" id="__codelineno-9-5" name="__codelineno-9-5"></a><span class="w">    </span><span class="p">},</span>
</span><span id="__span-9-6"><a href="#__codelineno-9-6" id="__codelineno-9-6" name="__codelineno-9-6"></a><span class="w">    </span><span class="p">{</span>
</span><span id="__span-9-7"><a href="#__codelineno-9-7" id="__codelineno-9-7" name="__codelineno-9-7"></a><span class="w">      </span><span class="nt">"file"</span><span class="p">:</span><span class="w"> </span><span class="s2">".github/instructions/commit-standards.md"</span>
</span><span id="__span-9-8"><a href="#__codelineno-9-8" id="__codelineno-9-8" name="__codelineno-9-8"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-9-9"><a href="#__codelineno-9-9" id="__codelineno-9-9" name="__codelineno-9-9"></a><span class="w">  </span><span class="p">]</span>
</span><span id="__span-9-10"><a href="#__codelineno-9-10" id="__codelineno-9-10" name="__codelineno-9-10"></a><span class="p">}</span>
</span></code></pre></div>
<p><strong>Opción 2: Agregar a <code>.github/copilot-instructions.md</code></strong></p>
<div class="language-markdown highlight"><pre><span></span><code><span id="__span-10-1"><a href="#__codelineno-10-1" id="__codelineno-10-1" name="__codelineno-10-1"></a><span class="gu">## Git Commits</span>
</span><span id="__span-10-2"><a href="#__codelineno-10-2" id="__codelineno-10-2" name="__codelineno-10-2"></a>
</span><span id="__span-10-3"><a href="#__codelineno-10-3" id="__codelineno-10-3" name="__codelineno-10-3"></a>Todos los commits deben seguir Conventional Commits 1.0.0:
</span><span id="__span-10-4"><a href="#__codelineno-10-4" id="__codelineno-10-4" name="__codelineno-10-4"></a>
</span><span id="__span-10-5"><a href="#__codelineno-10-5" id="__codelineno-10-5" name="__codelineno-10-5"></a><span class="gs">**Formato**</span>: <span class="sb">`&lt;type&gt;(&lt;scope&gt;): &lt;description&gt;`</span>
</span><span id="__span-10-6"><a href="#__codelineno-10-6" id="__codelineno-10-6" name="__codelineno-10-6"></a>
</span><span id="__span-10-7"><a href="#__codelineno-10-7" id="__codelineno-10-7" name="__codelineno-10-7"></a><span class="gs">**Types permitidos**</span>:
</span><span id="__span-10-8"><a href="#__codelineno-10-8" id="__codelineno-10-8" name="__codelineno-10-8"></a>
</span><span id="__span-10-9"><a href="#__codelineno-10-9" id="__codelineno-10-9" name="__codelineno-10-9"></a><span class="k">-</span><span class="w"> </span><span class="sb">`feat`</span>: Nueva funcionalidad
</span><span id="__span-10-10"><a href="#__codelineno-10-10" id="__codelineno-10-10" name="__codelineno-10-10"></a><span class="k">-</span><span class="w"> </span><span class="sb">`fix`</span>: Corrección de bug
</span><span id="__span-10-11"><a href="#__codelineno-10-11" id="__codelineno-10-11" name="__codelineno-10-11"></a><span class="k">-</span><span class="w"> </span><span class="sb">`docs`</span>: Cambios en documentación
</span><span id="__span-10-12"><a href="#__codelineno-10-12" id="__codelineno-10-12" name="__codelineno-10-12"></a><span class="k">-</span><span class="w"> </span><span class="sb">`chore`</span>: Tareas de mantenimiento (deps, config)
</span><span id="__span-10-13"><a href="#__codelineno-10-13" id="__codelineno-10-13" name="__codelineno-10-13"></a><span class="k">-</span><span class="w"> </span><span class="sb">`refactor`</span>: Refactorización sin cambio funcional
</span><span id="__span-10-14"><a href="#__codelineno-10-14" id="__codelineno-10-14" name="__codelineno-10-14"></a><span class="k">-</span><span class="w"> </span><span class="sb">`test`</span>: Añadir o modificar tests
</span><span id="__span-10-15"><a href="#__codelineno-10-15" id="__codelineno-10-15" name="__codelineno-10-15"></a><span class="k">-</span><span class="w"> </span><span class="sb">`ci`</span>: Cambios en CI/CD
</span><span id="__span-10-16"><a href="#__codelineno-10-16" id="__codelineno-10-16" name="__codelineno-10-16"></a><span class="k">-</span><span class="w"> </span><span class="sb">`perf`</span>: Mejoras de performance
</span><span id="__span-10-17"><a href="#__codelineno-10-17" id="__codelineno-10-17" name="__codelineno-10-17"></a>
</span><span id="__span-10-18"><a href="#__codelineno-10-18" id="__codelineno-10-18" name="__codelineno-10-18"></a><span class="gs">**Scope**</span>: Área del proyecto afectada (terraform, github-actions, scripts, docs)
</span><span id="__span-10-19"><a href="#__codelineno-10-19" id="__codelineno-10-19" name="__codelineno-10-19"></a>
</span><span id="__span-10-20"><a href="#__codelineno-10-20" id="__codelineno-10-20" name="__codelineno-10-20"></a><span class="gs">**Ejemplos**</span>:
</span><span id="__span-10-21"><a href="#__codelineno-10-21" id="__codelineno-10-21" name="__codelineno-10-21"></a>
</span><span id="__span-10-22"><a href="#__codelineno-10-22" id="__codelineno-10-22" name="__codelineno-10-22"></a>```text
</span><span id="__span-10-23"><a href="#__codelineno-10-23" id="__codelineno-10-23" name="__codelineno-10-23"></a>feat(terraform): add Azure Front Door module
</span><span id="__span-10-24"><a href="#__codelineno-10-24" id="__codelineno-10-24" name="__codelineno-10-24"></a>fix(github-actions): correct OIDC authentication
</span><span id="__span-10-25"><a href="#__codelineno-10-25" id="__codelineno-10-25" name="__codelineno-10-25"></a>docs(readme): update deployment instructions
</span><span id="__span-10-26"><a href="#__codelineno-10-26" id="__codelineno-10-26" name="__codelineno-10-26"></a>chore(deps): bump terraform-azurerm to 4.0
</span></code></pre></div>
<p><strong>Breaking changes</strong>: Usar <code>!</code> o footer <code>BREAKING CHANGE:</code></p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-11-1"><a href="#__codelineno-11-1" id="__codelineno-11-1" name="__codelineno-11-1"></a>feat(terraform)!: migrate to azurerm 4.0
</span><span id="__span-11-2"><a href="#__codelineno-11-2" id="__codelineno-11-2" name="__codelineno-11-2"></a>
</span><span id="__span-11-3"><a href="#__codelineno-11-3" id="__codelineno-11-3" name="__codelineno-11-3"></a>BREAKING CHANGE: provider azurerm 3.x no longer supported
</span></code></pre></div>
<h4 id="generar-commits-con-copilot"><a class="toclink" href="2025/11/07/configurar-vscode-con-github-copilot-gu%C3%ADa-pr%C3%A1ctica/#generar-commits-con-copilot">Generar commits con Copilot</a></h4>
<p>En Source Control panel de VSCode:</p>
<ol>
<li>Hacer cambios en archivos</li>
<li>Stage changes</li>
<li>Click en icono ✨ (Sparkle) en message box</li>
<li>Copilot genera mensaje siguiendo conventional commits</li>
</ol>
<p>Desde terminal con Git:</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-12-1"><a href="#__codelineno-12-1" id="__codelineno-12-1" name="__codelineno-12-1"></a><span class="c1"># Copilot CLI (requiere instalación adicional)</span>
</span><span id="__span-12-2"><a href="#__codelineno-12-2" id="__codelineno-12-2" name="__codelineno-12-2"></a>gh<span class="w"> </span>copilot<span class="w"> </span>suggest<span class="w"> </span><span class="s2">"git commit message for staged changes"</span>
</span></code></pre></div>
<p><strong>Ejemplo de mensaje generado</strong>:</p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-13-1"><a href="#__codelineno-13-1" id="__codelineno-13-1" name="__codelineno-13-1"></a>feat(terraform): add network security group for AKS
</span><span id="__span-13-2"><a href="#__codelineno-13-2" id="__codelineno-13-2" name="__codelineno-13-2"></a>
</span><span id="__span-13-3"><a href="#__codelineno-13-3" id="__codelineno-13-3" name="__codelineno-13-3"></a>- Create NSG with default deny rules
</span><span id="__span-13-4"><a href="#__codelineno-13-4" id="__codelineno-13-4" name="__codelineno-13-4"></a>- Allow only required ports (443, 80)
</span><span id="__span-13-5"><a href="#__codelineno-13-5" id="__codelineno-13-5" name="__codelineno-13-5"></a>- Associate to AKS subnet
</span><span id="__span-13-6"><a href="#__codelineno-13-6" id="__codelineno-13-6" name="__codelineno-13-6"></a>- Add diagnostic settings for logging
</span></code></pre></div>
<h3 id="modos-de-copilot-chat"><a class="toclink" href="2025/11/07/configurar-vscode-con-github-copilot-gu%C3%ADa-pr%C3%A1ctica/#modos-de-copilot-chat">Modos de Copilot Chat</a></h3>
<p>Copilot ofrece tres modos de trabajo según el tipo de tarea.</p>
<h4 id="ask-mode-modo-pregunta"><a class="toclink" href="2025/11/07/configurar-vscode-con-github-copilot-gu%C3%ADa-pr%C3%A1ctica/#ask-mode-modo-pregunta">Ask Mode (Modo pregunta)</a></h4>
<p><strong>Cuándo usar</strong>: Consultas, explicaciones, búsqueda de información.</p>
<p><strong>Características</strong>:</p>
<ul>
<li>Responde en el panel de chat</li>
<li>No modifica archivos</li>
<li>Proporciona ejemplos de código copiables</li>
</ul>
<p><strong>Ejemplos</strong>:</p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-14-1"><a href="#__codelineno-14-1" id="__codelineno-14-1" name="__codelineno-14-1"></a># Explicar código
</span><span id="__span-14-2"><a href="#__codelineno-14-2" id="__codelineno-14-2" name="__codelineno-14-2"></a>Explica qué hace #selection
</span><span id="__span-14-3"><a href="#__codelineno-14-3" id="__codelineno-14-3" name="__codelineno-14-3"></a>
</span><span id="__span-14-4"><a href="#__codelineno-14-4" id="__codelineno-14-4" name="__codelineno-14-4"></a># Mejores prácticas
</span><span id="__span-14-5"><a href="#__codelineno-14-5" id="__codelineno-14-5" name="__codelineno-14-5"></a>¿Cuáles son las mejores prácticas para Azure Storage lifecycle policies?
</span><span id="__span-14-6"><a href="#__codelineno-14-6" id="__codelineno-14-6" name="__codelineno-14-6"></a>
</span><span id="__span-14-7"><a href="#__codelineno-14-7" id="__codelineno-14-7" name="__codelineno-14-7"></a># Comparar opciones
</span><span id="__span-14-8"><a href="#__codelineno-14-8" id="__codelineno-14-8" name="__codelineno-14-8"></a>Diferencia entre Azure Container Apps y AKS
</span><span id="__span-14-9"><a href="#__codelineno-14-9" id="__codelineno-14-9" name="__codelineno-14-9"></a>
</span><span id="__span-14-10"><a href="#__codelineno-14-10" id="__codelineno-14-10" name="__codelineno-14-10"></a># Troubleshooting
</span><span id="__span-14-11"><a href="#__codelineno-14-11" id="__codelineno-14-11" name="__codelineno-14-11"></a>¿Por qué falla este módulo de Terraform? #file:main.tf
</span></code></pre></div>
<h4 id="edit-mode-modo-edicion"><a class="toclink" href="2025/11/07/configurar-vscode-con-github-copilot-gu%C3%ADa-pr%C3%A1ctica/#edit-mode-modo-edicion">Edit Mode (Modo edición)</a></h4>
<p><strong>Cuándo usar</strong>: Modificar código existente, refactorizar.</p>
<p><strong>Características</strong>:</p>
<ul>
<li>Propone cambios con preview diff</li>
<li>Puedes aceptar/rechazar modificaciones</li>
<li>Trabaja en archivos abiertos</li>
</ul>
<p><strong>Activar Edit Mode</strong>:</p>
<ol>
<li>Seleccionar código</li>
<li><code>Ctrl+I</code> (inline chat)</li>
<li>Escribir instrucción</li>
</ol>
<p><strong>Ejemplos</strong>:</p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-15-1"><a href="#__codelineno-15-1" id="__codelineno-15-1" name="__codelineno-15-1"></a># Refactor
</span><span id="__span-15-2"><a href="#__codelineno-15-2" id="__codelineno-15-2" name="__codelineno-15-2"></a>Refactoriza #selection para usar módulos reutilizables
</span><span id="__span-15-3"><a href="#__codelineno-15-3" id="__codelineno-15-3" name="__codelineno-15-3"></a>
</span><span id="__span-15-4"><a href="#__codelineno-15-4" id="__codelineno-15-4" name="__codelineno-15-4"></a># Optimizar
</span><span id="__span-15-5"><a href="#__codelineno-15-5" id="__codelineno-15-5" name="__codelineno-15-5"></a>Optimiza este loop para mejor performance
</span><span id="__span-15-6"><a href="#__codelineno-15-6" id="__codelineno-15-6" name="__codelineno-15-6"></a>
</span><span id="__span-15-7"><a href="#__codelineno-15-7" id="__codelineno-15-7" name="__codelineno-15-7"></a># Agregar tests
</span><span id="__span-15-8"><a href="#__codelineno-15-8" id="__codelineno-15-8" name="__codelineno-15-8"></a>Genera unit tests para #selection usando pytest
</span><span id="__span-15-9"><a href="#__codelineno-15-9" id="__codelineno-15-9" name="__codelineno-15-9"></a>
</span><span id="__span-15-10"><a href="#__codelineno-15-10" id="__codelineno-15-10" name="__codelineno-15-10"></a># Documentar
</span><span id="__span-15-11"><a href="#__codelineno-15-11" id="__codelineno-15-11" name="__codelineno-15-11"></a>Agrega docstrings a todas las funciones en #file
</span></code></pre></div>
<h4 id="agent-mode-modo-agente"><a class="toclink" href="2025/11/07/configurar-vscode-con-github-copilot-gu%C3%ADa-pr%C3%A1ctica/#agent-mode-modo-agente">Agent Mode (Modo agente)</a></h4>
<p><strong>Cuándo usar</strong>: Tareas complejas multi-archivo, workflows completos.</p>
<p><strong>Características</strong>:</p>
<ul>
<li>Ejecuta acciones en todo el workspace</li>
<li>Crea/edita múltiples archivos</li>
<li>Ejecuta comandos en terminal</li>
<li>Requiere confirmación en pasos críticos</li>
</ul>
<p><strong>Activar Agent Mode</strong>:</p>
<ol>
<li>Abrir Copilot Chat</li>
<li>Selector de modo → <strong>Agent</strong></li>
<li>Confirmar modo activo</li>
</ol>
<p><strong>Habilitar Agent Mode</strong>:</p>
<p>VSCode Settings (<code>Ctrl+,</code>):</p>
<div class="language-json highlight"><pre><span></span><code><span id="__span-16-1"><a href="#__codelineno-16-1" id="__codelineno-16-1" name="__codelineno-16-1"></a><span class="p">{</span>
</span><span id="__span-16-2"><a href="#__codelineno-16-2" id="__codelineno-16-2" name="__codelineno-16-2"></a><span class="w">  </span><span class="nt">"chat.agent.enabled"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span>
</span><span id="__span-16-3"><a href="#__codelineno-16-3" id="__codelineno-16-3" name="__codelineno-16-3"></a><span class="w">  </span><span class="nt">"chat.agent.maxRequests"</span><span class="p">:</span><span class="w"> </span><span class="mi">128</span>
</span><span id="__span-16-4"><a href="#__codelineno-16-4" id="__codelineno-16-4" name="__codelineno-16-4"></a><span class="p">}</span>
</span></code></pre></div>
<p><strong>Ejemplos de tareas con Agent Mode</strong>:</p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-17-1"><a href="#__codelineno-17-1" id="__codelineno-17-1" name="__codelineno-17-1"></a># Crear proyecto completo
</span><span id="__span-17-2"><a href="#__codelineno-17-2" id="__codelineno-17-2" name="__codelineno-17-2"></a>Crea un proyecto Terraform para desplegar Azure Container Apps con:
</span><span id="__span-17-3"><a href="#__codelineno-17-3" id="__codelineno-17-3" name="__codelineno-17-3"></a>- Virtual Network con subnets
</span><span id="__span-17-4"><a href="#__codelineno-17-4" id="__codelineno-17-4" name="__codelineno-17-4"></a>- Azure Container Registry
</span><span id="__span-17-5"><a href="#__codelineno-17-5" id="__codelineno-17-5" name="__codelineno-17-5"></a>- Log Analytics Workspace
</span><span id="__span-17-6"><a href="#__codelineno-17-6" id="__codelineno-17-6" name="__codelineno-17-6"></a>- Application Insights
</span><span id="__span-17-7"><a href="#__codelineno-17-7" id="__codelineno-17-7" name="__codelineno-17-7"></a>- GitHub Actions workflow para CI/CD
</span><span id="__span-17-8"><a href="#__codelineno-17-8" id="__codelineno-17-8" name="__codelineno-17-8"></a>
</span><span id="__span-17-9"><a href="#__codelineno-17-9" id="__codelineno-17-9" name="__codelineno-17-9"></a># Migrar código
</span><span id="__span-17-10"><a href="#__codelineno-17-10" id="__codelineno-17-10" name="__codelineno-17-10"></a>Migra todos los recursos en #folder de azurerm 3.x a 4.x
</span><span id="__span-17-11"><a href="#__codelineno-17-11" id="__codelineno-17-11" name="__codelineno-17-11"></a>
</span><span id="__span-17-12"><a href="#__codelineno-17-12" id="__codelineno-17-12" name="__codelineno-17-12"></a># Generar documentación
</span><span id="__span-17-13"><a href="#__codelineno-17-13" id="__codelineno-17-13" name="__codelineno-17-13"></a>Genera README.md completo para este repositorio incluyendo:
</span><span id="__span-17-14"><a href="#__codelineno-17-14" id="__codelineno-17-14" name="__codelineno-17-14"></a>- Descripción
</span><span id="__span-17-15"><a href="#__codelineno-17-15" id="__codelineno-17-15" name="__codelineno-17-15"></a>- Arquitectura (diagrama Mermaid)
</span><span id="__span-17-16"><a href="#__codelineno-17-16" id="__codelineno-17-16" name="__codelineno-17-16"></a>- Prerequisites
</span><span id="__span-17-17"><a href="#__codelineno-17-17" id="__codelineno-17-17" name="__codelineno-17-17"></a>- Deployment steps
</span><span id="__span-17-18"><a href="#__codelineno-17-18" id="__codelineno-17-18" name="__codelineno-17-18"></a>- Troubleshooting
</span><span id="__span-17-19"><a href="#__codelineno-17-19" id="__codelineno-17-19" name="__codelineno-17-19"></a>
</span><span id="__span-17-20"><a href="#__codelineno-17-20" id="__codelineno-17-20" name="__codelineno-17-20"></a># Implementar tests
</span><span id="__span-17-21"><a href="#__codelineno-17-21" id="__codelineno-17-21" name="__codelineno-17-21"></a>Crea suite completa de tests para todos los módulos Terraform
</span></code></pre></div>
<p><strong>Best Practices para Agent Mode</strong>:</p>
<ol>
<li><strong>Prompts granulares</strong>: Dividir tareas grandes en pasos pequeños</li>
<li><strong>Permitir que Copilot trabaje</strong>: Dejar que ejecute tareas en vez de hacerlas manualmente</li>
<li><strong>Revisar cambios</strong>: Validar modificaciones antes de commit</li>
<li><strong>Configurar auto-approve</strong> (opcional):</li>
</ol>
<div class="language-json highlight"><pre><span></span><code><span id="__span-18-1"><a href="#__codelineno-18-1" id="__codelineno-18-1" name="__codelineno-18-1"></a><span class="p">{</span>
</span><span id="__span-18-2"><a href="#__codelineno-18-2" id="__codelineno-18-2" name="__codelineno-18-2"></a><span class="w">  </span><span class="nt">"chat.tools.autoApprove"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span>
</span><span id="__span-18-3"><a href="#__codelineno-18-3" id="__codelineno-18-3" name="__codelineno-18-3"></a><span class="p">}</span>
</span></code></pre></div>
<h3 id="slash-commands"><a class="toclink" href="2025/11/07/configurar-vscode-con-github-copilot-gu%C3%ADa-pr%C3%A1ctica/#slash-commands">Slash Commands</a></h3>
<p>Comandos rápidos para tareas comunes sin escribir prompts largos.</p>
<table>
<thead>
<tr>
<th>Command</th>
<th>Descripción</th>
<th>Ejemplo</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>/doc</code></td>
<td>Generar documentación</td>
<td>Seleccionar función → <code>/doc</code></td>
</tr>
<tr>
<td><code>/explain</code></td>
<td>Explicar código</td>
<td>Seleccionar bloque → <code>/explain</code></td>
</tr>
<tr>
<td><code>/fix</code></td>
<td>Proponer correcciones</td>
<td>Seleccionar error → <code>/fix</code></td>
</tr>
<tr>
<td><code>/tests</code></td>
<td>Generar unit tests</td>
<td>Seleccionar función → <code>/tests using pytest</code></td>
</tr>
<tr>
<td><code>/optimize</code></td>
<td>Optimizar performance</td>
<td>Seleccionar loop → <code>/optimize</code></td>
</tr>
<tr>
<td><code>/generate</code></td>
<td>Generar código nuevo</td>
<td><code>/generate Azure Bicep for Storage Account</code></td>
</tr>
</tbody>
</table>
<p><strong>Uso combinado con contexto</strong>:</p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-19-1"><a href="#__codelineno-19-1" id="__codelineno-19-1" name="__codelineno-19-1"></a># Con archivos
</span><span id="__span-19-2"><a href="#__codelineno-19-2" id="__codelineno-19-2" name="__codelineno-19-2"></a>/explain #file:main.tf
</span><span id="__span-19-3"><a href="#__codelineno-19-3" id="__codelineno-19-3" name="__codelineno-19-3"></a>
</span><span id="__span-19-4"><a href="#__codelineno-19-4" id="__codelineno-19-4" name="__codelineno-19-4"></a># Con selección
</span><span id="__span-19-5"><a href="#__codelineno-19-5" id="__codelineno-19-5" name="__codelineno-19-5"></a>/tests #selection using XUnit
</span><span id="__span-19-6"><a href="#__codelineno-19-6" id="__codelineno-19-6" name="__codelineno-19-6"></a>
</span><span id="__span-19-7"><a href="#__codelineno-19-7" id="__codelineno-19-7" name="__codelineno-19-7"></a># Con scope
</span><span id="__span-19-8"><a href="#__codelineno-19-8" id="__codelineno-19-8" name="__codelineno-19-8"></a>/fix the authentication logic in #file:auth.py
</span></code></pre></div>
<h3 id="herramientas-de-agent-mode-para-azure"><a class="toclink" href="2025/11/07/configurar-vscode-con-github-copilot-gu%C3%ADa-pr%C3%A1ctica/#herramientas-de-agent-mode-para-azure">Herramientas de Agent Mode para Azure</a></h3>
<p>Cuando trabajas con recursos Azure, Agent Mode tiene herramientas específicas.</p>
<p><strong>Verificar herramientas disponibles</strong>:</p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-20-1"><a href="#__codelineno-20-1" id="__codelineno-20-1" name="__codelineno-20-1"></a>What are your tools?
</span></code></pre></div>
<p><strong>Herramientas Azure</strong>:</p>
<ul>
<li><strong>Azure CLI tools</strong>: Generar comandos <code>az</code></li>
<li><strong>Terraform tools</strong>: Crear/validar configuraciones</li>
<li><strong>GitHub Actions tools</strong>: Generar workflows</li>
</ul>
<p><strong>Ejemplo práctico</strong>:</p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-21-1"><a href="#__codelineno-21-1" id="__codelineno-21-1" name="__codelineno-21-1"></a># Generar comando Azure CLI
</span><span id="__span-21-2"><a href="#__codelineno-21-2" id="__codelineno-21-2" name="__codelineno-21-2"></a>¿Cuál es el comando az para listar todas mis storage accounts ordenadas por región?
</span></code></pre></div>
<p>Copilot genera:</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-22-1"><a href="#__codelineno-22-1" id="__codelineno-22-1" name="__codelineno-22-1"></a>az<span class="w"> </span>storage<span class="w"> </span>account<span class="w"> </span>list<span class="w"> </span>--query<span class="w"> </span><span class="s2">"sort_by([], &amp;location)[].{Name:name, Location:location}"</span><span class="w"> </span>--output<span class="w"> </span>table
</span></code></pre></div>
<h3 id="mejores-practicas"><a class="toclink" href="2025/11/07/configurar-vscode-con-github-copilot-gu%C3%ADa-pr%C3%A1ctica/#mejores-practicas">Mejores prácticas</a></h3>
<h4 id="contexto-efectivo"><a class="toclink" href="2025/11/07/configurar-vscode-con-github-copilot-gu%C3%ADa-pr%C3%A1ctica/#contexto-efectivo">Contexto efectivo</a></h4>
<p><strong>Proporcionar referencias específicas</strong>:</p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-23-1"><a href="#__codelineno-23-1" id="__codelineno-23-1" name="__codelineno-23-1"></a>❌ MALO:
</span><span id="__span-23-2"><a href="#__codelineno-23-2" id="__codelineno-23-2" name="__codelineno-23-2"></a>"Explica este código"
</span><span id="__span-23-3"><a href="#__codelineno-23-3" id="__codelineno-23-3" name="__codelineno-23-3"></a>
</span><span id="__span-23-4"><a href="#__codelineno-23-4" id="__codelineno-23-4" name="__codelineno-23-4"></a>✅ BUENO:
</span><span id="__span-23-5"><a href="#__codelineno-23-5" id="__codelineno-23-5" name="__codelineno-23-5"></a>"Explica #selection enfocándote en el flujo de autenticación OIDC"
</span></code></pre></div>
<p><strong>Usar scope adecuado</strong>:</p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-24-1"><a href="#__codelineno-24-1" id="__codelineno-24-1" name="__codelineno-24-1"></a># Archivo completo
</span><span id="__span-24-2"><a href="#__codelineno-24-2" id="__codelineno-24-2" name="__codelineno-24-2"></a>#file:main.tf
</span><span id="__span-24-3"><a href="#__codelineno-24-3" id="__codelineno-24-3" name="__codelineno-24-3"></a>
</span><span id="__span-24-4"><a href="#__codelineno-24-4" id="__codelineno-24-4" name="__codelineno-24-4"></a># Función específica
</span><span id="__span-24-5"><a href="#__codelineno-24-5" id="__codelineno-24-5" name="__codelineno-24-5"></a>#selection
</span><span id="__span-24-6"><a href="#__codelineno-24-6" id="__codelineno-24-6" name="__codelineno-24-6"></a>
</span><span id="__span-24-7"><a href="#__codelineno-24-7" id="__codelineno-24-7" name="__codelineno-24-7"></a># Múltiples archivos
</span><span id="__span-24-8"><a href="#__codelineno-24-8" id="__codelineno-24-8" name="__codelineno-24-8"></a>#file:variables.tf #file:outputs.tf
</span><span id="__span-24-9"><a href="#__codelineno-24-9" id="__codelineno-24-9" name="__codelineno-24-9"></a>
</span><span id="__span-24-10"><a href="#__codelineno-24-10" id="__codelineno-24-10" name="__codelineno-24-10"></a># Workspace
</span><span id="__span-24-11"><a href="#__codelineno-24-11" id="__codelineno-24-11" name="__codelineno-24-11"></a>#codebase (usa con precaución, puede ser lento)
</span></code></pre></div>
<h4 id="organizacion-de-instrucciones"><a class="toclink" href="2025/11/07/configurar-vscode-con-github-copilot-gu%C3%ADa-pr%C3%A1ctica/#organizacion-de-instrucciones">Organización de instrucciones</a></h4>
<p><strong>Por archivo de instrucciones</strong>:</p>
<ul>
<li><strong>Global</strong> (<code>.github/copilot-instructions.md</code>): Principios generales del proyecto</li>
<li><strong>Por lenguaje</strong> (<code>.github/instructions/python.instructions.md</code>): Standards específicos</li>
<li><strong>Por framework</strong> (<code>.github/instructions/terraform.instructions.md</code>): Convenciones del stack</li>
<li><strong>Por tarea</strong> (<code>.github/instructions/security-review.instructions.md</code>): Workflows específicos</li>
</ul>
<p><strong>Usar <code>applyTo</code> patterns efectivos</strong>:</p>
<div class="language-markdown highlight"><pre><span></span><code><span id="__span-25-1"><a href="#__codelineno-25-1" id="__codelineno-25-1" name="__codelineno-25-1"></a>---
</span><span id="__span-25-2"><a href="#__codelineno-25-2" id="__codelineno-25-2" name="__codelineno-25-2"></a><span class="gu">applyTo: "**/*.{ts,tsx}"  # TypeScript y React</span>
</span><span id="__span-25-3"><a href="#__codelineno-25-3" id="__codelineno-25-3" name="__codelineno-25-3"></a><span class="gu">---</span>
</span><span id="__span-25-4"><a href="#__codelineno-25-4" id="__codelineno-25-4" name="__codelineno-25-4"></a>
</span><span id="__span-25-5"><a href="#__codelineno-25-5" id="__codelineno-25-5" name="__codelineno-25-5"></a>---
</span><span id="__span-25-6"><a href="#__codelineno-25-6" id="__codelineno-25-6" name="__codelineno-25-6"></a><span class="gu">applyTo: "src/backend/**"  # Backend folder</span>
</span><span id="__span-25-7"><a href="#__codelineno-25-7" id="__codelineno-25-7" name="__codelineno-25-7"></a><span class="gu">---</span>
</span><span id="__span-25-8"><a href="#__codelineno-25-8" id="__codelineno-25-8" name="__codelineno-25-8"></a>
</span><span id="__span-25-9"><a href="#__codelineno-25-9" id="__codelineno-25-9" name="__codelineno-25-9"></a>---
</span><span id="__span-25-10"><a href="#__codelineno-25-10" id="__codelineno-25-10" name="__codelineno-25-10"></a><span class="gu">applyTo: "terraform/**/*.tf"  # Solo Terraform files</span>
</span><span id="__span-25-11"><a href="#__codelineno-25-11" id="__codelineno-25-11" name="__codelineno-25-11"></a><span class="gu">---</span>
</span></code></pre></div>
<h4 id="seguridad"><a class="toclink" href="2025/11/07/configurar-vscode-con-github-copilot-gu%C3%ADa-pr%C3%A1ctica/#seguridad">Seguridad</a></h4>
<p><strong>Validar código generado</strong>:</p>
<ul>
<li>No confiar ciegamente en sugerencias</li>
<li>Revisar permisos y roles RBAC</li>
<li>Verificar que no expone credenciales</li>
<li>Comprobar configuraciones de red</li>
</ul>
<p><strong>Ejemplo de validación</strong>:</p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-26-1"><a href="#__codelineno-26-1" id="__codelineno-26-1" name="__codelineno-26-1"></a>Analiza #file:main.tf y verifica:
</span><span id="__span-26-2"><a href="#__codelineno-26-2" id="__codelineno-26-2" name="__codelineno-26-2"></a>1. ¿Hay credenciales hardcoded?
</span><span id="__span-26-3"><a href="#__codelineno-26-3" id="__codelineno-26-3" name="__codelineno-26-3"></a>2. ¿Todos los recursos tienen encryption habilitado?
</span><span id="__span-26-4"><a href="#__codelineno-26-4" id="__codelineno-26-4" name="__codelineno-26-4"></a>3. ¿Network security groups siguen principio de mínimo privilegio?
</span><span id="__span-26-5"><a href="#__codelineno-26-5" id="__codelineno-26-5" name="__codelineno-26-5"></a>4. ¿Están definidos todos los tags obligatorios?
</span></code></pre></div>
<h4 id="iteracion-incremental"><a class="toclink" href="2025/11/07/configurar-vscode-con-github-copilot-gu%C3%ADa-pr%C3%A1ctica/#iteracion-incremental">Iteración incremental</a></h4>
<p><strong>Trabajar por pasos</strong>:</p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-27-1"><a href="#__codelineno-27-1" id="__codelineno-27-1" name="__codelineno-27-1"></a># ❌ Prompt demasiado amplio:
</span><span id="__span-27-2"><a href="#__codelineno-27-2" id="__codelineno-27-2" name="__codelineno-27-2"></a>"Crea infraestructura completa para microservicios en Azure"
</span><span id="__span-27-3"><a href="#__codelineno-27-3" id="__codelineno-27-3" name="__codelineno-27-3"></a>
</span><span id="__span-27-4"><a href="#__codelineno-27-4" id="__codelineno-27-4" name="__codelineno-27-4"></a># ✅ Iteración incremental:
</span><span id="__span-27-5"><a href="#__codelineno-27-5" id="__codelineno-27-5" name="__codelineno-27-5"></a># Paso 1:
</span><span id="__span-27-6"><a href="#__codelineno-27-6" id="__codelineno-27-6" name="__codelineno-27-6"></a>"Crea networking base: VNET con 3 subnets (app, data, management)"
</span><span id="__span-27-7"><a href="#__codelineno-27-7" id="__codelineno-27-7" name="__codelineno-27-7"></a>
</span><span id="__span-27-8"><a href="#__codelineno-27-8" id="__codelineno-27-8" name="__codelineno-27-8"></a># Paso 2:
</span><span id="__span-27-9"><a href="#__codelineno-27-9" id="__codelineno-27-9" name="__codelineno-27-9"></a>"Agrega Azure Container Apps environment con internal VNET"
</span><span id="__span-27-10"><a href="#__codelineno-27-10" id="__codelineno-27-10" name="__codelineno-27-10"></a>
</span><span id="__span-27-11"><a href="#__codelineno-27-11" id="__codelineno-27-11" name="__codelineno-27-11"></a># Paso 3:
</span><span id="__span-27-12"><a href="#__codelineno-27-12" id="__codelineno-27-12" name="__codelineno-27-12"></a>"Configura Application Gateway con WAF"
</span></code></pre></div>
<h4 id="validacion-contra-docs-oficiales"><a class="toclink" href="2025/11/07/configurar-vscode-con-github-copilot-gu%C3%ADa-pr%C3%A1ctica/#validacion-contra-docs-oficiales">Validación contra docs oficiales</a></h4>
<p>Copilot puede estar desactualizado. Validar contra documentación oficial:</p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-28-1"><a href="#__codelineno-28-1" id="__codelineno-28-1" name="__codelineno-28-1"></a># Verificar sintaxis actualizada
</span><span id="__span-28-2"><a href="#__codelineno-28-2" id="__codelineno-28-2" name="__codelineno-28-2"></a>Muestra la sintaxis actual de azurerm_storage_account en Terraform 1.9
</span><span id="__span-28-3"><a href="#__codelineno-28-3" id="__codelineno-28-3" name="__codelineno-28-3"></a>
</span><span id="__span-28-4"><a href="#__codelineno-28-4" id="__codelineno-28-4" name="__codelineno-28-4"></a># Contrastar con docs
</span><span id="__span-28-5"><a href="#__codelineno-28-5" id="__codelineno-28-5" name="__codelineno-28-5"></a>¿Esta configuración sigue las mejores prácticas de Azure Well-Architected Framework para seguridad?
</span></code></pre></div>
<h4 id="tips-oficiales-vscode"><a class="toclink" href="2025/11/07/configurar-vscode-con-github-copilot-gu%C3%ADa-pr%C3%A1ctica/#tips-oficiales-vscode">Tips oficiales (VSCode)</a></h4>
<p>Según <a href="https://code.visualstudio.com/docs/copilot/customization/custom-instructions">documentación oficial</a>:</p>
<ol>
<li><strong>Instrucciones cortas y autocontenidas</strong>: Una declaración por instrucción</li>
<li><strong>Múltiples archivos por tema</strong>: Usar <code>.instructions.md</code> con <code>applyTo</code> selectivo</li>
<li><strong>Workspace sobre user</strong>: Compartir con equipo vía Git</li>
<li><strong>Referenciar en prompts</strong>: Evitar duplicación con Markdown links</li>
<li><strong>Markdown links para contexto</strong>: <code>[archivo](../path/file.ts)</code> o URLs externas</li>
</ol>
<h3 id="settings-especializados"><a class="toclink" href="2025/11/07/configurar-vscode-con-github-copilot-gu%C3%ADa-pr%C3%A1ctica/#settings-especializados">Settings especializados</a></h3>
<p>VSCode permite configurar instrucciones específicas para escenarios concretos:</p>
<h4 id="settings-disponibles"><a class="toclink" href="2025/11/07/configurar-vscode-con-github-copilot-gu%C3%ADa-pr%C3%A1ctica/#settings-disponibles">Settings disponibles</a></h4>
<table>
<thead>
<tr>
<th>Setting</th>
<th>Uso</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>github.copilot.chat.commitMessageGeneration.instructions</code></td>
<td>Generación de commit messages</td>
</tr>
<tr>
<td><code>github.copilot.chat.pullRequestDescriptionGeneration.instructions</code></td>
<td>Descripción de PRs</td>
</tr>
<tr>
<td><code>github.copilot.chat.reviewSelection.instructions</code></td>
<td>Code review</td>
</tr>
<tr>
<td><code>github.copilot.chat.codeGeneration.instructions</code></td>
<td>Generación de código (deprecated)*</td>
</tr>
<tr>
<td><code>github.copilot.chat.testGeneration.instructions</code></td>
<td>Generación de tests (deprecated)*</td>
</tr>
</tbody>
</table>
<p>*Desde VS Code 1.102, usar <code>.instructions.md</code> files en su lugar.</p>
<p><strong>Ejemplo completo en settings.json</strong>:</p>
<div class="language-json highlight"><pre><span></span><code><span id="__span-29-1"><a href="#__codelineno-29-1" id="__codelineno-29-1" name="__codelineno-29-1"></a><span class="p">{</span>
</span><span id="__span-29-2"><a href="#__codelineno-29-2" id="__codelineno-29-2" name="__codelineno-29-2"></a><span class="w">  </span><span class="c1">// Commits con Conventional Commits</span>
</span><span id="__span-29-3"><a href="#__codelineno-29-3" id="__codelineno-29-3" name="__codelineno-29-3"></a><span class="w">  </span><span class="nt">"github.copilot.chat.commitMessageGeneration.instructions"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
</span><span id="__span-29-4"><a href="#__codelineno-29-4" id="__codelineno-29-4" name="__codelineno-29-4"></a><span class="w">    </span><span class="p">{</span><span class="w"> </span><span class="nt">"text"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Usar formato: &lt;type&gt;(&lt;scope&gt;): &lt;description&gt;"</span><span class="w"> </span><span class="p">},</span>
</span><span id="__span-29-5"><a href="#__codelineno-29-5" id="__codelineno-29-5" name="__codelineno-29-5"></a><span class="w">    </span><span class="p">{</span><span class="w"> </span><span class="nt">"text"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Types: feat, fix, docs, chore, refactor, test, ci, perf"</span><span class="w"> </span><span class="p">}</span>
</span><span id="__span-29-6"><a href="#__codelineno-29-6" id="__codelineno-29-6" name="__codelineno-29-6"></a><span class="w">  </span><span class="p">],</span>
</span><span id="__span-29-7"><a href="#__codelineno-29-7" id="__codelineno-29-7" name="__codelineno-29-7"></a>
</span><span id="__span-29-8"><a href="#__codelineno-29-8" id="__codelineno-29-8" name="__codelineno-29-8"></a><span class="w">  </span><span class="c1">// PRs con checklist</span>
</span><span id="__span-29-9"><a href="#__codelineno-29-9" id="__codelineno-29-9" name="__codelineno-29-9"></a><span class="w">  </span><span class="nt">"github.copilot.chat.pullRequestDescriptionGeneration.instructions"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
</span><span id="__span-29-10"><a href="#__codelineno-29-10" id="__codelineno-29-10" name="__codelineno-29-10"></a><span class="w">    </span><span class="p">{</span><span class="w"> </span><span class="nt">"text"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Incluir siempre lista de cambios principales"</span><span class="w"> </span><span class="p">},</span>
</span><span id="__span-29-11"><a href="#__codelineno-29-11" id="__codelineno-29-11" name="__codelineno-29-11"></a><span class="w">    </span><span class="p">{</span><span class="w"> </span><span class="nt">"text"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Agregar sección Testing con casos probados"</span><span class="w"> </span><span class="p">},</span>
</span><span id="__span-29-12"><a href="#__codelineno-29-12" id="__codelineno-29-12" name="__codelineno-29-12"></a><span class="w">    </span><span class="p">{</span><span class="w"> </span><span class="nt">"file"</span><span class="p">:</span><span class="w"> </span><span class="s2">".github/instructions/pr-template.md"</span><span class="w"> </span><span class="p">}</span>
</span><span id="__span-29-13"><a href="#__codelineno-29-13" id="__codelineno-29-13" name="__codelineno-29-13"></a><span class="w">  </span><span class="p">],</span>
</span><span id="__span-29-14"><a href="#__codelineno-29-14" id="__codelineno-29-14" name="__codelineno-29-14"></a>
</span><span id="__span-29-15"><a href="#__codelineno-29-15" id="__codelineno-29-15" name="__codelineno-29-15"></a><span class="w">  </span><span class="c1">// Code review enfocado en seguridad</span>
</span><span id="__span-29-16"><a href="#__codelineno-29-16" id="__codelineno-29-16" name="__codelineno-29-16"></a><span class="w">  </span><span class="nt">"github.copilot.chat.reviewSelection.instructions"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
</span><span id="__span-29-17"><a href="#__codelineno-29-17" id="__codelineno-29-17" name="__codelineno-29-17"></a><span class="w">    </span><span class="p">{</span><span class="w"> </span><span class="nt">"file"</span><span class="p">:</span><span class="w"> </span><span class="s2">".github/instructions/security-review.md"</span><span class="w"> </span><span class="p">}</span>
</span><span id="__span-29-18"><a href="#__codelineno-29-18" id="__codelineno-29-18" name="__codelineno-29-18"></a><span class="w">  </span><span class="p">]</span>
</span><span id="__span-29-19"><a href="#__codelineno-29-19" id="__codelineno-29-19" name="__codelineno-29-19"></a><span class="p">}</span>
</span></code></pre></div>
<h3 id="configuracion-avanzada-vscode"><a class="toclink" href="2025/11/07/configurar-vscode-con-github-copilot-gu%C3%ADa-pr%C3%A1ctica/#configuracion-avanzada-vscode">Configuración avanzada VSCode</a></h3>
<p>Settings recomendados para Copilot (<code>settings.json</code>):</p>
<div class="language-json highlight"><pre><span></span><code><span id="__span-30-1"><a href="#__codelineno-30-1" id="__codelineno-30-1" name="__codelineno-30-1"></a><span class="p">{</span>
</span><span id="__span-30-2"><a href="#__codelineno-30-2" id="__codelineno-30-2" name="__codelineno-30-2"></a><span class="w">  </span><span class="c1">// GitHub Copilot</span>
</span><span id="__span-30-3"><a href="#__codelineno-30-3" id="__codelineno-30-3" name="__codelineno-30-3"></a><span class="w">  </span><span class="nt">"github.copilot.enable"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-30-4"><a href="#__codelineno-30-4" id="__codelineno-30-4" name="__codelineno-30-4"></a><span class="w">    </span><span class="nt">"*"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span>
</span><span id="__span-30-5"><a href="#__codelineno-30-5" id="__codelineno-30-5" name="__codelineno-30-5"></a><span class="w">    </span><span class="nt">"yaml"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span>
</span><span id="__span-30-6"><a href="#__codelineno-30-6" id="__codelineno-30-6" name="__codelineno-30-6"></a><span class="w">    </span><span class="nt">"markdown"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span>
</span><span id="__span-30-7"><a href="#__codelineno-30-7" id="__codelineno-30-7" name="__codelineno-30-7"></a><span class="w">    </span><span class="nt">"terraform"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span>
</span><span id="__span-30-8"><a href="#__codelineno-30-8" id="__codelineno-30-8" name="__codelineno-30-8"></a><span class="w">  </span><span class="p">},</span>
</span><span id="__span-30-9"><a href="#__codelineno-30-9" id="__codelineno-30-9" name="__codelineno-30-9"></a>
</span><span id="__span-30-10"><a href="#__codelineno-30-10" id="__codelineno-30-10" name="__codelineno-30-10"></a><span class="w">  </span><span class="c1">// Instructions files</span>
</span><span id="__span-30-11"><a href="#__codelineno-30-11" id="__codelineno-30-11" name="__codelineno-30-11"></a><span class="w">  </span><span class="nt">"github.copilot.chat.codeGeneration.useInstructionFiles"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span>
</span><span id="__span-30-12"><a href="#__codelineno-30-12" id="__codelineno-30-12" name="__codelineno-30-12"></a><span class="w">  </span><span class="nt">"chat.instructionsFilesLocations"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
</span><span id="__span-30-13"><a href="#__codelineno-30-13" id="__codelineno-30-13" name="__codelineno-30-13"></a><span class="w">    </span><span class="s2">".github/instructions"</span><span class="w">  </span><span class="c1">// Carpeta adicional para .instructions.md</span>
</span><span id="__span-30-14"><a href="#__codelineno-30-14" id="__codelineno-30-14" name="__codelineno-30-14"></a><span class="w">  </span><span class="p">],</span>
</span><span id="__span-30-15"><a href="#__codelineno-30-15" id="__codelineno-30-15" name="__codelineno-30-15"></a>
</span><span id="__span-30-16"><a href="#__codelineno-30-16" id="__codelineno-30-16" name="__codelineno-30-16"></a><span class="w">  </span><span class="c1">// AGENTS.md (experimental)</span>
</span><span id="__span-30-17"><a href="#__codelineno-30-17" id="__codelineno-30-17" name="__codelineno-30-17"></a><span class="w">  </span><span class="nt">"chat.useAgentsMdFile"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">  </span><span class="c1">// true para habilitar</span>
</span><span id="__span-30-18"><a href="#__codelineno-30-18" id="__codelineno-30-18" name="__codelineno-30-18"></a><span class="w">  </span><span class="nt">"chat.useNestedAgentsMdFiles"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">  </span><span class="c1">// subfolder support</span>
</span><span id="__span-30-19"><a href="#__codelineno-30-19" id="__codelineno-30-19" name="__codelineno-30-19"></a>
</span><span id="__span-30-20"><a href="#__codelineno-30-20" id="__codelineno-30-20" name="__codelineno-30-20"></a><span class="w">  </span><span class="c1">// Agent mode</span>
</span><span id="__span-30-21"><a href="#__codelineno-30-21" id="__codelineno-30-21" name="__codelineno-30-21"></a><span class="w">  </span><span class="nt">"chat.agent.enabled"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span>
</span><span id="__span-30-22"><a href="#__codelineno-30-22" id="__codelineno-30-22" name="__codelineno-30-22"></a><span class="w">  </span><span class="nt">"chat.agent.maxRequests"</span><span class="p">:</span><span class="w"> </span><span class="mi">128</span><span class="p">,</span>
</span><span id="__span-30-23"><a href="#__codelineno-30-23" id="__codelineno-30-23" name="__codelineno-30-23"></a>
</span><span id="__span-30-24"><a href="#__codelineno-30-24" id="__codelineno-30-24" name="__codelineno-30-24"></a><span class="w">  </span><span class="c1">// Editor</span>
</span><span id="__span-30-25"><a href="#__codelineno-30-25" id="__codelineno-30-25" name="__codelineno-30-25"></a><span class="w">  </span><span class="nt">"editor.inlineSuggest.enabled"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span>
</span><span id="__span-30-26"><a href="#__codelineno-30-26" id="__codelineno-30-26" name="__codelineno-30-26"></a><span class="w">  </span><span class="nt">"editor.suggestSelection"</span><span class="p">:</span><span class="w"> </span><span class="s2">"first"</span><span class="p">,</span>
</span><span id="__span-30-27"><a href="#__codelineno-30-27" id="__codelineno-30-27" name="__codelineno-30-27"></a>
</span><span id="__span-30-28"><a href="#__codelineno-30-28" id="__codelineno-30-28" name="__codelineno-30-28"></a><span class="w">  </span><span class="c1">// Opcional: Auto-approve (usar con precaución)</span>
</span><span id="__span-30-29"><a href="#__codelineno-30-29" id="__codelineno-30-29" name="__codelineno-30-29"></a><span class="w">  </span><span class="nt">"chat.tools.autoApprove"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span>
</span><span id="__span-30-30"><a href="#__codelineno-30-30" id="__codelineno-30-30" name="__codelineno-30-30"></a><span class="p">}</span>
</span></code></pre></div>
<p>Keybindings personalizados (<code>.vscode/keybindings.json</code>):</p>
<div class="language-json highlight"><pre><span></span><code><span id="__span-31-1"><a href="#__codelineno-31-1" id="__codelineno-31-1" name="__codelineno-31-1"></a><span class="p">[</span>
</span><span id="__span-31-2"><a href="#__codelineno-31-2" id="__codelineno-31-2" name="__codelineno-31-2"></a><span class="w">  </span><span class="p">{</span>
</span><span id="__span-31-3"><a href="#__codelineno-31-3" id="__codelineno-31-3" name="__codelineno-31-3"></a><span class="w">    </span><span class="nt">"key"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ctrl+shift+i"</span><span class="p">,</span>
</span><span id="__span-31-4"><a href="#__codelineno-31-4" id="__codelineno-31-4" name="__codelineno-31-4"></a><span class="w">    </span><span class="nt">"command"</span><span class="p">:</span><span class="w"> </span><span class="s2">"workbench.action.chat.open"</span>
</span><span id="__span-31-5"><a href="#__codelineno-31-5" id="__codelineno-31-5" name="__codelineno-31-5"></a><span class="w">  </span><span class="p">},</span>
</span><span id="__span-31-6"><a href="#__codelineno-31-6" id="__codelineno-31-6" name="__codelineno-31-6"></a><span class="w">  </span><span class="p">{</span>
</span><span id="__span-31-7"><a href="#__codelineno-31-7" id="__codelineno-31-7" name="__codelineno-31-7"></a><span class="w">    </span><span class="nt">"key"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ctrl+i"</span><span class="p">,</span>
</span><span id="__span-31-8"><a href="#__codelineno-31-8" id="__codelineno-31-8" name="__codelineno-31-8"></a><span class="w">    </span><span class="nt">"command"</span><span class="p">:</span><span class="w"> </span><span class="s2">"inlineChat.start"</span><span class="p">,</span>
</span><span id="__span-31-9"><a href="#__codelineno-31-9" id="__codelineno-31-9" name="__codelineno-31-9"></a><span class="w">    </span><span class="nt">"when"</span><span class="p">:</span><span class="w"> </span><span class="s2">"editorFocus"</span>
</span><span id="__span-31-10"><a href="#__codelineno-31-10" id="__codelineno-31-10" name="__codelineno-31-10"></a><span class="w">  </span><span class="p">}</span>
</span><span id="__span-31-11"><a href="#__codelineno-31-11" id="__codelineno-31-11" name="__codelineno-31-11"></a><span class="p">]</span>
</span></code></pre></div>
<h3 id="workflow-recomendado"><a class="toclink" href="2025/11/07/configurar-vscode-con-github-copilot-gu%C3%ADa-pr%C3%A1ctica/#workflow-recomendado">Workflow recomendado</a></h3>
<p>Flujo de trabajo típico con Copilot:</p>
<ol>
<li><strong>Planificación</strong>:</li>
</ol>
<div class="language-text highlight"><pre><span></span><code><span id="__span-32-1"><a href="#__codelineno-32-1" id="__codelineno-32-1" name="__codelineno-32-1"></a># Agent Mode
</span><span id="__span-32-2"><a href="#__codelineno-32-2" id="__codelineno-32-2" name="__codelineno-32-2"></a>Analiza los requisitos y propón arquitectura para [proyecto]
</span><span id="__span-32-3"><a href="#__codelineno-32-3" id="__codelineno-32-3" name="__codelineno-32-3"></a>Genera diagrama Mermaid de la solución
</span></code></pre></div>
<ol>
<li><strong>Implementación</strong>:</li>
</ol>
<div class="language-text highlight"><pre><span></span><code><span id="__span-33-1"><a href="#__codelineno-33-1" id="__codelineno-33-1" name="__codelineno-33-1"></a># Edit Mode
</span><span id="__span-33-2"><a href="#__codelineno-33-2" id="__codelineno-33-2" name="__codelineno-33-2"></a>Usando #prompt:terraform-module, crea módulo para Azure Front Door
</span></code></pre></div>
<ol>
<li><strong>Testing</strong>:</li>
</ol>
<div class="language-text highlight"><pre><span></span><code><span id="__span-34-1"><a href="#__codelineno-34-1" id="__codelineno-34-1" name="__codelineno-34-1"></a># Ask Mode
</span><span id="__span-34-2"><a href="#__codelineno-34-2" id="__codelineno-34-2" name="__codelineno-34-2"></a>/tests #file:main.tf usando Terratest
</span></code></pre></div>
<ol>
<li><strong>Documentación</strong>:</li>
</ol>
<div class="language-text highlight"><pre><span></span><code><span id="__span-35-1"><a href="#__codelineno-35-1" id="__codelineno-35-1" name="__codelineno-35-1"></a># Agent Mode
</span><span id="__span-35-2"><a href="#__codelineno-35-2" id="__codelineno-35-2" name="__codelineno-35-2"></a>Genera documentación completa para #folder incluyendo:
</span><span id="__span-35-3"><a href="#__codelineno-35-3" id="__codelineno-35-3" name="__codelineno-35-3"></a>- README con ejemplos
</span><span id="__span-35-4"><a href="#__codelineno-35-4" id="__codelineno-35-4" name="__codelineno-35-4"></a>- Diagramas de arquitectura
</span><span id="__span-35-5"><a href="#__codelineno-35-5" id="__codelineno-35-5" name="__codelineno-35-5"></a>- Runbooks de operaciones
</span></code></pre></div>
<ol>
<li><strong>Commit</strong>:</li>
</ol>
<div class="language-text highlight"><pre><span></span><code><span id="__span-36-1"><a href="#__codelineno-36-1" id="__codelineno-36-1" name="__codelineno-36-1"></a># Source Control panel
</span><span id="__span-36-2"><a href="#__codelineno-36-2" id="__codelineno-36-2" name="__codelineno-36-2"></a>Click en ✨ → genera conventional commit
</span></code></pre></div>
<ol>
<li><strong>Validación</strong>:</li>
</ol>
<div class="language-text highlight"><pre><span></span><code><span id="__span-37-1"><a href="#__codelineno-37-1" id="__codelineno-37-1" name="__codelineno-37-1"></a># Ask Mode
</span><span id="__span-37-2"><a href="#__codelineno-37-2" id="__codelineno-37-2" name="__codelineno-37-2"></a>Revisa #file:main.tf contra Azure security baseline
</span></code></pre></div>
<h3 id="troubleshooting"><a class="toclink" href="2025/11/07/configurar-vscode-con-github-copilot-gu%C3%ADa-pr%C3%A1ctica/#troubleshooting">Troubleshooting</a></h3>
<h4 id="copilot-no-responde"><a class="toclink" href="2025/11/07/configurar-vscode-con-github-copilot-gu%C3%ADa-pr%C3%A1ctica/#copilot-no-responde">Copilot no responde</a></h4>
<p><strong>Verificar</strong>:</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-38-1"><a href="#__codelineno-38-1" id="__codelineno-38-1" name="__codelineno-38-1"></a><span class="c1"># Estado de extensión</span>
</span><span id="__span-38-2"><a href="#__codelineno-38-2" id="__codelineno-38-2" name="__codelineno-38-2"></a>Ctrl+Shift+P<span class="w"> </span>→<span class="w"> </span><span class="s2">"GitHub Copilot: Check Status"</span>
</span><span id="__span-38-3"><a href="#__codelineno-38-3" id="__codelineno-38-3" name="__codelineno-38-3"></a>
</span><span id="__span-38-4"><a href="#__codelineno-38-4" id="__codelineno-38-4" name="__codelineno-38-4"></a><span class="c1"># Logs</span>
</span><span id="__span-38-5"><a href="#__codelineno-38-5" id="__codelineno-38-5" name="__codelineno-38-5"></a>Ctrl+Shift+P<span class="w"> </span>→<span class="w"> </span><span class="s2">"GitHub Copilot: Open Logs"</span>
</span></code></pre></div>
<p><strong>Soluciones comunes</strong>:</p>
<ul>
<li>Verificar autenticación GitHub</li>
<li>Reiniciar VSCode</li>
<li>Comprobar firewall/proxy (requiere acceso a <code>*.github.com</code>)</li>
</ul>
<h4 id="sugerencias-irrelevantes"><a class="toclink" href="2025/11/07/configurar-vscode-con-github-copilot-gu%C3%ADa-pr%C3%A1ctica/#sugerencias-irrelevantes">Sugerencias irrelevantes</a></h4>
<p><strong>Mejorar contexto</strong>:</p>
<ul>
<li>Usar custom instructions más específicas</li>
<li>Proporcionar ejemplos en instructions</li>
<li>Referenciar archivos relacionados en prompt</li>
</ul>
<p><strong>Ejemplo</strong>:</p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-39-1"><a href="#__codelineno-39-1" id="__codelineno-39-1" name="__codelineno-39-1"></a>❌ "Crea módulo Terraform"
</span><span id="__span-39-2"><a href="#__codelineno-39-2" id="__codelineno-39-2" name="__codelineno-39-2"></a>
</span><span id="__span-39-3"><a href="#__codelineno-39-3" id="__codelineno-39-3" name="__codelineno-39-3"></a>✅ "Usando #file:examples/storage.tf como referencia, crea módulo 
</span><span id="__span-39-4"><a href="#__codelineno-39-4" id="__codelineno-39-4" name="__codelineno-39-4"></a>   para #selection siguiendo #prompt:terraform-module"
</span></code></pre></div>
<h4 id="agent-mode-pide-demasiadas-confirmaciones"><a class="toclink" href="2025/11/07/configurar-vscode-con-github-copilot-gu%C3%ADa-pr%C3%A1ctica/#agent-mode-pide-demasiadas-confirmaciones">Agent Mode pide demasiadas confirmaciones</a></h4>
<p><strong>Configurar auto-approve</strong>:</p>
<div class="language-json highlight"><pre><span></span><code><span id="__span-40-1"><a href="#__codelineno-40-1" id="__codelineno-40-1" name="__codelineno-40-1"></a><span class="p">{</span>
</span><span id="__span-40-2"><a href="#__codelineno-40-2" id="__codelineno-40-2" name="__codelineno-40-2"></a><span class="w">  </span><span class="nt">"chat.tools.autoApprove"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span>
</span><span id="__span-40-3"><a href="#__codelineno-40-3" id="__codelineno-40-3" name="__codelineno-40-3"></a><span class="p">}</span>
</span></code></pre></div>
<p><strong>Alternativa</strong>: Click en "Always Allow" en diálogo de confirmación.</p>
<h3 id="mcp-server-de-awesome-copilot"><a class="toclink" href="2025/11/07/configurar-vscode-con-github-copilot-gu%C3%ADa-pr%C3%A1ctica/#mcp-server-de-awesome-copilot">MCP Server de Awesome Copilot</a></h3>
<p>El repositorio <a href="https://github.com/github/awesome-copilot">Awesome Copilot</a> incluye un MCP Server que permite buscar e instalar instrucciones, prompts y chat modes directamente desde VSCode.</p>
<h4 id="instalacion-del-mcp-server"><a class="toclink" href="2025/11/07/configurar-vscode-con-github-copilot-gu%C3%ADa-pr%C3%A1ctica/#instalacion-del-mcp-server">Instalación del MCP Server</a></h4>
<p>Requiere Docker instalado y ejecutándose.</p>
<p><strong>Instalar en VSCode</strong>:</p>
<ol>
<li><a href="https://aka.ms/awesome-copilot/mcp/vscode">Install in VS Code</a></li>
<li>Docker descargará la imagen automáticamente</li>
<li>Usar comando en Chat: <code>/awesome-copilot &lt;query&gt;</code></li>
</ol>
<p><strong>Ejemplo de uso</strong>:</p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-41-1"><a href="#__codelineno-41-1" id="__codelineno-41-1" name="__codelineno-41-1"></a>/awesome-copilot create-readme
</span><span id="__span-41-2"><a href="#__codelineno-41-2" id="__codelineno-41-2" name="__codelineno-41-2"></a>/awesome-copilot terraform best practices
</span><span id="__span-41-3"><a href="#__codelineno-41-3" id="__codelineno-41-3" name="__codelineno-41-3"></a>/awesome-copilot security review
</span></code></pre></div>
<h4 id="recursos-del-repositorio-awesome-copilot"><a class="toclink" href="2025/11/07/configurar-vscode-con-github-copilot-gu%C3%ADa-pr%C3%A1ctica/#recursos-del-repositorio-awesome-copilot">Recursos del repositorio Awesome Copilot</a></h4>
<p>El repositorio contiene cientos de contribuciones de la comunidad:</p>
<ul>
<li><strong>Agents</strong>: Agentes especializados (Terraform, Security, Database, etc.)</li>
<li><strong>Instructions</strong>: Standards de código por lenguaje/framework</li>
<li><strong>Prompts</strong>: Tareas específicas (documentación, refactoring, testing)</li>
<li><strong>Chat Modes</strong>: Personas IA (arquitecto, DBA, security expert)</li>
<li><strong>Collections</strong>: Conjuntos curados por tema/workflow</li>
</ul>
<p><strong>Explorar</strong>:</p>
<ul>
<li><a href="https://github.com/github/awesome-copilot/blob/main/docs/README.agents.md">Awesome Agents</a></li>
<li><a href="https://github.com/github/awesome-copilot/blob/main/docs/README.instructions.md">Awesome Instructions</a></li>
<li><a href="https://github.com/github/awesome-copilot/blob/main/docs/README.prompts.md">Awesome Prompts</a></li>
<li><a href="https://github.com/github/awesome-copilot/blob/main/docs/README.chatmodes.md">Awesome Chat Modes</a></li>
</ul>
<h3 id="referencias"><a class="toclink" href="2025/11/07/configurar-vscode-con-github-copilot-gu%C3%ADa-pr%C3%A1ctica/#referencias">Referencias</a></h3>
<ul>
<li><a href="https://docs.github.com/en/copilot">GitHub Copilot Documentation</a></li>
<li><a href="https://code.visualstudio.com/docs/copilot/customization/custom-instructions">VSCode Custom Instructions</a></li>
<li><a href="https://code.visualstudio.com/docs/copilot/customization/prompt-files">VSCode Prompt Files</a></li>
<li><a href="https://code.visualstudio.com/docs/copilot/copilot-chat">VSCode Copilot Chat</a></li>
<li><a href="https://github.com/github/awesome-copilot">Awesome Copilot Repository</a></li>
<li><a href="https://www.conventionalcommits.org/">Conventional Commits 1.0.0</a></li>
<li><a href="https://learn.microsoft.com/en-us/azure/well-architected/">Azure Well-Architected Framework</a></li>
</ul>
</div>
</article>
<article class="md-post md-post--excerpt">
<header class="md-post__header">
<nav class="md-post__authors md-typeset">
<span class="md-author">
<img alt="Rafael Fernández" src="https://avatars.githubusercontent.com/u/39990341">
</span>
</nav>
<div class="md-post__meta md-meta">
<ul class="md-meta__list">
<li class="md-meta__item">
<time datetime="2025-10-30 00:00:00+00:00">October 30, 2025</time></li>
<li class="md-meta__item">
            in
            
              <a class="md-meta__link" href="category/devops/">DevOps</a></li>
<li class="md-meta__item">
            
              25 min read
            
          </li>
</ul>
</div>
</header>
<div class="md-post__content md-typeset">
<h2 id="git-workflows-gitflow-vs-github-flow-vs-trunk-based-vs-release-flow"><a class="toclink" href="2025/10/30/git-workflows-gitflow-vs-github-flow-vs-trunk-based-vs-release-flow/">Git Workflows: GitFlow vs GitHub Flow vs Trunk-Based vs Release Flow</a></h2>
<h3 id="resumen"><a class="toclink" href="2025/10/30/git-workflows-gitflow-vs-github-flow-vs-trunk-based-vs-release-flow/#resumen">Resumen</a></h3>
<p>Existen múltiples <strong>estrategias de branching Git</strong> para gestionar el desarrollo de software: <strong>GitFlow</strong> (modelo complejo con develop/feature/release/hotfix branches para equipos grandes), <strong>GitHub Flow</strong> (minimalista con feature branches + main + deploy before merge), <strong>GitLab Flow</strong> (híbrido con environment branches staging/production para control deployment), <strong>Trunk-Based Development</strong> (commits directos a main con short-lived branches &lt;24h, usado por Google/Facebook), <strong>Release Flow</strong> (trunk-based + release branches sin merge back, usado por Microsoft Azure), <strong>OneFlow</strong> (GitFlow simplificado eliminando develop branch), y <strong>Feature Branch Workflow</strong> (básico con feature branches + pull requests). Cada estrategia se adapta a diferentes tamaños de equipo, frecuencia de releases, madurez CI/CD y control de environments.</p>
<nav class="md-post__action">
<a href="2025/10/30/git-workflows-gitflow-vs-github-flow-vs-trunk-based-vs-release-flow/">
          Continue reading
        </a>
</nav>
</div>
</article>
<article class="md-post md-post--excerpt">
<header class="md-post__header">
<nav class="md-post__authors md-typeset">
<span class="md-author">
<img alt="Rafael Fernández" src="https://avatars.githubusercontent.com/u/39990341">
</span>
</nav>
<div class="md-post__meta md-meta">
<ul class="md-meta__list">
<li class="md-meta__item">
<time datetime="2025-10-26 00:00:00+00:00">October 26, 2025</time></li>
<li class="md-meta__item">
            in
            
              <a class="md-meta__link" href="category/azure-services/">Azure Services</a></li>
<li class="md-meta__item">
            
              7 min read
            
          </li>
</ul>
</div>
</header>
<div class="md-post__content md-typeset">
<h2 id="azure-event-hubs-con-kafka-streaming-sin-gestionar-clusters"><a class="toclink" href="2025/10/26/azure-event-hubs-con-kafka-streaming-sin-gestionar-clusters/">Azure Event Hubs con Kafka: Streaming sin gestionar clusters</a></h2>
<h3 id="resumen"><a class="toclink" href="2025/10/26/azure-event-hubs-con-kafka-streaming-sin-gestionar-clusters/#resumen">Resumen</a></h3>
<p>Azure Event Hubs soporta el protocolo Kafka de forma nativa. Puedes apuntar tus aplicaciones Kafka existentes al endpoint de Event Hubs cambiando solo el connection string. Sin gestionar Zookeeper, sin actualizar brokers, sin parches de seguridad. Totalmente gestionado con auto-inflate, geo-replication y 99.99% SLA.</p>
<nav class="md-post__action">
<a href="2025/10/26/azure-event-hubs-con-kafka-streaming-sin-gestionar-clusters/">
          Continue reading
        </a>
</nav>
</div>
</article>
<article class="md-post md-post--excerpt">
<header class="md-post__header">
<nav class="md-post__authors md-typeset">
<span class="md-author">
<img alt="Rafael Fernández" src="https://avatars.githubusercontent.com/u/39990341">
</span>
</nav>
<div class="md-post__meta md-meta">
<ul class="md-meta__list">
<li class="md-meta__item">
<time datetime="2025-10-26 00:00:00+00:00">October 26, 2025</time></li>
<li class="md-meta__item">
            in
            
              <a class="md-meta__link" href="category/productividad/">Productividad</a>, 
              <a class="md-meta__link" href="category/microsoft-365/">Microsoft 365</a>, 
              <a class="md-meta__link" href="category/power-automate/">Power Automate</a>, 
              <a class="md-meta__link" href="category/gtd/">GTD</a>, 
              <a class="md-meta__link" href="category/viva-insights/">Viva Insights</a></li>
<li class="md-meta__item">
            
              5 min read
            
          </li>
</ul>
</div>
</header>
<div class="md-post__content md-typeset">
<h2 id="sistema-de-planificacion-diaria-contextual-con-microsoft-365"><a class="toclink" href="2025/10/26/sistema-de-planificaci%C3%B3n-diaria-contextual-con-microsoft-365/">Sistema de planificación diaria contextual con Microsoft 365</a></h2>
<h3 id="resumen"><a class="toclink" href="2025/10/26/sistema-de-planificaci%C3%B3n-diaria-contextual-con-microsoft-365/#resumen">Resumen</a></h3>
<p>Sistema práctico para planificar el día usando Microsoft 365 (To Do, Outlook, Teams, Power Automate, Viva Insights) con enfoque GTD y priorización realista. Incluye flujo de sincronización <code>tasks.xlsx</code>, tablas operativas y buenas prácticas sin relleno.</p>
<h3 id="que-es-este-sistema"><a class="toclink" href="2025/10/26/sistema-de-planificaci%C3%B3n-diaria-contextual-con-microsoft-365/#que-es-este-sistema">¿Qué es este sistema?</a></h3>
<ul>
<li>Origen único de verdad de tareas personales y de equipo</li>
<li>Priorización visual (🔴🟡🟢) + Big Rock diario</li>
<li>Sincronización automática To Do → Excel (<code>tasks.xlsx</code>) vía Power Automate</li>
<li>Integración con Outlook (correo/calendario) y Teams (menciones y actividad)</li>
<li>Protección de bloques de foco usando Viva Insights (focus plan)</li>
</ul>
<h3 id="arquitectura-flujo-operativo"><a class="toclink" href="2025/10/26/sistema-de-planificaci%C3%B3n-diaria-contextual-con-microsoft-365/#arquitectura-flujo-operativo">Arquitectura / Flujo operativo</a></h3>
<pre class="mermaid"><code>flowchart LR
    subgraph Input
      Email[Outlook Emails]
      Meetings[Calendar]
      Chats[Teams @mentions]
      Planner[Planner Tasks]
    end
    Email --&gt; ToDo[Microsoft To Do]
    Chats --&gt; ToDo
    Planner --&gt; ToDo
    ToDo &lt;---&gt; PowerAutomate[Power Automate Flow]
    PowerAutomate --&gt; Excel[(tasks.xlsx)]
    Excel --&gt; Reporte[Vista Tablas / Plan Diario]
    Viva[Viva Insights Focus Blocks] --&gt; CalendarSync[Calendario]
    CalendarSync --&gt; Plan
    ToDo --&gt; Plan[Plan Diario]
</code></pre>
<h3 id="componentes-clave"><a class="toclink" href="2025/10/26/sistema-de-planificaci%C3%B3n-diaria-contextual-con-microsoft-365/#componentes-clave">Componentes clave</a></h3>
<table>
<thead>
<tr>
<th>Componente</th>
<th>Rol</th>
<th>Notas</th>
</tr>
</thead>
<tbody>
<tr>
<td>Microsoft To Do</td>
<td>Captura y priorización</td>
<td>Vista unificada (Outlook + Planner + manual)</td>
</tr>
<tr>
<td>Power Automate</td>
<td>Sincronización</td>
<td>Flujo cada 4h actualiza/crea filas en Excel</td>
</tr>
<tr>
<td>Excel Online (Business)</td>
<td><code>tasks.xlsx</code> persistencia</td>
<td>Auditoría + posible análisis Power BI</td>
</tr>
<tr>
<td>Outlook Calendar</td>
<td>Bloques de ejecución</td>
<td>Deep Work + comunicaciones en ventanas controladas</td>
</tr>
<tr>
<td>Teams</td>
<td>Comunicaciones accionables</td>
<td>Filtrar @menciones y actividad directa</td>
</tr>
<tr>
<td>Viva Insights</td>
<td>Focus plan</td>
<td>Silencia notificaciones en bloques críticos</td>
</tr>
</tbody>
</table>
<h3 id="flujo-power-automate-resumen"><a class="toclink" href="2025/10/26/sistema-de-planificaci%C3%B3n-diaria-contextual-con-microsoft-365/#flujo-power-automate-resumen">Flujo Power Automate (resumen)</a></h3>
<p>Acciones (según JSON del flujo real):</p>
<ol>
<li>Trigger: Recurrence cada 4h</li>
<li>GetLists (To Do lists)</li>
<li>ForEach listas → List To-Dos</li>
<li>Para cada tarea:</li>
<li>Get_a_to-do (detalle)</li>
<li>Excel <code>List rows present in a table</code> filtrando por <code>IDTarea</code></li>
<li>If existe → <code>Update a row</code></li>
<li>Else → <code>Add a row into a table</code></li>
</ol>
<p>Campos críticos que se sincronizan: Lista, IDLista, Tarea (title), Estado, Prioridad (importance), FechaVencimiento, Notas, ReminderDateTime, CreatedDateTime, LastModifiedDateTimeToDo, FlagSyncPendiente.</p>
<p>Beneficios:</p>
<ul>
<li>Evita duplicados: Excel refleja estado real</li>
<li>Permite validar antes de sugerir una tarea (regla No duplicidad)</li>
<li>Base para auditoría (quién, cuándo, cambios)</li>
</ul>
<p>Así queda por ahora:</p>
<p><img alt="alt text" src="2025/10/image.png"></p>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>Se podría implementar que también se borrara una fila del excel si se borrara desde Microsoft TO DO</p>
</div>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>No se puede establecer sincronización bidireccional todavía porque los steps de TO DO no están en los conectores de Power Automate(28/10/2025)</p>
</div>
<h3 id="implementacion-practica-rapida"><a class="toclink" href="2025/10/26/sistema-de-planificaci%C3%B3n-diaria-contextual-con-microsoft-365/#implementacion-practica-rapida">Implementación práctica rápida</a></h3>
<p>El prompt completo lo dejé en otro post a parte para mayor legibilidad: <a href="2025/10/26/sistema-de-planificaci%C3%B3n-diaria-contextual-con-microsoft-365-prompt/">Sistema de Planificación Diaria Contextual con Microsoft 365 Prompt</a></p>
<h3 id="ejemplo-de-salida-completo-datos-ficticios"><a class="toclink" href="2025/10/26/sistema-de-planificaci%C3%B3n-diaria-contextual-con-microsoft-365/#ejemplo-de-salida-completo-datos-ficticios">Ejemplo de salida completo (datos ficticios)</a></h3>
<h4 id="1-foco-del-dia"><a class="toclink" href="2025/10/26/sistema-de-planificaci%C3%B3n-diaria-contextual-con-microsoft-365/#1-foco-del-dia">1. 🎯 Foco del Día</a></h4>
<table>
<thead>
<tr>
<th>Campo</th>
<th>Valor</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Fecha</strong></td>
<td>Martes, 28/10/2025</td>
</tr>
<tr>
<td><strong>Big Rock</strong></td>
<td>Diseñar esquema inicial de automatización "Proyecto Orion"</td>
</tr>
<tr>
<td><strong>Tiempo dedicado</strong></td>
<td>2h Deep Work (bloque único)</td>
</tr>
<tr>
<td><strong>Herramienta</strong></td>
<td>Microsoft To Do (⭐)</td>
</tr>
<tr>
<td><strong>Resultado esperado</strong></td>
<td>Documento <code>orion_automation_outline.md</code> en OneDrive</td>
</tr>
</tbody>
</table>
<h4 id="2-agenda-y-bloques-temporales"><a class="toclink" href="2025/10/26/sistema-de-planificaci%C3%B3n-diaria-contextual-con-microsoft-365/#2-agenda-y-bloques-temporales">2. 🗓️ Agenda y Bloques Temporales</a></h4>
<table>
<thead>
<tr>
<th>Hora</th>
<th>Tipo</th>
<th>Actividad</th>
<th>Objetivo</th>
<th>App</th>
<th>Notas</th>
</tr>
</thead>
<tbody>
<tr>
<td>08:45-09:00</td>
<td>Preparación</td>
<td>Revisión rápida inbox + To Do</td>
<td>Limpiar entrada</td>
<td>Outlook/To Do</td>
<td>Máx 15 min</td>
</tr>
<tr>
<td>09:00-11:00</td>
<td>Deep Work</td>
<td>Big Rock Orion</td>
<td>Generar estructura</td>
<td>Focusing (Viva)</td>
<td>Notifs OFF</td>
</tr>
<tr>
<td>11:00-11:20</td>
<td>Comunicación</td>
<td>Correos 🔴</td>
<td>Desbloquear</td>
<td>Outlook</td>
<td>Solo alta</td>
</tr>
<tr>
<td>11:20-11:40</td>
<td>Comunicación</td>
<td>Chats @mención</td>
<td>Cerrar pendientes</td>
<td>Teams</td>
<td>Filtrar actividad</td>
</tr>
<tr>
<td>13:00-13:30</td>
<td>Tareas secundarias</td>
<td>2 micro tareas</td>
<td>Soporte</td>
<td>To Do</td>
<td>Ver sección 4</td>
</tr>
<tr>
<td>16:30-16:45</td>
<td>Cierre</td>
<td>Checklist diario</td>
<td>Preparar mañana</td>
<td>To Do</td>
<td>Big Rock siguiente</td>
</tr>
</tbody>
</table>
<h4 id="3-priorizacion-de-comunicaciones-ultimas-24h-ficticias"><a class="toclink" href="2025/10/26/sistema-de-planificaci%C3%B3n-diaria-contextual-con-microsoft-365/#3-priorizacion-de-comunicaciones-ultimas-24h-ficticias">3. 📧 Priorización de Comunicaciones (últimas 24h ficticias)</a></h4>
<table>
<thead>
<tr>
<th>Pri</th>
<th>Origen</th>
<th>Remitente/Canal</th>
<th>Asunto</th>
<th>Acción requerida</th>
<th>Respuesta sugerida</th>
<th>Tiempo</th>
</tr>
</thead>
<tbody>
<tr>
<td>🔴</td>
<td>Outlook "Para mí"</td>
<td>Usuario.Test</td>
<td>Acl. dependencias Orion</td>
<td>Confirmar supuestos</td>
<td>"Dependencias validadas: sólo API Core y Storage. Sigo."</td>
<td>8m</td>
</tr>
<tr>
<td>🔴</td>
<td>Teams @mención</td>
<td>Canal #arquitectura</td>
<td>Revisión diagrama preliminar</td>
<td>Dar feedback</td>
<td>"Añado nota sobre colas y reintentos."</td>
<td>6m</td>
</tr>
<tr>
<td>🟡</td>
<td>Teams chat 1:1</td>
<td>Dev.Helper</td>
<td>Pregunta naming conv.</td>
<td>Indicar patrón</td>
<td>"Usar prefijo 'orion-' + función."</td>
<td>4m</td>
</tr>
<tr>
<td>🟢</td>
<td>Outlook CC</td>
<td>Notificaciones</td>
<td>Informe semanal</td>
<td>Leer luego</td>
<td>-</td>
<td>3m</td>
</tr>
</tbody>
</table>
<h4 id="4-tareas-secundarias-max-3"><a class="toclink" href="2025/10/26/sistema-de-planificaci%C3%B3n-diaria-contextual-con-microsoft-365/#4-tareas-secundarias-max-3">4. ✅ Tareas Secundarias (máx 3)</a></h4>
<table>
<thead>
<tr>
<th>#</th>
<th>Tarea</th>
<th>Origen</th>
<th>Tiempo est.</th>
<th>Herramienta</th>
<th>Dependencias</th>
</tr>
</thead>
<tbody>
<tr>
<td>1</td>
<td>Documentar convención de nombres orion-*</td>
<td>To Do</td>
<td>10m</td>
<td>OneDrive</td>
<td>Ninguna</td>
</tr>
<tr>
<td>2</td>
<td>Actualizar lista canales activos</td>
<td>To Do</td>
<td>10m</td>
<td>Teams</td>
<td>Canales vigentes</td>
</tr>
<tr>
<td>3</td>
<td>Revisar borrador diagrama cola retry</td>
<td>Planner</td>
<td>15m</td>
<td>Whiteboard</td>
<td>Diagrama creado</td>
</tr>
</tbody>
</table>
<h4 id="5-colaboracion-y-documentos"><a class="toclink" href="2025/10/26/sistema-de-planificaci%C3%B3n-diaria-contextual-con-microsoft-365/#5-colaboracion-y-documentos">5. 📂 Colaboración y Documentos</a></h4>
<table>
<thead>
<tr>
<th>Documento</th>
<th>Ubicación</th>
<th>Estado</th>
<th>Acción</th>
</tr>
</thead>
<tbody>
<tr>
<td>orion_automation_outline.md</td>
<td>/OneDrive/Proyectos/Orion</td>
<td>Nuevo</td>
<td>Crear secciones</td>
</tr>
<tr>
<td>naming_guidelines.md</td>
<td>/OneDrive/Shared</td>
<td>Borrador</td>
<td>Añadir apartado colas</td>
</tr>
<tr>
<td>arch_diagram.drawio</td>
<td>/OneDrive/Designs</td>
<td>Revisión</td>
<td>Confirmar flujos</td>
</tr>
</tbody>
</table>
<h4 id="6-tareas-faltantes-validacion-previa"><a class="toclink" href="2025/10/26/sistema-de-planificaci%C3%B3n-diaria-contextual-con-microsoft-365/#6-tareas-faltantes-validacion-previa">6. 📝 Tareas Faltantes (validación previa)</a></h4>
<p></p><div class="language-text highlight"><pre><span></span><code><span id="__span-0-1"><a href="#__codelineno-0-1" id="__codelineno-0-1" name="__codelineno-0-1"></a>🔴 [ALTA] Crear outline inicial Proyecto Orion today
</span><span id="__span-0-2"><a href="#__codelineno-0-2" id="__codelineno-0-2" name="__codelineno-0-2"></a>🟡 [MEDIA] Añadir sección colas en naming_guidelines.md today
</span><span id="__span-0-3"><a href="#__codelineno-0-3" id="__codelineno-0-3" name="__codelineno-0-3"></a>🟢 [BAJA] Programar revisión informal diagrama retry in 3 days
</span></code></pre></div>
Todas inexistentes en estado completado en la fuente (ejemplo ficticio).<p></p>
<h4 id="7-cierre-plantilla-aplicada"><a class="toclink" href="2025/10/26/sistema-de-planificaci%C3%B3n-diaria-contextual-con-microsoft-365/#7-cierre-plantilla-aplicada">7. ⏭️ Cierre (plantilla aplicada)</a></h4>
<table>
<thead>
<tr>
<th>Item</th>
<th>Estado</th>
<th>Acción</th>
</tr>
</thead>
<tbody>
<tr>
<td>Big Rock completado</td>
<td>☐</td>
<td>Reprogramar mañana si no</td>
</tr>
<tr>
<td>Comunicaciones 🔴 resueltas</td>
<td>☐</td>
<td>Escalar si bloqueo</td>
</tr>
<tr>
<td>Tareas incompletas movidas</td>
<td>☐</td>
<td>Etiqueta #mañana</td>
</tr>
<tr>
<td>Sync verificada</td>
<td>☐</td>
<td>Revisar timestamps</td>
</tr>
<tr>
<td>Big Rock siguiente definido</td>
<td>☐</td>
<td>Bloquear 09:00</td>
</tr>
</tbody>
</table>
<p>Checklist:</p>
<ul class="task-list">
<li class="task-list-item"><label class="task-list-control"><input disabled="" type="checkbox"><span class="task-list-indicator"></span></label> Marcar tareas completadas en To Do</li>
<li class="task-list-item"><label class="task-list-control"><input disabled="" type="checkbox"><span class="task-list-indicator"></span></label> Validar no duplicados nuevos</li>
<li class="task-list-item"><label class="task-list-control"><input disabled="" type="checkbox"><span class="task-list-indicator"></span></label> Bloquear Deep Work mañana</li>
<li class="task-list-item"><label class="task-list-control"><input disabled="" type="checkbox"><span class="task-list-indicator"></span></label> Confirmar ausencia de 🔴 pendientes</li>
</ul>
<hr>
<h3 id="buenas-practicas-operativas"><a class="toclink" href="2025/10/26/sistema-de-planificaci%C3%B3n-diaria-contextual-con-microsoft-365/#buenas-practicas-operativas">Buenas prácticas operativas</a></h3>
<table>
<thead>
<tr>
<th>Área</th>
<th>Recomendación</th>
</tr>
</thead>
<tbody>
<tr>
<td>Captura</td>
<td>Procesar inbox máximo 3 veces/día, nunca en continuo</td>
</tr>
<tr>
<td>Prioridad</td>
<td>1 solo Big Rock; si falla → causa raíz en cierre</td>
</tr>
<tr>
<td>Deep Work</td>
<td>Bloques &gt; 90m con notificaciones silenciadas (Focus plan)</td>
</tr>
<tr>
<td>Sincronización</td>
<td>Revisar flujo si FlagSyncPendiente ≠ FALSE persistente</td>
</tr>
<tr>
<td>Ruido Teams</td>
<td>Limitar notificaciones a @menciones y chats directos</td>
</tr>
<tr>
<td>Excel</td>
<td>Evitar editar manualmente filas salvo columna de auditoría</td>
</tr>
<tr>
<td>Privacidad</td>
<td>No colocar PII sensible en notas de tarea (almacenadas en Excel)</td>
</tr>
</tbody>
</table>
<h3 id="seguridad-y-compliance"><a class="toclink" href="2025/10/26/sistema-de-planificaci%C3%B3n-diaria-contextual-con-microsoft-365/#seguridad-y-compliance">Seguridad y Compliance</a></h3>
<ul>
<li>Minimizar datos sensibles en <code>Notas</code></li>
<li>Revisar permisos de OneDrive (no compartir <code>tasks.xlsx</code> públicamente)</li>
<li>Conectores estándar (To Do, Excel Online Business) → cumplimiento base M365</li>
<li>Auditoría: timestamps <code>CreatedDateTime</code> y <code>LastModifiedDateTimeToDo</code> permiten trazar secuencia</li>
</ul>
<h3 id="limitaciones"><a class="toclink" href="2025/10/26/sistema-de-planificaci%C3%B3n-diaria-contextual-con-microsoft-365/#limitaciones">Limitaciones</a></h3>
<table>
<thead>
<tr>
<th>Área</th>
<th>Límite</th>
<th>Mitigación</th>
</tr>
</thead>
<tbody>
<tr>
<td>Frecuencia sync</td>
<td>Cada 4h (ejemplo)</td>
<td>Ajustar a 4h si alta rotación</td>
</tr>
<tr>
<td>Colisiones edición</td>
<td>Cambios simultáneos Excel vs flujo</td>
<td>Tratar Excel como lectura / solo flujo escribe</td>
</tr>
<tr>
<td>Latencia notificaciones Teams</td>
<td>Depende configuración usuario</td>
<td>Enfoque en bloques revisión comunicaciones</td>
</tr>
<tr>
<td>Focus plan</td>
<td>Usuarios pueden cancelar bloques</td>
<td>Educar en protección mínima diaria</td>
</tr>
</tbody>
</table>
<h3 id="extensiones-posibles"><a class="toclink" href="2025/10/26/sistema-de-planificaci%C3%B3n-diaria-contextual-con-microsoft-365/#extensiones-posibles">Extensiones posibles</a></h3>
<ul>
<li>Power BI sobre <code>tasks.xlsx</code> (tendencias prioridad)</li>
<li>Power Automate adicional: mover tareas vencidas a lista "Revisión"</li>
<li>Integrar con Planner para tareas de equipo críticas</li>
<li>Script de limpieza de tareas completadas &gt;30 días</li>
</ul>
<h3 id="referencias-oficiales"><a class="toclink" href="2025/10/26/sistema-de-planificaci%C3%B3n-diaria-contextual-con-microsoft-365/#referencias-oficiales">Referencias oficiales</a></h3>
<ul>
<li>Microsoft To Do API (Graph): https://learn.microsoft.com/en-us/graph/todo-concept-overview</li>
<li>Integración tareas Outlook / To Do / Planner (comparativa): https://learn.microsoft.com/en-us/microsoft-365/community/which-task-management-option</li>
<li>Excel Online (Business) connector: https://learn.microsoft.com/en-us/connectors/excelonlinebusiness/</li>
<li>Power Automate conexiones: https://learn.microsoft.com/en-us/power-automate/add-manage-connections</li>
<li>Teams activity / notificaciones buenas prácticas: https://learn.microsoft.com/en-us/graph/teams-activity-feed-notifications-best-practices</li>
<li>Viva Insights Focus / Book focus time: https://learn.microsoft.com/en-us/viva/insights/personal/briefing/be-focus</li>
<li>Focus plan / hábitos productividad: https://learn.microsoft.com/en-us/viva/insights/personal/teams/focus</li>
<li>Planner + Tasks integración en Teams: https://learn.microsoft.com/en-us/microsoft-365/community/which-task-management-option#tasks-by-planner-and-to-do-teams-app</li>
</ul>
</div>
</article>
<article class="md-post md-post--excerpt">
<header class="md-post__header">
<nav class="md-post__authors md-typeset">
<span class="md-author">
<img alt="Rafael Fernández" src="https://avatars.githubusercontent.com/u/39990341">
</span>
</nav>
<div class="md-post__meta md-meta">
<ul class="md-meta__list">
<li class="md-meta__item">
<time datetime="2025-10-26 00:00:00+00:00">October 26, 2025</time></li>
<li class="md-meta__item">
            in
            
              <a class="md-meta__link" href="category/productividad/">Productividad</a>, 
              <a class="md-meta__link" href="category/microsoft-365/">Microsoft 365</a>, 
              <a class="md-meta__link" href="category/power-automate/">Power Automate</a>, 
              <a class="md-meta__link" href="category/gtd/">GTD</a>, 
              <a class="md-meta__link" href="category/viva-insights/">Viva Insights</a></li>
<li class="md-meta__item">
            
              6 min read
            
          </li>
</ul>
</div>
</header>
<div class="md-post__content md-typeset">
<h2 id="sistema-de-planificacion-diaria-contextual-con-microsoft-365-prompt"><a class="toclink" href="2025/10/26/sistema-de-planificaci%C3%B3n-diaria-contextual-con-microsoft-365-prompt/">Sistema de Planificación Diaria Contextual con Microsoft 365 (prompt)</a></h2>
<p>Este prompt está relacionado con el artículo <a href="2025/10/26/sistema-de-planificaci%C3%B3n-diaria-contextual-con-microsoft-365/">Sistema de Planificación Diaria Contextual con Microsoft 365</a></p>
<hr>
<h3 id="contexto-del-asistente"><a class="toclink" href="2025/10/26/sistema-de-planificaci%C3%B3n-diaria-contextual-con-microsoft-365-prompt/#contexto-del-asistente">🎯 CONTEXTO DEL ASISTENTE</a></h3>
<p><strong>Rol:</strong> Eres un asistente ejecutivo experto en productividad con Microsoft 365, especializado en técnicas GTD (Getting Things Done) y gestión del tiempo.</p>
<p><strong>Objetivo principal:</strong> Ayudar al usuario a planificar y ejecutar su jornada laboral de forma eficiente, priorizando tareas críticas y comunicaciones directas, eliminando redundancias y optimizando el uso de herramientas M365.</p>
<p><strong>Principios de operación:</strong></p>
<ol>
<li><strong>No duplicidad:</strong> Nunca sugerir tareas/correos/reuniones ya procesadas o completadas</li>
<li><strong>Evidencia:</strong> Validar contra <code>tasks.xlsx</code> antes de cualquier sugerencia</li>
<li><strong>Priorización:</strong> Comunicaciones directas &gt; Comunicaciones grupales</li>
<li><strong>Eficiencia temporal:</strong> Ventanas de 24h (diario) o 72h (lunes)</li>
<li><strong>Formato estructurado:</strong> Usar tablas Markdown para claridad visual</li>
</ol>
<hr>
<h3 id="fuentes-de-datos"><a class="toclink" href="2025/10/26/sistema-de-planificaci%C3%B3n-diaria-contextual-con-microsoft-365-prompt/#fuentes-de-datos">📋 FUENTES DE DATOS</a></h3>
<h4 id="archivo-de-tareas-sincronizado"><a class="toclink" href="2025/10/26/sistema-de-planificaci%C3%B3n-diaria-contextual-con-microsoft-365-prompt/#archivo-de-tareas-sincronizado">Archivo de tareas sincronizado</a></h4>
<ul>
<li><strong>Ubicación:</strong> <a href="https://yoursharepoint.sharepoint.com/my?...../Tasks%2Exlsx">tasks.xlsx</a></li>
<li><strong>Propósito:</strong> Fuente de verdad para el estado de tareas (completadas/pendientes)</li>
<li><strong>Validación:</strong> Consultar SIEMPRE antes de sugerir tareas</li>
</ul>
<h4 id="ventana-temporal"><a class="toclink" href="2025/10/26/sistema-de-planificaci%C3%B3n-diaria-contextual-con-microsoft-365-prompt/#ventana-temporal">Ventana temporal</a></h4>
<ul>
<li><strong>Lunes:</strong> Analizar últimas 72 horas</li>
<li><strong>Resto de días:</strong> Analizar últimas 24 horas</li>
</ul>
<h4 id="herramientas-m365-integradas"><a class="toclink" href="2025/10/26/sistema-de-planificaci%C3%B3n-diaria-contextual-con-microsoft-365-prompt/#herramientas-m365-integradas">Herramientas M365 integradas</a></h4>
<ul>
<li>Microsoft To Do (tareas y prioridades)</li>
<li>Outlook (calendario y correos)</li>
<li>Microsoft Teams (chats y reuniones)</li>
<li>Planner (tareas colaborativas)</li>
<li>SharePoint/OneDrive (documentos)</li>
</ul>
<hr>
<h3 id="flujo-de-trabajo-chain-of-thought"><a class="toclink" href="2025/10/26/sistema-de-planificaci%C3%B3n-diaria-contextual-con-microsoft-365-prompt/#flujo-de-trabajo-chain-of-thought">🔄 FLUJO DE TRABAJO (Chain of Thought)</a></h3>
<h4 id="paso-1-recopilacion"><a class="toclink" href="2025/10/26/sistema-de-planificaci%C3%B3n-diaria-contextual-con-microsoft-365-prompt/#paso-1-recopilacion">PASO 1: Recopilación</a></h4>
<div class="language-text highlight"><pre><span></span><code><span id="__span-0-1"><a href="#__codelineno-0-1" id="__codelineno-0-1" name="__codelineno-0-1"></a>1. Consultar tasks.xlsx para estado actual de tareas
</span><span id="__span-0-2"><a href="#__codelineno-0-2" id="__codelineno-0-2" name="__codelineno-0-2"></a>2. Revisar Outlook Calendar para reuniones del día
</span><span id="__span-0-3"><a href="#__codelineno-0-3" id="__codelineno-0-3" name="__codelineno-0-3"></a>3. Filtrar correos "Para mí" y chats con @menciones
</span><span id="__span-0-4"><a href="#__codelineno-0-4" id="__codelineno-0-4" name="__codelineno-0-4"></a>4. Identificar tareas bloqueadas o con dependencias
</span></code></pre></div>
<h4 id="paso-2-analisis-y-priorizacion"><a class="toclink" href="2025/10/26/sistema-de-planificaci%C3%B3n-diaria-contextual-con-microsoft-365-prompt/#paso-2-analisis-y-priorizacion">PASO 2: Análisis y Priorización</a></h4>
<div class="language-text highlight"><pre><span></span><code><span id="__span-1-1"><a href="#__codelineno-1-1" id="__codelineno-1-1" name="__codelineno-1-1"></a>1. Identificar el Big Rock (tarea más crítica del día)
</span><span id="__span-1-2"><a href="#__codelineno-1-2" id="__codelineno-1-2" name="__codelineno-1-2"></a>2. Clasificar comunicaciones:
</span><span id="__span-1-3"><a href="#__codelineno-1-3" id="__codelineno-1-3" name="__codelineno-1-3"></a>   - ALTA: @menciones directas, correos "Para mí", chats 1:1
</span><span id="__span-1-4"><a href="#__codelineno-1-4" id="__codelineno-1-4" name="__codelineno-1-4"></a>   - MEDIA: Correos con acción requerida, canales activos
</span><span id="__span-1-5"><a href="#__codelineno-1-5" id="__codelineno-1-5" name="__codelineno-1-5"></a>   - BAJA: Canales generales, CC, notificaciones
</span><span id="__span-1-6"><a href="#__codelineno-1-6" id="__codelineno-1-6" name="__codelineno-1-6"></a>3. Detectar conflictos de agenda o sobrecarga
</span><span id="__span-1-7"><a href="#__codelineno-1-7" id="__codelineno-1-7" name="__codelineno-1-7"></a>4. Validar que ninguna tarea sugerida esté completada en tasks.xlsx
</span></code></pre></div>
<h4 id="paso-3-estructuracion"><a class="toclink" href="2025/10/26/sistema-de-planificaci%C3%B3n-diaria-contextual-con-microsoft-365-prompt/#paso-3-estructuracion">PASO 3: Estructuración</a></h4>
<div class="language-text highlight"><pre><span></span><code><span id="__span-2-1"><a href="#__codelineno-2-1" id="__codelineno-2-1" name="__codelineno-2-1"></a>1. Crear plan de bloques temporales
</span><span id="__span-2-2"><a href="#__codelineno-2-2" id="__codelineno-2-2" name="__codelineno-2-2"></a>2. Asignar tareas a bloques específicos
</span><span id="__span-2-3"><a href="#__codelineno-2-3" id="__codelineno-2-3" name="__codelineno-2-3"></a>3. Preparar respuestas tipo para correos/chats
</span><span id="__span-2-4"><a href="#__codelineno-2-4" id="__codelineno-2-4" name="__codelineno-2-4"></a>4. Generar checklist de cierre
</span></code></pre></div>
<h4 id="paso-4-entrega"><a class="toclink" href="2025/10/26/sistema-de-planificaci%C3%B3n-diaria-contextual-con-microsoft-365-prompt/#paso-4-entrega">PASO 4: Entrega</a></h4>
<div class="language-text highlight"><pre><span></span><code><span id="__span-3-1"><a href="#__codelineno-3-1" id="__codelineno-3-1" name="__codelineno-3-1"></a>Formato: Tablas Markdown estructuradas
</span><span id="__span-3-2"><a href="#__codelineno-3-2" id="__codelineno-3-2" name="__codelineno-3-2"></a>Incluir: Prioridades, tiempos estimados, herramienta M365 asociada
</span><span id="__span-3-3"><a href="#__codelineno-3-3" id="__codelineno-3-3" name="__codelineno-3-3"></a>Validar: No duplicar elementos ya procesados
</span></code></pre></div>
<hr>
<h3 id="estructura-de-salida"><a class="toclink" href="2025/10/26/sistema-de-planificaci%C3%B3n-diaria-contextual-con-microsoft-365-prompt/#estructura-de-salida">📊 ESTRUCTURA DE SALIDA</a></h3>
<h4 id="1-foco-del-dia"><a class="toclink" href="2025/10/26/sistema-de-planificaci%C3%B3n-diaria-contextual-con-microsoft-365-prompt/#1-foco-del-dia">1. 🎯 Foco del Día</a></h4>
<table>
<thead>
<tr>
<th>Campo</th>
<th>Valor</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Fecha</strong></td>
<td>[Día de semana, DD/MM/YYYY]</td>
</tr>
<tr>
<td><strong>Big Rock</strong></td>
<td>[Única tarea más crítica]</td>
</tr>
<tr>
<td><strong>Tiempo dedicado</strong></td>
<td>[X horas]</td>
</tr>
<tr>
<td><strong>Herramienta</strong></td>
<td>Microsoft To Do (⭐ Prioridad)</td>
</tr>
<tr>
<td><strong>Resultado esperado</strong></td>
<td>[Entregable concreto]</td>
</tr>
</tbody>
</table>
<p><strong>Ejemplo:</strong></p>
<table>
<thead>
<tr>
<th>Campo</th>
<th>Valor</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Fecha</strong></td>
<td>Lunes, 20/10/2025</td>
</tr>
<tr>
<td><strong>Big Rock</strong></td>
<td>Completar informe Q3 para dirección</td>
</tr>
<tr>
<td><strong>Tiempo dedicado</strong></td>
<td>3 horas</td>
</tr>
<tr>
<td><strong>Herramienta</strong></td>
<td>Microsoft To Do (⭐ Prioridad)</td>
</tr>
<tr>
<td><strong>Resultado esperado</strong></td>
<td>Documento final en SharePoint</td>
</tr>
</tbody>
</table>
<hr>
<h4 id="2-agenda-y-bloques-temporales"><a class="toclink" href="2025/10/26/sistema-de-planificaci%C3%B3n-diaria-contextual-con-microsoft-365-prompt/#2-agenda-y-bloques-temporales">2. 🗓️ Agenda y Bloques Temporales</a></h4>
<table>
<thead>
<tr>
<th>Hora</th>
<th>Tipo</th>
<th>Actividad</th>
<th>Objetivo</th>
<th>App</th>
<th>Notas</th>
</tr>
</thead>
<tbody>
<tr>
<td>09:00-09:30</td>
<td>Reunión</td>
<td>Standup equipo</td>
<td>Sincronización</td>
<td>Teams</td>
<td>Preparar updates</td>
</tr>
<tr>
<td>09:30-12:00</td>
<td>Bloque Deep Work</td>
<td>Big Rock: Informe Q3</td>
<td>Avance crítico</td>
<td>Outlook (Bloqueado)</td>
<td>Sin interrupciones</td>
</tr>
<tr>
<td>12:00-13:00</td>
<td>Almuerzo</td>
<td>-</td>
<td>-</td>
<td>-</td>
<td>-</td>
</tr>
<tr>
<td>13:00-14:00</td>
<td>Comunicación</td>
<td>Responder correos alta prioridad</td>
<td>Desbloqueadores</td>
<td>Outlook</td>
<td>Ver sección 3</td>
</tr>
<tr>
<td>14:00-15:30</td>
<td>Tareas secundarias</td>
<td>Lista To Do</td>
<td>Soporte</td>
<td>To Do</td>
<td>Máx. 3 tareas</td>
</tr>
<tr>
<td>15:30-16:00</td>
<td>Cierre</td>
<td>Revisión y planificación</td>
<td>Preparar mañana</td>
<td>To Do</td>
<td>Ver sección 7</td>
</tr>
</tbody>
</table>
<p><strong>Principios de bloqueo:</strong></p>
<ul>
<li>Deep Work → Notificaciones OFF, Focus Assist activado</li>
<li>Reuniones consecutivas → Dejar 5-10 min buffer</li>
<li>Revisar correos en bloques específicos (no constantemente)</li>
</ul>
<hr>
<h4 id="3-priorizacion-de-comunicaciones"><a class="toclink" href="2025/10/26/sistema-de-planificaci%C3%B3n-diaria-contextual-con-microsoft-365-prompt/#3-priorizacion-de-comunicaciones">3. 📧 Priorización de Comunicaciones</a></h4>
<p><strong>Criterio de filtrado:</strong> Menciones directas &gt; Para mí &gt; CC/Canales generales</p>
<table>
<thead>
<tr>
<th>Pri</th>
<th>Origen</th>
<th>Remitente/Canal</th>
<th>Asunto/Tema</th>
<th>Acción requerida</th>
<th>Respuesta sugerida</th>
<th>Tiempo est.</th>
</tr>
</thead>
<tbody>
<tr>
<td>🔴 Alta</td>
<td>Outlook "Para mí"</td>
<td>Juan Pérez</td>
<td>Aprobación documento</td>
<td>Revisar y aprobar</td>
<td>"Revisado y aprobado. Documento en SharePoint con comentarios."</td>
<td>15 min</td>
</tr>
<tr>
<td>🔴 Alta</td>
<td>Teams @mención</td>
<td>@María López</td>
<td>Bloqueador API</td>
<td>Proveer credenciales</td>
<td>"Credenciales enviadas por mensaje privado. Validar acceso."</td>
<td>10 min</td>
</tr>
<tr>
<td>🟡 Media</td>
<td>Teams chat 1:1</td>
<td>Carlos Ruiz</td>
<td>Duda proceso</td>
<td>Clarificar paso 3</td>
<td>"El paso 3 requiere validación previa. Te envío guía."</td>
<td>5 min</td>
</tr>
<tr>
<td>🟢 Baja</td>
<td>Canal #general</td>
<td>-</td>
<td>Anuncio nuevas políticas</td>
<td>Leer cuando haya tiempo</td>
<td>-</td>
<td>5 min</td>
</tr>
</tbody>
</table>
<p><strong>Regla de oro:</strong> Responder comunicaciones 🔴 Alta antes de las 14:00h del mismo día.</p>
<hr>
<h4 id="4-tareas-secundarias"><a class="toclink" href="2025/10/26/sistema-de-planificaci%C3%B3n-diaria-contextual-con-microsoft-365-prompt/#4-tareas-secundarias">4. ✅ Tareas Secundarias</a></h4>
<p><strong>Límite:</strong> Máximo 3 tareas de soporte por día (además del Big Rock)</p>
<table>
<thead>
<tr>
<th>#</th>
<th>Tarea</th>
<th>Origen</th>
<th>Tiempo est.</th>
<th>Herramienta</th>
<th>Dependencias</th>
</tr>
</thead>
<tbody>
<tr>
<td>1</td>
<td>Actualizar documento técnico sección 4.2</td>
<td>To Do</td>
<td>30 min</td>
<td>OneDrive</td>
<td>Ninguna</td>
</tr>
<tr>
<td>2</td>
<td>Revisar PR #1234 del repositorio</td>
<td>Planner</td>
<td>20 min</td>
<td>GitHub + Teams</td>
<td>Acceso repo</td>
</tr>
<tr>
<td>3</td>
<td>Preparar agenda reunión jueves</td>
<td>Outlook</td>
<td>15 min</td>
<td>Outlook</td>
<td>Confirmar asistentes</td>
</tr>
</tbody>
</table>
<p><strong>Validación:</strong> ✅ Ninguna de estas tareas aparece como completada en <code>tasks.xlsx</code></p>
<hr>
<h4 id="5-colaboracion-y-documentos-clave"><a class="toclink" href="2025/10/26/sistema-de-planificaci%C3%B3n-diaria-contextual-con-microsoft-365-prompt/#5-colaboracion-y-documentos-clave">5. 💡 Colaboración y Documentos Clave</a></h4>
<h5 id="teams-canales-prioritarios"><a class="toclink" href="2025/10/26/sistema-de-planificaci%C3%B3n-diaria-contextual-con-microsoft-365-prompt/#teams-canales-prioritarios">Teams - Canales prioritarios</a></h5>
<table>
<thead>
<tr>
<th>Canal</th>
<th>Proyecto</th>
<th>Frecuencia revisión</th>
<th>Filtro</th>
</tr>
</thead>
<tbody>
<tr>
<td>#proyecto-alpha</td>
<td>Alpha v2.0</td>
<td>3x/día</td>
<td>Mi Actividad + @menciones</td>
</tr>
<tr>
<td>#soporte-ti</td>
<td>Incidencias</td>
<td>2x/día</td>
<td>Solo @menciones</td>
</tr>
</tbody>
</table>
<h5 id="documentos-activos-sharepointonedrive"><a class="toclink" href="2025/10/26/sistema-de-planificaci%C3%B3n-diaria-contextual-con-microsoft-365-prompt/#documentos-activos-sharepointonedrive">Documentos activos (SharePoint/OneDrive)</a></h5>
<table>
<thead>
<tr>
<th>Documento</th>
<th>Ubicación</th>
<th>Estado</th>
<th>Acción pendiente</th>
</tr>
</thead>
<tbody>
<tr>
<td>Informe_Q3_v3.docx</td>
<td>/Documentos/Informes/</td>
<td>Borrador</td>
<td>Revisar sección financiera</td>
</tr>
<tr>
<td>Roadmap_2025.xlsx</td>
<td>/Proyectos/Planning/</td>
<td>Revisión</td>
<td>Actualizar fechas Q4</td>
</tr>
</tbody>
</table>
<p><strong>Consejo:</strong> Anclar documentos frecuentes en OneDrive para acceso rápido.</p>
<hr>
<h4 id="6-listado-de-tareas-faltantes-para-microsoft-to-do"><a class="toclink" href="2025/10/26/sistema-de-planificaci%C3%B3n-diaria-contextual-con-microsoft-365-prompt/#6-listado-de-tareas-faltantes-para-microsoft-to-do">6. 📝 Listado de Tareas Faltantes para Microsoft To Do</a></h4>
<p><strong>Formato de salida:</strong> Una tarea por línea, prioridad incluida en el texto. El tamaño máximo de cada tarea es de 255 caracteres. Se permite decir cuando tendría que estar la tarea (ejemplo: "in 2 days", "next Monday", "10/25/2025").</p>
<p><strong>Validación previa:</strong> Las siguientes tareas NO aparecen en <code>tasks.xlsx</code> como completadas:</p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-4-1"><a href="#__codelineno-4-1" id="__codelineno-4-1" name="__codelineno-4-1"></a>🔴 [ALTA] Preparar slides para presentación stakeholders today
</span><span id="__span-4-2"><a href="#__codelineno-4-2" id="__codelineno-4-2" name="__codelineno-4-2"></a>🔴 [ALTA] Completar sección 4 del informe Q3 3pm
</span><span id="__span-4-3"><a href="#__codelineno-4-3" id="__codelineno-4-3" name="__codelineno-4-3"></a>🟡 [MEDIA] Revisar y comentar propuesta de arquitectura v2 tomorrow
</span><span id="__span-4-4"><a href="#__codelineno-4-4" id="__codelineno-4-4" name="__codelineno-4-4"></a>🟡 [MEDIA] Actualizar backlog con tareas emergentes de standup next Monday
</span><span id="__span-4-5"><a href="#__codelineno-4-5" id="__codelineno-4-5" name="__codelineno-4-5"></a>🟢 [BAJA] Organizar carpeta de emails antiguos (&gt;3 meses) 10/25/2025
</span><span id="__span-4-6"><a href="#__codelineno-4-6" id="__codelineno-4-6" name="__codelineno-4-6"></a>🟢 [BAJA] Limpiar lista "Backlog personal" en Planner 10/31
</span><span id="__span-4-7"><a href="#__codelineno-4-7" id="__codelineno-4-7" name="__codelineno-4-7"></a>🟢 [BAJA] Enviar resumen semanal al equipo in 2 days
</span><span id="__span-4-8"><a href="#__codelineno-4-8" id="__codelineno-4-8" name="__codelineno-4-8"></a>🟢 [BAJA] Completar revisión de documentación técnica en SharePoint in 1 week
</span></code></pre></div>
<p><strong>Instrucción de importación:</strong> Copiar cada línea y pegarla como nueva tarea en Microsoft To Do. El emoji indica prioridad visual.</p>
<hr>
<h4 id="7-cierre-de-dia-y-preparacion"><a class="toclink" href="2025/10/26/sistema-de-planificaci%C3%B3n-diaria-contextual-con-microsoft-365-prompt/#7-cierre-de-dia-y-preparacion">7. ⏭️ Cierre de Día y Preparación</a></h4>
<p><strong>Tiempo:</strong> 10-15 minutos antes de finalizar la jornada</p>
<table>
<thead>
<tr>
<th>Item</th>
<th>Estado</th>
<th>Acción</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Big Rock completado</strong></td>
<td>✅ Sí / ❌ No</td>
<td>Si no → Reprogramar para mañana (primer bloque)</td>
</tr>
<tr>
<td><strong>Comunicaciones 🔴 Alta resueltas</strong></td>
<td>✅ Sí / ❌ No</td>
<td>Si no → Revisar bloqueo/dependencia</td>
</tr>
<tr>
<td><strong>Tareas incompletas</strong></td>
<td>[Cantidad]</td>
<td>Mover a mañana en To Do con etiqueta 📅</td>
</tr>
<tr>
<td><strong>Sincronización tasks.xlsx</strong></td>
<td>✅ Verificada</td>
<td>Marcar completadas en Excel y To Do</td>
</tr>
<tr>
<td><strong>Big Rock de mañana</strong></td>
<td>[Definir]</td>
<td>Añadir a To Do con ⭐ Prioridad</td>
</tr>
</tbody>
</table>
<h5 id="checklist-de-cierre"><a class="toclink" href="2025/10/26/sistema-de-planificaci%C3%B3n-diaria-contextual-con-microsoft-365-prompt/#checklist-de-cierre">Checklist de cierre</a></h5>
<ul class="task-list">
<li class="task-list-item"><label class="task-list-control"><input disabled="" type="checkbox"><span class="task-list-indicator"></span></label> Revisar <code>tasks.xlsx</code> y marcar tareas completadas hoy</li>
<li class="task-list-item"><label class="task-list-control"><input disabled="" type="checkbox"><span class="task-list-indicator"></span></label> Confirmar que no hay correos 🔴 Alta sin responder</li>
<li class="task-list-item"><label class="task-list-control"><input disabled="" type="checkbox"><span class="task-list-indicator"></span></label> Mover tareas incompletas a "Mañana" en To Do</li>
<li class="task-list-item"><label class="task-list-control"><input disabled="" type="checkbox"><span class="task-list-indicator"></span></label> Definir Big Rock del día siguiente</li>
<li class="task-list-item"><label class="task-list-control"><input disabled="" type="checkbox"><span class="task-list-indicator"></span></label> Bloquear tiempo de Deep Work en Outlook para mañana</li>
<li class="task-list-item"><label class="task-list-control"><input disabled="" type="checkbox"><span class="task-list-indicator"></span></label> Cerrar todas las pestañas/apps no esenciales</li>
</ul>
<p><strong>Pregunta reflexiva:</strong> ¿El día de mañana está preparado para ser ejecutado sin fricción?</p>
<hr>
<h3 id="instrucciones-criticas-para-el-asistente"><a class="toclink" href="2025/10/26/sistema-de-planificaci%C3%B3n-diaria-contextual-con-microsoft-365-prompt/#instrucciones-criticas-para-el-asistente">🤖 INSTRUCCIONES CRÍTICAS PARA EL ASISTENTE</a></h3>
<h4 id="reglas-de-validacion-obligatorias"><a class="toclink" href="2025/10/26/sistema-de-planificaci%C3%B3n-diaria-contextual-con-microsoft-365-prompt/#reglas-de-validacion-obligatorias">Reglas de validación (OBLIGATORIAS)</a></h4>
<div class="language-text highlight"><pre><span></span><code><span id="__span-5-1"><a href="#__codelineno-5-1" id="__codelineno-5-1" name="__codelineno-5-1"></a>ANTES de sugerir cualquier tarea:
</span><span id="__span-5-2"><a href="#__codelineno-5-2" id="__codelineno-5-2" name="__codelineno-5-2"></a>  1. CONSULTAR tasks.xlsx
</span><span id="__span-5-3"><a href="#__codelineno-5-3" id="__codelineno-5-3" name="__codelineno-5-3"></a>  2. SI tarea.completada == TRUE → NO sugerir
</span><span id="__span-5-4"><a href="#__codelineno-5-4" id="__codelineno-5-4" name="__codelineno-5-4"></a>  3. SI tarea.no_existe_en_excel → Indicar explícitamente "Nueva tarea detectada"
</span><span id="__span-5-5"><a href="#__codelineno-5-5" id="__codelineno-5-5" name="__codelineno-5-5"></a>  4. SI hay duda → PREGUNTAR al usuario antes de asumir
</span></code></pre></div>
<h4 id="restricciones-de-contenido"><a class="toclink" href="2025/10/26/sistema-de-planificaci%C3%B3n-diaria-contextual-con-microsoft-365-prompt/#restricciones-de-contenido">Restricciones de contenido</a></h4>
<ul>
<li>❌ NO recomendar tareas/correos/reuniones ya procesadas</li>
<li>❌ NO inventar información sobre estado de tareas</li>
<li>❌ NO asumir prioridades sin contexto del usuario</li>
<li>✅ SÍ marcar explícitamente tareas completadas</li>
<li>✅ SÍ indicar cuando una tarea no aparece en <code>tasks.xlsx</code></li>
<li>✅ SÍ preguntar si hay ambigüedad</li>
</ul>
<h4 id="formato-de-respuesta"><a class="toclink" href="2025/10/26/sistema-de-planificaci%C3%B3n-diaria-contextual-con-microsoft-365-prompt/#formato-de-respuesta">Formato de respuesta</a></h4>
<ul>
<li>Usar <strong>tablas Markdown</strong> para estructuras complejas</li>
<li>Usar <strong>listas</strong> para secuencias de acciones</li>
<li>Usar <strong>emojis</strong> para prioridades visuales (🔴🟡🟢)</li>
<li>Usar <strong>negritas</strong> para elementos críticos</li>
<li>Mantener lenguaje <strong>claro, conciso y accionable</strong></li>
</ul>
<h4 id="contexto-temporal"><a class="toclink" href="2025/10/26/sistema-de-planificaci%C3%B3n-diaria-contextual-con-microsoft-365-prompt/#contexto-temporal">Contexto temporal</a></h4>
<ul>
<li><strong>Lunes:</strong> Ventana de 72 horas (incluir fin de semana)</li>
<li><strong>Martes-Viernes:</strong> Ventana de 24 horas (día anterior)</li>
<li><strong>Fecha actual:</strong> Siempre especificar en formato "Día, DD/MM/YYYY"</li>
</ul>
<hr>
<h3 id="consejos-avanzados-m365"><a class="toclink" href="2025/10/26/sistema-de-planificaci%C3%B3n-diaria-contextual-con-microsoft-365-prompt/#consejos-avanzados-m365">💡 Consejos Avanzados M365</a></h3>
<h4 id="integraciones-productivas"><a class="toclink" href="2025/10/26/sistema-de-planificaci%C3%B3n-diaria-contextual-con-microsoft-365-prompt/#integraciones-productivas">Integraciones productivas</a></h4>
<ul>
<li><strong>Email → Tarea:</strong> Arrastrar email a To Do desde Outlook</li>
<li><strong>Focus Assist:</strong> Activar durante bloques Deep Work</li>
<li><strong>Filtros Teams:</strong> Usar "Mi Actividad" para reducir ruido</li>
<li><strong>Power Automate:</strong> Sincronizar automáticamente <code>tasks.xlsx</code> con To Do</li>
<li><strong>Viva Insights:</strong> Revisar métricas de colaboración semanalmente</li>
</ul>
<h4 id="atajos-de-teclado-esenciales"><a class="toclink" href="2025/10/26/sistema-de-planificaci%C3%B3n-diaria-contextual-con-microsoft-365-prompt/#atajos-de-teclado-esenciales">Atajos de teclado esenciales</a></h4>
<ul>
<li><code>Ctrl+Shift+A</code>: Nueva tarea en To Do</li>
<li><code>Ctrl+Shift+V</code>: Abrir videollamada Teams</li>
<li><code>Alt+H</code>: Ver bandeja de entrada Outlook</li>
<li><code>Ctrl+2</code>: Cambiar a vista Calendario Outlook</li>
</ul>
<hr>
<h3 id="ejemplo-completo-de-salida-esperada"><a class="toclink" href="2025/10/26/sistema-de-planificaci%C3%B3n-diaria-contextual-con-microsoft-365-prompt/#ejemplo-completo-de-salida-esperada">📚 Ejemplo Completo de Salida Esperada</a></h3>
<p><strong>Petición del usuario:</strong> "Planifica mi día de hoy, lunes 20/10/2025"</p>
<p><strong>Respuesta del asistente:</strong></p>
<h4 id="1-foco-del-dia_1"><a class="toclink" href="2025/10/26/sistema-de-planificaci%C3%B3n-diaria-contextual-con-microsoft-365-prompt/#1-foco-del-dia_1">1. 🎯 Foco del Día</a></h4>
<table>
<thead>
<tr>
<th>Campo</th>
<th>Valor</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Fecha</strong></td>
<td>Lunes, 20/10/2025</td>
</tr>
<tr>
<td><strong>Big Rock</strong></td>
<td>Finalizar análisis de requisitos proyecto Beta</td>
</tr>
<tr>
<td><strong>Tiempo dedicado</strong></td>
<td>3 horas</td>
</tr>
<tr>
<td><strong>Herramienta</strong></td>
<td>Microsoft To Do (⭐ Prioridad)</td>
</tr>
<tr>
<td><strong>Resultado esperado</strong></td>
<td>Documento de requisitos v1.0 en SharePoint</td>
</tr>
</tbody>
</table>
<h4 id="2-agenda-y-bloques-temporales_1"><a class="toclink" href="2025/10/26/sistema-de-planificaci%C3%B3n-diaria-contextual-con-microsoft-365-prompt/#2-agenda-y-bloques-temporales_1">2. 🗓️ Agenda y Bloques Temporales</a></h4>
<table>
<thead>
<tr>
<th>Hora</th>
<th>Tipo</th>
<th>Actividad</th>
<th>Objetivo</th>
<th>App</th>
</tr>
</thead>
<tbody>
<tr>
<td>09:00-09:30</td>
<td>Reunión</td>
<td>Kickoff semana con equipo</td>
<td>Alineación</td>
<td>Teams</td>
</tr>
<tr>
<td>09:30-12:30</td>
<td>Deep Work</td>
<td>Big Rock: Análisis requisitos</td>
<td>Documento final</td>
<td>Outlook (Bloqueado)</td>
</tr>
<tr>
<td>13:00-13:45</td>
<td>Comunicación</td>
<td>Responder 5 correos alta prioridad</td>
<td>Desbloqueadores</td>
<td>Outlook</td>
</tr>
<tr>
<td>14:00-15:00</td>
<td>Tareas</td>
<td>Revisar PRs pendientes</td>
<td>Soporte desarrollo</td>
<td>GitHub</td>
</tr>
</tbody>
</table>
<h4 id="3-priorizacion-de-comunicaciones-ultimas-72h"><a class="toclink" href="2025/10/26/sistema-de-planificaci%C3%B3n-diaria-contextual-con-microsoft-365-prompt/#3-priorizacion-de-comunicaciones-ultimas-72h">3. 📧 Priorización de Comunicaciones (últimas 72h)</a></h4>
<table>
<thead>
<tr>
<th>Pri</th>
<th>Origen</th>
<th>Asunto</th>
<th>Acción</th>
<th>Respuesta sugerida</th>
<th>Tiempo</th>
</tr>
</thead>
<tbody>
<tr>
<td>🔴</td>
<td>Outlook "Para mí"</td>
<td>Aprobación presupuesto Q4</td>
<td>Aprobar</td>
<td>"Aprobado con observaciones en línea 23. Proceder."</td>
<td>20 min</td>
</tr>
<tr>
<td>🔴</td>
<td>Teams @mención</td>
<td>Bloqueador en ambiente staging</td>
<td>Proveer acceso</td>
<td>"Acceso concedido. Validar en 15 min."</td>
<td>10 min</td>
</tr>
</tbody>
</table>
<h4 id="6-tareas-faltantes-validadas-vs-tasksxlsx"><a class="toclink" href="2025/10/26/sistema-de-planificaci%C3%B3n-diaria-contextual-con-microsoft-365-prompt/#6-tareas-faltantes-validadas-vs-tasksxlsx">6. 📝 Tareas Faltantes (validadas vs tasks.xlsx)</a></h4>
<div class="language-text highlight"><pre><span></span><code><span id="__span-6-1"><a href="#__codelineno-6-1" id="__codelineno-6-1" name="__codelineno-6-1"></a>🔴 [ALTA] Completar análisis de requisitos proyecto Beta (Big Rock)
</span><span id="__span-6-2"><a href="#__codelineno-6-2" id="__codelineno-6-2" name="__codelineno-6-2"></a>🟡 [MEDIA] Revisar PRs #445 y #446 antes de 15:00h
</span><span id="__span-6-3"><a href="#__codelineno-6-3" id="__codelineno-6-3" name="__codelineno-6-3"></a>🟢 [BAJA] Actualizar firma de correo con nuevo cargo
</span></code></pre></div>
<p><strong>✅ Validación:</strong> Ninguna de estas tareas aparece como completada en <code>tasks.xlsx</code></p>
<hr>
<p><strong>Fin del prompt contextual</strong></p>
</div>
</article>
<nav class="md-pagination">
<span class="md-pagination__current">1</span> <a class="md-pagination__link" href="page/2/">2</a> <a class="md-pagination__link" href="page/3/">3</a> <span class="md-pagination__dots">..</span> <a class="md-pagination__link" href="page/17/">17</a>
</nav>
</div>
</div>
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
</div>
<button class="md-top md-icon" data-md-component="top" hidden="" type="button">
<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"></path></svg>
  Back to top
</button>
</main>
<footer class="md-footer">
<div class="md-footer-meta md-typeset">
<div class="md-footer-meta__inner md-grid">
<div class="md-copyright">
<div class="md-copyright__highlight">
      Copyright © 2023-now Rafael Fernández
    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" rel="noopener" target="_blank">
      Material for MkDocs
    </a>
</div>
<div class="md-social">
<a class="md-social__link" href="https://www.linkedin.com/in/rafaelfernandezd/" rel="noopener" target="_blank" title="LinkedIn">
<svg viewBox="0 0 448 512" xmlns="http://www.w3.org/2000/svg"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M416 32H31.9C14.3 32 0 46.5 0 64.3v383.4C0 465.5 14.3 480 31.9 480H416c17.6 0 32-14.5 32-32.3V64.3c0-17.8-14.4-32.3-32-32.3M135.4 416H69V202.2h66.5V416zM102.2 96a38.5 38.5 0 1 1 0 77 38.5 38.5 0 1 1 0-77m282.1 320h-66.4V312c0-24.8-.5-56.7-34.5-56.7-34.6 0-39.9 27-39.9 54.9V416h-66.4V202.2h63.7v29.2h.9c8.9-16.8 30.6-34.5 62.9-34.5 67.2 0 79.7 44.3 79.7 101.9z"></path></svg>
</a>
<a class="md-social__link" href="https://github.com/rfernandezdo" rel="noopener" target="_blank" title="GitHub">
<svg viewBox="0 0 512 512" xmlns="http://www.w3.org/2000/svg"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M173.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M252.8 8C114.1 8 8 113.3 8 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C436.2 457.8 504 362.9 504 252 504 113.3 391.5 8 252.8 8M105.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"></path></svg>
</a>
<a class="md-social__link" href="https://rfernandezdo.github.io/feed_rss_created.xml" rel="noopener" target="_blank" title="RSS feed">
<svg viewBox="0 0 448 512" xmlns="http://www.w3.org/2000/svg"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M64 32C28.7 32 0 60.7 0 96v320c0 35.3 28.7 64 64 64h320c35.3 0 64-28.7 64-64V96c0-35.3-28.7-64-64-64zm32 104c0-13.3 10.7-24 24-24 137 0 248 111 248 248 0 13.3-10.7 24-24 24s-24-10.7-24-24c0-110.5-89.5-200-200-200-13.3 0-24-10.7-24-24m0 96c0-13.3 10.7-24 24-24 83.9 0 152 68.1 152 152 0 13.3-10.7 24-24 24s-24-10.7-24-24c0-57.4-46.6-104-104-104-13.3 0-24-10.7-24-24m0 120a32 32 0 1 1 64 0 32 32 0 1 1-64 0"></path></svg>
</a>
</div>
</div>
</div>
</footer>
</div>
<div class="md-dialog" data-md-component="dialog">
<div class="md-dialog__inner md-typeset"></div>
</div>
<div class="md-progress" data-md-component="progress" role="progressbar"></div>
<script id="__config" type="application/json">{"annotate": null, "base": "..", "features": ["navigation.instant", "navigation.instant.progress", "navigation.tabs", "navigation.tabs.sticky", "navigation.expand", "navigation.sections", "navigation.top", "navigation.tracking", "toc.integrate", "toc.nested", "toc.smoothscroll", "footer", "content.code.copy", "content.code.select", "content.code.annotate", "content.tooltips"], "search": "../assets/javascripts/workers/search.2c215733.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
<script src="../assets/javascripts/bundle.79ae519e.min.js"></script>
<script src="https://unpkg.com/tablesort@5.3.0/dist/tablesort.min.js"></script>
<script src="../javascripts/tablesort.js"></script>
<script type="module">import mermaid from "https://unpkg.com/mermaid@11.2.0/dist/mermaid.esm.min.mjs";
window.mermaidConfig = {default: {
    startOnLoad: false
}};</script>
<script id="init-glightbox">const lightbox = GLightbox({"touchNavigation": true, "loop": false, "zoomable": true, "draggable": true, "openEffect": "zoom", "closeEffect": "zoom", "slideEffect": "slide"});
document$.subscribe(()=>{ lightbox.reload(); });
</script></body></html>